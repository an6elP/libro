<!DOCTYPE html>
<!-- saved from url=(0052)https://gloris.rohde-schwarz.com/ebooks/5G#page_1002 -->
<html id="html" class=" js " lang="en" data-toggler=".book-nav--open" data-n="6r85gz-n"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<!-- 
	***********************************************************
	   Website, TYPO3 by Erste Heimat | www.ersteheimat.de
	***********************************************************

	This website is powered by TYPO3 - inspiring people to share!
	TYPO3 is a free open source Content Management Framework initially created by Kasper Skaarhoj and licensed under GNU/GPL.
	TYPO3 is copyright 1998-2020 of Kasper Skaarhoj. Extensions are copyright of their respective owners.
	Information and contribution at https://typo3.org/
-->



<title>5G - Book R&amp;S</title>
<meta name="generator" content="TYPO3 CMS">
<meta name="robots" content="noodp,index,follow">
<meta name="author" content="Rohde &amp;amp; Schwarz International">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta name="twitter:card" content="summary">
<meta name="language" content="en">
<meta name="copyright" content="Rohde &amp;amp; Schwarz International">
<meta name="apple-mobile-web-app-title" content="Rohde &amp; Schwarz International">

<link rel="stylesheet" type="text/css" href="./5G - Book R&amp;S_files/merged-7bce4cac278fe305e7d774669bcea5ba.css" media="screen">

<link rel="stylesheet" type="text/css" href="./5G - Book R&amp;S_files/merged-04c9a6c334957ce5787657f105c429d2.css" media="all">




<script src="./5G - Book R&amp;S_files/launch-EN375aabd402734478ad6f31d55ac0d565.min.js.download" type="text/javascript"></script><script src="./5G - Book R&amp;S_files/AppMeasurement.min.js.download" async=""></script>

<script type="text/javascript">
/*<![CDATA[*/
/*TS_inlineJS*/

document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';


/*]]>*/
</script>


<link rel="alternate" hreflang="x-default" href="https://gloris.rohde-schwarz.com/ebooks/5G"><link rel="alternate" hreflang="en" href="https://gloris.rohde-schwarz.com/ebooks/5G"><link rel="preconnect" href="https://ajax.googleapis.com/" crossorigin=""><link rel="preconnect" href="https://cdn.rohde-schwarz.com/" crossorigin=""><meta http-equiv="x-ua-compatible" content="ie=edge">
<!--[if IEMobile]><meta http-equiv="cleartype" content="on" /><![endif]-->
<link rel="apple-touch-icon" sizes="180x180" href="https://cdn.rohde-schwarz.com/pws/inred/image/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://cdn.rohde-schwarz.com/pws/inred/image/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://cdn.rohde-schwarz.com/pws/inred/image/favicons/favicon-16x16.png">
<link rel="manifest" href="https://cdn.rohde-schwarz.com/pws/inred/image/favicons/manifest.json">
<link rel="mask-icon" href="https://cdn.rohde-schwarz.com/pws/inred/image/favicons/safari-pinned-tab.svg" color="#009bea">
<link rel="shortcut icon" href="https://cdn.rohde-schwarz.com/pws/inred/image/favicons/favicon.ico">
<meta name="msapplication-TileColor" content="#009bea">
<meta name="msapplication-TileImage" content="https://cdn.rohde-schwarz.com/pws/inred/image/favicons/mstile-144x144.png">
<meta name="msapplication-config" content="https://cdn.rohde-schwarz.com/pws/inred/image/favicons/browserconfig.xml">
<meta name="theme-color" content="#009bea">
<script type="application/ld+json">
    /* <![CDATA[ */
    {
        "@context": "http://schema.org/",
        "@type": "Organization",
        "name": "Rohde & Schwarz",
        "legalName": "Rohde & Schwarz GmbH & Co. KG",
        "url": "https://www.rohde-schwarz.com/"
    }
    /* ]]> */
</script>
<meta property="og:url" content="https://gloris.rohde-schwarz.com/ebooks/5G"><style type="text/css">@media print{*,body,html{display:none !important;display:none;color:#fff}}</style>
<link rel="canonical" href="https://gloris.rohde-schwarz.com/ebooks/5G">


<meta class="foundation-mq"></head>
<body id="uid4" class="sys-lang-en scroll-up" data-toggler=".book-nav--open" data-n="5zsra0-n">

<a class="book-menu-toggle" data-toggle="html uid4" aria-expanded="true" aria-controls="html uid4"></a>
<div id="book-wrap" class="book-wrap">
    <div class="book-topbar">
    <div class="top-bar">
        <div class="top-bar-left">
              <span class="logo-wrap">
                <a href="https://www.rohde-schwarz.com/" target="_blank">
                  <img class="logo" alt="Rohde &amp; Schwarz" src="./5G - Book R&amp;S_files/rohde-schwarz.svg" width="200" height="40">
                  <img class="logo-small" alt="Rohde &amp; Schwarz" src="./5G - Book R&amp;S_files/rohde-schwarz-small.svg" width="35" height="35">
                </a>
                <img class="logo-bg" alt="Rohde &amp; Schwarz" src="./5G - Book R&amp;S_files/rohde-schwarz-bg.svg" width="871" height="108">
                <img class="logo-bg-small" alt="Rohde &amp; Schwarz" src="./5G - Book R&amp;S_files/rohde-schwarz-bg-small.svg" width="871" height="108">
              </span>
        </div>
        <div class="top-bar-right">
            <ul class="menu"><li class="menu__item"><a data-toggle="content-search" aria-controls="content-search" data-is-focus="false" data-yeti-box="content-search" aria-haspopup="true" aria-expanded="false" id="nnv0lf-dd-anchor">Search&nbsp;<span class="icon icon--search"></span></a></li><li class="menu__item menu__item--lvl-1 menu__item--last menu__item--pid-8"><a href="https://gloris.rohde-schwarz.com/" target="_self" class="link">Back to GLORIS</a></li></ul>
        </div>
    </div>
    <div id="content-search" class="book-topbar__search has-position-top has-alignment-left" data-dropdown="" aria-labelledby="nnv0lf-dd-anchor" aria-hidden="true" data-yeti-box="content-search" data-resize="content-search" data-n="62ta1f-n" data-events="resize">
        <div class="input input--full">
            
            
	

	<div class="tx-solr-search-form">
		<form method="get" id="tx-solr-search-form-pi-results" action="https://gloris.rohde-schwarz.com/ebooks/5G" data-suggest="/ebooks/5G?type=7384" data-suggest-header="Top Results" accept-charset="utf-8">
			<div class="input-group">
				

				<input type="text" class="tx-solr-q js-solr-q tx-solr-suggest tx-solr-suggest-focus form-control" name="tx_solr[q]" placeholder="Suche" value="" autocomplete="off">
				
			</div>
		</form>
	</div>




            <a class="bt-close" data-toggle="content-search" aria-controls="content-search" data-is-focus="false" data-yeti-box="content-search" aria-haspopup="true" aria-expanded="false"></a>
        </div>
    </div>
</div>
    <div id="book" class="book grid-container full">
    <div id="navigation" class="book__nav">
        <nav class="">
            <div class="book__nav__sticky">
                <div class="book__nav__inner">
                    <div class="book__nav__menu" data-magellan="">
                        <ul class="menu menu--lvl-1 vertical"><li class="menu__item menu__item--lvl-1 menu__item--first menu__item--pid-1001"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1001" class="menu__link menu__link--lvl-1" data-pid="1001">Start</a></li><li class="menu__item menu__item--lvl-1 menu__item--center menu__item--pid-1002"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1002" class="menu__link menu__link--lvl-1" data-pid="1002">Preface</a></li><li class="menu__item menu__item--lvl-1 menu__item--center menu__item--pid-1003"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1003" class="menu__link menu__link--lvl-1" data-pid="1003">Fundamentals</a><ul class="menu menu--lvl-2 vertical accordion-menu" data-accordion-menu="" data-submenu-toggle="true" role="tree" aria-multiselectable="true" data-t="sy5ymg-t"><li class="menu__item menu__item--lvl-2 menu__item--first menu__item--pid-1004 is-accordion-submenu-parent has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1004" class="menu__link menu__link--lvl-2" data-pid="1004">Overall system overview</a><button id="wtk8qq-acc-menu-link" class="submenu-toggle" aria-controls="exyjrj-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-3 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="wtk8qq-acc-menu-link" aria-hidden="false" id="exyjrj-acc-menu"><li class="menu__item menu__item--lvl-3 menu__item--first menu__item--pid-1005 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1005" class="menu__link menu__link--lvl-3" data-pid="1005">Use cases, requirements and services</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1006 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1006" class="menu__link menu__link--lvl-3" data-pid="1006">Overall 5G architecture</a><button id="1ebb1y-acc-menu-link" class="submenu-toggle" aria-controls="bc8dkd-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="1ebb1y-acc-menu-link" aria-hidden="false" id="bc8dkd-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--first menu__item--pid-1007 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1007" class="menu__link menu__link--lvl-4" data-pid="1007">Connectivity scenarios</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1008 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1008" class="menu__link menu__link--lvl-4" data-pid="1008">Timeline</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1009 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1009" class="menu__link menu__link--lvl-4" data-pid="1009">Architecture and interfaces</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1010 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1010" class="menu__link menu__link--lvl-4" data-pid="1010">Functional split between 5GC and NG-RAN</a></li><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1011 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1011" class="menu__link menu__link--lvl-4" data-pid="1011">Detailed functions of 5GC components</a></li></ul></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1012 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1012" class="menu__link menu__link--lvl-3" data-pid="1012">Access stratum protocol</a><button id="4ecriy-acc-menu-link" class="submenu-toggle" aria-controls="py3368-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="4ecriy-acc-menu-link" aria-hidden="false" id="py3368-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--first menu__item--pid-1013 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1013" class="menu__link menu__link--lvl-4" data-pid="1013">Logical, transport and physical channels</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1014 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1014" class="menu__link menu__link--lvl-4" data-pid="1014">Control plane protocol</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1015 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1015" class="menu__link menu__link--lvl-4" data-pid="1015">User plane protocol</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1016 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1016" class="menu__link menu__link--lvl-4" data-pid="1016">Radio bearers in dual connectivity</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1017 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1017" class="menu__link menu__link--lvl-4" data-pid="1017">UE capabilities transfer and computation</a></li><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1018 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1018" class="menu__link menu__link--lvl-4" data-pid="1018">Fundamental measurements provided by the end-user device</a></li></ul></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1019 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1019" class="menu__link menu__link--lvl-3" data-pid="1019">Non-access stratum protocol</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1020 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1020" class="menu__link menu__link--lvl-3" data-pid="1020">Quality of service</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1021 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1021" class="menu__link menu__link--lvl-3" data-pid="1021">Network slicing</a></li><li class="menu__item menu__item--lvl-3 menu__item--last menu__item--pid-1022 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1022" class="menu__link menu__link--lvl-3" data-pid="1022">Security architecture</a></li></ul></li><li class="menu__item menu__item--lvl-2 menu__item--center menu__item--pid-1023 is-accordion-submenu-parent has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1023" class="menu__link menu__link--lvl-2" data-pid="1023">Physical access fundamentals</a><button id="415hbi-acc-menu-link" class="submenu-toggle" aria-controls="6a27jp-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-3 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="415hbi-acc-menu-link" aria-hidden="false" id="6a27jp-acc-menu"><li class="menu__item menu__item--lvl-3 menu__item--first menu__item--pid-1024 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1024" class="menu__link menu__link--lvl-3" data-pid="1024">Flexible numerology</a><button id="v9f18o-acc-menu-link" class="submenu-toggle" aria-controls="284g47-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="v9f18o-acc-menu-link" aria-hidden="false" id="284g47-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1025 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1025" class="menu__link menu__link--lvl-4" data-pid="1025">Motivational aspects behind wider subcarrier spacing</a></li></ul></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1026 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1026" class="menu__link menu__link--lvl-3" data-pid="1026">Resource grid</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1027 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1027" class="menu__link menu__link--lvl-3" data-pid="1027">Frame structure</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1028 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1028" class="menu__link menu__link--lvl-3" data-pid="1028">Duplexing schemes</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1029 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1029" class="menu__link menu__link--lvl-3" data-pid="1029">General description of the physical layer</a><button id="0wtfjf-acc-menu-link" class="submenu-toggle" aria-controls="1vz9dd-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="0wtfjf-acc-menu-link" aria-hidden="false" id="1vz9dd-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--first menu__item--pid-1030 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1030" class="menu__link menu__link--lvl-4" data-pid="1030">Physical layer parameters and services</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1031 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1031" class="menu__link menu__link--lvl-4" data-pid="1031">5G NR baseband signal generation</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1032 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1032" class="menu__link menu__link--lvl-4" data-pid="1032">Physical channels in 5G NR</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1033 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1033" class="menu__link menu__link--lvl-4" data-pid="1033">Control resource set CORESET</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1034 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1034" class="menu__link menu__link--lvl-4" data-pid="1034">Antenna ports, precoding and quasi co-located ­antennas</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1035 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1035" class="menu__link menu__link--lvl-4" data-pid="1035">Physical signals in 5G NR</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1036 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1036" class="menu__link menu__link--lvl-4" data-pid="1036">Transmit power allocation</a></li><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1037 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1037" class="menu__link menu__link--lvl-4" data-pid="1037">Channel coding</a></li></ul></li><li class="menu__item menu__item--lvl-3 menu__item--last menu__item--pid-1038 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1038" class="menu__link menu__link--lvl-3" data-pid="1038">Brief digression on OFDMA multiple access schemes</a></li></ul></li><li class="menu__item menu__item--lvl-2 menu__item--center menu__item--pid-1039 is-accordion-submenu-parent has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1039" class="menu__link menu__link--lvl-2" data-pid="1039">Beamforming fundamentals</a><button id="lifvql-acc-menu-link" class="submenu-toggle" aria-controls="sme2tq-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-3 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="lifvql-acc-menu-link" aria-hidden="false" id="sme2tq-acc-menu"><li class="menu__item menu__item--lvl-3 menu__item--first menu__item--pid-1040 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1040" class="menu__link menu__link--lvl-3" data-pid="1040">Propagation at cm-wave and mm-wave frequencies</a><button id="vddc55-acc-menu-link" class="submenu-toggle" aria-controls="rhk1mr-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="vddc55-acc-menu-link" aria-hidden="false" id="rhk1mr-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1041 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1041" class="menu__link menu__link--lvl-4" data-pid="1041">Channel sounding</a></li></ul></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1042 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1042" class="menu__link menu__link--lvl-3" data-pid="1042">Support for beamforming in 5G NR</a><button id="866h1h-acc-menu-link" class="submenu-toggle" aria-controls="3w9blj-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="866h1h-acc-menu-link" aria-hidden="false" id="3w9blj-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1043 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1043" class="menu__link menu__link--lvl-4" data-pid="1043">SS/PBCH block details</a></li></ul></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1044 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1044" class="menu__link menu__link--lvl-3" data-pid="1044">Antenna technology for beamforming</a><button id="qrv213-acc-menu-link" class="submenu-toggle" aria-controls="nj4lh0-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="qrv213-acc-menu-link" aria-hidden="false" id="nj4lh0-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1045 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1045" class="menu__link menu__link--lvl-4" data-pid="1045">From analog to digital beamforming</a></li></ul></li><li class="menu__item menu__item--lvl-3 menu__item--last menu__item--pid-1046 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1046" class="menu__link menu__link--lvl-3" data-pid="1046">Massive MIMO</a></li></ul></li><li class="menu__item menu__item--lvl-2 menu__item--center menu__item--pid-1047 is-accordion-submenu-parent has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1047" class="menu__link menu__link--lvl-2" data-pid="1047">Bandwidth part fundamentals</a><button id="w8wdx1-acc-menu-link" class="submenu-toggle" aria-controls="82cyxa-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-3 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="w8wdx1-acc-menu-link" aria-hidden="false" id="82cyxa-acc-menu"><li class="menu__item menu__item--lvl-3 menu__item--first menu__item--pid-1048 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1048" class="menu__link menu__link--lvl-3" data-pid="1048">Bandwidth part procedures</a></li><li class="menu__item menu__item--lvl-3 menu__item--last menu__item--pid-1049 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1049" class="menu__link menu__link--lvl-3" data-pid="1049">Bandwidth part configuration</a></li></ul></li><li class="menu__item menu__item--lvl-2 menu__item--last menu__item--pid-1050 is-accordion-submenu-parent has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1050" class="menu__link menu__link--lvl-2" data-pid="1050">Testing fundamentals</a><button id="q11dz3-acc-menu-link" class="submenu-toggle" aria-controls="us7qzb-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-3 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="q11dz3-acc-menu-link" aria-hidden="false" id="us7qzb-acc-menu"><li class="menu__item menu__item--lvl-3 menu__item--first menu__item--pid-1051 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1051" class="menu__link menu__link--lvl-3" data-pid="1051">Physical layer testing</a><button id="6hbzxi-acc-menu-link" class="submenu-toggle" aria-controls="fwx7yn-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="6hbzxi-acc-menu-link" aria-hidden="false" id="fwx7yn-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--first menu__item--pid-1052 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1052" class="menu__link menu__link--lvl-4" data-pid="1052">Over-the-air testing</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1053 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1053" class="menu__link menu__link--lvl-4" data-pid="1053">Calibration</a></li><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1054 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1054" class="menu__link menu__link--lvl-4" data-pid="1054">Near field/far field</a></li></ul></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1055 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1055" class="menu__link menu__link--lvl-3" data-pid="1055">Signaling testing</a><button id="u73lyb-acc-menu-link" class="submenu-toggle" aria-controls="c42vf3-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="u73lyb-acc-menu-link" aria-hidden="false" id="c42vf3-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--first menu__item--pid-1056 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1056" class="menu__link menu__link--lvl-4" data-pid="1056">NR protocol testing</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1057 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1057" class="menu__link menu__link--lvl-4" data-pid="1057">Dual connectivity testing</a></li><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1058 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1058" class="menu__link menu__link--lvl-4" data-pid="1058">Mobility testing</a></li></ul></li><li class="menu__item menu__item--lvl-3 menu__item--last menu__item--pid-1059 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1059" class="menu__link menu__link--lvl-3" data-pid="1059">Field testing</a></li></ul></li></ul></li><li class="menu__item menu__item--lvl-1 menu__item--last menu__item--pid-1060"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1060" class="menu__link menu__link--lvl-1" data-pid="1060">Procedures</a><ul class="menu menu--lvl-2 vertical accordion-menu" data-accordion-menu="" data-submenu-toggle="true" role="tree" aria-multiselectable="true" data-t="gvb07y-t"><li class="menu__item menu__item--lvl-2 menu__item--first menu__item--pid-1061 is-accordion-submenu-parent has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1061" class="menu__link menu__link--lvl-2" data-pid="1061">Overall access procedure for NSA mode</a><button id="mxlk5y-acc-menu-link" class="submenu-toggle" aria-controls="pojtwc-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-3 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="mxlk5y-acc-menu-link" aria-hidden="false" id="pojtwc-acc-menu"><li class="menu__item menu__item--lvl-3 menu__item--first menu__item--pid-1062 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1062" class="menu__link menu__link--lvl-3" data-pid="1062">Gaining access to the LTE network</a><button id="u1k91a-acc-menu-link" class="submenu-toggle" aria-controls="o73a26-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="u1k91a-acc-menu-link" aria-hidden="false" id="o73a26-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--first menu__item--pid-1063 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1063" class="menu__link menu__link--lvl-4" data-pid="1063">LTE cell search, selection and system information acquisition</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1064 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1064" class="menu__link menu__link--lvl-4" data-pid="1064">LTE initial access procedure</a></li><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1065 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1065" class="menu__link menu__link--lvl-4" data-pid="1065">LTE attach procedure and UE capability transfer</a></li></ul></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1066 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1066" class="menu__link menu__link--lvl-3" data-pid="1066">5G NR signal quality measurements and reporting</a><button id="rnqkna-acc-menu-link" class="submenu-toggle" aria-controls="2ovnph-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="rnqkna-acc-menu-link" aria-hidden="false" id="2ovnph-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--first menu__item--pid-1067 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1067" class="menu__link menu__link--lvl-4" data-pid="1067">Other fundamental properties of synchronization signal blocks (SSBs)</a></li><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1068 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1068" class="menu__link menu__link--lvl-4" data-pid="1068">Provisioning of the measurement configuration to the end-user device</a></li></ul></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1069 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1069" class="menu__link menu__link--lvl-3" data-pid="1069">Connecting the 5G RAN and reconfiguration of the air interface</a></li><li class="menu__item menu__item--lvl-3 menu__item--last menu__item--pid-1070 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1070" class="menu__link menu__link--lvl-3" data-pid="1070">Random access procedure in 5G NR</a><button id="kdj3h8-acc-menu-link" class="submenu-toggle" aria-controls="nxln9d-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="kdj3h8-acc-menu-link" aria-hidden="false" id="nxln9d-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--first menu__item--pid-1071 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1071" class="menu__link menu__link--lvl-4" data-pid="1071">Transmission of the random access preamble</a></li><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1072 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1072" class="menu__link menu__link--lvl-4" data-pid="1072">Reception of the random access response</a></li></ul></li></ul></li><li class="menu__item menu__item--lvl-2 menu__item--center menu__item--pid-1073 is-accordion-submenu-parent has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1073" class="menu__link menu__link--lvl-2" data-pid="1073">Overall data transmission</a><button id="tw49s2-acc-menu-link" class="submenu-toggle" aria-controls="k2o2j7-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-3 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="tw49s2-acc-menu-link" aria-hidden="false" id="k2o2j7-acc-menu"><li class="menu__item menu__item--lvl-3 menu__item--first menu__item--pid-1074 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1074" class="menu__link menu__link--lvl-3" data-pid="1074">End to end data session establishment procedure</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1075 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1075" class="menu__link menu__link--lvl-3" data-pid="1075">End to end quality of service</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1076 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076" class="menu__link menu__link--lvl-3" data-pid="1076">DL resource assignment</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1077 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077" class="menu__link menu__link--lvl-3" data-pid="1077">DL data reception</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1078 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1078" class="menu__link menu__link--lvl-3" data-pid="1078">Hybrid automatic repeat request (HARQ) operation</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1079 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1079" class="menu__link menu__link--lvl-3" data-pid="1079">Uplink scheduling request and buffer status reporting</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1080 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1080" class="menu__link menu__link--lvl-3" data-pid="1080">UL grant reception or UL assignment</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1081 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1081" class="menu__link menu__link--lvl-3" data-pid="1081">UL data transmission</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1082 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1082" class="menu__link menu__link--lvl-3" data-pid="1082">Uplink control information (UCI)</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1083 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1083" class="menu__link menu__link--lvl-3" data-pid="1083">Data flow through 5G NR protocol layers</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1084 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1084" class="menu__link menu__link--lvl-3" data-pid="1084">Dynamic, semi-persistent and grant-free scheduling</a></li><li class="menu__item menu__item--lvl-3 menu__item--last menu__item--pid-1085 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1085" class="menu__link menu__link--lvl-3" data-pid="1085">Data security</a></li></ul></li><li class="menu__item menu__item--lvl-2 menu__item--center menu__item--pid-1086 is-accordion-submenu-parent has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1086" class="menu__link menu__link--lvl-2" data-pid="1086">Overall Mobility</a><button id="scmjsl-acc-menu-link" class="submenu-toggle" aria-controls="ihugn1-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-3 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="scmjsl-acc-menu-link" aria-hidden="false" id="ihugn1-acc-menu"><li class="menu__item menu__item--lvl-3 menu__item--first menu__item--pid-1087 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1087" class="menu__link menu__link--lvl-3" data-pid="1087">Beam mobility procedure</a><button id="025jen-acc-menu-link" class="submenu-toggle" aria-controls="clc4mj-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="025jen-acc-menu-link" aria-hidden="false" id="clc4mj-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--first menu__item--pid-1088 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1088" class="menu__link menu__link--lvl-4" data-pid="1088">Beam mobility on the downlink</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1089 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1089" class="menu__link menu__link--lvl-4" data-pid="1089">Beam mobility on the UL</a></li><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1090 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1090" class="menu__link menu__link--lvl-4" data-pid="1090">Beam failure detection and recovery</a></li></ul></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1091 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1091" class="menu__link menu__link--lvl-3" data-pid="1091">RRM mobility procedure</a><button id="0n53p7-acc-menu-link" class="submenu-toggle" aria-controls="rdsypb-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="0n53p7-acc-menu-link" aria-hidden="false" id="rdsypb-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--first menu__item--pid-1092 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1092" class="menu__link menu__link--lvl-4" data-pid="1092">Intra-RAT mobility</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1093 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1093" class="menu__link menu__link--lvl-4" data-pid="1093">Mobility parameters</a></li><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1094 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1094" class="menu__link menu__link--lvl-4" data-pid="1094">Inter-RAT mobility</a></li></ul></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1095 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1095" class="menu__link menu__link--lvl-3" data-pid="1095">Mobility measurement</a><button id="mk48di-acc-menu-link" class="submenu-toggle" aria-controls="l8r2nh-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="mk48di-acc-menu-link" aria-hidden="false" id="l8r2nh-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--first menu__item--pid-1096 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1096" class="menu__link menu__link--lvl-4" data-pid="1096">Measurement overview</a></li><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1097 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1097" class="menu__link menu__link--lvl-4" data-pid="1097">Measurement scenarios</a></li></ul></li><li class="menu__item menu__item--lvl-3 menu__item--last menu__item--pid-1098 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1098" class="menu__link menu__link--lvl-3" data-pid="1098">Mobility security</a></li></ul></li><li class="menu__item menu__item--lvl-2 menu__item--last menu__item--pid-1099 is-accordion-submenu-parent has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1099" class="menu__link menu__link--lvl-2" data-pid="1099">Overall access procedure for SA mode</a><button id="h8vet3-acc-menu-link" class="submenu-toggle" aria-controls="j6tbv3-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-3 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="h8vet3-acc-menu-link" aria-hidden="false" id="j6tbv3-acc-menu"><li class="menu__item menu__item--lvl-3 menu__item--first menu__item--pid-1100 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1100" class="menu__link menu__link--lvl-3" data-pid="1100">Identifying SSBs in standalone mode</a><button id="ohycg7-acc-menu-link" class="submenu-toggle" aria-controls="4d3evi-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="ohycg7-acc-menu-link" aria-hidden="false" id="4d3evi-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1101 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1101" class="menu__link menu__link--lvl-4" data-pid="1101">Cell-defining SSB</a></li></ul></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1102 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1102" class="menu__link menu__link--lvl-3" data-pid="1102">Access system information block type 1 (SIB1)</a><button id="x6m6vj-acc-menu-link" class="submenu-toggle" aria-controls="41ej4e-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="x6m6vj-acc-menu-link" aria-hidden="false" id="41ej4e-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--first menu__item--pid-1103 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1103" class="menu__link menu__link--lvl-4" data-pid="1103">Scheduling configuration for SIB1</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1104 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1104" class="menu__link menu__link--lvl-4" data-pid="1104">Scheduling information for SIB1</a></li><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1105 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1105" class="menu__link menu__link--lvl-4" data-pid="1105">Content of SIB1</a></li></ul></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1106 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1106" class="menu__link menu__link--lvl-3" data-pid="1106">Random access procedure in standalone mode</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1107 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1107" class="menu__link menu__link--lvl-3" data-pid="1107">Random access response in standalone mode</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1108 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1108" class="menu__link menu__link--lvl-3" data-pid="1108">Sending Setup request in the uplink</a><button id="xbohmm-acc-menu-link" class="submenu-toggle" aria-controls="pvq2l1-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="xbohmm-acc-menu-link" aria-hidden="false" id="pvq2l1-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--first menu__item--pid-1109 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1109" class="menu__link menu__link--lvl-4" data-pid="1109">RAPID and random access response for standalone mode</a></li><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1110 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1110" class="menu__link menu__link--lvl-4" data-pid="1110">Actual content of Msg3</a></li></ul></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1111 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1111" class="menu__link menu__link--lvl-3" data-pid="1111">Contention resolution</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1112 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1112" class="menu__link menu__link--lvl-3" data-pid="1112">RRC connection establishment</a></li><li class="menu__item menu__item--lvl-3 menu__item--center menu__item--pid-1113 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1113" class="menu__link menu__link--lvl-3" data-pid="1113">Security mode setup</a></li><li class="menu__item menu__item--lvl-3 menu__item--last menu__item--pid-1114 is-accordion-submenu-parent is-submenu-item is-accordion-submenu-item has-submenu-toggle" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1114" class="menu__link menu__link--lvl-3" data-pid="1114">PDU session establishment and network slicing ­selection</a><button id="gr16wd-acc-menu-link" class="submenu-toggle" aria-controls="ipgeo1-acc-menu" aria-expanded="true" title="Toggle menu"><span class="submenu-toggle-text">Toggle menu</span></button><ul class="menu menu--lvl-4 nested vertical submenu is-accordion-submenu is-active" style="" data-submenu="" role="group" aria-labelledby="gr16wd-acc-menu-link" aria-hidden="false" id="ipgeo1-acc-menu"><li class="menu__item menu__item--lvl-4 menu__item--first menu__item--pid-1115 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1115" class="menu__link menu__link--lvl-4" data-pid="1115">Slice selection procedure</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1116 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1116" class="menu__link menu__link--lvl-4" data-pid="1116">PDU session establishment</a></li><li class="menu__item menu__item--lvl-4 menu__item--center menu__item--pid-1117 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1117" class="menu__link menu__link--lvl-4" data-pid="1117">Session and service continuity</a></li><li class="menu__item menu__item--lvl-4 menu__item--last menu__item--pid-1118 is-submenu-item is-accordion-submenu-item" role="treeitem"><a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1118" class="menu__link menu__link--lvl-4" data-pid="1118">SSC mode selection</a></li></ul></li></ul></li></ul></li></ul>
                    </div>
                    <div class="book-footer hide-for-medium">
                        <div class="book-footer__inner row row--full collapse">
                            <div class="book-footer__inner_top column">
                                <ul class="menu"><li class="menu__item"><a href="https://www.rohde-schwarz.com/solutions/test-and-measurement/wireless-communication/overview/wireless-communications-overview_229844.html" target="_blank" class="link--icon icon icon--earth">5G</a></li><li class="menu__item"><a href="https://www.linkedin.com/showcase/rohde-schwarz-wireless/" target="_blank" class="link--icon icon icon--linkedin2">LinkedIn</a></li></ul>
                            </div>
                            <div class="book-footer__inner_bottom column">
                                <ul class="menu menu--small-full"><li class="menu__item menu__item--lvl-1 menu__item--first menu__item--pid-11"><a href="https://www.rohde-schwarz.com/general-information/terms-of-website-use_101516.html" target="_blank" class="link">Terms of website use</a></li><li class="menu__item menu__item--lvl-1 menu__item--center menu__item--pid-12"><a href="https://www.rohde-schwarz.com/general-information/statement-of-privacy_101515.html" target="_blank" class="link">Statement of Privacy</a></li><li class="menu__item menu__item--lvl-1 menu__item--last menu__item--pid-13"><a href="https://www.rohde-schwarz.com/general-information/imprint_101514.html" target="_blank" class="link">Imprint</a></li><li class="menu__item menu__item--lvl-1 menu-text"><span class="copyright">© 2020 ROHDE &amp; SCHWARZ</span></li></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </div>
    <div class="book__content">
        <div class="book__content__loader book__content__loader--up"><span class="loader"><span></span><span></span></span></div>
        <div id="book-sections" class="book__content__sections">
            <!--TYPO3SEARCH_begin-->
<a id="page_4_c1"></a>
	<div class="tx-eh-book">
		
		
		
			
<section id="page_1001" class="page-section eh-inview" data-pid="1001" data-prevpid="" data-nextpid="1002" data-chapter=" Start">
    
            
<a id="page_1001_c500"></a><div id="book-sections__title"><div id="book-sections__title__txt"><div id="book-sections__title__txt__inner"><h1>5G New Radio</h1><h2>Fundamentals, procedures, testing aspects</h2><div id="book-sections__title__txt__more"><a class="button eh-link eh-link--page" href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1002">Read now</a></div></div></div></div>

        
</section>

		
			
<section id="page_1002" class="page-section eh-inview" data-pid="1002" data-prevpid="1001" data-nextpid="1003" data-chapter=" Preface">
    
            
            <div class="frame-default frame-type-text frame-layout-0">
                <h1> Preface</h1>
                
<a id="page_1002_c501"></a><p>Rohde &amp; Schwarz would like to welcome you to our 5G compendium. As a leading test &amp; measurement equipment manufacturer, we have been directly involved in the field of cellular technologies for over 30 years. As seen in the figure, past generations of these technologies have developed from the very early analog systems into today’s 5G technology.</p>


<a id="page_1002_c502"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:42%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_0-001__Evolution_of_cellular_technologies_78cd9f9be1.png" width="800" height="334" alt="" style="display: block;"></div></div><figcaption class="image-caption">Evolution of cellular technologies.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1002_c503"></a><p>The introduction of 2G is what enabled mobile voice services and also as an afterthought the first messaging service, SMS. 3G began the journey towards mobile data services, which were successfully established with 4G (LTE) based only on a packet data network. For the first time in mobile network history, 4G became a globally deployed cellular technology. Is 5G just another generation in this long line of technologies? If so, what is this new generation all about?</p><p>The objective of this 5G compendium is to provide a comprehensive answer to this question. Since the authors are employed by a company with unrivaled technical expertise along with the most comprehensive test and measurement (T&amp;M) solutions available for the entire wireless ecosystem, we believe we can provide unique insights into the topic of 5G. Given that a sound grasp of the underlying technology is a prerequisite for building T&amp;M solutions, we believe this work should provide you with all the relevant details of the actual technology. More importantly, we will take into account the relevant implementation aspects since T&amp;M equipment is required during the realization of products. To the best of our knowledge, we will thus examine the question of “why” in this work. In other words, besides describing “how” the technology was specified, we will elaborate the underlying reasoning behind it.</p><p>Finally, as you might expect, we will also discuss the relevant test and measurement aspects. In 1883, <abbr class="eh-abbreviation" title="William Thomas, Irish mathematical physicist, 1824–1907" lang="en"><span class="eh-tooltip" title="William Thomas, Irish mathematical physicist, 1824–1907">William Thomas</span></abbr> said the following in one of his lectures on electrical unit measurements: “I often say that when you can measure what you are speaking about, and express it in numbers, you know something about it; but when you cannot measure it, when you cannot express it in numbers, your knowledge is of a meagre and unsatisfactory kind; it may be the beginning of knowledge, but you have scarcely, in your thoughts, advanced to the stage of science, whatever the matter may be.” This statement has been confirmed in the course of our everyday activities and we could not agree more. Furthermore, along the lines of the <abbr class="eh-abbreviation" title="Peter Drucker, Austrian-born American writer, management consultant and university professor, 1909–2005" lang="en"><span class="eh-tooltip" title="Peter Drucker, Austrian-born American writer, management consultant and university professor, 1909–2005">Peter Drucker</span></abbr> quotation that “what gets measured gets improved”, we truly believe in the value of testing and in particular of quantifying the true performance of any developed implementation.</p><p>Before you begin to read this work, you should note its structure. There are two basic chapters: “Fundamentals” and “Procedures”. Within “Fundamentals”, we describe what we believe are the core elements of the 5G system. This includes a description of the overall system architecture and how the physical access is realized. This chapter also discusses the main differences compared to 4G systems such as inherent support for beamforming and the concept of bandwidth parts. As is our preference, we conclude this chapter with a discussion of the relevant test and measurement aspects.</p><p>The chapter on “Overall procedures” takes you on a journey from an end-user device perspective. It explains everything from initially switching on the device through establishing a data connection and maintaining the connection when mobility is involved. Non-standalone (<abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr>) operation, i.e. when 5G is operated on top of an existing LTE network, is generally of greatest interest for commercial deployment. Therefore, we describe this scenario first and then discuss how the standalone (<abbr class="eh-abbreviation" title="Standalone" lang="en"><span class="eh-tooltip" title="Standalone">SA</span></abbr>) case differs in a separate section later in the same “Overall procedures” chapter.</p><p>We hope will you find this compendium useful in your everyday work realizing 5G products.</p>


<div id="c1478" class="frame frame-default frame-type-html frame-layout-0"><div class="callout primary"><p><b>Is the 5G NR online compendium available as a hardcover book?</b></p><p>Use the ISBN 978-3-939837-15-2 to order the 5G NR hardcover book in a bookstore or contact your local sales representative.</p></div></div>

            </div>
        
</section>

		
			
<section id="page_1003" class="page-section eh-inview" data-pid="1003" data-prevpid="1002" data-nextpid="1004" data-chapter="1 Fundamentals">
    
            
                <div class="page-section__image parallax-container" style="background-image:url(&#39;/ebooksindex.php?eID=tx_securedownloads&amp;p=4&amp;u=0&amp;g=0&amp;t=1581838663&amp;hash=335313432ad9b27452dc0c6ae6c8be6e29a29612&amp;file=/fileadmin/templates/base/img/background/rohde-schwarz-kapitel-1.jpg&#39;);"></div>
            
            <div class="frame-default frame-type-text frame-layout-0">
                <h1>1 Fundamentals</h1>
                


            </div>
        
</section>

		
			
<section id="page_1004" class="page-section eh-inview" data-pid="1004" data-prevpid="1003" data-nextpid="1005" data-chapter="1.1 Overall system overview">
    
            
            <div class="frame-default frame-type-text frame-layout-0">
                <h2>1.1 Overall system overview</h2>
                
<a id="page_1004_c504"></a><p>Past decades have seen tremendous development of mobile technologies. As the technologies have evolved, it has become customary to indicate them with a generation number, e.g. 2G, 3G, 4G and 5G (the latest generation).</p><p>Initially, the new generations referred broadly to significant changes in the underlying technologies and methods with the aim of providing more reliable and efficient communications, e.g. the physical access technologies have changed from <strong>TDMA</strong> to <abbr class="eh-abbreviation" title="Code division multiple access" lang="en"><span class="eh-tooltip" title="Code division multiple access">CDMA</span></abbr> to OFDMA. The new 3GPP radio access technology for 5G is designated as “New Radio”, and is based on OFDMA.</p><p>In previous mobile technology generations, voice communications have always been the focus even if other services have been made available. Progressively, new services were added, e.g. text messaging in 2G, video calls in 3G and always-on data connectivity in 4G. The upcoming generation, 5G, seeks to make further major changes to services with a wide range of requirements. The networks are capable of providing services ranging from high data rate mobile broadband to ultra-reliable low-latency communications.</p><p>As with every technology introduction, 5G also evolved out of the previous generation (LTE). One example involves the concept of WLAN offloading introduced in LTE, which was intended to integrate technologies coming from 3GPP and non-3GPP. This concept extends into the 5G core network with a design that is radio access technology (<abbr class="eh-abbreviation" title="Radio access technology" lang="en"><span class="eh-tooltip" title="Radio access technology">RAT</span></abbr>) agnostic so that the core network can work with 3GPP (cellular) and non-3GPP (non-cellular, fixed line etc.) technologies seamlessly.</p><p>Similar to LTE, the core network is packet-switched only; however, it has separate control and user plane entities. LTE has a concept of dedicated core networks in 3GPP Release 13. This concept has evolved into what is known as “network slicing”.</p><p>Some concepts have reverted to something similar to 3G, e.g. a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session is not established by default during registration and is a separate procedure to be performed. </p>

            </div>
        
</section>

		
			
<section id="page_1005" class="page-section eh-inview" data-pid="1005" data-prevpid="1004" data-nextpid="1006" data-chapter="1.1.1 Use cases, requirements and services">
    
            
            <div class="frame-default frame-type-text frame-layout-0">
                <h3>1.1.1 Use cases, requirements and services</h3>
                
<a id="page_1005_c505"></a><p>5G intends to focus on the services provided to the users and the technologies required to fulfill the service requirements. The services within the 5G scope can be categorized into three main types:</p><ul class="eh-list eh-list--line"><li><strong>High data rate services.</strong> These services shall be designed to cater to the ever-growing demand for faster and higher-volume data access. This concept is a direct successor to the high data rate services provided by LTE (enhanced mobile broadband, <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr>)</li><li><strong>Massive Internet of things.</strong> Massive IoT shall be an extension of the current IoT services which includes probably almost every machine communicating with other machines. This approach shall open doors to major automation in every area of life (massive machine-type communications = <abbr class="eh-abbreviation" title="Massive machine type communications" lang="en"><span class="eh-tooltip" title="Massive machine type communications">mMTC</span></abbr>)</li><li><strong>Ultra reliable low-latency services.</strong> These services would involve new use cases in which small data exchanges can be realized to provide reliable and critical communications such as health monitoring (ultra-reliable low-latency communications = <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr>)</li></ul><p>For the overall system, the International Telecommunication Union (ITU) already defined in 2015 the requirements in the form of <abbr class="eh-abbreviation" title="Key performance indicator" lang="en"><span class="eh-tooltip" title="Key performance indicator">KPI</span></abbr> in its IMT Vision for 2020 and Beyond for all upcoming services. These requirements can be categorized by considering the three main services that are the focus in the 5G system as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-001__5G_ITU_Requirements.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-1 &lt;\/span&gt;ITU Vision for IMT-2020 and Beyond.&quot;}]">Fig. 1-1</a>. 3GPP has a standardization committee that is seeking to define a technology that fulfills the ITU requirements for submission to the ITU for approval.</p>


<a id="page_1005_c506"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:81%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-001__5G_ITU_Requirements_85d975507e.png" width="800" height="648" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-1 </span>ITU Vision for IMT-2020 and Beyond.</figcaption></figure></div></div></div></div></div></div>

            </div>
        
</section>

		
			
<section id="page_1006" class="page-section eh-inview" data-pid="1006" data-prevpid="1005" data-nextpid="1007" data-chapter="1.1.2 Overall 5G architecture">
    
            
            <div class="frame-default frame-type-text frame-layout-0">
                <h3>1.1.2 Overall 5G architecture</h3>
                
<a id="page_1006_c507"></a><p>The 5G system (5GS, <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-002__5G_system.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-2 &lt;\/span&gt;5G system (5GS).&quot;}]">Fig. 1-2</a>) consists of the 5G core and the 5G access network.</p>


<a id="page_1006_c508"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:399px;"><div class="book-img-wrap__inner" style="padding-bottom:104%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/1-002__5G_system.png" width="399" height="413" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-2 </span>5G system (5GS).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1006_c509"></a><p>Unlike previous mobile communication technologies, the core network for 5G is designed to work seamlessly with more than one access technology. The 5G access network (<abbr class="eh-abbreviation" title="Access network" lang="en"><span class="eh-tooltip" title="Access network">AN</span></abbr>) could be built from a 3GPP defined <abbr class="eh-abbreviation" title="Access network" lang="en"><span class="eh-tooltip" title="Access network">AN</span></abbr> (3GPP-AN or <span class="eh-text--nowrap">NG-RAN</span>) and non-3GPP <abbr class="eh-abbreviation" title="Access network" lang="en"><span class="eh-tooltip" title="Access network">AN</span></abbr> such as WLAN or wired broadband access as depicted in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-003__5G_access_networkcomponents.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-3 &lt;\/span&gt;5G access network components.&quot;}]">Fig. 1-3</a>. Within the NG-RAN, a new cellular access technology known as “New Radio” (NR) is introduced together with E-UTRA, the access technology used for LTE.</p>


<a id="page_1006_c510"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:709px;"><div class="book-img-wrap__inner" style="padding-bottom:100%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/1-003__5G_access_networkcomponents.png" width="709" height="709" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-3 </span>5G access network components.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1006_c511"></a><p><abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> is defined to be access network agnostic and capable of providing 5G services through any of these access networks. Among cellular technologies (which are collectively designated as the next generation radio access network), the possibility of E-UTRA and NR connecting to <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> creates several connectivity scenarios (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1007" class="eh-link eh-link--page">1.1.2.1 Connectivity scenarios, page 13</a>) which have been studied and listed in <span class="eh-hint" title="3GPP TR 23.799: Study on Architecture for Next Generation System" lang="en"><span class="eh-tooltip" title="3GPP TR 23.799: Study on Architecture for Next Generation System">TR 23.799</span></span>.</p>

            </div>
        
</section>

		
			
<section id="page_1007" class="page-section eh-inview" data-pid="1007" data-prevpid="1006" data-nextpid="1008" data-chapter="1.1.2.1 Connectivity scenarios">
    
            
            <div class="frame-default frame-type-text frame-layout-0">
                <h4>1.1.2.1 Connectivity scenarios</h4>
                
<a id="page_1007_c512"></a><p>The possibility of the same core network connecting with various access networks results in several connectivity scenarios (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-004__Connectivity_options_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-4 &lt;\/span&gt;Connectivity options.&quot;}]">Fig. 1-4</a>). The UE can be connected over LTE or over NR to the new <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> (standalone connectivity options). Moreover, connectivity involving the cellular technologies has further evolved with an option for the connection to pass via more than one access technology at the same time (non-standalone connectivity options).</p>


<a id="page_1007_c513"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:69%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-004__Connectivity_options_v4_e9b2015605.png" width="800" height="551" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-4 </span>Connectivity options.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1007_c514"></a><p>The background was prepared with LTE’s introduction of the concept of dual connectivity (<abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr>), which allows the UE to connect simultaneously to two different base stations. The two base stations (<abbr class="eh-abbreviation" title="Either NR NodeB or EUTRA NodeB" lang="en"><span class="eh-tooltip" title="Either NR NodeB or EUTRA NodeB">xNB</span></abbr>) are involved in a connection whose signals do not need to be time-synchronized and therefore are not required to be physically collocated.</p><p>In 3GPP Release 15, dual connectivity can involve two NR base stations (NR-DC) or one NR and one LTE base station (Multi-Radio-DC or <abbr class="eh-abbreviation" title="Multi-radio dual connectivity" lang="en"><span class="eh-tooltip" title="Multi-radio dual connectivity">MR-DC</span></abbr>). Only LTE is considered for possible multi-radio connectivity with NR. Other technologies such as GSM and WCDMA cannot be combined in <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> with NR. Furthermore, no interworking between these technologies and NR is defined in 3GPP Release 15.</p><p><abbr class="eh-abbreviation" title="Multi-radio dual connectivity" lang="en"><span class="eh-tooltip" title="Multi-radio dual connectivity">MR-DC</span></abbr> connectivity shall allow an easy transition from the currently well-established LTE radio interface to the New Radio interface (NR). In fact, in dual connectivity one of the two base stations assumes the master node (<abbr class="eh-abbreviation" title="Master node" lang="en"><span class="eh-tooltip" title="Master node">MN</span></abbr>) function and the other the secondary node (<abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr>) function. The <abbr class="eh-abbreviation" title="Master node" lang="en"><span class="eh-tooltip" title="Master node">MN</span></abbr> is in charge of the signaling connection at the air interface (signaling radio bearer, SRB1, SRB2) and in the core network (red lines in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-004__Connectivity_options_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-4 &lt;\/span&gt;Connectivity options.&quot;}]">Fig. 1-4</a>), while the secondary node is responsible for the additional user data connection at the air interface (data radio bearer, <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>) and with the core network (black line).</p><p>In the first phase of deployment, the E-UTRA serves as the <abbr class="eh-abbreviation" title="Master node" lang="en"><span class="eh-tooltip" title="Master node">MN</span></abbr> and handles all of the control signaling to the core network. NR is added to enable a high data rate over the air interface which transports only the user plane data (Option 3, <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr>) connected to the LTE core network <abbr class="eh-abbreviation" title="Evolved packet core" lang="en"><span class="eh-tooltip" title="Evolved packet core">EPC</span></abbr>. In a further phase, either NR or LTE will assume the role of the <abbr class="eh-abbreviation" title="Master node" lang="en"><span class="eh-tooltip" title="Master node">MN</span></abbr> and handle both the control and user signaling as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-004__Connectivity_options_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-4 &lt;\/span&gt;Connectivity options.&quot;}]">Fig. 1-4</a> (Option 4 NE-DC or Option 7 NGEN <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr>). In the later options, E-UTRA serves as the <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> and completes the user plane connections with additional data bearers.</p><p>The different connectivity options over the air interface will also allow migration from the core network <abbr class="eh-abbreviation" title="Evolved packet core" lang="en"><span class="eh-tooltip" title="Evolved packet core">EPC</span></abbr> to <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> and the three connectivity options <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr>,&nbsp;NGEN-DC and NE-DC are often referred to and summarized as non-standalone&nbsp;access (<abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr>). Further details are given in <span class="eh-hint" title="3GPP TS 37.340: NR; Multi-connectivity; Overall description; Stage-2" lang="en"><span class="eh-tooltip" title="3GPP TS 37.340: NR; Multi-connectivity; Overall description; Stage-2">TS 37.340</span></span>.</p><p>Since each node in dual connectivity can contain several cells, we use the term cell group (CG). The purpose of the cell group is to schedule data over several carriers in order to increase the overall throughput. Within a CG, a primary cell serves as the special cell (<abbr class="eh-abbreviation" title="Special cell" lang="en"><span class="eh-tooltip" title="Special cell">SpCell</span></abbr>). It is in charge of controlling the overall cell group and optionally one or more secondary cells (<abbr class="eh-abbreviation" title="Secondary cell" lang="en"><span class="eh-tooltip" title="Secondary cell">SCell</span></abbr>) which increase the frequency spectrum of the primary cell, using carrier aggregation. In dual connectivity, the <abbr class="eh-abbreviation" title="Master node" lang="en"><span class="eh-tooltip" title="Master node">MN</span></abbr> represents the master cell group (<abbr class="eh-abbreviation" title="Master cell group" lang="en"><span class="eh-tooltip" title="Master cell group">MCG</span></abbr>) and the <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> represents the secondary cell group (<abbr class="eh-abbreviation" title="Secondary cell group" lang="en"><span class="eh-tooltip" title="Secondary cell group">SCG</span></abbr>). The following terms are used in dual connectivity scenarios: the primary cell (<abbr class="eh-abbreviation" title="Primary cell " lang="en"><span class="eh-tooltip" title="Primary cell ">PCell</span></abbr>) for the primary cell (<abbr class="eh-abbreviation" title="Special cell" lang="en"><span class="eh-tooltip" title="Special cell">SpCell</span></abbr>) of the <abbr class="eh-abbreviation" title="Master cell group" lang="en"><span class="eh-tooltip" title="Master cell group">MCG</span></abbr> and the primary secondary cell (PSCell) as the primary cell (<abbr class="eh-abbreviation" title="Special cell" lang="en"><span class="eh-tooltip" title="Special cell">SpCell</span></abbr>) of the <abbr class="eh-abbreviation" title="Secondary cell group" lang="en"><span class="eh-tooltip" title="Secondary cell group">SCG</span></abbr>.</p>

            </div>
        
</section>

		
			
<section id="page_1008" class="page-section eh-inview" data-pid="1008" data-prevpid="1007" data-nextpid="1009" data-chapter="1.1.2.2 Timeline">
    
            
            <div class="frame-default frame-type-text frame-layout-0">
                <h4>1.1.2.2 Timeline</h4>
                
<a id="page_1008_c515"></a><p>The ITU sets the requirements for the next generation telecommunication systems (ITU 2020, <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-005__TimeLine.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-5 &lt;\/span&gt;5G system 3GPP standardization timeline.&quot;}]">Fig. 1-5</a>). The ITU requirements are addressed by standardization committees such as 3GPP, which will propose the 5G system along with 3GPP Releases 15 and 16. Release 15 is also called phase 1, which addresses the <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr> and <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> use cases. Phase 1 is being gradually developed and includes different milestones for the various dual connectivity options (early drop for non-standalone <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> option in December 2017, main release for standalone NR option in June 2018 and late drop for further dual connectivity options in March 2019).</p><p>In contrast, 3GPP Release 16 targets further improvements to the <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> use case related in particular to industrial applications. Moreover, several features already available in LTE such as <abbr class="eh-abbreviation" title="Vehicle to x communication" lang="en"><span class="eh-tooltip" title="Vehicle to x communication">V2X</span></abbr> and unlicensed access are first included in 3GPP Release 16 in December 2019, which will then be targeted for inclusion in the ITU 2020 submission.</p>


<a id="page_1008_c516"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:64%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-005__TimeLine_d33cb337f1.png" width="800" height="507" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-5 </span>5G system 3GPP standardization timeline.</figcaption></figure></div></div></div></div></div></div>

            </div>
        
</section>

		
			
<section id="page_1009" class="page-section eh-inview" data-pid="1009" data-prevpid="1008" data-nextpid="1010" data-chapter="1.1.2.3 Architecture and interfaces">
    
            
            <div class="frame-default frame-type-text frame-layout-0">
                <h4>1.1.2.3 Architecture and interfaces</h4>
                
<a id="page_1009_c517"></a><p>As described above, the 5G system consists of a 5G core network (<abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr>) and a 5G access network (NG-RAN). In more detailed terms, <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> consists of the functional components <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> for authentication and mobility functions, <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr> for user plane functions and <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr> for session management functions.</p><p>An NG-RAN node can either be a gNB that provides NR user plane and control plane protocol terminations to the UE or a <abbr class="eh-abbreviation" title="Next generation evolved NodeB" lang="en"><span class="eh-tooltip" title="Next generation evolved NodeB">ng-eNB</span></abbr> that provides E-UTRAN user plane protocol and control plane terminations to the UE. Note that the terms NodeB, eNB, gNB and <abbr class="eh-abbreviation" title="Next generation evolved NodeB" lang="en"><span class="eh-tooltip" title="Next generation evolved NodeB">ng-eNB</span></abbr> represent a protocol anchor so that the protocol layer perspective is used when describing the related functions, while terms such as base station refer to the hardware and RF resources linked to radio connectivity. 3GPP has introduced the term <abbr class="eh-abbreviation" title="Next generation evolved NodeB" lang="en"><span class="eh-tooltip" title="Next generation evolved NodeB">ng-eNB</span></abbr> for the case in which a EUTRA eNB is connected to the <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> instead of the <abbr class="eh-abbreviation" title="Evolved packet core" lang="en"><span class="eh-tooltip" title="Evolved packet core">EPC</span></abbr>.</p><p>The gNB and ng-eNBs are connected with each other by means of the <abbr class="eh-abbreviation" title="The interface between the gNBs" lang="en"><span class="eh-tooltip" title="The interface between the gNBs">Xn</span></abbr> interface, which is a “logical” interface that uses a specific protocol structure. It is up to the operator/manufacturer to decide how the mapping of the logical <abbr class="eh-abbreviation" title="The interface between the gNBs" lang="en"><span class="eh-tooltip" title="The interface between the gNBs">Xn</span></abbr> interface to a physical interface such as a fiber-optic cable is implemented. More specifically, the <abbr class="eh-abbreviation" title="The interface between the gNBs" lang="en"><span class="eh-tooltip" title="The interface between the gNBs">Xn</span></abbr> interface can be split into an <abbr class="eh-abbreviation" title="Xn-User plane" lang="en"><span class="eh-tooltip" title="Xn-User plane">Xn-U</span></abbr> interface for the user plane data exchanged between gNB (or <abbr class="eh-abbreviation" title="Next generation evolved NodeB" lang="en"><span class="eh-tooltip" title="Next generation evolved NodeB">ng-eNB</span></abbr>) in the case of, say, handover or dual connectivity scenarios and an <abbr class="eh-abbreviation" title="Xn-Control plane" lang="en"><span class="eh-tooltip" title="Xn-Control plane">Xn-C</span></abbr> interface for control information exchange between gNBs. The protocol stack for the user plane <abbr class="eh-abbreviation" title="Xn-User plane" lang="en"><span class="eh-tooltip" title="Xn-User plane">Xn-U</span></abbr> consists of the protocol layers <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>, GTP-U, <abbr class="eh-abbreviation" title="User datagram protocol" lang="en"><span class="eh-tooltip" title="User datagram protocol">UDP</span></abbr>, <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> and data link, plus the physical layer, which is up to the manufacturer. The protocol stack for the control plane <abbr class="eh-abbreviation" title="Xn-Control plane" lang="en"><span class="eh-tooltip" title="Xn-Control plane">Xn-C</span></abbr> consists of the Xn-AP, <abbr class="eh-abbreviation" title="Stream control transmission protocol (defined in RFC 4960)" lang="en"><span class="eh-tooltip" title="Stream control transmission protocol (defined in RFC 4960)">SCTP</span></abbr>, <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> and data link, plus the physical layer which is up to the manufacturer.</p><p>In addition, gNB can be divided into a gNB-CU centralized unit and a <span class="eh-text--nowrap">gNB-DU</span> distributed unit. They are connected to one another via the F1 interface. The specification <span class="eh-hint" title="3GPP TS 38.401: NG-RAN; Architecture description" lang="en"><span class="eh-tooltip" title="3GPP TS 38.401: NG-RAN; Architecture description">TS 38.401</span></span> provides more details on the relevant architectural aspects.</p><p>The gNB and <abbr class="eh-abbreviation" title="Next generation evolved NodeB" lang="en"><span class="eh-tooltip" title="Next generation evolved NodeB">ng-eNB</span></abbr> are connected to the 5G core network via the NG interface (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-006__overall_architecture.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-6 &lt;\/span&gt;Overall architecture from 3GPP TS 38.300.&lt;br&gt;&quot;}]">Fig. 1-6</a>). More specifically, there is a connection to the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> via the NG-C interface to allow the exchange of control messages. Moreover, there is an interface NG-U to the <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr> that contains user plane data. The protocol structure on the NG-U interface is similar to the <abbr class="eh-abbreviation" title="Xn-User plane" lang="en"><span class="eh-tooltip" title="Xn-User plane">Xn-U</span></abbr> interface and contains the protocol layers, GTP-U, <abbr class="eh-abbreviation" title="User datagram protocol" lang="en"><span class="eh-tooltip" title="User datagram protocol">UDP</span></abbr>, <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> and finally the data link and the physical layer which are up to the manufacturer. The protocol structure on the NG-C interface is similar to the <abbr class="eh-abbreviation" title="Xn-Control plane" lang="en"><span class="eh-tooltip" title="Xn-Control plane">Xn-C</span></abbr> and consists of the protocol layers NG-AP, <abbr class="eh-abbreviation" title="Stream control transmission protocol (defined in RFC 4960)" lang="en"><span class="eh-tooltip" title="Stream control transmission protocol (defined in RFC 4960)">SCTP</span></abbr>, <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> and data link, plus the physical layer, which is up to the manufacturer.</p>


<a id="page_1009_c518"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:61%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-006__overall_architecture_d2f3dee644.png" width="800" height="485" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-6 </span>Overall architecture from 3GPP <span class="eh-hint" title="3GPP TS 38.300: NR; Overall description; Stage-2" lang="en"><span class="eh-tooltip" title="3GPP TS 38.300: NR; Overall description; Stage-2">TS 38.300</span></span>.<br></figcaption></figure></div></div></div></div></div></div>

            </div>
        
</section>

		
			
<section id="page_1010" class="page-section eh-inview" data-pid="1010" data-prevpid="1009" data-nextpid="1011" data-chapter="1.1.2.4 Functional split between 5GC and NG-RAN">
    
            
            <div class="frame-default frame-type-text frame-layout-0">
                <h4>1.1.2.4 Functional split between 5GC and NG-RAN</h4>
                
<a id="page_1010_c519"></a><p>As described above, the main division in the 5G system (5GS) is the split between the radio access network (NG-RAN) and the 5G core network (<abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr>). More specifically, NG-RAN consists of the components gNB for NR and <abbr class="eh-abbreviation" title="Next generation evolved NodeB" lang="en"><span class="eh-tooltip" title="Next generation evolved NodeB">ng-eNB</span></abbr> in case EUTRAN is used. <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> has the functional components <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> for authentication and mobility, <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr> for user plane functions and <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr> for <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session management. This section is structured to first present the functionality of 5GS components from a higher-level perspective. In <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1011" class="eh-link eh-link--page">1.1.2.5 Detailed functions of 5GC components, page 19</a>, more functional details are provided; see also <span class="eh-hint" title="3GPP TS 38.300: NR; Overall description; Stage-2" lang="en"><span class="eh-tooltip" title="3GPP TS 38.300: NR; Overall description; Stage-2">TS 38.300</span></span>.</p><p>From a high-level perspective, gNB and <abbr class="eh-abbreviation" title="Next generation evolved NodeB" lang="en"><span class="eh-tooltip" title="Next generation evolved NodeB">ng-eNB</span></abbr> host the following group of functions:</p><ul class="eh-list eh-list--line"><li><strong>Radio admission control and system information broadcast:</strong> This consists of procedures for access control (i.e. cell barring procedures) and radio access configuration (i.e. broadcasting system information, random access configuration)</li><li><strong>Radio connection control:</strong> This consists of connection setup and release as well as controlling the UE connection state of idle, connected and inactive</li><li><strong>Radio bearer control:</strong> This consists of the procedure for configuration (i.e. security), establishment and maintenance of the radio bearer (<abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr>) both on the uplink and downlink with different quality of service (<abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr>)</li><li><strong>Dynamic resource allocation and scheduling:</strong> This consists of scheduling RF resources according to their availability on the uplink and downlink for multiple UEs according to the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profiles of a radio bearer</li><li><strong>Measurement configuration:</strong> This consists of provisioning the configuration of the UE for radio resource management procedures such as cell selection and re-selection and for requesting measurement reports to improve scheduling</li><li><strong>Inter-cell radio resource management:</strong> This allows the UE to detect neighbor cells, query about the “best serving cell” and support the network during handover decisions by providing measurement feedback</li><li><strong>Connection mobility:</strong> This supports idle mode and connected mode intra cell handover situations</li></ul><p>The access and mobility management function (<abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>) is responsible for these high-level functions (<span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span>):</p><ul class="eh-list eh-list--line"><li><strong>Network signaling:</strong> Anchor point for <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> signaling for accessing the network and paging the UE</li><li><strong>Security:</strong> <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> security functions such as authentication, authorization, ciphering and control of <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> security</li><li><strong>Idle mobility handling:</strong> Relevant functions covering aspects such as legacy home and visitor location registers to know the whereabouts of subscribers for mobile terminated connections, identifiers for UEs and subscribers for paging and registration aspects, location and tracking areas for mobility scenarios and of course, functionality to support international or inter-PLMN roaming</li><li><strong>Connection mobility:</strong> Intra-system and inter-system mobility</li></ul><p>The user plane function (<abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr>) supports the following high-level functions related to user data transfer:</p><ul class="eh-list eh-list--line"><li><strong>PDU handling:</strong> Since 5G NR is a packet-switched network concept, all user data is encapsulated into data packets (PDUs). This function thus enables packet routing, forwarding and <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> handling for the user plane</li><li><strong>Mobility anchoring function:</strong> In contrast to the gNB mobility function which enables a seamless radio connection transfer (“handover”), the <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr> must ensure that during such handover procedure, no data loss occurs. The need for such a function becomes obvious if we consider procedures such as inter-PLMN handover and inter-system handover.</li></ul><p>The session management function (<abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr>) is responsible for the setup, release and maintenance of a session for user data transfer with the following high-level functions:</p><ul class="eh-list eh-list--line"><li><strong>PDU session control:</strong> In cooperation with the <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr>, the <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr> must establish, maintain and release a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session for user data transfer, which is defined as an “association between the UE and a data network that provides a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> connectivity service”</li><li><strong>UE IP address allocation:</strong> This ensures not only the possibility to route data packets within the 5G NR system but also supports data reception and forwarding to outside networks and provides interconnectivity to external packet data networks (PDNs). As discussed below, 5G NR supports IPv4 and IPv6 addressing</li></ul><p>These functions are summarized in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-007__Functional_split_between_NG-RAN_and_5GC.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-7 &lt;\/span&gt;Functional split between NG-RAN and 5GC.&quot;}]">Fig. 1-7</a> which depicts both the logical nodes and their main functionality (see <span class="eh-hint" title="3GPP TS 38.300: NR; Overall description; Stage-2" lang="en"><span class="eh-tooltip" title="3GPP TS 38.300: NR; Overall description; Stage-2">TS 38.300</span></span>). A more detailed presentation of the additional functions of the 5G NR components can be found in the following section.</p>


<a id="page_1010_c520"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:61%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-007__Functional_split_between_NG-RAN_and_5GC_62688c159d.png" width="800" height="487" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-7 </span>Functional split between NG-RAN and <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr>.</figcaption></figure></div></div></div></div></div></div>

            </div>
        
</section>

		
			
<section id="page_1011" class="page-section eh-inview" data-pid="1011" data-prevpid="1010" data-nextpid="1012" data-chapter="1.1.2.5 Detailed functions of 5GC components">
    
            
            <div class="frame-default frame-type-text frame-layout-0">
                <h4>1.1.2.5 Detailed functions of 5GC components</h4>
                
<a id="page_1011_c521"></a><p>In this section, we will examine additional detailed functions of the main <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> components. First, we should summarize the functions for gNB and <abbr class="eh-abbreviation" title="Next generation evolved NodeB" lang="en"><span class="eh-tooltip" title="Next generation evolved NodeB">ng-eNB</span></abbr> as explained in <span class="eh-hint" title="3GPP TS 38.300: NR; Overall description; Stage-2" lang="en"><span class="eh-tooltip" title="3GPP TS 38.300: NR; Overall description; Stage-2">TS 38.300</span></span>:</p><ul class="eh-list eh-list--line"><li><strong>Scheduling and transmission of system broadcast information and paging:</strong> Originated by the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> or operating and maintenance center O&amp;M (the latter is used e.g. for unexpected <abbr class="eh-abbreviation" title="System information block" lang="en"><span class="eh-tooltip" title="System information block">SIB</span></abbr> broadcasts such as <abbr class="eh-abbreviation" title="Public warning system" lang="en"><span class="eh-tooltip" title="Public warning system">PWS</span></abbr> or <abbr class="eh-abbreviation" title="Earthquake and tsunami warning system" lang="en"><span class="eh-tooltip" title="Earthquake and tsunami warning system">ETWS</span></abbr>)</li><li><strong>Security:</strong> <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> header compression, encryption and integrity protection of data based on the <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> security keys derived during the registration and authentication procedure</li><li><strong>Interface to 5GC:</strong> Selection of an <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> at UE attachment, routing of control plane information to the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>, support for network slicing. Additionally, routing of user plane data to <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr>(s) based on a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow, <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow management and mapping to data radio bearers</li><li><strong>Radio access network sharing</strong></li><li><strong>Dual connectivity and tight interworking between NR and EUTRA</strong></li></ul><p>The access and mobility management function (<abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>) has the following additional functionality in accordance with <span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span>:</p><ul class="eh-list eh-list--line"><li><abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> signaling termination</li><li><abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> signaling security</li><li><abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> security control</li><li>Idle mode UE reachability (including control and execution of paging retransmission)</li><li>Registration area management</li><li>Support for intra-system and inter-system mobility</li><li>Access authentication</li><li>Access authorization including checking roaming rights</li><li>Mobility management control (subscription and policies)</li><li>Support for network slicing</li><li><abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr> selection</li></ul><p>The <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> performs similar functions as the mobility management entity (<abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr>) in the LTE core network. The Mobility Management Entity (<abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr>) is the control unit that processes the signaling between the user equipment (UE) and the evolved packet core network (<abbr class="eh-abbreviation" title="Evolved packet core" lang="en"><span class="eh-tooltip" title="Evolved packet core">EPC</span></abbr>) regarding bearer and connection management; see <span class="eh-hint" title="3GPP TS 23.002: Network architecture" lang="en"><span class="eh-tooltip" title="3GPP TS 23.002: Network architecture">TS 23.002</span></span>, <span class="eh-hint" title="3GPP TS 24.301: Non-Access Stratum (NAS) protocol for Evolved Packet System (EPS)" lang="en"><span class="eh-tooltip" title="3GPP TS 24.301: Non-Access Stratum (NAS) protocol for Evolved Packet System (EPS)">TS 24.301</span></span>, <span class="eh-hint" title="3GPP TS 36.300: LTE; Evolved Universal Terrestrial Radio Access (EUTRA) and Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall description; Stage 2" lang="en"><span class="eh-tooltip" title="3GPP TS 36.300: LTE; Evolved Universal Terrestrial Radio Access (EUTRA) and Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall description; Stage 2">TS 36.300</span></span> and <span class="eh-hint" title="3GPP TS 36.401: Evolved Universal Terrestrial Radio Access Network (EUTRAN); Architecture description" lang="en"><span class="eh-tooltip" title="3GPP TS 36.401: Evolved Universal Terrestrial Radio Access Network (EUTRAN); Architecture description">TS 36.401</span></span>.</p><p>The user plane function (<abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr>) has the following additional functionalities in accordance with <span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span>:</p><ul class="eh-list eh-list--line"><li>External <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session point of interconnect to data network</li><li>Packet inspection and user plane part of policy rule enforcement, e.g. by ­lawful interception rules</li><li>Traffic usage reporting</li><li>Uplink classifier to support routing traffic flows to a data network</li><li>Branching point to support multi-homed <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session</li><li>Uplink traffic verification (<abbr class="eh-abbreviation" title="Service data flow" lang="en"><span class="eh-tooltip" title="Service data flow">SDF</span></abbr> to <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow mapping)</li><li>Downlink packet buffering and downlink data notification triggering</li></ul><p>The session management function (<abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr>) has the following additional functionalities in accordance with <span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span>:</p><ul class="eh-list eh-list--line"><li>Selection and control of user plane function</li><li>Configuration of traffic steering at <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr> to route traffic to proper destination</li><li>Control part of policy enforcement and <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr></li><li>Downlink data notification</li></ul>

            </div>
        
</section><section class="page-section eh-inview" data-pid="1012" data-prevpid="1011" data-nextpid="1013" data-chapter="1.1.3 Access stratum protocol" id="page_1012">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.1.3 Access stratum protocol</h3>
						
<a id="page_1012_c522"></a><p>5G uses a similar access stratum (i.e. interface protocol and functions) compared to LTE. There are two protocol stacks: the user plane (<abbr class="eh-abbreviation" title="User plane" lang="en"><span class="eh-tooltip" title="User plane">UP</span></abbr>) and the control plane (<abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr>). They contain several protocols but still adopt the well-known <abbr class="eh-abbreviation" title="Open system interconnection, Other system information" lang="en"><span class="eh-tooltip" title="Open system interconnection, Other system information">OSI</span></abbr> reference model. In this section, only the protocol layers specific to the air interface will be described in brief.</p><p>Let's introduce first the two terms used in the protocol description: <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> and <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>. The <abbr class="eh-abbreviation" title="Open system interconnection, Other system information" lang="en"><span class="eh-tooltip" title="Open system interconnection, Other system information">OSI</span></abbr> model describes seven communication layers and introduces the interaction between the lower and higher layers via service access points (<abbr class="eh-abbreviation" title="Service access point" lang="en"><span class="eh-tooltip" title="Service access point">SAP</span></abbr>). Each protocol layer or layer typically adds additional information such as the packet header, checksum and so on. The full content including the data and the protocol header information is known as the protocol data unit (<abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>). A lower layer that receives a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> will treat it as “data” to be transferred, i.e. it is a transport service offered to a higher layer. Thus, the protocol data unit received by a lower layer will be referred to as a service data unit (<abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr>) since it is still lacking a protocol header for the corresponding layer <span class="eh-reference" title="Nachrichtenuebertragung, Prof. Dr. K.-D. Kammeyer, University of Bremen, ISBN 978-3-8351-0179-1, Teubner Verlag, March 2008" lang="en"><span class="eh-tooltip" title="Nachrichtenuebertragung, Prof. Dr. K.-D. Kammeyer, University of Bremen, ISBN 978-3-8351-0179-1, Teubner Verlag, March 2008">[Ref. 2]</span></span>, <span class="eh-reference" title="Digital Communications, B. Sklar, 2nd Edition, Prentice-Hall, Upper Saddle River, NJ, 2001" lang="en"><span class="eh-tooltip" title="Digital Communications, B. Sklar, 2nd Edition, Prentice-Hall, Upper Saddle River, NJ, 2001">[Ref. 4]</span></span>. Communication between two protocol layers on the same layer is known as peer-to-peer communication (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-008__OSI-Modell-extract_PDU-SDU.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-8 &lt;\/span&gt;Layer concept in the OSI model.&quot;}]">Fig. 1-8</a>).</p>


<a id="page_1012_c523"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:32%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-008__OSI-Modell-extract_PDU-SDU_5462c4d3a9.png" width="800" height="251" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-8 </span>Layer concept in the <abbr class="eh-abbreviation" title="Open system interconnection, Other system information" lang="en"><span class="eh-tooltip" title="Open system interconnection, Other system information">OSI</span></abbr> model.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1012_c524"></a><p>Between the different protocol layers, channels are used to exchange data to support various <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> classes of services. Each channel is associated with a service access point (<abbr class="eh-abbreviation" title="Service access point" lang="en"><span class="eh-tooltip" title="Service access point">SAP</span></abbr>) between different layers (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-009__Channel_mapping_Overview_5G.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-9 &lt;\/span&gt;NR Access Stratum Protocol channels.&quot;}]">Fig. 1-9</a>).</p>


<a id="page_1012_c525"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:531px;"><div class="book-img-wrap__inner" style="padding-bottom:155%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/1-009__Channel_mapping_Overview_5G.png" width="531" height="818" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-9 </span>NR Access Stratum Protocol channels.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1012_c526"></a><p>The description of the specific channel types is as follows:</p><ul class="eh-list eh-list--line"><li><abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow: Represents the finest granularity for routing and forwarding in the 5G system. <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> policy profiles containing <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> parameters and identifiers are attached to each data packet to enable the corresponding flow routing.</li><li>Radio bearer<strong>:</strong> Represents a connection for transporting user and signaling data over the 5G radio interface. Multiple <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows can be combined in one radio bearer. There is the data radio bearer (<abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>) for user data and the signaling radio bearer (<abbr class="eh-abbreviation" title="Signaling radio bearer" lang="en"><span class="eh-tooltip" title="Signaling radio bearer">SRB</span></abbr>) for signaling data.</li><li><abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> channel: One-to-one mapping to radio bearer and supporting protocol, to enable specific transmission modes (transparent, unacknowledged or acknowledged). <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> channels represent the data exchange point between the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> and <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> protocol layer</li><li>Logical channel: Collection of the type of data in order to answer the question “What type of information is being transferred?” (e.g. paging or broadcasting)</li><li>Transport channel: Represents the multiplexing of logical data to be transported by the physical layer over the radio interface with similar physical characteristics</li><li>Physical channel: Mapping to a specific data transmission characteristic such as modulation, reference signal multiplexing, transmit power, RF resources, etc.</li></ul>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1013" data-prevpid="1012" data-nextpid="1014" data-chapter="1.1.3.1 Logical, transport and physical channels" id="page_1013">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.1.3.1 Logical, transport and physical channels</h4>
						
<a id="page_1013_c527"></a><p>In NR protocol stacks, logical, transport and physical channels also follow a hierarchical structure, i.e. separate channels which transport data between protocol layers are conveyed to one channel on another lower layer if they require identical physical transmission. In this section, the purpose of these channels and their hierarchical structure is described. </p><p>The term <em>logical channel</em> refers to what type of information is transferred. Logical channels are classified into two groups: control channels and traffic channels. Control channels are used for the transfer of control plane information only, while traffic channels are used for the transfer of user plane information only. The following channels are defined (see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-010__Channel_mapping_logical_transport_physical_5G.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-10 &lt;\/span&gt;NR logical, transport and physical channel mapping for the uplink and downlink.&quot;}]">Fig. 1-10</a>):</p><p>Broadcast control channel (<abbr class="eh-abbreviation" title="Broadcast control channel (logical channel)" lang="en"><span class="eh-tooltip" title="Broadcast control channel (logical channel)">BCCH</span></abbr>)<strong>:</strong> Downlink channel for broadcasting system control information. The system information is divided into different system information blocks (<abbr class="eh-abbreviation" title="System information block" lang="en"><span class="eh-tooltip" title="System information block">SIB</span></abbr>) and one master information block (<abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>). Only the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> is mapped onto the transport channel <abbr class="eh-abbreviation" title="Broadcast channel (transport channel)" lang="en"><span class="eh-tooltip" title="Broadcast channel (transport channel)">BCH</span></abbr> and then to the physical channel <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>; the other <abbr class="eh-abbreviation" title="System information block" lang="en"><span class="eh-tooltip" title="System information block">SIB</span></abbr> will be mapped onto the <abbr class="eh-abbreviation" title="Downlink shared channel" lang="en"><span class="eh-tooltip" title="Downlink shared channel">DL-SCH</span></abbr> transport channel and physical channel <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>. This is because the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> must have specific transmission characteristics and adhere to a specific frequency and periodicity as described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1023" class="eh-link eh-link--page">1.2 Physical access fundamentals, page 46</a>.</p><p>Paging control channel (<abbr class="eh-abbreviation" title="Paging control channel" lang="en"><span class="eh-tooltip" title="Paging control channel">PCCH</span></abbr>)<strong>:</strong> Downlink channel that transfers paging information, system information change notifications and indications of ongoing <abbr class="eh-abbreviation" title="Public warning system" lang="en"><span class="eh-tooltip" title="Public warning system">PWS</span></abbr> broadcasts. <abbr class="eh-abbreviation" title="Paging control channel" lang="en"><span class="eh-tooltip" title="Paging control channel">PCCH</span></abbr> is mapped to a <abbr class="eh-abbreviation" title="Paging channel" lang="en"><span class="eh-tooltip" title="Paging channel">PCH</span></abbr> transport channel and <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> physical channels.</p>


<a id="page_1013_c528"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:61%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-010__Channel_mapping_logical_transport_physical_5G_bc0871288a.png" width="800" height="483" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-10 </span>NR logical, transport and physical channel mapping for the uplink and downlink.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1013_c529"></a><p>Common control channel (<abbr class="eh-abbreviation" title="Common control channel" lang="en"><span class="eh-tooltip" title="Common control channel">CCCH</span></abbr>)<strong>:</strong> Channel for transmitting control information between UEs and the network. This channel is used for UEs that do not have an <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection with the network, i.e. for initial cell access as described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1064" class="eh-link eh-link--page">2.1.1.2 LTE initial access procedure, page 222</a>.</p><p>Dedicated control channel (<abbr class="eh-abbreviation" title="Dedicated control channel" lang="en"><span class="eh-tooltip" title="Dedicated control channel">DCCH</span></abbr>)<strong>:</strong> Point-to-point bi-directional channel that transmits dedicated control information between a UE and the network. This channel is used by UE and network after an <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection is established (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1064" class="eh-link eh-link--page">2.1.1.2 LTE initial access procedure, page 222</a>).</p><p>Dedicated traffic channel (<abbr class="eh-abbreviation" title="Dedicated traffic channel" lang="en"><span class="eh-tooltip" title="Dedicated traffic channel">DTCH</span></abbr>)<strong>:</strong> Point-to-point bi-directional channel that is dedicated to one UE and used for the transfer of user information. A <abbr class="eh-abbreviation" title="Dedicated traffic channel" lang="en"><span class="eh-tooltip" title="Dedicated traffic channel">DTCH</span></abbr> can exist on both the uplink and downlink.</p><p>Logical channels are combined in <em>transport channels</em>, referring to how the information is transferred. Each transport channel conveys services which will be transferred with the same characteristics over the physical radio interface. The following transport channels are defined (see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-010__Channel_mapping_logical_transport_physical_5G.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-10 &lt;\/span&gt;NR logical, transport and physical channel mapping for the uplink and downlink.&quot;}]">Fig. 1-10</a>):</p><p>Broadcast channel (<abbr class="eh-abbreviation" title="Broadcast channel (transport channel)" lang="en"><span class="eh-tooltip" title="Broadcast channel (transport channel)">BCH</span></abbr>)<strong>:</strong> Used to partially transport the <abbr class="eh-abbreviation" title="Broadcast control channel (logical channel)" lang="en"><span class="eh-tooltip" title="Broadcast control channel (logical channel)">BCCH</span></abbr> system information. The <abbr class="eh-abbreviation" title="Broadcast channel (transport channel)" lang="en"><span class="eh-tooltip" title="Broadcast channel (transport channel)">BCH</span></abbr> uses a fixed, pre-defined transport format. There is a requirement for broadcasting in the entire coverage area of the cell, either as a single message or by beamforming of different <abbr class="eh-abbreviation" title="Broadcast channel (transport channel)" lang="en"><span class="eh-tooltip" title="Broadcast channel (transport channel)">BCH</span></abbr> instances.</p><p>Downlink shared channel (<abbr class="eh-abbreviation" title="Downlink shared channel" lang="en"><span class="eh-tooltip" title="Downlink shared channel">DL-SCH</span></abbr>)<strong>: </strong>Used to transport different logical channel data such as the <abbr class="eh-abbreviation" title="Dedicated traffic channel" lang="en"><span class="eh-tooltip" title="Dedicated traffic channel">DTCH</span></abbr>, <abbr class="eh-abbreviation" title="Broadcast control channel (logical channel)" lang="en"><span class="eh-tooltip" title="Broadcast control channel (logical channel)">BCCH</span></abbr>, <abbr class="eh-abbreviation" title="Dedicated control channel" lang="en"><span class="eh-tooltip" title="Dedicated control channel">DCCH</span></abbr> and <abbr class="eh-abbreviation" title="Common control channel" lang="en"><span class="eh-tooltip" title="Common control channel">CCCH</span></abbr>. <abbr class="eh-abbreviation" title="Downlink shared channel" lang="en"><span class="eh-tooltip" title="Downlink shared channel">DL-SCH</span></abbr> supports error correction via <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> and uses <abbr class="eh-abbreviation" title="Adaptive modulation and coding" lang="en"><span class="eh-tooltip" title="Adaptive modulation and coding">AMC</span></abbr> for dynamic link adaptation by varying the modulation, coding and transmit power. It is possible to broadcast shared data to the entire cell or to transmit data UE-specifically in a certain direction based on beamforming. The radio resources linked to the <abbr class="eh-abbreviation" title="Downlink shared channel" lang="en"><span class="eh-tooltip" title="Downlink shared channel">DL-SCH</span></abbr> can be allocated based on either dynamic or semi-static resource allocation. Furthermore, this transport channel supports UE discontinuous reception (<abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr>) to enable UE power saving.</p><p>Paging channel (<abbr class="eh-abbreviation" title="Paging channel" lang="en"><span class="eh-tooltip" title="Paging channel">PCH</span></abbr>)<strong>:</strong> Used to transmit paging information from the <abbr class="eh-abbreviation" title="Paging control channel" lang="en"><span class="eh-tooltip" title="Paging control channel">PCCH</span></abbr>. It can be dynamically mapped onto physical resources which can be used by other traffic/control channels as well. Supports <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> mode for power saving. Regarding the coverage requirement, the <abbr class="eh-abbreviation" title="Paging channel" lang="en"><span class="eh-tooltip" title="Paging channel">PCH</span></abbr> must be broadcast in the entire coverage area of the cell, either as a single message or by beamforming different <abbr class="eh-abbreviation" title="Paging channel" lang="en"><span class="eh-tooltip" title="Paging channel">PCH</span></abbr> instances.</p><p>Uplink shared channel (<abbr class="eh-abbreviation" title="Uplink shared channel" lang="en"><span class="eh-tooltip" title="Uplink shared channel">UL-SCH</span></abbr>)<strong>:</strong> Transmits information from several logical channels, i.e. user and control plane data. Like the downlink <abbr class="eh-abbreviation" title="Downlink shared channel" lang="en"><span class="eh-tooltip" title="Downlink shared channel">DL-SCH</span></abbr>, the uplink <abbr class="eh-abbreviation" title="Uplink shared channel" lang="en"><span class="eh-tooltip" title="Uplink shared channel">UL-SCH</span></abbr> also supports <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> and <abbr class="eh-abbreviation" title="Adaptive modulation and coding" lang="en"><span class="eh-tooltip" title="Adaptive modulation and coding">AMC</span></abbr> as well as dynamic and semi-static scheduling. Uplink beamforming is possible, but optional for the UE and likely to occur in FR2 only.</p><p>Random access channel (<abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr>)<strong>:</strong> Carries the random access preamble for initial network access. Collisions can occur from multiple UEs accessing this channel simultaneously.</p><p>Physical channels are used to carry information over the radio interface. There are physical channels to transfer data obtained via transport channels as well as physical channels that are located in the physical layer only. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1032" class="eh-link eh-link--page">1.2.5.3 Physical channels in 5G NR, page 78</a> provides a detailed introduction to these physical channels.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1014" data-prevpid="1013" data-nextpid="1015" data-chapter="1.1.3.2 Control plane protocol" id="page_1014">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.1.3.2 Control plane protocol</h4>
						
<a id="page_1014_c530"></a><p>The control plane protocol (C-plane) represents the protocol structure between the UE and network to transport control information (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-011__C-plane_protocol_structure.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-11 &lt;\/span&gt;Control plane protocol structure from TS 38.300.&quot;}]">Fig. 1-11</a>). We distinguish between the control protocol between the UE and 5G RAN (access stratum protocol <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr>) and the control protocol between the UE and <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> (non-access stratum protocol <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr>). The C-plane protocol structure consists of the protocol layers <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr>, <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>, <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr>, <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr>, <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> and PHY. The following sections briefly describe the main control layer <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>. The other layers below the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> have the same functions as in the user plane protocol and are described under user plane protocol. The <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> is described under non-access stratum protocol.</p>


<a id="page_1014_c531"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:65%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-011__C-plane_protocol_structure_9e84e3398f.png" width="800" height="514" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-11 </span>Control plane protocol structure from <span class="eh-hint" title="3GPP TS 38.300: NR; Overall description; Stage-2" lang="en"><span class="eh-tooltip" title="3GPP TS 38.300: NR; Overall description; Stage-2">TS 38.300</span></span>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1014_c532"></a><p class="eh-headline-207 ">
				Radio resource control
			</p>


<a id="page_1014_c533"></a><p>The radio resource control protocol handles the bidirectional exchange of control messages over the radio interface between the UE and gNB and is defined in <span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span>. An established <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection uses signaling radio bearers (<abbr class="eh-abbreviation" title="Signaling radio bearer" lang="en"><span class="eh-tooltip" title="Signaling radio bearer">SRB</span></abbr>) to exchange control information. The main services and functions of the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> layer include:</p><ul class="eh-list eh-list--line"><li>Broadcasting of system information related to <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> and <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr></li><li>Paging initiated by <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> or NG-RAN and triggering of the transmission of paging control information over the radio interface</li><li>Establishment, maintenance and release of an <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection between the UE and NG-RAN, including:<ul><li class="Flie-text_Flie-text-Aufz2-Strich">Addition, modification and release of carrier aggregation</li><li class="Flie-text_Flie-text-Aufz2-Strich">Addition, modification and release of dual connectivity in NR or between EUTRA and NR</li></ul></li><li>Security functions including key management for authentication, ciphering and authorization aspects</li><li>Establishment, configuration, maintenance and release of signaling radio ­bearers (SRBs) and data radio bearers (DRBs)</li><li>Mobility functions including:<ul><li class="Flie-text_Flie-text-Aufz2-Strich">Handover and context transfer</li><li class="Flie-text_Flie-text-Aufz2-Strich">UE cell selection and reselection and control of cell selection and reselection</li><li class="Flie-text_Flie-text-Aufz2-Strich">Inter-RAT mobility</li></ul></li><li><abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> management functions</li><li>UE measurement reporting and control of the reporting</li><li>Detection of and recovery from radio link failure</li><li><abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> message transfer to/from core network, from/to UE</li></ul><p>The UE can be in three possible <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> states:</p><ul class="eh-list eh-list--line"><li>In <strong>RRC_IDLE</strong> where no <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection is established, the UE selects the <abbr class="eh-abbreviation" title="Public land mobile network" lang="en"><span class="eh-tooltip" title="Public land mobile network">PLMN</span></abbr> and re-selects the cell based on its cell selection and reselection configuration, acquires system information and paging for mobile terminated data, and may use the random access resource when triggered to establish a connection.</li><li>The <strong>RRC_CONNECTED</strong> indicates the situation where an <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection is established, transfer of bidirectional user data is possible, and the mobility is controlled by the network, e.g. as described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1091" class="eh-link eh-link--page">2.3.2 RRM mobility procedure, page 395</a>.</li><li>The <strong>RRC_INACTIVE</strong> state is an interim state between both of these possibilities, indicating that an <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection is established, but no user data is transferred. The UE and NG-RAN store the <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> context, mobility is based on cell re-selection, and connection can be re-established via random access or paging.</li></ul>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1015" data-prevpid="1014" data-nextpid="1016" data-chapter="1.1.3.3 User plane protocol" id="page_1015">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.1.3.3 User plane protocol</h4>
						
<a id="page_1015_c534"></a><p>The user plane represents the protocol structure between the UE and gNB that is intended for user data transfer (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-012__User_plane_protocol_stack.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-12 &lt;\/span&gt;User plane protocol stack from TS 38.300.&quot;}]">Fig. 1-12</a>). It is based on protocol layers <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr>, <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr>, <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr>, <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> and PHY interworking with one other to guarantee successful data transfer over the radio interface. The following section briefly introduces these protocol layers.</p>


<a id="page_1015_c535"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:69%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-012__User_plane_protocol_stack_4ee085f4c5.png" width="800" height="545" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-12 </span>User plane protocol stack from <span class="eh-hint" title="3GPP TS 38.300: NR; Overall description; Stage-2" lang="en"><span class="eh-tooltip" title="3GPP TS 38.300: NR; Overall description; Stage-2">TS 38.300</span></span>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1015_c536"></a><p class="eh-headline-207 ">
				Service data adaptation protocol (<abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr>)
			</p>


<a id="page_1015_c537"></a><p>The <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> is a new protocol layer compared to LTE. Its main function involves transmission of service data identified by the network in the form of <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-013__QoS_flow_SDAP.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-13 &lt;\/span&gt;Role of SDAP and QoS flow ID within 5G PDU session.&quot;}]">Fig. 1-13</a>). <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> relies on the <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> layer to perform mapping of the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow to a specific over the air data radio bearer. Data bearers are then handled in the air interface protocol with a specific priority.</p>


<a id="page_1015_c538"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:34%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-013__QoS_flow_SDAP_b6cc25a80c.png" width="800" height="272" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-13 </span>Role of <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> and <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow ID within 5G <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1015_c539"></a><p>The <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> introduces the term <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow ID (<abbr class="eh-abbreviation" title="QoS flow ID" lang="en"><span class="eh-tooltip" title="QoS flow ID">QFI</span></abbr>), which can be understood as a sort of label for each of the DL or UL data packets. This label guarantees transmission of the data packet with a correctly allocated <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile in the lower layers over the entire transmission path.</p><p>A single <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> protocol entity is configured for each individual <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session. A <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session is a point-to-point connection between the UE and application and consists of one or more <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows.</p><p>In the uplink direction, the mapping of <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow IDs to over the air data radio bearer (<abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>) can be handled in two different ways. In reflective mapping, the UE monitors the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow ID(s) of the downlink packets for each <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr> and applies the same mapping in the uplink.</p><p>Alternatively, the <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> may configure mapping by <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> “QoS flow to <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr> mapping” in the <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> configuration, which corresponds to an explicit configuration. For further details, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1075" class="eh-link eh-link--page">2.2.2 End to end quality of service, page 285</a>.</p>


<a id="page_1015_c540"></a><p class="eh-headline-207 ">
				Packet data convergence protocol (<abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr>)
			</p>


<a id="page_1015_c541"></a><p>The <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer provides data radio bearers to the upper layer <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr>. As in LTE, the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer plays an important role in mobility situations by avoiding packet losses due to handovers. It also controls the proper functioning of certain connection scenarios such as dual connectivity. In addition, the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> performs header compression and decompression of higher layer protocol (i.e. <abbr class="eh-abbreviation" title="Transmission control protocol" lang="en"><span class="eh-tooltip" title="Transmission control protocol">TCP</span></abbr>/<abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> header).</p><p>The main services and functions of the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer for the user plane include:</p><ul class="eh-list eh-list--line"><li>Transfer of user data</li><li>Sequence numbering in order to guarantee in-sequence delivery and avoid packet loss, especially in case of handover situations or dual connectivity. Moreover reordering and duplicate detection in order to guarantee ­in-sequence delivery</li><li>Higher layer protocol header compression and decompression (i.e. <abbr class="eh-abbreviation" title="Transmission control protocol" lang="en"><span class="eh-tooltip" title="Transmission control protocol">TCP</span></abbr>/<abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> header)</li><li>Ciphering, deciphering and integrity protection</li><li><abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> discards</li><li><abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> re-establishment and data recovery for <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr></li><li><abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> routing in case of split bearers while dual connectivity is activated</li><li>Duplication of <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> PDUs; especially in dual connectivity scenarios to maintain low latency, the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer may send a duplicate packet on a different <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> channel</li></ul><a id="page_1015_c542"></a><p class="eh-headline-207 ">
				Radio link control (<abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr>)
			</p>


<a id="page_1015_c543"></a><p>As was already introduced in WCDMA and LTE, the NR protocol stack supports an <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> layer. The <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> layer provides <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> channels to the upper layer <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr>. Depending on the reliability and latency required for data transported in logical channels, the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> channel may be configured with three transmission modes:</p><ul class="eh-list eh-list--line"><li>Transparent mode (<abbr class="eh-abbreviation" title="Transparent mode" lang="en"><span class="eh-tooltip" title="Transparent mode">TM</span></abbr>): In this mode, the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> protocol layer forwards the data packet from <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> without attaching any header. Therefore, the packet size must be known <em>a priori</em> and there is also no need for packet segmentation or reassembly. Moreover, no error recovery mechanism for lost packets is possible such as retransmission or in-sequence delivery</li><li>Unacknowledged mode (<abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr>): In this mode, the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> header is attached, allowing the transmission of variable packet sizes. Thus, this mode introduces a segmentation mechanism to adapt the packet sizes, for example to the transmission channels. <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> performs buffering at both the TX and RX ends, but no mechanism for acknowledgment is introduced. Thus, there is no checking for lost packets</li><li>Acknowledged mode (<abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr>): This mode provides automatic repeat request (<abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr>) feedback: lost packets are retransmitted. Moreover, duplication detection is introduced. An <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> header is attached, allowing sequence number identification and the adaptation of packet sizes with segmentation and reassembly. Buffering is implemented at both the TX and RX ends</li></ul><p>Each of these modes can both transmit and receive data. In <abbr class="eh-abbreviation" title="Transparent mode" lang="en"><span class="eh-tooltip" title="Transparent mode">TM</span></abbr> and <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr>, a separate entity is used for transmission and reception, but in <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> a single <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entity performs both transmission and reception.</p><p>Certain logical channels will use a specific <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> mode, e.g. for SRB0, paging and broadcast system information, <abbr class="eh-abbreviation" title="Transparent mode" lang="en"><span class="eh-tooltip" title="Transparent mode">TM</span></abbr> mode is used. For other SRBs, <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> mode is used. For DRBs, either <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> or <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> mode is used.</p><p>The main services and functions of the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> layer depend on the transmission mode and include:</p><ul class="eh-list eh-list--line"><li>Transfer of upper layer PDUs from logical channel to <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> channel</li><li>Sequence numbering independent of the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> (<abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> and <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr>)</li><li>Error correction through <abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr> (<abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> only)</li><li>Segmentation (<abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> and <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr>) and re-segmentation (<abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> only) of <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> SDUs, needed to match the size of the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr></li><li>Reassembly of <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> (<abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> and <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr>)</li><li>Duplicate detection (<abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> only)</li><li><abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> discard (<abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> and <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr>)</li><li><abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> re-establishment in case the lower layer indicates radio link out-of-sync</li><li>Protocol error detection (<abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> only)</li></ul><a id="page_1015_c544"></a><p class="eh-headline-207 ">
				Medium access protocol (<abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr>)
			</p>


<a id="page_1015_c545"></a><p>The <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer maps logical channels from <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> to the transport channels. Thus, if the logical channels answer the question “What will be transferred?” (i.e. logical channel for broadcasting or user data), the transport channels stand for “How will the transfer be performed?” (i.e. fixed transport block size or adaptive modulation). The main services and functions of the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer include:</p><ul class="eh-list eh-list--line"><li>Multiplexing/demultiplexing of <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> SDUs belonging to one or more logical channels into/from transport blocks (<abbr class="eh-abbreviation" title="Transport block" lang="en"><span class="eh-tooltip" title="Transport block">TB</span></abbr>) delivered to/from the physical layer on transport channels</li><li>Scheduling information reporting, i.e. triggering scheduling requests for data transfer</li><li>Error correction through <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr>; in case of carrier aggregation or <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr>, there is one <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> entity per cell</li><li>Priority handling between UEs by means of dynamic scheduling</li><li>Priority handling between logical channels of one UE by means of logical channel prioritization</li><li>Padding bit attachment to fit the required packet sizes</li></ul><p>A single <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity can support multiple numerologies, transmission timings and cells. Mapping restrictions within logical channel prioritization are used to control which numerologies, cells and transmission timings a logical channel may use.</p>


<a id="page_1015_c546"></a><p class="eh-headline-207 ">
				Physical layer (PHY)
			</p>


<a id="page_1015_c547"></a><p>The physical layer provides data transfer services to <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> and higher layers. The physical layer takes the characteristics of transport channel and maps them to the radio interface through mechanisms such as channel coding, modulation and rate matching. For a detailed description of the physical layer in 5G NR, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1023" class="eh-link eh-link--page">1.2 Physical access fundamentals, page 46</a>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1016" data-prevpid="1015" data-nextpid="1017" data-chapter="1.1.3.4 Radio bearers in dual connectivity" id="page_1016">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.1.3.4 Radio bearers in dual connectivity</h4>
						
<a id="page_1016_c548"></a><p>The concept of dual connectivity was introduced in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1007" class="eh-link eh-link--page">1.1.2.1 Connectivity scenarios, page 13</a>. Dual connectivity allows data transmission to be split among different radio networks based on routing of <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> data bearers on different radio networks. Radio bearers are data channels on the air interface that are used to transmit data with specific network parameters (i.e. quality of service).</p><p>The UE has both data radio bearers (<abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>) and signaling radio bearers (<abbr class="eh-abbreviation" title="Signaling radio bearer" lang="en"><span class="eh-tooltip" title="Signaling radio bearer">SRB</span></abbr>). An <abbr class="eh-abbreviation" title="Signaling radio bearer" lang="en"><span class="eh-tooltip" title="Signaling radio bearer">SRB</span></abbr> transmits control messages, which in case of dual connectivity are transmitted over the <abbr class="eh-abbreviation" title="Master cell group" lang="en"><span class="eh-tooltip" title="Master cell group">MCG</span></abbr>. Optionally, a UE can also have a signaling connection with the <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> for all control information where involvement of the <abbr class="eh-abbreviation" title="Master node" lang="en"><span class="eh-tooltip" title="Master node">MN</span></abbr> is not required, e.g. <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> reconfiguration (SRB3).</p><p>From a network perspective, the connection can be distinguished between the transmission bearer starting at the core network and terminating at the master cell group (<abbr class="eh-abbreviation" title="Master cell group" lang="en"><span class="eh-tooltip" title="Master cell group">MCG</span></abbr> bearer) or the transmission bearer starting at the core network and terminating at the secondary cell group (<abbr class="eh-abbreviation" title="Secondary cell group" lang="en"><span class="eh-tooltip" title="Secondary cell group">SCG</span></abbr> bearer).</p><p>This is illustrated in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-014__Radiobearer_types_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-14 &lt;\/span&gt;Radio bearer types in LTE\/NR dual connectivity (EN-DC).&quot;}]">Fig. 1-14</a> for the case of <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr>. For operators, this can involve a load balancing decision on whether to use a bearer terminating in either cell group.</p>


<a id="page_1016_c549"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:39%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-014__Radiobearer_types_v4_ed95b8866e.png" width="800" height="308" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-14 </span>Radio bearer types in LTE/NR dual connectivity (<abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr>).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1016_c550"></a><p>An additional option is that the bearer can be split over both connections and data can be distributed or duplicated between the two nodes (split bearer). Split bearers allow additional load balancing between the two connections. The decision is made dynamically depending on the amount of data on the main connection leg as well as a network-defined threshold. Split bearers are specific to dual connectivity and can have an anchor point (<abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer) on <abbr class="eh-abbreviation" title="Master node" lang="en"><span class="eh-tooltip" title="Master node">MN</span></abbr> (<abbr class="eh-abbreviation" title="Master cell group" lang="en"><span class="eh-tooltip" title="Master cell group">MCG</span></abbr> split bearer) or <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> (<abbr class="eh-abbreviation" title="Secondary cell group" lang="en"><span class="eh-tooltip" title="Secondary cell group">SCG</span></abbr> split bearer).</p><p>In general, the advantage of dual connectivity is that it diversifies transmission over separate frequency links without a constraint for linked time synchronization between the two NodeBs. In fact, the two nodes can be collocated or non-collocated, and no high-performance backhaul is required. Some operators see the split bearer as an ideal solution for minimizing control signaling while still dynamically branching out the data on both frequencies. In the <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> case, for example, a split bearer is also required for duplication of data on both links since it increases the reliability by reducing the packet error rate and decreases the latency due to fewer retransmissions. Lost packets on one link can be recovered from the corresponding duplicate packet on the other link.</p><p>The UE does not need to know if the bearer anchor point is on the <abbr class="eh-abbreviation" title="Master cell group" lang="en"><span class="eh-tooltip" title="Master cell group">MCG</span></abbr> or <abbr class="eh-abbreviation" title="Secondary cell group" lang="en"><span class="eh-tooltip" title="Secondary cell group">SCG</span></abbr>; the UE sees several air interface channels (<abbr class="eh-abbreviation" title="Master cell group" lang="en"><span class="eh-tooltip" title="Master cell group">MCG</span></abbr>, <abbr class="eh-abbreviation" title="Secondary cell group" lang="en"><span class="eh-tooltip" title="Secondary cell group">SCG</span></abbr> bearers and split bearer) in the direction of the core network.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1017" data-prevpid="1016" data-nextpid="1018" data-chapter="1.1.3.5 UE capabilities transfer and computation" id="page_1017">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.1.3.5 UE capabilities transfer and computation</h4>
						
<a id="page_1017_c551"></a><p>In previous generations of cellular networks, namely GSM, UMTS/HSPA and LTE, UE categories were defined as a way to indicate a basic UE capability to the network.</p><p>For example, the first set of 3GPP specifications for LTE included five main UE categories. Those categories only distinguished the maximum number of transport blocks received within a <abbr class="eh-abbreviation" title="Transmission time interval" lang="en"><span class="eh-tooltip" title="Transmission time interval">TTI</span></abbr>, i.e. a maximum data rate, and the number of spatial streams supported by that UE category. In the UL direction, the optional support for 64QAM modulation was also indicated per UE category. The data rate of these categories comprises a range from 10 Mbps to 300 Mbps in the downlink direction and 5 Mbps to 75 Mbps in the uplink direction. The first commercial end-user devices arriving on the market were mostly UE category 3, supporting up to 100 Mbps on the downlink and up to 50 Mbps on the uplink. Therefore, the UE category indication was mainly used to describe a maximum supported data rate capability of an end-user device. The categories were also used for marketing purposes, i.e. advertising a new category arriving on the market (supporting an even higher maximum data rate). Over the years, the UE categories were extended and also defined separately in the downlink and uplink directions. In 3GPP Release 15, there are 12 common (DL/UL) UE categories defined. Additionally, 26 separate UE DL and UL categories are specified in total. The high number of UE categories is determined by various carrier aggregation and spatial multiplexing (<abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr>) combinations and also indicates support for enhanced modulation schemes up to 256QAM. Note that even more specific UE categories are defined which indicate support for dedicated features such as sidelink for <abbr class="eh-abbreviation" title="Vehicle to x communication" lang="en"><span class="eh-tooltip" title="Vehicle to x communication">V2X</span></abbr> applications and NB-IoT. During the specification of LTE and its enhancements, the UE category became quite cumbersome. On top of the basic UE categories, there are many more UE capabilities for which support is signaled to the network. They are specified in <span class="eh-hint" title="3GPP TS 36.306: E-UTRA, User Equipment (UE) radio access capabilities" lang="en"><span class="eh-tooltip" title="3GPP TS 36.306: E-UTRA, User Equipment (UE) radio access capabilities">TS 36.306</span></span> section 4.3 (“Parameters independent of the field ue-Category and ue-CategoryDL / ue-CategoryUL”).</p><p>In 5G NR, it was decided not to maintain the concept of UE categories as in existing cellular technologies. Therefore, a basic category number is not available to provide the maximum data rate capability of a UE, which is generally considered an important performance indicator. In contrast, <span class="eh-hint" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities" lang="en"><span class="eh-tooltip" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities">TS 38.306</span></span> provides a formula to calculate the maximum date rate mainly depending on the number of spatial layers and the number of carriers that an end-user device supports. The formula is given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-015__K1.1.3.5__Formel.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-15 &lt;\/span&gt;Formula for data rate calculation with sample calculation for FR1, assuming 15 kHz SCS and 256QAM (maximum data rate is 288.9 Mbps in this example).&quot;}]">Fig. 1-15</a>: For a more detailed explanation of the formula, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077_c1181" class="eh-link eh-link--page eh-link--ce">Downlink data rate, page 308</a>.</p>


<a id="page_1017_c552"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:51%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-015__K1.1.3.5__Formel_69ed487a1c.png" width="800" height="404" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-15 </span>Formula for data rate calculation with sample calculation for FR1, assuming 15 kHz <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> and 256QAM (maximum data rate is 288.9 Mbps in this example).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1017_c553"></a><p>Based on this information, the maximum supported data rate can be determined. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1017_c554\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table001\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Frequency range&lt;\/th&gt;&lt;th&gt;SCS&lt;\/th&gt;&lt;th&gt;Bandwidth&lt;\/th&gt;&lt;th&gt;DL&lt;\/th&gt;&lt;th&gt;UL&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;FR1&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;50 MHz&lt;\/td&gt;&lt;td&gt;288.9 Mbps&lt;\/td&gt;&lt;td&gt;309.1 Mbps&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;FR1&lt;\/td&gt;&lt;td&gt;30 kHz&lt;\/td&gt;&lt;td&gt;100 MHz&lt;\/td&gt;&lt;td&gt;584.3 Mbps&lt;\/td&gt;&lt;td&gt;625 Mbps&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;FR1&lt;\/td&gt;&lt;td&gt;60 kHz&lt;\/td&gt;&lt;td&gt;100 MHz&lt;\/td&gt;&lt;td&gt;577.8 Mbps&lt;\/td&gt;&lt;td&gt;618.1 Mbps&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;FR2&lt;\/td&gt;&lt;td&gt;60 kHz&lt;\/td&gt;&lt;td&gt;200 MHz&lt;\/td&gt;&lt;td&gt;1.08 Gbps&lt;\/td&gt;&lt;td&gt;1.18 Gbps&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;FR2&lt;\/td&gt;&lt;td&gt;120 kHz&lt;\/td&gt;&lt;td&gt;400 MHz&lt;\/td&gt;&lt;td&gt;2.15 Gbps&lt;\/td&gt;&lt;td&gt;2.37 Mbps&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-16 &lt;\/span&gt;Examples of maximum data rate calculations for one spatial layer and for one component carrier for 5G.&lt;\/p&gt;\n\n&quot;}">Fig. 1-16</a> provides sample calculations for FR1 and FR2 applying different subcarrier spacings and bandwidth allocations in FR1 and FR2. FR1 and FR2 are the two frequency ranges defined for 5G NR, further details are given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1030_c642\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table eh-table--alternate\&quot; id=\&quot;table006\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Frequency range designation&lt;\/th&gt;&lt;th&gt;Corresponding frequency range&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;FR1&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;410 MHz to 7125 MHz&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;FR2&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;24 250 MHz to 52 600 MHz&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-50 &lt;\/span&gt;Frequency ranges FR1 and FR2.&lt;\/p&gt;\n\n&quot;}">Fig. 1-50, page 74</a>.</p>


<a id="page_1017_c554"></a><div class="table-scroll"><table id="table001" class="eh-table eh-table--alternate"><colgroup><col><col><col><col><col></colgroup><thead><tr><th>Frequency range</th><th>SCS</th><th>Bandwidth</th><th>DL</th><th>UL</th></tr></thead><tbody><tr><td>FR1</td><td>15 kHz</td><td>50 MHz</td><td>288.9 Mbps</td><td>309.1 Mbps</td></tr><tr><td>FR1</td><td>30 kHz</td><td>100 MHz</td><td>584.3 Mbps</td><td>625 Mbps</td></tr><tr><td>FR1</td><td>60 kHz</td><td>100 MHz</td><td>577.8 Mbps</td><td>618.1 Mbps</td></tr><tr><td>FR2</td><td>60 kHz</td><td>200 MHz</td><td>1.08 Gbps</td><td>1.18 Gbps</td></tr><tr><td>FR2</td><td>120 kHz</td><td>400 MHz</td><td>2.15 Gbps</td><td>2.37 Mbps</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-16 </span>Examples of maximum data rate calculations for one spatial layer and for one component carrier for 5G.</p>


<a id="page_1017_c555"></a><p>As previously mentioned, there is no UE category indication to the network. Instead, 5G NR defines a UE capability transfer procedure as specified in <span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span> (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-017__UEcapability_transfer.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-17 &lt;\/span&gt;UE capability transfer procedure.&quot;}]">Fig. 1-17</a>). The network initiates the procedure to the UE in <span class="eh-text--nowrap">RRC_CONNECTED</span> mode if it needs UE radio access capability information. The procedure is always required after initial access to the network. However, it may also be executed if the network requires updated information.</p>


<a id="page_1017_c556"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:22%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-017__UEcapability_transfer_ba389337d4.png" width="800" height="173" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-17 </span>UE capability transfer procedure.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1017_c557"></a><p>In general, the UE jointly indicates its support for both TDD and FDD modes with a single value in case the functionality is supported for both modes. If the capabilities differ, the corresponding values are signaled in dedicated information fields with a corresponding prefix, i.e. as part of the fdd-UE-NR-Capability and tdd-UE-NR-Capability fields.</p><p><span class="eh-hint" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities" lang="en"><span class="eh-tooltip" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities">TS 38.306</span></span> specifies a long list of different UE capability parameters. If applicable, the parameter is classified as mandatory. For each parameter, the list also defines whether the value is common or different to FDD and TDD modes. We have selected a few examples for illustration in this section.</p><p>General parameters include the mandatory <em>inactiveState</em> parameter, which indicates whether the UE supports <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>_INACTIVE state as specified in <span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span>, and the optional <em>voiceOverMCGBearer</em> parameter, which indicates whether the UE supports IMS voice over the NR <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> for <abbr class="eh-abbreviation" title="Master cell group" lang="en"><span class="eh-tooltip" title="Master cell group">MCG</span></abbr> bearer in 5G NR.</p><p>Two examples of <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> parameters are <em>pdcp-DuplicationSplitDRB</em>, which indicates whether the UE supports <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> duplication over split <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>, and the ­<em>supportedROHC-Profiles</em> parameter, which defines which robust header compression profiles are supported.</p><p>There are only three <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> parameters and they are all mandatory. The parameters <em>am-WithShortSN</em>, <em>um-WithLongSN</em> and <em>um-WithShortSN</em> indicate support for acknowledged and unacknowledged modes with different bit length of <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> sequence numbers.</p><p>Related to the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer, one example of a mandatory parameter is ­<em>longDRX-Cycle</em>, which indicates support for long <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycles. An optional <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> parameter is <em>multipleSR-Configurations</em>, which indicates whether the UE supports eight scheduling request configurations per cell group.</p><p>The most comprehensive list of parameters is in the physical layer parameter section of <span class="eh-hint" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities" lang="en"><span class="eh-tooltip" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities">TS 38.306</span></span>. On the physical layer, the UE indicates which band combinations related to carrier aggregation (within EUTRA = LTE, within 5G NR and for dual connectivity = EUTRA/NR) are supported. The <em>BandNR</em> parameters include many capabilities such as the absolute NR frequency band, but also very detailed capabilities like the <em>beamReportTiming</em> parameter. This parameter indicates the number of OFDM symbols between the last symbol of <span class="eh-text--nowrap">SSB/CSI-RS</span> and the first symbol of the transmission channel containing a beam report. The UE includes this field for each supported subcarrier spacing. The sections <em>CA-ParametersEUTRA</em> and <em>CA-ParametersNR</em> describe a few parameters such as the <em>multipleTimingAdvances</em> parameter for NR, i.e. whether multiple timing advances are supported. Many parameters relevant to calculation of the maximum data rate are included in the so-called <em>FeatureSet</em> parameter sections, specified for both the DL and UL and also detailed per component carrier (CC), e.g. the <em>scalingFactor</em> or <em>maxNumberMIMO-LayersPDSCH</em> parameters. The latter specifies the maximum number of spatial multiplexing layer(s) supported by the UE for DL reception. For single carrier standalone NR, it is mandatory with capability signaling to support at least four <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> layers in the bands where 4 RX is specified as mandatory for the given UE and at least two <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> layers in FR2. Some relaxations to this requirement may be applicable in the future (including in Rel-15). Mandatory in all cases means mandatory with capability signaling. The physical layer parameter section also lists multi-RAT dual connectivity (<abbr class="eh-abbreviation" title="Multi-radio dual connectivity" lang="en"><span class="eh-tooltip" title="Multi-radio dual connectivity">MR-DC</span></abbr>) parameters. One example is <em>dynamicPowerSharing</em>, a parameter that indicates whether the UE supports dynamic <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> power sharing or not. Many more parameters are included in the Phy-Parameters and other PHY parameter subsections in <span class="eh-hint" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities" lang="en"><span class="eh-tooltip" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities">TS 38.306</span></span>.</p><p>Many measurement and mobility capability parameters can be indicated to the network. They relate to UE capabilities to perform measurements and report results to the network. For example, the parameter <em>csi-RSRP-AndRSRQ-MeasWithSSB</em> indicates whether the UE can perform <abbr class="eh-abbreviation" title="CSI reference signal received power" lang="en"><span class="eh-tooltip" title="CSI reference signal received power">CSI-RSRP</span></abbr> and <abbr class="eh-abbreviation" title="CSI reference signal received quality" lang="en"><span class="eh-tooltip" title="CSI reference signal received quality">CSI-RSRQ</span></abbr> measurements as specified in <span class="eh-hint" title="3GPP TS 38.215: NR; Physical layer measurements" lang="en"><span class="eh-tooltip" title="3GPP TS 38.215: NR; Physical layer measurements">TS 38.215</span></span>, where the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> resource is configured with an associated <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>. Note that this parameter requires FR1 and FR2 differentiation.</p><p>Finally, the inter-RAT parameter section lists two single capabilities: support for EUTRA FDD and EUTRA TDD.</p><p>In conclusion, 5G NR provides a very granular way of indicating UE capabilities to the network. This must be taken into account when scheduling resources to a specific UE or when tasking the UE to provide measurement reports. In previous cellular network technologies, the UE category concept provided a very coarse indication of basic capabilities, mostly to reflect a certain maximum data rate. This concept is not maintained in 5G NR. The maximum data rate can be calculated from a well-defined formula. However, the relevant parameters are provided via signaling of detailed UE capability parameters.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1018" data-prevpid="1017" data-nextpid="1019" data-chapter="1.1.3.6 Fundamental measurements provided by the end-user device" id="page_1018">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.1.3.6 Fundamental measurements provided by the end-user device</h4>
						
<a id="page_1018_c558"></a><p>In all cellular technologies, there is the essential network (base station scheduler) task to schedule resources in the most efficient way. Moreover, varying propagation conditions need to be taken into account in order to support UE mobility and connection handover between cells.</p><p>FDD systems operate the downlink transmission link from the base station to the end-user device in a different frequency spectrum than the uplink from the end-user device to the base station. Since propagation conditions can be different in the downlink and uplink directions, a feedback mechanism from the UE is required. This allows the base station to allocate resources appropriately as well as to prepare handover scenarios.</p><p>TDD systems use the same frequency for the downlink and uplink, which enables the base station to deduce downlink propagation conditions from uplink measurements executed in its own receiver. However, this is only possible in the frequency range actually in use by the UE. In order to gain knowledge for additional carrier frequencies, e.g. to prepare for an inter-frequency handover, specific resources need to be scheduled. Furthermore, with 5G NR there is specific emphasis on the implementation of beamforming, which adds another dimension.</p><p>In this section, we provide a basic overview of the measurements executed by a UE to support the scheduling mechanism in the base station throughout multiple relevant phases, i.e. during initial access, during establishment and maintenance of a connection as well as to support mobility. Details are provided in other sections of this 5G compendium and are referenced where relevant.</p><p>In previous cellular technologies, the basic end-user device measurement relied on the always-on reference signal transmitted within a cell. For LTE networks, power measurements are executed and feedback is provided based on the cell-specific reference symbols. Additionally, the UE can be tasked to provide measurement reports based on the channel state information (<abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr>) reference signals (RS). The <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> are temporarily scheduled and the position in frequency and time is signaled to the UE.</p><p>This mechanism enables the network to receive feedback on additional frequencies to prepare for inter-frequency handovers. It also enables the application of UE-specific beamforming in LTE.</p><p>In 5G NR, there are no cell-specific reference signals that could serve as the basis for measurements. Therefore, it was decided to perform UE measurements based on the secondary synchronization (<abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>) signals. Only the SS-RS receive power (SS-RSRP) must be measured among the reference signals corresponding to <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> blocks with the same <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block index and the same physical layer cell identity. This means that all beams applied within a cell and their individual beam power measurements correspond to the cell-specific measurements used in previous cellular technologies. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-018__Differences_between_sectorized_eNB.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-18 &lt;\/span&gt;Differences between sectorized eNB and SSB-beamformed sectorized gNB cells.&quot;}]">Fig. 1-18</a> illustrates the difference. The left side shows a three-sector cell in LTE with cell-specific reference signals in each sector, which would allow power measurements per sector. The right shows a 5G NR example that implements <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> beams to cover the whole cell area, whereas power measurements are possible on a per beam basis. All <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> beams belong to the same cell.</p>


<a id="page_1018_c559"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:31%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-018__Differences_between_sectorized_eNB_19dc6f9a44.png" width="800" height="246" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-18 </span>Differences between sectorized eNB and SSB-beamformed sectorized gNB cells.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1018_c560"></a><p>The UE measurements to execute and report are defined in <span class="eh-hint" title="3GPP TS 38.215: NR; Physical layer measurements" lang="en"><span class="eh-tooltip" title="3GPP TS 38.215: NR; Physical layer measurements">TS 38.215</span></span>. For <span class="eh-text--nowrap">SS/PBCH</span> blocks, there are essentially three measurements: synchronization signal reference signal received power (SS-RSRP), synchronization signal signal to interference and noise ratio (SS-SINR) and synchronization signal reference signal received quality (SS-RSRQ). Note that these are based on resource elements carrying secondary synchronization signals only. The definition follows the same principle as for cell-specific power, <abbr class="eh-abbreviation" title="Signal-to-interference-plus-noise ratio" lang="en"><span class="eh-tooltip" title="Signal-to-interference-plus-noise ratio">SINR</span></abbr> and quality measurements in existing cellular networks such as LTE.</p><p><abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> are scheduled by the network to serve a specific purpose. One purpose is enabling measurement on multiple carrier frequencies of neighbor cells. Secondly, <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> can be scheduled to enable UE-specific beamforming. Both mechanisms are used in the same way as in LTE networks. A detailed description is provided in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1035" class="eh-link eh-link--page">1.2.5.6 Physical signals in 5G NR, page 110</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1082" class="eh-link eh-link--page">2.2.9 Uplink control information (UCI), page 340</a>. The measurements to be executed are defined in <span class="eh-hint" title="3GPP TS 38.215: NR; Physical layer measurements" lang="en"><span class="eh-tooltip" title="3GPP TS 38.215: NR; Physical layer measurements">TS 38.215</span></span>.</p><p>As mentioned before, even in TDD systems the base station cannot necessarily rely on its own receiver measurements for evaluation of propagation conditions. The network may schedule sounding reference signals (<abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr>) to gain propagation information in time and frequency ranges for potential use. The concept is the same as in LTE. For a more detailed description, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1035" class="eh-link eh-link--page">1.2.5.6 Physical signals in 5G NR, page 110</a>. Therefore, the base station can take these measurements into account for resource allocation.</p><p>The measurements discussed above play a key role during initial access, while setting up a connection and when maintaining the connection if mobility is involved. The procedure for measuring and evaluating suitable cells and beams during initial access in the <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr> case is described in detail in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1066" class="eh-link eh-link--page">2.1.2 5G NR signal quality measurements and reporting, page 237</a>. Measurements in case of mobility are described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1095" class="eh-link eh-link--page">2.3.3 Mobility measurement, page 401</a>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1019" data-prevpid="1018" data-nextpid="1020" data-chapter="1.1.4 Non-access stratum protocol" id="page_1019">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.1.4 Non-access stratum protocol</h3>
						
<a id="page_1019_c561"></a><p>The non-access stratum (<abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr>) describes the protocol layers for 5G mobility management (5G-MM) between the UE and the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> as well as for 5G session management (5G-SM) between the UE and the <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr>. </p><p>5G mobility management describes procedures for the control of mobility when the UE is using NG-RAN and/or a non-3GPP access network. Typical procedures for 5G-MM include:</p><ul class="eh-list eh-list--line"><li><strong>Registration procedure:</strong> <abbr class="eh-abbreviation" title="5G mobility management" lang="en"><span class="eh-tooltip" title="5G mobility management">5GMM</span></abbr> distinguishes between the two major states 5GMM-REGISTERED and 5GMM-DEREGISTERED (additional states are defined in <span class="eh-hint" title="3GPP TS 24.501: Non-Access-Stratum (NAS) protocol for 5G system (5GS); Stage 3" lang="en"><span class="eh-tooltip" title="3GPP TS 24.501: Non-Access-Stratum (NAS) protocol for 5G system (5GS); Stage 3">TS 24.501</span></span>). The main purpose of the registration procedure is to update the network with the UE’s whereabouts, to negotiate the services and update the UE about its allowed services. It is triggered by the <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> control message REGISTRATION REQUEST and completed by the network response REGISTRATION ACCEPT in the successful case.</li><li><strong>Deregistration procedure:</strong> This procedure can be initiated by either the UE or the network to perform de-registration from the 5G services.</li><li><strong>Primary authentication and key agreement procedure:</strong> The purpose of the primary authentication and key agreement procedure is to enable mutual authentication between the UE and the network by using <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> control messages for authentication and to exchange security keys that can be used between the UE and network in subsequent security procedures such as integrity protection and/or ciphering</li><li><strong>Identification procedures:</strong> These procedures are initiated by the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> by sending the IDENTITY REQUEST message to request UE identification values such as SUCI or <abbr class="eh-abbreviation" title="International mobile equipment identity" lang="en"><span class="eh-tooltip" title="International mobile equipment identity">IMEI</span></abbr>.</li><li><strong>Service request procedure: </strong>The main purpose is to change the <abbr class="eh-abbreviation" title="5G mobility management" lang="en"><span class="eh-tooltip" title="5G mobility management">5GMM</span></abbr> mode from 5GMM-IDLE to 5GMM-CONNECTED and establish user plane resources.</li><li><strong>Mobility procedures:</strong> These procedures support both 3GPP access as well as non-3GPP access and are essential for UE mobility. A registration area is defined as a set of tracking areas that a UE is registered to. Each tracking area corresponds to a non-overlapping set of cells covering a geographical area.</li><li><strong>Notification procedure:</strong> This is used to ask the UE to re-establish the user plane resources for the <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session.</li><li><strong>Paging procedure:</strong> This is triggered by the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> to establish a mobile terminated connection. The paging procedure in cooperation with the access stratum establishes a <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> signaling connection between the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> and the UE.</li></ul><p>5G mobility management provides security control for the <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> protocols. Aspects related to security in 5G include procedures for authentication, integrity protection and ciphering. Authentication is based on a key-exchange procedure between the UE and <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> and thus realizes a method to avoid user identity fraud. Integrity protection requires an initially established security context and protects the <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> control message. It is activated by the network to protect <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> message transfer with a key procedure and prevent “man-in-the-middle” attacks that could take control of the connection.</p><p>Ciphering is applied to both user data as well as control messages and is based on a security context exchange of keys between the UE and the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>. The goal is to avoid eavesdropping of ongoing connections (and especially the radio connections since they are susceptible to interception).</p><p>5G session management provides procedures for handling of <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> sessions such as <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> address allocation, domain name resolution and proxy server allocations. In conjunction with the access stratum and <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr>, it controls the radio bearer <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr>. Typically, 5G session management messages are piggybacked on specific 5G mobility management messages. In terms of the preferences, the UE usage settings can be either “voice centric” or “data centric”.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1020" data-prevpid="1019" data-nextpid="1021" data-chapter="1.1.5 Quality of service" id="page_1020">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.1.5 Quality of service</h3>
						
<a id="page_1020_c562"></a><p>The 5G <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> model is based on <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows and thus involves a minor difference compared to LTE where the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> parameters are negotiated by means of a so-called traffic flow template. The main idea is that an E2E data connection (known as a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session) conveys multiple <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows where each flow is accompanied by mechanisms such as packet labeling and bearer mapping.</p><p>A <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow of this type can be considered as granularity for <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> forwarding treatment in the overall 5G system. All traffic that is mapped to the same <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow will receive the same forwarding treatment, e.g. the scheduling policy, queue management, prioritization, rate allocation policy and protocol layer configuration such as the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> transmission mode selection or transport channel mapping, etc. In case different <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> treatments are required, this results in a need for separate <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows.</p><p>The <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> architecture in NG-RAN, both for NR connected to <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> and for EUTRA connected to <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr>, is depicted in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-019__QoS_Flow.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-19 &lt;\/span&gt;QoS flow architecture from 3GPP TS 38.300.&quot;}]">Fig. 1-19</a>. For each UE, <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> establishes one or more <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> sessions; a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session should be understood as the connectivity service that facilitates the exchange of protocol data units (<abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>) between a UE and a data network. An example of a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session is an <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session supporting both IPv4 and IPv6.</p>


<a id="page_1020_c563"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:65%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-019__QoS_Flow_1aae23ee14.png" width="800" height="514" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-19 </span><abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow architecture from 3GPP <span class="eh-hint" title="3GPP TS 38.300: NR; Overall description; Stage-2" lang="en"><span class="eh-tooltip" title="3GPP TS 38.300: NR; Overall description; Stage-2">TS 38.300</span></span>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1020_c564"></a><p>At the <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> level (N3), the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow is thus the finest granularity for <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> differentiation in a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session. A <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow is identified within a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session by a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow ID (<abbr class="eh-abbreviation" title="QoS flow ID" lang="en"><span class="eh-tooltip" title="QoS flow ID">QFI</span></abbr>) that is carried in an encapsulation header over the NG-U interface, i.e. the interface between the gNB and the <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr>. At the <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> level, packet filters in the UE and the <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> associate UL and DL packets with <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows; this is considered as a labeling procedure to ensure proper <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> transport through the overall protocol layers and interfaces.</p><p>The NG-RAN establishes for each UE at least one data radio bearer (<abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>) (default bearer) and additional <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>(s) depending on the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow(s) established on the network and the scheduling decisions by the network. For transport over the air interface, there is an AS-level mapping rule in the UE and in the NG-RAN which associates UL and DL <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows with DRBs. Via the <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> protocol layer on the <abbr class="eh-abbreviation" title="Either NR NodeB or EUTRA NodeB" lang="en"><span class="eh-tooltip" title="Either NR NodeB or EUTRA NodeB">xNB</span></abbr>, the NG-RAN maps a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow belonging to same <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> sessions to the same or different DRBs (<span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span>).</p><p>5G NR supports both <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows that require a guaranteed flow bit rate (<abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr> <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows) and <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows that do not require a guaranteed flow bit rate (non-GBR <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows). In addition, there is support for reflective <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr>, meaning that the UE will use the same <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> parameters on the uplink as obtained from the downlink <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1021" data-prevpid="1020" data-nextpid="1022" data-chapter="1.1.6 Network slicing" id="page_1021">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.1.6 Network slicing</h3>
						
<a id="page_1021_c565"></a><p>In 5G, the core network has gone through a transformation. It is designed to cater to various services such as mobile broadband, vehicle to vehicle, machine-type communications, smart home/city and Internet of things (IoT). Designing a network that provides services with highly variable requirements leads to an architecture that can provide different logical networks by reusing the available hardware.</p><p>The concept of having different logical networks using shared hardware is known as network slicing and each logical network is known as a network slice. An end user can register with one or more network slices depending upon the particular requirements and subscription options.</p><p>A network slice is defined within a <abbr class="eh-abbreviation" title="Public land mobile network" lang="en"><span class="eh-tooltip" title="Public land mobile network">PLMN</span></abbr> and includes the control plane and user plane network functions (<abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> and <abbr class="eh-abbreviation" title="User plane" lang="en"><span class="eh-tooltip" title="User plane">UP</span></abbr> <abbr class="eh-abbreviation" title="Network function" lang="en"><span class="eh-tooltip" title="Network function">NF</span></abbr>) and in the serving <abbr class="eh-abbreviation" title="Public land mobile network" lang="en"><span class="eh-tooltip" title="Public land mobile network">PLMN</span></abbr>, at least one of the following:</p><ul class="eh-list eh-list--line"><li>NG radio access network</li><li>Non-3GPP interworking functions (<abbr class="eh-abbreviation" title="Non-3GPP interworking functions" lang="en"><span class="eh-tooltip" title="Non-3GPP interworking functions">N3IWF</span></abbr>) to the non-3GPP access network (e.g. for WLAN access, which is not shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-020__Network_slicing_architecture.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-20 &lt;\/span&gt;Control plane interfaces for network slicing (from TR 23.799).&quot;}]">Fig. 1-20</a>)</li></ul><p>A logical representation of a network slice is shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-020__Network_slicing_architecture.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-20 &lt;\/span&gt;Control plane interfaces for network slicing (from TR 23.799).&quot;}]">Fig. 1-20</a>.</p>


<a id="page_1021_c566"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:73%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-020__Network_slicing_architecture_c55d259214.png" width="800" height="580" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-20 </span>Control plane interfaces for network slicing (from <span class="eh-hint" title="3GPP TR 23.799: Study on Architecture for Next Generation System" lang="en"><span class="eh-tooltip" title="3GPP TR 23.799: Study on Architecture for Next Generation System">TR 23.799</span></span>).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1021_c567"></a><p>There are three types of standard slices that are defined according to the following <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1021_c568\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table002\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Slice \/ Service type (SST)&lt;\/th&gt;&lt;th&gt;SST value&lt;\/th&gt;&lt;th&gt;Characteristics&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;eMBB&lt;strong&gt; (enhanced mobile broadband)&lt;\/strong&gt;\n&amp;nbsp;&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;Slice suitable for the handling of 5G enhanced Mobile broadband, but not limited to the general consumer space mobile broadband applications including streaming of high quality video, fast large file transfers etc. It is expected this SST will aim at supporting High data rates and high traffic densities as outlined in Table 7.1-1 \u201cPerformance requirements for high data rate and traffic density scenarios\u201d in TS 22.261 [2].&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;URLLC&lt;strong&gt; (ultra-reliable low latency communications)&lt;\/strong&gt;\n&amp;nbsp;&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;Supporting ultra-reliable low latency communications for applications including industrial automation, (remote) control systems.&lt;br&gt;\n\t\t\t\t\t\t\tThis SST is expected to aim at supporting the requirements in Table 7.2.2-1 \u201cPerformance requirements for low-latency and high-reliability services.\u201d in TS 22.261 [2] related to high reliability and low latency scenarios.&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;MIoT&lt;strong&gt; (massive IoT)&lt;\/strong&gt;\n&amp;nbsp;&lt;\/td&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;Allowing the support of a large number and high density of IoT devices efficiently and cost effectively.&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-21 &lt;\/span&gt;Standardized slice\/service types (from TS 23.501, Table 5.15.2.2-1).&lt;\/p&gt;\n\n&quot;}">Fig. 1-21</a>. Each slice could possibly be connected to service providers via APIs to allow the implementation of various commercial services.</p>


<a id="page_1021_c568"></a><div class="table-scroll"><table id="table002" class="eh-table eh-table--alternate"><colgroup><col><col><col></colgroup><thead><tr><th>Slice / Service type (SST)</th><th>SST value</th><th>Characteristics</th></tr></thead><tbody><tr><td>eMBB<strong> (enhanced mobile broadband)</strong>
&nbsp;</td><td>1</td><td>Slice suitable for the handling of 5G enhanced Mobile broadband, but not limited to the general consumer space mobile broadband applications including streaming of high quality video, fast large file transfers etc. It is expected this SST will aim at supporting High data rates and high traffic densities as outlined in Table 7.1-1 “Performance requirements for high data rate and traffic density scenarios” in TS 22.261 [2].</td></tr><tr><td>URLLC<strong> (ultra-reliable low latency communications)</strong>
&nbsp;</td><td>2</td><td>Supporting ultra-reliable low latency communications for applications including industrial automation, (remote) control systems.<br>
							This SST is expected to aim at supporting the requirements in Table 7.2.2-1 “Performance requirements for low-latency and high-reliability services.” in TS 22.261 [2] related to high reliability and low latency scenarios.</td></tr><tr><td>MIoT<strong> (massive IoT)</strong>
&nbsp;</td><td>3</td><td>Allowing the support of a large number and high density of IoT devices efficiently and cost effectively.</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-21 </span>Standardized slice/service types (from <span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span>, Table 5.15.2.2-1).</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1022" data-prevpid="1021" data-nextpid="1023" data-chapter="1.1.7 Security architecture" id="page_1022">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.1.7 Security architecture</h3>
						
<a id="page_1022_c569"></a><p>Security is an important topic in 5G due to the increasing number of laws on private data protection as well as new and critical applications and verticals, such as industrial automation and autonomous driving.</p>


<a id="page_1022_c570"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:54%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-022__SecurityServiceUserNetwork_be22574286.png" width="800" height="428" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-22 </span>5G security for the user, service and network.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1022_c571"></a><p>Security is also relevant in mobility scenarios with the refreshing of security parameters and during long data transmissions where the security keys must not be reused.</p><p>In 5G, security is achieved using two mechanisms: mutual authentication and data ciphering/integrity. Mutual authentication means that the network and UE can each verify the identity of the counterpart. With ciphering, transmitted data is encrypted using a shared key between the user and network. With integrity, a checksum is added to the data message to guarantee the accuracy and validity of the data.</p><p>Moreover, 5G implements the concept of key separation in which each connection (i.e. user plane or control plane) always uses distinct keys derived from one master key. </p><p>Data security is based on a shared key (K) which is agreed between a UE/<abbr class="eh-abbreviation" title="UMTS subscriber identity module" lang="en"><span class="eh-tooltip" title="UMTS subscriber identity module">USIM</span></abbr> and <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr>. Several keys are generated from the shared keys depending on the security algorithm and association. The 5G integrity and encryption mechanism supports different algorithms with a 128-bit key length as specified in Annex D of <span class="eh-hint" title="3GPP TS 33.501: Security architecture and procedures for 5G system" lang="en"><span class="eh-tooltip" title="3GPP TS 33.501: Security architecture and procedures for 5G system">TS 33.501</span></span>. The keys used for <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> and <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> as well as for <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> and <abbr class="eh-abbreviation" title="User plane" lang="en"><span class="eh-tooltip" title="User plane">UP</span></abbr> depend on the algorithm with which they are used.</p><p>The 5G system includes several components that are interconnected to increase the security encapsulation as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-023__SecurityArchitecture_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-23 &lt;\/span&gt;5GC security functions.&quot;}]">Fig. 1-23</a>.</p>


<a id="page_1022_c572"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:54%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-023__SecurityArchitecture_v4_5545a1471b.png" width="800" height="431" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-23 </span><abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> security functions.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1022_c573"></a><p>There are security associations on the access stratum (<abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr>) layer between the UE and the gNB that are intended to secure both the user data (<abbr class="eh-abbreviation" title="User plane" lang="en"><span class="eh-tooltip" title="User plane">UP</span></abbr>) and control data (<abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr>) with integrity and encryption. Another security association is on the non-access stratum (<abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr>) level where the integrity and ciphering algorithms are applied to control plane (<abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr>) data and the authentication process occurs. </p><p>The security anchor function (<abbr class="eh-abbreviation" title="Security anchor function" lang="en"><span class="eh-tooltip" title="Security anchor function">SEAF</span></abbr>) provides an interface to the authentication functionality within the 5G System. <abbr class="eh-abbreviation" title="Security anchor function" lang="en"><span class="eh-tooltip" title="Security anchor function">SEAF</span></abbr> is collocated inside the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>. The authentication server function (<abbr class="eh-abbreviation" title="Authentication server function" lang="en"><span class="eh-tooltip" title="Authentication server function">AUSF</span></abbr>) must handle authentication requests for both 3GPP access and non-3GPP access and has an interface to the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> via <abbr class="eh-abbreviation" title="Security anchor function" lang="en"><span class="eh-tooltip" title="Security anchor function">SEAF</span></abbr>.</p><p>The unified data management (<abbr class="eh-abbreviation" title="Unified data management " lang="en"><span class="eh-tooltip" title="Unified data management ">UDM</span></abbr>) and authentication credential repository and processing function (<abbr class="eh-abbreviation" title="Authentication credential repository and processing function" lang="en"><span class="eh-tooltip" title="Authentication credential repository and processing function">ARPF</span></abbr>) contain the set of values (like in the UE/<abbr class="eh-abbreviation" title="UMTS subscriber identity module" lang="en"><span class="eh-tooltip" title="UMTS subscriber identity module">USIM</span></abbr>) consisting of at least the long-term key(s) and the subscription permanent identifier (<abbr class="eh-abbreviation" title="Subscription permanent identifier" lang="en"><span class="eh-tooltip" title="Subscription permanent identifier">SUPI</span></abbr>), used to uniquely identify a subscription and to mutually authenticate the UE and 5G core network (generation of authentication credentials).</p><p>The long-term keys used for authentication and security association setup purposes must be protected against physical attacks and must never leave the secure environment of the <abbr class="eh-abbreviation" title="Authentication credential repository and processing function" lang="en"><span class="eh-tooltip" title="Authentication credential repository and processing function">ARPF</span></abbr>/<abbr class="eh-abbreviation" title="Unified data management " lang="en"><span class="eh-tooltip" title="Unified data management ">UDM</span></abbr>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1023" data-prevpid="1022" data-nextpid="1024" data-chapter="1.2 Physical access fundamentals" id="page_1023">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h2>1.2 Physical access fundamentals</h2>
						
<a id="page_1023_c574"></a><p>As outlined in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1005" class="eh-link eh-link--page">1.1.1 Use cases, requirements and services, page 11</a>, 5G is designed to support a variety of different services. Not only have the end-user data rate and system capacity been further increased, but also the nature of the services has become much more diverse. In order to address the peak data rate and capacity requirements, 5G NR deploys a much higher bandwidth (up to 400 MHz per carrier) compared with 4G. Due to spectrum allocation, high bandwidth is only available at higher absolute frequencies. Consequently, 5G NR is designed for deployment in two main frequency ranges. FR1 comprises spectrum from 410 MHz to 7.125 GHz and FR2 from 24.25 GHz to 52.6 GHz. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-024__FrequencyLandscape_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-24 &lt;\/span&gt;Main frequency bands and corresponding band numbers for the planned global 5G NR deployment.&quot;}]">Fig. 1-24</a> shows the primary spectrum that is intended for 5G NR deployment in different regions across the globe.</p>


<a id="page_1023_c575"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:48%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-024__FrequencyLandscape_v4_8ffdd943ab.png" width="800" height="377" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-24 </span>Main frequency bands and corresponding band numbers for the planned global 5G NR deployment.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1023_c576"></a><p>To address the variable nature of the services, the design of the physical layer must support very high configuration flexibility. Although the waveform is still OFDMA-based as was the case in LTE, there are certain fundamental differences which enable the required flexibility. A key difference compared to existing OFDMA-based access schemes is the introduction of a so-called flexible numerology, i.e. the ability to use a number of different subcarrier spacings (<abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr>). In contrast to a fixed <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> of 15 kHz in LTE, 5G NR allows an <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> of 15 kHz, 30 kHz, 60 kHz, 120 kHz and 240 kHz. This leads to different symbol time durations since the <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> is inversely proportional to the symbol duration. Similarly, the number of symbols in a fixed time duration, e.g. the number of symbols within a 10 ms radio frame, is now variable. This flexible numerology is a key component for enabling a configurable air interface. For more details, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1024" class="eh-link eh-link--page">1.2.1 Flexible numerology, page 48</a>.</p><p>The flexibility on the physical layer also requires a more general specification of the resource grid. For example, note that synchronization signals and data channels may use a different <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr>. Furthermore, synchronization signals and broadcast signals are no longer placed in the center of the carrier. This requires the definition of a reference point for allocation of resources in the frequency domain. The definition of the resource grid and the impact on the frame structure are outlined in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1026" class="eh-link eh-link--page">1.2.2 Resource grid, page 56</a>, and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1027" class="eh-link eh-link--page">1.2.3 Frame structure, page 61</a>.</p><p>5G enables both FDD and TDD duplex schemes. Throughout the past generations (2G to 4G), FDD has been the dominant duplex scheme among the globally deployed networks.</p><p>FDD separates the DL and UL transmission in the frequency, i.e. different frequency bands are allocated for each direction. TDD separates DL and UL transmission in the time domain, i.e. different time slots within a radio frame are allocated for each direction (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-025__Basics_FDD_TDD.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-25 &lt;\/span&gt;Principles of FDD and TDD duplex schemes.&quot;}]">Fig. 1-25</a>).</p>


<a id="page_1023_c577"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:50%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-025__Basics_FDD_TDD_eb1399c0a0.png" width="800" height="396" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-25 </span>Principles of FDD and TDD duplex schemes.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1023_c578"></a><p>Following the introduction of LTE TDD (TD-LTE) accompanied by its major commercial deployment primarily in China, the TDD duplex scheme gained importance. TDD has certain advantages since asymmetric use of the spectrum is possible and only a single frequency band must be available. In addition, there is no need for a duplex distance between the downlink and uplink frequency bands like in FDD. The disadvantages include time synchronization of cells (avoiding overlapping with simultaneous transmission and reception), guard periods for <span class="eh-text--nowrap">DL/UL</span> switching points and more complex scheduling (the DL/UL direction of slots must be taken into account). There is one further major advantage: the reciprocity of the propagation channel on the downlink and uplink for TDD systems. The base station is able to use channel knowledge from uplink measurements for downlink transmission, which in particular favors the use of beamforming. Therefore, the main deployment of 5G systems is expected to be TDD, especially for deployments in the centimeter and millimeter wave spectrum. For more details, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1028" class="eh-link eh-link--page">1.2.4 Duplexing schemes, page 66</a>.</p><p>The 5G NR physical layer is to a great extent similar to 4G. The shared channel principle is maintained, i.e. a common channel is shared by multiple UEs, whereas a control channel indicates which part of the shared channel is allocated to a specific UE. Spatial multiplexing, i.e. <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> schemes, allows up to eight spatial layers to be applied in the downlink and uplink direction. A broadcast channel provides initial information to access the network and a random access channel on the uplink allows the UE to request a data connection. Differences compared with 4G include adoption of polar coding for the control channels and <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> coding for the data channels. Furthermore, the reference symbol allocation is generalized including specific symbols to allow channel estimation and channel state reporting and to support beamforming. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1029" class="eh-link eh-link--page">1.2.5 General description of the physical layer, page 73</a> for a comprehensive overview.</p><p>For a better understanding of the 5G NR waveform, <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1038" class="eh-link eh-link--page">1.2.6 Brief digression on OFDMA multiple access schemes, page 153</a> gives a brief review of the general aspects of orthogonal frequency division multiplexing (OFDM) and orthogonal frequency division multiple access (OFDMA). This section outlines the basic properties of OFDM technology and explains the difference between OFDMA and <abbr class="eh-abbreviation" title="Discrete Fourier transform-spread-orthogonal frequency division multiplexing" lang="en"><span class="eh-tooltip" title="Discrete Fourier transform-spread-orthogonal frequency division multiplexing">DFT-s-OFDM</span></abbr> signal generation. Both are already known from 4G.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1024" data-prevpid="1023" data-nextpid="1025" data-chapter="1.2.1 Flexible numerology" id="page_1024">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.2.1 Flexible numerology</h3>
						
<a id="page_1024_c579"></a><p>5G NR as described in 3GPP Release 15 addresses the enhanced mobile broadband (<abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr>), ultra-reliable low-latency communications (<abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr>) and massive machine-type communications (<abbr class="eh-abbreviation" title="Massive machine type communications" lang="en"><span class="eh-tooltip" title="Massive machine type communications">mMTC</span></abbr>) key scenarios from the IMT2020 vision. These new services impose different and partly contradictory demands on the radio interface. This is reflected in the high degree of freedom and flexibility for the setup of 5G NR waveforms.</p><p>To serve the three key NR scenarios <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr>, <abbr class="eh-abbreviation" title="Massive machine type communications" lang="en"><span class="eh-tooltip" title="Massive machine type communications">mMTC</span></abbr> and <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr>, a flexible radio scheme is required. The essential NR technology components include new spectrum, for example, in the ≈3.5 GHz and ≈28 GHz or 39 GHz frequency range, massive <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> and beamforming, multi-connectivity and high flexibility on the physical layer.</p><p>The 5G NR physical layer is described by the 3GPP TS 38.2xx series and the RF test specifications for UEs and base stations (BS) are found in TS 38.1xx.</p><p>Since the very beginning of 5G NR research activities, one major technological aspect has been the subject of endless discussion: the question of the most suitable waveform for 5G NR. Not to disappoint you, but there is no answer to the question of the “perfect” waveform. Several candidate waveforms have been discussed and evaluated, including filtered bank multicarrier (FBMC), generalized frequency division multiplexing (GFDM), universal frequency multicarrier (UFMC) and filter or flexible OFDM (F-OFDM).</p><p>F-OFDM is a concept that has been discussed within the standardization bodies and which has lead to the definition of the 3GPP 5G NR waveform using multiple numerologies. What is the basic concept behind F-OFDM? In accordance with the description of OFDMA in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1038" class="eh-link eh-link--page">1.2.6 Brief digression on OFDMA multiple access schemes, page 153</a>, we can roughly identify the basic parameters that shape the actual waveform: the subcarrier spacing, the symbol duration and the cyclic prefix overhead.</p><ul class="eh-list eh-list--line"><li><strong>Subcarrier spacing:</strong> OFDMA is a multicarrier technology and the bandwidth used by one carrier is divided into narrow spectral segments known as subcarriers. The size or bandwidth of a single subcarrier is an essential design parameter known as the subcarrier spacing (<abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr>). Recalling the basics of radio wave propagation, we note that a narrow subcarrier has the advantage of mitigating the frequency selectivity. Frequency selectivity describes the fact that due to multipath propagation, a RF signal is not considered to have constant power over its bandwidth. This has to be corrected and the correction mechanisms involve well known channel equalization techniques. A narrow subcarrier allows us to simplify our view of the frequency selectivity that occurred and perform, for example, a one-tap equalization. On the other hand, depending on the total channel bandwidth, the subcarrier spacing is related to the overall complexity such as the maximum number of subcarriers and has an impact on the maximum FFT size. To maintain this FFT size at a reasonable level, the subcarrier spacing may then have to be widened when requesting a much larger overall bandwidth. It might be worth to mention here that due to wider subcarrier spacing in FR2, phase noise of each subcarrier becomes less of a concern so compensating it is of less importance. </li><li><strong>Symbol duration:</strong> Intersymbol interference (<abbr class="eh-abbreviation" title="Inter-symbol interference" lang="en"><span class="eh-tooltip" title="Inter-symbol interference">ISI</span></abbr>; see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-122__Multipath_propagation_and_intersymbol_interference.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-122 &lt;\/span&gt;Multipath propagation and intersymbol interference (ISI).&quot;}]">Fig. 1-122, page 155</a>) can be mitigated with longer symbol durations; we thus obtain a more robust channel in terms of the time dispersion and also allow larger cell sizes. On the other hand, longer symbol durations shrink the overall data throughput and have a negative effect on the latency. Since the subcarrier spacing is inversely proportional to the symbol duration, the value for the subcarrier spacing also has an impact such that both parameters must be carefully balanced to ensure orthogonality.</li><li>Cyclic prefix<strong>:</strong> The cyclic prefix should compensate for the delay spread (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-122__Multipath_propagation_and_intersymbol_interference.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-122 &lt;\/span&gt;Multipath propagation and intersymbol interference (ISI).&quot;}]">Fig. 1-122, page 155</a>) in multipath propagation scenarios. Proper selection of the cyclic prefix is balanced between the tolerated overhead vs. the expected delay spread on a given radio channel. Considering the variable cell sizes and diverse propagation scenarios that result from the different carrier frequencies that are used, one possible design parameter in a flexible configuration of OFDMA would be the length of the cyclic prefix (<abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr>).</li></ul><p>As a first simplified view of 5G NR, we can now imagine a sort of flexible configuration of the basic OFDMA parameters: subcarrier spacing, symbol duration and cyclic prefix (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-026__F-OFDM_general_idea.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-26 &lt;\/span&gt;General idea behind F-OFDM allowing a degree of flexible parameterization for OFDM.&quot;}]">Fig. 1-26</a>).</p>


<a id="page_1024_c580"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:49%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-026__F-OFDM_general_idea_b9026514e4.png" width="800" height="386" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-26 </span>General idea behind F-OFDM allowing a degree of flexible parameterization for OFDM.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1024_c581"></a><p>As a second aspect of F-OFDM, the general idea of filtering (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-027__Concept_of_subband_specific_filtering_for_5G_NR.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-27 &lt;\/span&gt;Concept of subband-specific filtering for 5G NR.&quot;}]">Fig. 1-27</a>) is presented. As described, the idea is to use several different OFDMA numerologies in the same channel bandwidth. To enable this, the channel bandwidth will be segmented into spectral parts, so called subbands. In order to guarantee proper interoperability, a certain tunable “bandpass filter per subband” concept applies. The general concept of a subband will be further explained with the introduction of various resource grids and bandwidth parts in 5G NR (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1047" class="eh-link eh-link--page">1.4 Bandwidth part fundamentals, page 182</a>).</p>


<a id="page_1024_c582"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:37%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-027__Concept_of_subband_specific_filtering_for_5G_NR_abf95cdd51.png" width="800" height="289" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-27 </span>Concept of subband-specific filtering for 5G NR.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1024_c583"></a><p>The conceptual idea behind making OFDMA as flexible as possible with a different kind of parameterization (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-026__F-OFDM_general_idea.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-26 &lt;\/span&gt;General idea behind F-OFDM allowing a degree of flexible parameterization for OFDM.&quot;}]">Fig. 1-26</a>) has now entered into the standardization process which must guarantee proper interoperability. The result is the 3GPP 5G NR numerology based on <abbr class="eh-abbreviation" title="Cyclic prefix OFDMA" lang="en"><span class="eh-tooltip" title="Cyclic prefix OFDMA">CP-OFDMA</span></abbr>, involving a kind of vertical orientation where one column represents one numerology (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1024_c584\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table003\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Subcarrier spacing (kHz)&lt;\/th&gt;&lt;th&gt;15&lt;\/th&gt;&lt;th&gt;30&lt;\/th&gt;&lt;th&gt;60&lt;\/th&gt;&lt;th&gt;120&lt;\/th&gt;&lt;th&gt;240&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbol duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;66.7&lt;\/td&gt;&lt;td&gt;33.3&lt;\/td&gt;&lt;td&gt;16.7&lt;\/td&gt;&lt;td&gt;8.33&lt;\/td&gt;&lt;td&gt;4.17&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;CP duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4.7&lt;\/td&gt;&lt;td&gt;2.3&lt;\/td&gt;&lt;td&gt;1.2 (normal)&lt;br&gt;4.13 (extended)&lt;\/td&gt;&lt;td&gt;0.59&lt;\/td&gt;&lt;td&gt;0.29&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. nominal bandwidth (MHz)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;50&lt;\/td&gt;&lt;td&gt;100&lt;\/td&gt;&lt;td&gt;100 for FR1&lt;br&gt;200 for FR2&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. FFT size&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbols per slot&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14 &lt;br&gt;12 (extended CP)&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per subframe&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per frame&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;40&lt;\/td&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td&gt;160&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-28&lt;\/span&gt; 3GPP 5G NR numerology based on CP-OFDMA.&lt;\/p&gt;\n\n&quot;}">Fig. 1-28</a>) consisting of the major parameters subcarrier spacing, symbol duration and cyclic prefix length.</p>


<a id="page_1024_c584"></a><div class="table-scroll"><table id="table003" class="eh-table eh-table--alternate"><colgroup><col><col><col><col><col><col></colgroup><thead><tr><th>Subcarrier spacing (kHz)</th><th>15</th><th>30</th><th>60</th><th>120</th><th>240</th></tr></thead><tbody><tr><td><strong>Symbol duration (μs)</strong></td><td>66.7</td><td>33.3</td><td>16.7</td><td>8.33</td><td>4.17</td></tr><tr><td><strong>CP duration (μs)</strong></td><td>4.7</td><td>2.3</td><td>1.2 (normal)<br>4.13 (extended)</td><td>0.59</td><td>0.29</td></tr><tr><td><strong>Max. nominal bandwidth (MHz)</strong></td><td>50</td><td>100</td><td>100 for FR1<br>200 for FR2</td><td>400</td><td>400</td></tr><tr><td><strong>Max. FFT size</strong></td><td>4096</td><td>4096</td><td>4096</td><td>4096</td><td>4096</td></tr><tr><td><strong>Symbols per slot</strong></td><td>14</td><td>14</td><td>14 <br>12 (extended CP)</td><td>14</td><td>14</td></tr><tr><td><strong>Slots per subframe</strong></td><td>1</td><td>2</td><td>4</td><td>8</td><td>16</td></tr><tr><td><strong>Slots per frame</strong></td><td>10</td><td>20</td><td>40</td><td>80</td><td>160</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-28</span> 3GPP 5G NR numerology based on <abbr class="eh-abbreviation" title="Cyclic prefix OFDMA" lang="en"><span class="eh-tooltip" title="Cyclic prefix OFDMA">CP-OFDMA</span></abbr>.</p>


<a id="page_1024_c585"></a><p>To serve the three key NR scenarios <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr>, <abbr class="eh-abbreviation" title="Massive machine type communications" lang="en"><span class="eh-tooltip" title="Massive machine type communications">mMTC</span></abbr> and <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr>, the required flexibility of the radio scheme is now obtained by allowing these numerologies to be applied in the same 5G NR channel. Chapter <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1047" class="eh-link eh-link--page">1.4 Bandwidth part fundamentals, page 182</a> on the concept of bandwidth parts describes this flexibility in more detail.</p><p>5G NR flexibility is needed in the context of the key services <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr>, <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> and <abbr class="eh-abbreviation" title="Massive machine type communications" lang="en"><span class="eh-tooltip" title="Massive machine type communications">mMTC</span></abbr> in order to somehow shape the waveform to the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> requirements of the application as well as to the circumstances dictated by the propagation scenario. Here, it is obvious that some numerologies have a shortened symbol duration, which perfectly fits the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> requirements for <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr>. On the other hand, longer symbol durations and thus narrower subcarrier spacings allow a larger cell size and can combat a long delay spread.</p><p>The question here is how to handle such a need for flexibility? This is achieved based on the flexibility to apply multiple numerologies in the same channel bandwidth and the vertical orientation of the 5G NR numerologies presented (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1024_c584\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table003\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Subcarrier spacing (kHz)&lt;\/th&gt;&lt;th&gt;15&lt;\/th&gt;&lt;th&gt;30&lt;\/th&gt;&lt;th&gt;60&lt;\/th&gt;&lt;th&gt;120&lt;\/th&gt;&lt;th&gt;240&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbol duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;66.7&lt;\/td&gt;&lt;td&gt;33.3&lt;\/td&gt;&lt;td&gt;16.7&lt;\/td&gt;&lt;td&gt;8.33&lt;\/td&gt;&lt;td&gt;4.17&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;CP duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4.7&lt;\/td&gt;&lt;td&gt;2.3&lt;\/td&gt;&lt;td&gt;1.2 (normal)&lt;br&gt;4.13 (extended)&lt;\/td&gt;&lt;td&gt;0.59&lt;\/td&gt;&lt;td&gt;0.29&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. nominal bandwidth (MHz)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;50&lt;\/td&gt;&lt;td&gt;100&lt;\/td&gt;&lt;td&gt;100 for FR1&lt;br&gt;200 for FR2&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. FFT size&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbols per slot&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14 &lt;br&gt;12 (extended CP)&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per subframe&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per frame&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;40&lt;\/td&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td&gt;160&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-28&lt;\/span&gt; 3GPP 5G NR numerology based on CP-OFDMA.&lt;\/p&gt;\n\n&quot;}">Fig. 1-28</a>), but allowing a kind of dynamic switching between these vertical columns (see the basic idea behind the bandwidth parts in the figure <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-029__5G_NR_numerologies_used_simultaneously.....png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-29 &lt;\/span&gt;5G NR numerologies used simultaneously via bandwidth parts.&quot;}]">Fig. 1-29</a>).</p>


<a id="page_1024_c586"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:61%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-029__5G_NR_numerologies_used_simultaneously...._b54ab81096.png" width="800" height="486" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-29 </span>5G NR numerologies used simultaneously via bandwidth parts.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1024_c587"></a><p>The nominal channel bandwidth per frequency band can be segmented into smaller subbands known as resource grids or bandwidth parts (<abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>). A <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> applies one of the 5G NR numerologies. Following the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> request from various application scenarios, a 5G NR scheduling scheme in a connection can now take advantage of these numerologies by dynamically applying the most suitable 5G NR numerology and thus providing the required physical layer flexibility.</p><p>Secondly, there is the possibility for 5G NR deployed in various frequency bands, ranging from the lower bands sub 6 GHz in the hundreds of MHz up into the millimeter waves beyond 50 GHz in the future. Such a vast deployment must conform to the characteristics of the physical layer such as maximum bandwidth, free space path loss, multipath propagation and propagation attenuation due to foliage, ground and building materials.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1025" data-prevpid="1024" data-nextpid="1026" data-chapter="1.2.1.1 Motivational aspects behind wider subcarrier spacing" id="page_1025">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.2.1.1 Motivational aspects behind wider subcarrier spacing</h4>
						
<a id="page_1025_c588"></a><p>The various 5G NR numerologies allow the use of subcarriers that are much more widely spaced (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1024_c584\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table003\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Subcarrier spacing (kHz)&lt;\/th&gt;&lt;th&gt;15&lt;\/th&gt;&lt;th&gt;30&lt;\/th&gt;&lt;th&gt;60&lt;\/th&gt;&lt;th&gt;120&lt;\/th&gt;&lt;th&gt;240&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbol duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;66.7&lt;\/td&gt;&lt;td&gt;33.3&lt;\/td&gt;&lt;td&gt;16.7&lt;\/td&gt;&lt;td&gt;8.33&lt;\/td&gt;&lt;td&gt;4.17&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;CP duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4.7&lt;\/td&gt;&lt;td&gt;2.3&lt;\/td&gt;&lt;td&gt;1.2 (normal)&lt;br&gt;4.13 (extended)&lt;\/td&gt;&lt;td&gt;0.59&lt;\/td&gt;&lt;td&gt;0.29&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. nominal bandwidth (MHz)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;50&lt;\/td&gt;&lt;td&gt;100&lt;\/td&gt;&lt;td&gt;100 for FR1&lt;br&gt;200 for FR2&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. FFT size&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbols per slot&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14 &lt;br&gt;12 (extended CP)&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per subframe&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per frame&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;40&lt;\/td&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td&gt;160&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-28&lt;\/span&gt; 3GPP 5G NR numerology based on CP-OFDMA.&lt;\/p&gt;\n\n&quot;}">Fig. 1-28</a>). This section presents a motivation for such wider <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr>. </p><p>One reason is of course the complexity, e.g. 5G NR uses a nominal maximum channel bandwidth in FR1 of 100 MHz and in FR2 of 400 MHz, including the possibility of carrier aggregation of up to 16 carriers. A larger channel bandwidth implies a greater number of subcarriers and thus an increased FFT size. Widening the subcarriers would allow us to use a larger bandwidth by reducing the absolute number of subcarriers and therefore confine the FFT size with a feasible limit. In addition, the larger subcarrier spacing allows the definition of shorter symbol durations to cope with the requirements for lower latency in <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr>. The effect on the ability to analyze the radio signal affected by the well known Doppler shift, causing a carrier frequency offset due to mobility of the transmitter and/or receiver, can be mitigated by using wider subcarrier spacings, especially in higher frequency ranges.</p><p>Another issue that occurs at higher frequencies involves the impact of phase noise. A concise reference is available with further background information in  <span class="eh-reference" title="R. Minihold, R. Wagner, Wideband mm-wave signal generation and analysis, application note 1MA257, Rohde &amp; Schwarz, 2017" lang="en"><span class="eh-tooltip" title="R. Minihold, R. Wagner, Wideband mm-wave signal generation and analysis, application note 1MA257, Rohde &amp; Schwarz, 2017">[Ref. 23]</span></span>. A mixer is used to combine two signals from two inputs. First input is the modulated signal at an intermediate frequency <em>f</em><sub>IF</sub> and the second input is a carrier frequency <em>f</em><sub>LO</sub> that is typically multiplied before attaining the desired frequency range. The resulting frequency consists not only of the desired up-converted carrier frequency but also intermodulation products. Removal techniques for those unwanted intermodulation signals may require additional iterations of mixing, filtering and amplification stages. </p><p>In the ideal case, the local oscillator frequency <em>f</em><sub>LO</sub> would be in the form of a perfect <abbr class="eh-abbreviation" title="Continuous wave" lang="en"><span class="eh-tooltip" title="Continuous wave">CW</span></abbr> wave. Unfortunately in reality, the LO frequency has some phase noise. By using a multiplier as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-030__Principal_of_signal_upconversion__see_1MA257_for_more_details_.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-30 &lt;\/span&gt;Basic principle of signal up-conversion (see [Ref. 23] for more details).&lt;br&gt;&quot;}]">Fig. 1-30</a>, we can understand the behavior of the mixer as a sort of amplification. The phase noise and other negative effects such as: spurious emissions, I/Q offset, <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> leakage etc. get amplified and may impact the overall modulation quality and it’s performance (EVM). For the sake of simplicity, we can imagine that the major challenge for higher frequency signal generation is not the frequency itself but rather the generation of an RF signal with excellent characteristics for parameters such as the phase noise, spurious emissions, I/Q offset, <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> leakage, power flatness, etc. that contribute to the overall EVM performance.</p><p>As a possible consequence of phase noise on the signal performance, <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-031__Effect_of_phase_noise.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-31 &lt;\/span&gt;EVM degradation as a result of phase noise (example 16QAM).&quot;}]">Fig. 1-31</a> illustrates the modulation quality degradation shown as the error vector magnitude (EVM) degradation.</p>


<a id="page_1025_c589"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:28%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-030__Principal_of_signal_upconversion__see_1MA257_for_more_details__268996acf5.png" width="800" height="219" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-30 </span>Basic principle of signal up-conversion (see <span class="eh-reference" title="R. Minihold, R. Wagner, Wideband mm-wave signal generation and analysis, application note 1MA257, Rohde &amp; Schwarz, 2017" lang="en"><span class="eh-tooltip" title="R. Minihold, R. Wagner, Wideband mm-wave signal generation and analysis, application note 1MA257, Rohde &amp; Schwarz, 2017">[Ref. 23]</span></span> for more details).<br></figcaption></figure></div></div></div></div></div></div>


<a id="page_1025_c590"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:35%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-031__Effect_of_phase_noise_1aeaed63fe.png" width="800" height="273" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-31 </span>EVM degradation as a result of phase noise (example 16QAM).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1025_c591"></a><p>Using a mathematical approach, we can now understand the general equation for a receiver including the channel impact (<em>r</em> = s ∙ <em>H</em> + <em>w</em>) in a more complex manner, with <em>r</em> being the received signal, <em>s</em> the sent signal, <em>H</em> the channel transfer function and w the added noise (see figure <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-032__Phase_noise_formular.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-32 &lt;\/span&gt;Receiver signal showing the more complex channel transfer function with the phase noise impact.&quot;}]">Fig. 1-32</a>).</p>


<a id="page_1025_c592"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:679px;"><div class="book-img-wrap__inner" style="padding-bottom:95%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/1-032__Phase_noise_formular.png" width="679" height="645" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-32 </span>Receiver signal showing the more complex channel transfer function with the phase noise impact.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1025_c593"></a><p>Now, the relevant question is how to combat the effect of phase noise? Using a mathematical model, we can describe the received waveform as a compound signal based on the original signal that is affected not only by white Gaussian noise and the channel transfer function, but also by the impact of phase noise which represents another component to be equalized. Basically, phase noise is caused by noise in the active components and lossy elements which is up-converted to the carrier frequency. Frequency synthesizers generally consist of a reference oscillator (or clock), a voltage-controlled oscillator (<abbr class="eh-abbreviation" title="Voltage controlled oscillator" lang="en"><span class="eh-tooltip" title="Voltage controlled oscillator">VCO</span></abbr>), and a phase-locked loop (<abbr class="eh-abbreviation" title="Phase locked loop" lang="en"><span class="eh-tooltip" title="Phase locked loop">PLL</span></abbr>) with frequency divider, phase frequency detector charge pump, and loop filter <span class="eh-reference" title="Y. Qi, M. Hunukumbure, H. Nam et al., On the phase tracking reference signal PTRS Design for 5G new radio, Samsung electronics R&amp;D institute, 2017" lang="en"><span class="eh-tooltip" title="Y. Qi, M. Hunukumbure, H. Nam et al., On the phase tracking reference signal PTRS Design for 5G new radio, Samsung electronics R&amp;D institute, 2017">[Ref. 25]</span></span>.</p><p>In our traditional telecommunications models, one common idea is to perform channel estimation based on pilot or reference signals and exploit this knowledge for the equalization stage. Due to the more severe impact of phase noise, there is another component in our mathematical description, to be dealt with. One question is whether the existing reference signals such as the demodulation reference signals or channel status information signals are sufficient? In 3GPP, a common understanding of this issue resulted in the definition of a new kind of reference signal, the so-called phase tracking reference signal (<abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr>) which is defined in <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span> and discussed in chapter <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1035" class="eh-link eh-link--page">1.2.5.6 Physical signals in 5G NR, page 110</a>.</p><p>In addition to the definition and usage of specific reference signals to compensate for the impact of phase noise, the definition of the subcarrier spacing also has a significant influence. In 3GPP R1-165177 <span class="eh-reference" title="3GPP R1-165177, see www.3gpp.org, NTTDoCoMo, View on 5G NR numerologies, 3GPP meeting #85, May 2016" lang="en"><span class="eh-tooltip" title="3GPP R1-165177, see www.3gpp.org, NTTDoCoMo, View on 5G NR numerologies, 3GPP meeting #85, May 2016">[Ref. 16]</span></span>, the signal-to-noise ratio (<abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr>) vs. the bandwidth of subcarriers has been analyzed on three frequencies as an example (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-033__Evaluation_of__Signal_to_noise_ratio_SNR_versus_subcarrier_spacing.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-33 &lt;\/span&gt;Evaluation of signal-to-noise ratio (SNR) vs. subcarrier spacing.&quot;}]">Fig. 1-33</a>). As a conclusion, it can be seen, that at higher frequencies, the <abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr> degrades due to the additional impact of phase noise. However, making the subcarriers larger can help to mitigate this negative effect.</p><p><span class="eh-hint" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4" lang="en"><span class="eh-tooltip" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4">TS 38.101</span></span> defines subcarrier spacings (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1024_c584\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table003\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Subcarrier spacing (kHz)&lt;\/th&gt;&lt;th&gt;15&lt;\/th&gt;&lt;th&gt;30&lt;\/th&gt;&lt;th&gt;60&lt;\/th&gt;&lt;th&gt;120&lt;\/th&gt;&lt;th&gt;240&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbol duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;66.7&lt;\/td&gt;&lt;td&gt;33.3&lt;\/td&gt;&lt;td&gt;16.7&lt;\/td&gt;&lt;td&gt;8.33&lt;\/td&gt;&lt;td&gt;4.17&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;CP duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4.7&lt;\/td&gt;&lt;td&gt;2.3&lt;\/td&gt;&lt;td&gt;1.2 (normal)&lt;br&gt;4.13 (extended)&lt;\/td&gt;&lt;td&gt;0.59&lt;\/td&gt;&lt;td&gt;0.29&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. nominal bandwidth (MHz)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;50&lt;\/td&gt;&lt;td&gt;100&lt;\/td&gt;&lt;td&gt;100 for FR1&lt;br&gt;200 for FR2&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. FFT size&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbols per slot&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14 &lt;br&gt;12 (extended CP)&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per subframe&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per frame&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;40&lt;\/td&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td&gt;160&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-28&lt;\/span&gt; 3GPP 5G NR numerology based on CP-OFDMA.&lt;\/p&gt;\n\n&quot;}">Fig. 1-28</a>) of 15 kHz, 30 kHz and 60 kHz for frequency range FR1 and 60 kHz and 120 kHz for frequency range FR2, with respect to data transfer.</p>


<a id="page_1025_c594"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:49%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-033__Evaluation_of__Signal_to_noise_ratio_SNR_versus_subcarrier_spacing_0c9a1799cc.png" width="800" height="392" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-33 </span>Evaluation of signal-to-noise ratio (<abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr>) vs. subcarrier spacing.</figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1026" data-prevpid="1025" data-nextpid="1027" data-chapter="1.2.2 Resource grid" id="page_1026">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.2.2 Resource grid</h3>
						
<a id="page_1026_c595"></a><p>5G NR uses physical resources in the time and frequency domain for resource allocation. In the frequency domain, the term resource block was introduced to mean 12 consecutive subcarriers in the frequency domain. Note that this represents a difference compared to EUTRAN where a resource block was defined as 12 subcarriers in the frequency domain and 6 or 7 OFDM symbols, depending on the cyclic prefix length, in the time domain. Unlike EUTRAN, in 5G NR the term resource block is to be understood as a frequency domain indication only. Reason is the flexible allocation of radio resources based on OFDM symbol level only, i.e. mini-slot. This affects the symbol mapping that is performed first for frequency and then for time, enabling early decoding at the receiver, which is especially useful in the context of <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> services. To obtain a two-dimensional definition of resources, the term resource grid was specified. Due to the increased flexibility and the introduction of OFDMA numerologies, <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span> additionally defines the terms physical, common and virtual resource blocks. A common resource block (<abbr class="eh-abbreviation" title="Common resource block" lang="en"><span class="eh-tooltip" title="Common resource block">CRB</span></abbr>) numbers the resource blocks starting from a reference point (Point A) for a fixed numerology or <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr>, respectively. This may be understood as a kind of orientation pointer in the frequency domain for frequency allocations. Note that the <abbr class="eh-abbreviation" title="Common resource block" lang="en"><span class="eh-tooltip" title="Common resource block">CRB</span></abbr> is not used directly for spectrum allocation. It should be thought of as identifying the frequency position since, due to the introduction of various numerologies, parameters such as the <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr> size are no longer constant. The physical resource block (<abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr>) is related to the common resource block definition. It is required in conjunction with the introduction of bandwidth parts, i.e. for frequency domain allocation within bandwidth parts. <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr> was introduced as a parallel resource block index to the <abbr class="eh-abbreviation" title="Common resource block" lang="en"><span class="eh-tooltip" title="Common resource block">CRB</span></abbr>. <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr> follows a numbering index on the overall resource grid which depends on the numerology and being relative to the start of the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>. Using the <abbr class="eh-abbreviation" title="Common resource block" lang="en"><span class="eh-tooltip" title="Common resource block">CRB</span></abbr> and <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr>, it is now possible to indicate the frequency location of a <span class="eh-text--nowrap">UE-specific</span> <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> bandwidth part. Virtual resource blocks (<abbr class="eh-abbreviation" title="Virtual resource block" lang="en"><span class="eh-tooltip" title="Virtual resource block">VRB</span></abbr>), which are already familiar from EUTRAN, allow mapping of virtual to physical resource blocks in a manner that is either frequency-contiguous-localized or distributed, i.e. frequency non-contiguous.</p><p>For each 5G NR numerology and carrier, a resource grid is defined as being the product of the resource grid size specified as the number of resource blocks and the number of OFDMA symbols per subframe, starting at a common resource block indicated by higher layer signaling (see <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-156__Resource_grid__BWP_and_carrier_bandwidth.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-156 &lt;\/span&gt;Resource grid, BWP and carrier bandwidth.&quot;}]">Fig. 1-156, page 188</a> for details). Here, the idea is to divide the overall system bandwidth into multiple resource grids in order to benefit from usage of various 5G NR numerologies. Since the resource grid is defined by parameters such as reference point A, offset to <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>, etc. which are signaled in the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> and <abbr class="eh-abbreviation" title="System information block" lang="en"><span class="eh-tooltip" title="System information block">SIB</span></abbr>, the configuration of such a resource grid can be interpreted as semi-static. To allow much greater flexibility and thus much more dynamic behavior, the possibility of bandwidth parts was introduced. A resource element is defined (like in EUTRAN) as a complex value mapped onto a physical resource indicated by a subcarrier number and OFDM symbol number (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-034__5G_resource_block.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-34 &lt;\/span&gt;5G NR resource block and resource elements.&quot;}]">Fig. 1-34</a>).</p>


<a id="page_1026_c596"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:118%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-034__5G_resource_block_5ee3c17ed8.png" width="800" height="943" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-34 </span>5G NR resource block and resource elements.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1026_c597"></a><p>The overall carrier bandwidth is segmented into different “resource grids”. Each resource grid uses a specific NR numerology, has a frequency starting point indicated by common resource blocks (CRBs) relative to a frequency reference point A, and spans a certain bandwidth indicated as the number of resource blocks. There is one set of resource grids for the uplink and downlink respectively, but there is only one resource grid for a given antenna port p, subcarrier spacing u and transmit direction UL or DL. The following paragraph considers the relationship between the different parameters.</p>


<a id="page_1026_c598"></a><p class="eh-headline-207 ">
				Concept of point A
			</p>


<a id="page_1026_c599"></a><p>As the common reference point in the frequency domain for all “resource grids”, the standard defines point A. Point A (Ref A) is the center of subcarrier 0 of common resource block 0 of the lowest resource grid. Point A serves as a common reference point for resource block grids. Unlike in LTE, point A indicates the lower frequency edge of the channel bandwidth, which no longer has a bandwidth-centric perspective. Note that the point A can theoretically be outside of the carrier bandwidth. Point A is signaled with the higher layer value absoluteFrequencyPointA in FrequencyInfoDL, which is expressed as ARFCN-ValueNR.</p>


<a id="page_1026_c600"></a><p class="eh-headline-207 ">
				Relationship between the resource grid and point A
			</p>


<a id="page_1026_c601"></a><p>Each resource grid uses a specific 5G NR numerology and starts from a frequency offset from point A, signaled as offsetToCarrier, given as a number of CRBs, and spans a certain bandwidth, indicated as the number of CRBs by the higher layer parameter carrierBandwidth, which is included in SCS-SpecificCarrier (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-035__Resource_grid_signaling_details_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-35 &lt;\/span&gt;Resource grid signaling details.&quot;}]">Fig. 1-35</a>). The term <abbr class="eh-abbreviation" title="Common resource block" lang="en"><span class="eh-tooltip" title="Common resource block">CRB</span></abbr> is thus used to indicate the frequency position of the resource grid in reference to point A and is dependent on the subcarrier spacing (<abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr>). We may interpret the <abbr class="eh-abbreviation" title="Common resource block" lang="en"><span class="eh-tooltip" title="Common resource block">CRB</span></abbr> numbering as specific to every resource grid. There is one set of resource grids for the uplink and downlink respectively, but there is only one resource grid for a given antenna port p and subcarrier spacing u. Resource grids cannot overlap since this would conflict with the requirement that regarding one RF connection only one numerology can be active at any time.</p>


<a id="page_1026_c602"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:45%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-035__Resource_grid_signaling_details_v4_b4283e344a.png" width="800" height="359" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-35 </span>Resource grid signaling details.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1026_c603"></a><p class="eh-headline-207 ">
				Relationship between the resource grid and bandwidth part
			</p>


<a id="page_1026_c604"></a><p>To allow much greater flexibility in allocating radio resources with the 5G numerologies especially when adapting the different <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> requirements to the physical layer, 5G NR introduces the concept of bandwidth parts. This concept is discussed in greater detail in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1047" class="eh-link eh-link--page">1.4 Bandwidth part fundamentals, page 182</a>. The UE is scheduled with up to four bandwidth parts. Each bandwidth part is related to a specific 5G NR numerology and there is only one <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> active at any time in either direction UL and DL. The <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> must be allocated within the resource grid with the same numerology as the resource grid. The bandwidth of the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> must use the term <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr> as the index, specific to the bandwidth part. The physical resource blocks are defined within a bandwidth part and numbered from 0 to N<sub>BWPsiz</sub><sub>e</sub>. In accordance with <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>, the numbering of the PRBs and <abbr class="eh-abbreviation" title="Common resource block" lang="en"><span class="eh-tooltip" title="Common resource block">CRB</span></abbr> is given by the formula <br></p><p>number<sub>CRB</sub> = number<sub>PRB</sub> + <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr><sub>start</sub></p><p><br>meaning that the CRBs are numbered starting from frequency reference point A and are SCS-specific, and the PRBs are numbered starting from the beginning of the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> and are frequency-aligned with the <abbr class="eh-abbreviation" title="Common resource block" lang="en"><span class="eh-tooltip" title="Common resource block">CRB</span></abbr>. Thanks to the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>, the UE has gained the flexibility to move from one numerology to another, thereby enabling dynamic positioning of the UE bandwidth within the overall resource grid. The <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> cannot span two resource grids since, once again, this would conflict with the requirement that only one numerology can be active at any time.</p>


<a id="page_1026_c605"></a><p class="eh-headline-207 ">
				Relationship between the resource grid/point A and <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>
			</p>


<a id="page_1026_c606"></a><p>For initial cell search procedures by the UE, point A is used to identify the position of the synchronization signal blocks (<abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>). See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1043" class="eh-link eh-link--page">1.3.2.1 SS/PBCH block details, page 174</a> for details on <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>. Higher layer signaling provides the frequency offset, which is given either as offsetToPointA or offset-ref-low-SCS-ref-PRB between point A and the lowest subcarrier of the lowest resource block of the <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block used by the UE for initial cell selection, expressed in units of resource blocks and assuming a 15 kHz subcarrier spacing for FR1 and a 60 kHz subcarrier spacing for FR2. This is required during initial cell search procedures after the UE identifies the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> and is necessary to obtain information about the resource grid positions. For each resource grid representing one 5G NR numerology, a higher layer provides the signaling information SCS-SpecificCarrier which contains information such as offsetToCarrier, carrier bandwidth and subcarrier spacing. It is possible that the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> may have a different subcarrier spacing than the resource grid. If so, the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> position in frequency is not aligned with the <abbr class="eh-abbreviation" title="Common resource block" lang="en"><span class="eh-tooltip" title="Common resource block">CRB</span></abbr>, meaning that the signaling parameter kSSB is used as the frequency offset indication. The quantity k<sub>SSB</sub> represents the subcarrier offset from subcarrier 0 in common resource block N<sub>CR</sub><sub>B</sub><sup class="eh-text__letter">SSB</sup> to subcarrier 0 of the <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block, where the four least significant bits of k<sub>SSB</sub> are given by the higher-layer parameter ssb-SubcarrierOffset in <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> and for <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block in FR1, an optional extension bit is given by the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> (<span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>). The parameter k<sub>SSB</sub> can also be replaced by directly setting the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> frequency with the higher layer value absoluteFrequencySSB instead. Note that there are two types of frequency offset information: offsetToCarrier indicates the position of the resource grid relative to point A and offsetToPointA indicates the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> synchronization blocks relative to point A. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-035__Resource_grid_signaling_details_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-35 &lt;\/span&gt;Resource grid signaling details.&quot;}]">Fig. 1-35</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-036__SSB_inside_resource_grid..._.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-36 &lt;\/span&gt;SSB inside resource grid with the same or different subcarrier spacing and offset indicator k&lt;sub&gt;SS&lt;\/sub&gt;&lt;sub&gt;B&lt;\/sub&gt;.&quot;}]">Fig. 1-36</a> illustrate these parameters in more detail.</p><p>Note that the UE is not aware of the complete configuration details for a resource grid. It must be interpreted as a network-specific division of the carrier bandwidth into various frequency sections in order to apply and benefit from the various numerologies.</p>


<a id="page_1026_c607"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:45%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-036__SSB_inside_resource_grid...__c64b88c427.png" width="800" height="360" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-36 </span><abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> inside resource grid with the same or different subcarrier spacing and offset indicator k<sub>SS</sub><sub>B</sub>.</figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1027" data-prevpid="1026" data-nextpid="1028" data-chapter="1.2.3 Frame structure" id="page_1027">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.2.3 Frame structure</h3>
						
<a id="page_1027_c608"></a><p>Layer 1 is defined in a bandwidth-agnostic manner based on frequency ranges FR1 and FR2, allowing layer 1 in 5G NR to adapt to various spectrum allocations using different 5G NR numerologies (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1024_c584\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table003\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Subcarrier spacing (kHz)&lt;\/th&gt;&lt;th&gt;15&lt;\/th&gt;&lt;th&gt;30&lt;\/th&gt;&lt;th&gt;60&lt;\/th&gt;&lt;th&gt;120&lt;\/th&gt;&lt;th&gt;240&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbol duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;66.7&lt;\/td&gt;&lt;td&gt;33.3&lt;\/td&gt;&lt;td&gt;16.7&lt;\/td&gt;&lt;td&gt;8.33&lt;\/td&gt;&lt;td&gt;4.17&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;CP duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4.7&lt;\/td&gt;&lt;td&gt;2.3&lt;\/td&gt;&lt;td&gt;1.2 (normal)&lt;br&gt;4.13 (extended)&lt;\/td&gt;&lt;td&gt;0.59&lt;\/td&gt;&lt;td&gt;0.29&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. nominal bandwidth (MHz)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;50&lt;\/td&gt;&lt;td&gt;100&lt;\/td&gt;&lt;td&gt;100 for FR1&lt;br&gt;200 for FR2&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. FFT size&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbols per slot&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14 &lt;br&gt;12 (extended CP)&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per subframe&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per frame&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;40&lt;\/td&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td&gt;160&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-28&lt;\/span&gt; 3GPP 5G NR numerology based on CP-OFDMA.&lt;\/p&gt;\n\n&quot;}">Fig. 1-28</a>).</p><p>A major difference between NR and former standards is the flexibility of the frame structure. Certain service scenarios such as ultra-reliable low latency communications (<abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr>) and transmission at mm-wave frequencies can require shorter slot or subframe structures in order to decrease the latency or enable faster UL and DL switching for immediate <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback. NR frames consist of a fixed frame length and subframe length, but with flexible allocations underneath.</p><p>The radio frames have a length of 10 ms for both the DL and UL (<span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>, section 4.3). Each radio frame consists of ten subframes of 1 ms duration each. The first five and the last five subframes form a half-frame.</p><p>There are {1, 2, 4, 8, 16} slots in a subframe and {12, 14} consecutive OFDM symbols in a slot. The number of slots per subframe depends on the 5G numerology or the <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr>. The number of symbols per slot depends on the length of the cyclic prefix (<abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr>). In 5G NR, two <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> lengths are defined: a normal and an extended <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> length. Extended <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr>, used for 60 kHz <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> only, results in 12 symbols per slot. Basically, the default use case of 14 symbols corresponds to the number of symbols per slot for the normal cyclic prefix. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-037__Frame_structure_in_5G_NR.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-37 &lt;\/span&gt;Frame structure in 5G NR (e.g. slot structure for SCS 60 kHz).&quot;}]">Fig. 1-37</a> shows the frame structure and subframe structure.</p><p>In alignment with the 5G NR numerologies (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1024_c584\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table003\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Subcarrier spacing (kHz)&lt;\/th&gt;&lt;th&gt;15&lt;\/th&gt;&lt;th&gt;30&lt;\/th&gt;&lt;th&gt;60&lt;\/th&gt;&lt;th&gt;120&lt;\/th&gt;&lt;th&gt;240&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbol duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;66.7&lt;\/td&gt;&lt;td&gt;33.3&lt;\/td&gt;&lt;td&gt;16.7&lt;\/td&gt;&lt;td&gt;8.33&lt;\/td&gt;&lt;td&gt;4.17&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;CP duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4.7&lt;\/td&gt;&lt;td&gt;2.3&lt;\/td&gt;&lt;td&gt;1.2 (normal)&lt;br&gt;4.13 (extended)&lt;\/td&gt;&lt;td&gt;0.59&lt;\/td&gt;&lt;td&gt;0.29&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. nominal bandwidth (MHz)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;50&lt;\/td&gt;&lt;td&gt;100&lt;\/td&gt;&lt;td&gt;100 for FR1&lt;br&gt;200 for FR2&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. FFT size&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbols per slot&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14 &lt;br&gt;12 (extended CP)&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per subframe&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per frame&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;40&lt;\/td&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td&gt;160&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-28&lt;\/span&gt; 3GPP 5G NR numerology based on CP-OFDMA.&lt;\/p&gt;\n\n&quot;}">Fig. 1-28</a>), there is a fixed allocation part, i.e. a time period that has a constant length like a radio frame, half-frame and subframes. On the other hand, there is a flexible allocation like a slot and symbol that support different timing.</p>


<a id="page_1027_c609"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:68%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-037__Frame_structure_in_5G_NR_e017356910.png" width="800" height="541" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-37 </span>Frame structure in 5G NR (e.g. slot structure for <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> 60 kHz).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1027_c610"></a><p>As shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1024_c584\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table003\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Subcarrier spacing (kHz)&lt;\/th&gt;&lt;th&gt;15&lt;\/th&gt;&lt;th&gt;30&lt;\/th&gt;&lt;th&gt;60&lt;\/th&gt;&lt;th&gt;120&lt;\/th&gt;&lt;th&gt;240&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbol duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;66.7&lt;\/td&gt;&lt;td&gt;33.3&lt;\/td&gt;&lt;td&gt;16.7&lt;\/td&gt;&lt;td&gt;8.33&lt;\/td&gt;&lt;td&gt;4.17&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;CP duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4.7&lt;\/td&gt;&lt;td&gt;2.3&lt;\/td&gt;&lt;td&gt;1.2 (normal)&lt;br&gt;4.13 (extended)&lt;\/td&gt;&lt;td&gt;0.59&lt;\/td&gt;&lt;td&gt;0.29&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. nominal bandwidth (MHz)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;50&lt;\/td&gt;&lt;td&gt;100&lt;\/td&gt;&lt;td&gt;100 for FR1&lt;br&gt;200 for FR2&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. FFT size&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbols per slot&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14 &lt;br&gt;12 (extended CP)&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per subframe&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per frame&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;40&lt;\/td&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td&gt;160&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-28&lt;\/span&gt; 3GPP 5G NR numerology based on CP-OFDMA.&lt;\/p&gt;\n\n&quot;}">Fig. 1-28</a> and the table in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1027_c611\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table004\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Index &lt;em&gt;\u03bc&lt;\/em&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;Subcarrier spacing \u2206&lt;em&gt;f&lt;\/em&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;Cyclic prefix&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;0&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td&gt;Normal&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;1&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;30&lt;\/td&gt;&lt;td&gt;Normal&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;2&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;60&lt;\/td&gt;&lt;td&gt;Normal, extended&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;3&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;120&lt;\/td&gt;&lt;td&gt;Normal&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;4&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;240&lt;\/td&gt;&lt;td&gt;Normal&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-38 &lt;\/span&gt;Subcarrier spacing, index &lt;em&gt;\u03bc&lt;\/em&gt; and CP length.&lt;\/p&gt;\n\n&quot;}">Fig. 1-38</a> (<span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>), there are two possible cyclic prefix lengths: normal <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> and extended <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr>. However, this is possible only with the numerology using 60 kHz subcarrier spacing. Extended <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> can be used to allow larger cell sizes and support services such as broadcast, i.e. <abbr class="eh-abbreviation" title="Multimedia broadcast multicast service" lang="en"><span class="eh-tooltip" title="Multimedia broadcast multicast service">MBMS</span></abbr>, but a different <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> length would require blind detection on the receiver end. To reduce the overall complexity, it is only allowed for one subcarrier spacing. Larger cell sizes correspond to a multipath propagation profile with a longer delay spread. To compensate intersymbol interference, a longer <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> is required (see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-122__Multipath_propagation_and_intersymbol_interference.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-122 &lt;\/span&gt;Multipath propagation and intersymbol interference (ISI).&quot;}]">Fig. 1-122, page 155</a> and the subsequent figures for further details).</p>


<a id="page_1027_c611"></a><div class="table-scroll"><table id="table004" class="eh-table eh-table--alternate"><colgroup><col><col><col></colgroup><thead><tr><th>Index <em>μ</em>
&nbsp;</th><th>Subcarrier spacing ∆<em>f</em>
&nbsp;</th><th>Cyclic prefix</th></tr></thead><tbody><tr><td><strong>0</strong></td><td>15</td><td>Normal</td></tr><tr><td><strong>1</strong></td><td>30</td><td>Normal</td></tr><tr><td><strong>2</strong></td><td>60</td><td>Normal, extended</td></tr><tr><td><strong>3</strong></td><td>120</td><td>Normal</td></tr><tr><td><strong>4</strong></td><td>240</td><td>Normal</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-38 </span>Subcarrier spacing, index <em>μ</em> and <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> length.</p>


<a id="page_1027_c612"></a><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-039__Frame_structure_5G.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-39 &lt;\/span&gt;Radio frame structure and cyclic prefix length (only the 15 kHz and 60 kHz subcarrier spacing is shown here).&quot;}]">Fig. 1-39</a> illustrates this aspect of the radio frame structure in combination with the cyclic prefix duration (due to space limitations, only the 15 kHz and 60 kHz example is given).</p>


<a id="page_1027_c613"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:53%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-039__Frame_structure_5G_b52d027088.png" width="800" height="421" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-39 </span>Radio frame structure and cyclic prefix length (only the 15 kHz and 60 kHz subcarrier spacing is shown here).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1027_c614"></a><p>Throughout the current version of the 5G NR specification, the size of various fields in the time domain is expressed in time units <em>T</em><sub>c</sub> = 1/(∆<em>f</em><sub>ma</sub><sub>x</sub> · <em>N</em><sub>f</sub>), where ∆f<sub>max </sub>= 480 · 10<sup class="eh-text__letter">3</sup> Hz and <em>N</em><sub>f</sub> = 4096. We have the constant κ = <em>T</em><sub>s</sub>/<em>T</em><sub>c</sub> = 64, where <em>T</em><sub>s</sub> = 1/(∆<em>f</em><sub>re</sub><sub>f</sub> · <em>N</em><sub>f, ref</sub>), ∆<em>f</em><sub>ref</sub> = 15 · 10<sup class="eh-text__letter">3</sup> Hz and <em>N</em><sub>f, ref</sub> = 2048. Thus, we observe a sort of time alignment between EUTRAN and 5G NR in order to ensure proper interworking, e.g. a common timing reference for oscillators <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-040__Time_unit_Tc_used_for_5G_NR_in_comparison_to_time_unit_Ts_known_from_EUTRAN.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-40 &lt;\/span&gt;Time unit Tc used in 5G NR in comparison with time unit Ts from EUTRAN.&quot;}]">Fig. 1-40</a>.</p>


<a id="page_1027_c615"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:22%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-040__Time_unit_Tc_used_for_5G_NR_in_comparison_to_time_unit_Ts_known_from_EUTRAN_79451d1856.png" width="800" height="174" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-40 </span>Time unit Tc used in 5G NR in comparison with time unit Ts from EUTRAN.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1027_c616"></a><p>To adapt the timing of one slot to the subframe structure of 1 ms duration, there occurs (like in EUTRAN) a slight adaptation of the cyclic prefix duration, i.e. there are two different cyclic prefix durations for the first OFDM symbol and every multiple of 7 thereafter with respect to the normal <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> duration. <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span> specifies the following timing duration for the data part of the OFDM symbol and the <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> duration (see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-042__Cyclic_prefix_duration_definition_in_accordance_with_TS_38.211.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-42 &lt;\/span&gt;Cyclic prefix duration definition in accordance with TS 38.211.&lt;br&gt;&quot;}]">Fig. 1-42</a>).</p>


<a id="page_1027_c617"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:38%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-041__Radio_frame_timing_in_5G_NR_acd9d4420d.png" width="800" height="298" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-41 </span>Radio frame timing in 5G NR.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1027_c618"></a><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-043__Radio_frame_timing_for_the_5G_NR_numerology_with_15kHz_SCS.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-43 &lt;\/span&gt;Radio frame timing for 5G NR numerology with 15 kHz SCS.&quot;}]">Fig. 1-43</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-044__Radio_frame_timing_for_the_5G_NR_numerology_with_60kHz_SCS.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-44 &lt;\/span&gt;Radio frame timing for 5G NR numerology with 60 kHz SCS.&quot;}]">Fig. 1-44</a> illustrate these timing aspects based on a subcarrier spacing of 15 kHz and 60 kHz, respectively.</p><p><br></p>


<a id="page_1027_c619"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:24%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-042__Cyclic_prefix_duration_definition_in_accordance_with_TS_38.211_ba48d02f5b.png" width="800" height="190" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-42 </span>Cyclic prefix duration definition in accordance with <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>.<br></figcaption></figure></div></div></div></div></div></div>


<a id="page_1027_c620"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:49%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-043__Radio_frame_timing_for_the_5G_NR_numerology_with_15kHz_SCS_87c31959ee.png" width="800" height="390" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-43 </span>Radio frame timing for 5G NR numerology with 15 kHz <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1027_c621"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:49%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-044__Radio_frame_timing_for_the_5G_NR_numerology_with_60kHz_SCS_14552c34b9.png" width="800" height="391" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-44 </span>Radio frame timing for 5G NR numerology with 60 kHz <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1027_c622"></a><p class="eh-headline-207 ">
				5G NR frame structure aspects: interworking of multiple numerologies and latency aspects
			</p>


<a id="page_1027_c623"></a><p>The flexible 5G NR numerology shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1024_c584\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table003\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Subcarrier spacing (kHz)&lt;\/th&gt;&lt;th&gt;15&lt;\/th&gt;&lt;th&gt;30&lt;\/th&gt;&lt;th&gt;60&lt;\/th&gt;&lt;th&gt;120&lt;\/th&gt;&lt;th&gt;240&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbol duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;66.7&lt;\/td&gt;&lt;td&gt;33.3&lt;\/td&gt;&lt;td&gt;16.7&lt;\/td&gt;&lt;td&gt;8.33&lt;\/td&gt;&lt;td&gt;4.17&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;CP duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4.7&lt;\/td&gt;&lt;td&gt;2.3&lt;\/td&gt;&lt;td&gt;1.2 (normal)&lt;br&gt;4.13 (extended)&lt;\/td&gt;&lt;td&gt;0.59&lt;\/td&gt;&lt;td&gt;0.29&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. nominal bandwidth (MHz)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;50&lt;\/td&gt;&lt;td&gt;100&lt;\/td&gt;&lt;td&gt;100 for FR1&lt;br&gt;200 for FR2&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. FFT size&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbols per slot&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14 &lt;br&gt;12 (extended CP)&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per subframe&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per frame&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;40&lt;\/td&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td&gt;160&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-28&lt;\/span&gt; 3GPP 5G NR numerology based on CP-OFDMA.&lt;\/p&gt;\n\n&quot;}">Fig. 1-28</a> reflects a kind of vertical or column-oriented parameterization of the OFDM parameters such as the subcarrier spacing and symbol duration. Here, the vertical orientation means that the 5G numerology with parameters in one column can be considered as a set of parameters that are used together. The flexibility or dynamic behavior introduced in 5G NR is based on the possibility of dynamic switching for the allocation of these parameter sets, which was introduced with the concept of bandwidth parts. Obviously, a reduction in the symbol duration has a positive effect on the latency or overall transmit time interval (<abbr class="eh-abbreviation" title="Transmission time interval" lang="en"><span class="eh-tooltip" title="Transmission time interval">TTI</span></abbr>), and mapping of <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> services can thus be handled accordingly.</p><p>As a legacy of EUTRAN, we can consider the duration of one radio frame to equal 10 ms. This has the benefit that coexistence with legacy technologies such as WCDMA and LTE is more feasible. Furthermore, the higher layer protocol structure and timing from LTE are based on a 10 ms raster (e.g. the <abbr class="eh-abbreviation" title="System information block" lang="en"><span class="eh-tooltip" title="System information block">SIB</span></abbr> transmission interval follows a 10 ms raster ). EUTRAN and 5G NR technologies are time-aligned at least on a frame and subframe basis in order to minimize interference between the two technologies in close frequency range (or even in the same frequency range), thereby minimizing impediments to their coexistence. The second parameter that is inherited from EUTRAN is the duration of one subframe. This parameter has also retained its 1 ms duration. For the sake of flexible timing, 5G NR specifies slot and symbol durations as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-037__Frame_structure_in_5G_NR.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-37 &lt;\/span&gt;Frame structure in 5G NR (e.g. slot structure for SCS 60 kHz).&quot;}]">Fig. 1-37</a>.</p><p>The subcarrier spacing that is possible in 5G NR adheres to the formula</p><p>15 kHz ∙ 2<sup class="eh-text--em eh-text__letter">μ</sup></p><p>where <em>μ</em> is an integer value between 0 and 4. In other words, the subcarrier spacing is based on a reference of multiples of 15 kHz. This might seem like a sort of restriction; however, it is actually a smart idea for timing alignment. Due to FFT operation and the resulting slot duration (i.e. the number of slots per subframe is 1, 2, 4, 8 or 16), we have time alignment of these numbers of slots after at least 1 ms. Thus, it is possible to use multiple 5G NR numerologies when scheduling radio resources in the time domain depending on the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> requirements (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-045__5G_NR_numerology_Frame_structure__subframe_and_slot_duration....png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-45 &lt;\/span&gt;5G NR numerology: frame structure, subframe and slot duration, interworking between multiple numerologies.&quot;}]">Fig. 1-45</a>). This can be explained as a sort of multi-numerology hopping scheme. When considering an inter-RAT situation, we see that EUTRAN and NR technologies are time-aligned at least on a frame and subframe basis in order to minimize interference between the two technologies in adjacent frequency ranges or even in the same frequency range (like for the supplementary uplink) with different slot durations and subcarrier spacings. However, the duration of one radio frame is held constant and all streams are time-aligned accordingly. This guarantees proper interworking of multiple numerologies within the same bandwidth.</p>


<a id="page_1027_c624"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:53%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-045__5G_NR_numerology_Frame_structure__subframe_and_slot_duration..._ee587e352a.png" width="800" height="419" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-45 </span>5G NR numerology: frame structure, subframe and slot duration, interworking between multiple numerologies.</figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1028" data-prevpid="1027" data-nextpid="1029" data-chapter="1.2.4 Duplexing schemes" id="page_1028">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.2.4 Duplexing schemes</h3>
						
<a id="page_1028_c625"></a><p>Recall that the term duplexing scheme implies the separation of transmission and reception (or the uplink and downlink). Depending on the frequency bands as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1030_c644\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table007\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;NR operating band&lt;\/th&gt;&lt;th&gt;Uplink (UL) operating band &lt;br&gt;BS receive\/UE transmit &lt;br&gt;FUL_low to FUL_high&lt;\/th&gt;&lt;th&gt;Downlink (DL) operating band&lt;br&gt;\n\t\t\t\t\t\t\tBS transmit\/UE receive&lt;br&gt;\n\t\t\t\t\t\t\tFDL_low to FDL_high&lt;\/th&gt;&lt;th&gt;Duplex mode&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;n1&lt;\/td&gt;&lt;td&gt;1920 MHz to 1980 MHz&lt;\/td&gt;&lt;td&gt;2110 MHz to 2170 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n2&lt;\/td&gt;&lt;td&gt;1850 MHz to 1910 MHz&lt;\/td&gt;&lt;td&gt;1930 MHz to 1990 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n3&lt;\/td&gt;&lt;td&gt;1710 MHz to 1785 MHz&lt;\/td&gt;&lt;td&gt;1805 MHz to 1880 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n5&lt;\/td&gt;&lt;td&gt;824 MHz to 849 MHz&lt;\/td&gt;&lt;td&gt;869 MHz to 894 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n7&lt;\/td&gt;&lt;td&gt;2500 MHz to 2570 MHz&lt;\/td&gt;&lt;td&gt;2620 MHz to 2690 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n8&lt;\/td&gt;&lt;td&gt;880 MHz to 915 MHz&lt;\/td&gt;&lt;td&gt;925 MHz to 960 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n20&lt;\/td&gt;&lt;td&gt;832 MHz to 862 MHz&lt;\/td&gt;&lt;td&gt;791 MHz to 821 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n28&lt;\/td&gt;&lt;td&gt;703 MHz to 748 MHz&lt;\/td&gt;&lt;td&gt;758 MHz to 803 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n38&lt;\/td&gt;&lt;td&gt;2570 MHz to 2620 MHz&lt;\/td&gt;&lt;td&gt;2570 MHz to 2620 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n41&lt;\/td&gt;&lt;td&gt;2496 MHz to 2690 MHz&lt;\/td&gt;&lt;td&gt;2496 MHz to 2690 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n50&lt;\/td&gt;&lt;td&gt;1432 MHz to 1517 MHz&lt;\/td&gt;&lt;td&gt;1432 MHz to 1517 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n51&lt;\/td&gt;&lt;td&gt;1427 MHz to 1432 MHz&lt;\/td&gt;&lt;td&gt;1427 MHz to 1432 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n66&lt;\/td&gt;&lt;td&gt;1710 MHz to 1780 MHz&lt;\/td&gt;&lt;td&gt;2110 MHz to 2200 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n70&lt;\/td&gt;&lt;td&gt;1695 MHz to 1710 MHz&lt;\/td&gt;&lt;td&gt;1995 MHz to 2020 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n71&lt;\/td&gt;&lt;td&gt;663 MHz to 698 MHz&lt;\/td&gt;&lt;td&gt;617 MHz to 652 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n74&lt;\/td&gt;&lt;td&gt;1427 MHz to 1470 MHz&lt;\/td&gt;&lt;td&gt;1475 MHz to 1518 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n75&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;1432 MHz to 1517 MHz&lt;\/td&gt;&lt;td&gt;SDL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n76&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;1427 MHz to 1432 MHz&lt;\/td&gt;&lt;td&gt;SDL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n77&lt;\/td&gt;&lt;td&gt;3300 MHz to 4200 MHz&lt;\/td&gt;&lt;td&gt;3300 MHz to 4200 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n78&lt;\/td&gt;&lt;td&gt;3300 MHz to 3800 MHz&lt;\/td&gt;&lt;td&gt;3300 MHz to 3800 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n79&lt;\/td&gt;&lt;td&gt;4400 MHz to 5000 MHz&lt;\/td&gt;&lt;td&gt;4400 MHz to 5000 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n80&lt;\/td&gt;&lt;td&gt;1710 MHz to 1785 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n81&lt;\/td&gt;&lt;td&gt;880 MHz to 915 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n82&lt;\/td&gt;&lt;td&gt;832 MHz to 862 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n83&lt;\/td&gt;&lt;td&gt;703 MHz to 748 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n84&lt;\/td&gt;&lt;td&gt;1920 MHz to 1980 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n86&lt;\/td&gt;&lt;td&gt;1710 MHz to 1780 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-51 &lt;\/span&gt;5G NR frequency bands for FR1.&lt;\/p&gt;\n\n&quot;}">Fig. 1-51, page 74</a> for FR1 and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1030_c646\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table008\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;NR operating band&lt;\/th&gt;&lt;th&gt;Uplink (UL) operating band &lt;br&gt;(in MHz)&lt;br&gt;\n\t\t\t\t\t\t\tBS receive\/UE transmit&lt;br&gt;\n\t\t\t\t\t\t\tFUL_low to FUL_high&lt;\/th&gt;&lt;th&gt;Downlink (DL) operating band (in MHz)&lt;br&gt;\n\t\t\t\t\t\t\tBS transmit\/UE receive&lt;br&gt;\n\t\t\t\t\t\t\tFDL_low to FDL_high&lt;\/th&gt;&lt;th&gt;Duplex mode&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;n257&lt;\/td&gt;&lt;td&gt;26 500 to 29 500&lt;\/td&gt;&lt;td&gt;26 500 to 29 500&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n258&lt;\/td&gt;&lt;td&gt;24 250 to 27 500&lt;\/td&gt;&lt;td&gt;24 250 to 27 500&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n260&lt;\/td&gt;&lt;td&gt;37 000 to 40 000&lt;\/td&gt;&lt;td&gt;37 000 to 40 000&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n261&lt;\/td&gt;&lt;td&gt;27 500 to 28 350&lt;\/td&gt;&lt;td&gt;27 500 to 28 350&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-52 &lt;\/span&gt;5G NR frequency bands for FR2.&lt;\/p&gt;\n\n&quot;}">Fig. 1-52, page 75</a> for FR2, 5G NR supports various duplexing schemes such as FDD, static TDD, semi-static TDD and dynamic TDD in order to provide the highest possible flexibility.</p><ul class="eh-list eh-list--line"><li>Frequency division duplex (FDD) means that a carrier is designated as paired spectrum consisting of an uplink carrier and a downlink carrier. In FDD, the allocation of resources can be managed dynamically and assigned independently in either the uplink or downlink direction. As a drawback, the band definition requires a sort of guard band between UL and DL, and the receiver must be equipped with a duplex filter to suppress interference from the transmitter</li><li>Time division duplex (TDD) means that only one carrier is used. It is divided into time slots that can be allocated either to the downlink or uplink. One advantage of TDD (as discussed in the literature) is that receiver complexity is reduced since a duplex filter is not needed. Moreover, the channel is considered to be reciprocal, thereby allowing improved implementation of channel estimation and link adaption mechanisms such as precoding and <abbr class="eh-abbreviation" title="Adaptive modulation and coding" lang="en"><span class="eh-tooltip" title="Adaptive modulation and coding">AMC</span></abbr> as well as directive antennas. Especially for beamforming methods, channel reciprocity represents a major advantage. One drawback of TDD schemes, however, is related to a type of synchronization due to inter-cell interference and the need for a guard time between the transition from RX to TX to compensate for propagation delay. Typically, a time interval such as the frame structure or slot structure is subdivided into uplink and downlink time intervals. In 5G NR, the time definition is based on a duration of one slot, which consists of 14 OFDMA symbols in case of a normal <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> length. The slot configuration indicates the uplink and downlink slot. This represents a major difference compared to LTE. There, UL/DL changes were possible only at the subframe level. In 5G NR, switching between UL and DL may occur on the OFDMA symbol level, allowing much greater flexibility but causing challenges for the implementation due to shorter timing intervals and faster switching times. In static TDD, this slot configuration is identical over the neighbor cells as well and it is kept static over a longer time period. Consequently, however, the cell has a sort of static allocation of downlink and uplink data rates</li><li><strong>Semi-static TDD</strong> involves the introduction of more flexibility. Whereas in TD-LTE, seven possible UL/DL configurations are defined on one frame corresponding to 10 ms, higher layer configuration parameters can be used in 5G NR to achieve cell-specific or even UE-specific UL/DL allocation parameterization. Thus, the slot configuration is flexible and can be changed from time to time while maintaining the focus on inter-cell interference aspects</li><li><strong>Dynamic TDD</strong> is the most flexible concept for UL/DL configuration and is fully dynamic. This could be a use case for small cells or even standalone or isolated indoor cells with less overlapping coverage to neighbor cells and therefore less influence due to inter-cell interference</li></ul><p>Recall that in TD-LTE, seven UL/DL configurations are defined overall to set the length of one radio frame equal to 10 ms. Typically, the selected UL/DL configuration was kept static within the cell and even within a certain coverage area. To maintain the LTE signaling principle, all of these seven configurations started with a first subframe that was downlink, followed by a so-called special subframe including a guard period, and then an uplink subframe. The switching period from TX to RX (known as the downlink-to-uplink switch-point periodicity) is either one half-frame or one frame. The special subframe contained three parts (DwPTS, GP and UpPTS) and all have a flexible length within a certain value range.</p><p>In total, nine special subframe configurations were defined in LTE up to 3GPP Release 10 to specify the timing duration for these three parts: the downlink pilot time slot (DwPTS), which is at least three OFDM symbols in length and contains the scheduling channel <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>, the primary sync channel (P-SCH), and optionally a data channel <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>. In TDD system there is a switch from TX to RX and vice versa that may require some time. For that reason, the special subframe contains a guard time, where no information is sent and this guard time allows the RX-TX switching from UE perspective. The guard period can have a flexible length, while the guard period duration is related to the maximum propagation delay that can be compensated due to the timing advance control mechanism for the UE transmitter. Thus, the special subframe configuration is considered as a kind of indirect indication of the expected maximum cell size.</p><p>The uplink pilot time slot (UpPTS) contains the random access channel <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr>. The <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-046__Summary_of_TD-LTE_UL-DL_configurations_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-46 &lt;\/span&gt;Summary of TD-LTE UL\/DL configurations.&quot;}]">Fig. 1-46</a> summarizes these LTE UL/DL configurations.</p>


<a id="page_1028_c626"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:74%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-046__Summary_of_TD-LTE_UL-DL_configurations_v4_6b8cb774e6.png" width="800" height="590" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-46 </span>Summary of TD-LTE UL/DL configurations.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1028_c627"></a><p>5G NR provides much greater flexibility for the UL/DL configuration, which can be configured on a cell common basis. Moreover, UE-dedicated signaling of the slot configuration is possible. Switching between UL and DL can be performed at the OFDMA symbol level and no longer on a subframe level (as in LTE). Another difference is that the UL/DL configuration is defined per slot. Recalling the 5G numerology (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1024_c584\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table003\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Subcarrier spacing (kHz)&lt;\/th&gt;&lt;th&gt;15&lt;\/th&gt;&lt;th&gt;30&lt;\/th&gt;&lt;th&gt;60&lt;\/th&gt;&lt;th&gt;120&lt;\/th&gt;&lt;th&gt;240&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbol duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;66.7&lt;\/td&gt;&lt;td&gt;33.3&lt;\/td&gt;&lt;td&gt;16.7&lt;\/td&gt;&lt;td&gt;8.33&lt;\/td&gt;&lt;td&gt;4.17&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;CP duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4.7&lt;\/td&gt;&lt;td&gt;2.3&lt;\/td&gt;&lt;td&gt;1.2 (normal)&lt;br&gt;4.13 (extended)&lt;\/td&gt;&lt;td&gt;0.59&lt;\/td&gt;&lt;td&gt;0.29&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. nominal bandwidth (MHz)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;50&lt;\/td&gt;&lt;td&gt;100&lt;\/td&gt;&lt;td&gt;100 for FR1&lt;br&gt;200 for FR2&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. FFT size&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbols per slot&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14 &lt;br&gt;12 (extended CP)&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per subframe&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per frame&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;40&lt;\/td&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td&gt;160&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-28&lt;\/span&gt; 3GPP 5G NR numerology based on CP-OFDMA.&lt;\/p&gt;\n\n&quot;}">Fig. 1-28</a>), we know that the duration of one slot is not constant and depends on the subcarrier spacing. There is also no longer a restriction that the first symbol must be downlink. At the abstract level, there are unidirectional slot configurations in 5G NR that only contain UL or DL slots. This represents the maximum data rate in one direction. The idea is to append several of these slot configurations in a longer time period to manage the traffic demand in an optimized manner. Otherwise, in view of the restrictions that some bands must be unidirectional only (as is the case for <abbr class="eh-abbreviation" title="Supplementary uplink" lang="en"><span class="eh-tooltip" title="Supplementary uplink">SUL</span></abbr> or <abbr class="eh-abbreviation" title="Supplementary downlink" lang="en"><span class="eh-tooltip" title="Supplementary downlink">SDL</span></abbr>), this allows no other choice besides a unidirectional TDD configuration. To cover the service request <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> with lower latency issues, 5G NR introduces the idea of a self-contained slot (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-049__Slot_configuration_in_5G_NR.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-49 &lt;\/span&gt; Slot configuration in 5G NR (abstract representation).&quot;}]">Fig. 1-49</a>). A self-contained slot begins with a downlink period followed by a guard time and ends with an uplink period that may be used to provide immediate <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback. There is another possible configuration that might appear strange at first glance: It involves a slot configuration that starts with so-called flexible symbols (most likely, a guard period). There are several reasons behind the potential need for such a slot configuration. One option is, for example, the possible implementation of 5G NR as a standalone network in unlicensed spectrum, e.g. LAA in LTE. To ensure behavior as good neighbors, some optional mechanisms such as listen-before-talk (LBT) are required. Another possibility is a base station with relaxed timing alignment. One additional reason that shows off the flexibility of 5G NR involves spectrum-shared deployment of 5G NR and LTE. Recall that LTE requires the first symbol(s) for <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> scheduling, while 5G NR can also place <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> later in the time domain. Now, one option is to designate the first slots in 15 kHz numerology as “flexible” or unused to a 5G NR and use this slot for <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> scheduling information for LTE UEs. Based on a procedure of this sort, we can imagine a type of interworking in which two radio access technologies share the same spectrum. In summary, in order to allow static, semi-static and dynamic TDD configurations, 5G NR supports three mechanisms: TDD configuration on a common basis per cell, semi-static configuration on a UE with dedicated higher layer signaling, and dynamic allocation based on the possibility to indicate a TDD slot configuration via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling (see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076_c1161" class="eh-link eh-link--page eh-link--ce">Downlink control information (DCI), page 302</a>).</p>


<a id="page_1028_c628"></a><p class="eh-headline-207 ">
				Static TDD configuration
			</p>


<a id="page_1028_c629"></a><p>Higher layer signaling uses, for example, the system information block SIB1 or ServingCell-ConfigCommon to provide an information element TDD-UL-DL-ConfigCommon that contains configuration information on a cell-specific level. The idea is to define slots and symbols over a period of time that are dedicated to either the downlink or uplink or can be declared “flexible”, thereby facilitating overwriting with dynamic TDD configuration information (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-047__TDD-UL-DL-config.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-47 &lt;\/span&gt;Downlink \/uplink configuration.&quot;}]">Fig. 1-47</a>). The <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> TDD-UL-DL-ConfigCommon contains the following parameters:</p><ul class="eh-list eh-list--line"><li>The reference subcarrier spacing <em>referenceSubcarrierSpacing</em> which may be used for dynamic TDD configuration. <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduled <abbr class="eh-abbreviation" title="Slot format indicator RNTI" lang="en"><span class="eh-tooltip" title="Slot format indicator RNTI">SFI-RNTI</span></abbr> will use the reference <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> to calculate the duration of scheduled slots.</li><li>The slot configuration period <em>dl-UL-TransmissionPeriodicity.</em> This represents a time period in milliseconds to which the TDD configuration applies. This time results in an even number of slots depending on the <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr>. Possible values are 0.5 ms, 0.625 ms, 1 ms, 1.25 ms, 2 ms, 2.5 ms, 5 ms and 10 ms. Note: Values of 0.625 ms, 1.25 ms and 2.5 ms are only valid for certain <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr></li><li>The number of slots with only downlink symbols <em>nrofDownlinkSlots.</em> The <span class="eh-text--nowrap">dl-UL-</span>TransmissionPeriodicity starts with this number of DL slots that only contains DL symbols. The maximum number depends on the transmission periodicity and subcarrier spacing</li><li>The number of downlink symbols <em>nrofDownlinkSymbols.</em> Following a number of DL-only slots within the transmission periodicity, this value can configure a certain number of DL symbols. The maximum value is 14 symbols</li><li>The number of slots with only uplink symbols <em>nrofUplinkSlots.</em> The network can configure a number of uplink slots that only contain UL symbols. This number describes the last number of slots within the total number of slots given by the transmission periodicity</li><li>The number of uplink symbols <em>nrofUplinkSymbols,</em> i.e. the possible number of UL symbols that precede the number of UL slots at the end of the transmission periodicity</li></ul><a id="page_1028_c630"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:34%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-047__TDD-UL-DL-config_6b4ed23c47.png" width="800" height="267" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-47 </span>Downlink /uplink configuration.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1028_c631"></a><p>It is possible to configure a second TDD configuration pattern TDD-UL-DL-Config-Common2 with the same parameters. The second pattern is concatenated onto the first pattern. Using this configuration, two different TDD patterns with different UL/DL configuration values can be aligned. With the aid of these information elements, the network can assign a certain number of slots as downlink or uplink slots within a time period.</p>


<a id="page_1028_c632"></a><p class="eh-headline-207 ">
				Semi-static TDD configuration
			</p>


<a id="page_1028_c633"></a><p>The higher layer <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>TDD-UL-DL-ConfigCommon</em> pattern configures within a time period a certain number of downlink and uplink slots. Depending on this setting, there may be remaining slots, i.e. this value results from the total number of slots per time period minus downlink slots minus uplink slots, and these slots are designated as “flexible”.</p><p>With the aid of a second <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr>, the network may configure these flexible slots in a UE-specific manner. The <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> TDD-UL-DL-ConfigDedicated in the <em>ServingCellConfig</em> contains a set of slot configurations. Each slot in the configuration set is assigned an index. The configuration of such a slot can be all downlink or uplink or mixed (or “explicit”). If it is all downlink or uplink, all 14 OFDM symbols within this slot are unidirectional. If the configuration is explicit, there is an <em>nrof-DownlinkSymbols</em> parameter to indicate the number of initial downlink symbols in this slot and a <em>nrofUplinkSymbols</em> parameter to indicate the number of final symbols in this slot for the uplink direction. Semi-static TDD configuration is a method that allows a certain degree of flexibility in UL/DL TDD allocation. The benefit is that the configuration can be UE-specific, thereby allowing a sort of traffic adaptation. Note that there is no fixed time constraint to change the TDD configuration values. They are allocated via higher layer signaling, representing a compromise between dynamic behavior and configuration stability.</p>


<a id="page_1028_c634"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:49%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-048__TDD-UL-DL-config_dedicated_0368861425.png" width="800" height="385" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-48 </span>Semi-static UL-DL TDD configuration.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1028_c635"></a><p class="eh-headline-207 ">
				Dynamic TDD configuration
			</p>


<a id="page_1028_c636"></a><p>The dynamic TDD configuration represents a compromise between the introduction of enhanced flexibility and considerations related to inter-cell interference and signaling reduction. Note that the dynamic TDD configuration is valid for the flexible slot within the common configuration only. However, if the slot is not otherwise configured, it is considered flexible anyway, and thus a “full” dynamic TDD system would be possible. Due to inter-cell interference issues, such a full dynamic TDD system is likely only in isolated or very small cells. As mentioned above, the TDD configuration in 5G NR is determined on a slot basis. In terms of the possible configuration options from a simplified perspective, slot configurations are defined in 5G NR which are unidirectional, only uplink or only downlink. There are so-called self-contained slots consisting of the downlink and uplink, and there are also slots that begin with a sort of guard period.</p><p>The <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-049__Slot_configuration_in_5G_NR.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-49 &lt;\/span&gt; Slot configuration in 5G NR (abstract representation).&quot;}]">Fig. 1-49</a> illustrates these configurations on an abstract basis.</p>


<a id="page_1028_c637"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:54%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-049__Slot_configuration_in_5G_NR_5408a31419.png" width="800" height="426" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-49 </span> Slot configuration in 5G NR (abstract representation).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1028_c638"></a><p>To provide more details about the slot configuration and the flexibility of 5G NR, the specification document <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span> currently contains a table with 56 slot configurations for the case of normal <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> length. An index refers to the corresponding line within that table, denoting each symbol as either downlink “D”, uplink “U” or flexible “F”, where flexible can be downlink, uplink or guard period. The example below contains the format index 33 from this slot configuration table with 9 downlink symbols, 3 flexible and 2 uplink symbols.</p>


<a id="page_1028_c639"></a><div class="table-scroll"><table id="table005" class="eh-table eh-table--alternate"><colgroup><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col></colgroup><tbody><tr><td><strong>Format index</strong></td><td><strong>Symbol number 0</strong></td><td><strong>1</strong></td><td><strong>2</strong></td><td><strong>3</strong></td><td><strong>4</strong></td><td><strong>5</strong></td><td><strong>6</strong></td><td><strong>7</strong></td><td><strong>8</strong></td><td><strong>9</strong></td><td><strong>10</strong></td><td><strong>11</strong></td><td><strong>12</strong></td><td><strong>13</strong></td></tr><tr><td>33</td><td>D</td><td>D</td><td>D</td><td>D</td><td>D</td><td>D</td><td>D</td><td>D</td><td>D</td><td>F</td><td>F</td><td>F</td><td>U</td><td>U</td></tr></tbody></table></div>


<a id="page_1028_c640"></a><p>The higher layer parameter <em>SlotFormatIndicator</em> contains the values <abbr class="eh-abbreviation" title="Slot format indicator RNTI" lang="en"><span class="eh-tooltip" title="Slot format indicator RNTI">SFI-RNTI</span></abbr>, the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format2_0 payload size indicator and a set of <em>slotFormatCombinations</em>.</p><p>In summary, such slot configurations can be pre-indicated and assigned to the UE via a higher layer. Using <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format2_0 scheduling, a very dynamic TDD configuration can be achieved on short notice (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076_c1161" class="eh-link eh-link--page eh-link--ce">Downlink control information (DCI), page 302</a>).</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1029" data-prevpid="1028" data-nextpid="1030" data-chapter="1.2.5 General description of the physical layer" id="page_1029">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.2.5 General description of the physical layer</h3>
						


					</div>
				
		</section><section class="page-section eh-inview" data-pid="1030" data-prevpid="1029" data-nextpid="1031" data-chapter="1.2.5.1 Physical layer parameters and services" id="page_1030">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.2.5.1 Physical layer parameters and services</h4>
						
<a id="page_1030_c641"></a><p>As described in <span class="eh-hint" title="3GPP TS 38.202: NR; Services provided by the physical layer" lang="en"><span class="eh-tooltip" title="3GPP TS 38.202: NR; Services provided by the physical layer">TS 38.202</span></span>, the services and functions of the physical layer are as follows:</p><ul class="eh-list eh-list--line"><li>Error detection on the transport channel and indication to higher layers</li><li><abbr class="eh-abbreviation" title="Forward error correction" lang="en"><span class="eh-tooltip" title="Forward error correction">FEC</span></abbr> encoding/decoding of the transport channel</li><li>Hybrid <abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr> soft-combining</li><li>Rate matching of the coded transport channel to physical channels</li><li>Mapping of the coded transport channel onto physical channels</li><li>Power weighting of physical channels</li><li>Modulation and demodulation of physical channels</li><li>Frequency and time synchronization</li><li>Radio characteristic measurements and indication to higher layers</li><li>Multiple input multiple output (<abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr>) antenna processing</li><li>RF processing</li></ul><p>The multiple access scheme for the NR physical layer for both the uplink (UL) and downlink (DL) is based on orthogonal frequency division multiplexing (OFDM) with a cyclic prefix (<abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr>) (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1024" class="eh-link eh-link--page">1.2.1 Flexible numerology, page 48</a>), but allowing multiple 5G NR numerologies. This physical layer adaptation obtains flexible <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> allocation of the key services <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr>, <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> and <abbr class="eh-abbreviation" title="Massive machine type communications" lang="en"><span class="eh-tooltip" title="Massive machine type communications">mMTC</span></abbr>.</p><p>For the uplink, discrete Fourier transform spread OFDM (<abbr class="eh-abbreviation" title="Discrete Fourier transform-spread-orthogonal frequency division multiplexing" lang="en"><span class="eh-tooltip" title="Discrete Fourier transform-spread-orthogonal frequency division multiplexing">DFT-s-OFDM</span></abbr>) with a <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> is also supported and named as transform precoding. To support transmission in paired and unpaired spectrum, both frequency division duplex (FDD) and time division duplex (TDD) are enabled. In both the UL and DL directions, the following modulation schemes are allowed: <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr>, 16QAM, 64QAM and 256QAM. In addition, in the UL direction a π/2-BPSK modulation scheme is also possible, but only when transform precoding is active. The operating frequency range is divided into FR1 and FR2 in accordance with <span class="eh-hint" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4" lang="en"><span class="eh-tooltip" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4">TS 38.101</span></span> (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1030_c642\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table eh-table--alternate\&quot; id=\&quot;table006\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Frequency range designation&lt;\/th&gt;&lt;th&gt;Corresponding frequency range&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;FR1&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;410 MHz to 7125 MHz&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;FR2&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;24 250 MHz to 52 600 MHz&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-50 &lt;\/span&gt;Frequency ranges FR1 and FR2.&lt;\/p&gt;\n\n&quot;}">Fig. 1-50</a>).</p>


<a id="page_1030_c642"></a><div class="table-scroll"><table class="eh-table eh-table--alternate" id="table006"><colgroup><col><col></colgroup><thead><tr><th>Frequency range designation</th><th>Corresponding frequency range</th></tr></thead><tbody><tr><td><strong>FR1</strong></td><td>410 MHz to 7125 MHz</td></tr><tr><td><strong>FR2</strong></td><td>24 250 MHz to 52 600 MHz</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-50 </span>Frequency ranges FR1 and FR2.</p>


<a id="page_1030_c643"></a><p>For these frequency ranges, different operating frequency bands are specified. For FR1, the following bands are defined in the current version of <span class="eh-hint" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4" lang="en"><span class="eh-tooltip" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4">TS 38.101</span></span>, which support either the TDD or FDD duplexing scheme (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1030_c644\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table007\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;NR operating band&lt;\/th&gt;&lt;th&gt;Uplink (UL) operating band &lt;br&gt;BS receive\/UE transmit &lt;br&gt;FUL_low to FUL_high&lt;\/th&gt;&lt;th&gt;Downlink (DL) operating band&lt;br&gt;\n\t\t\t\t\t\t\tBS transmit\/UE receive&lt;br&gt;\n\t\t\t\t\t\t\tFDL_low to FDL_high&lt;\/th&gt;&lt;th&gt;Duplex mode&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;n1&lt;\/td&gt;&lt;td&gt;1920 MHz to 1980 MHz&lt;\/td&gt;&lt;td&gt;2110 MHz to 2170 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n2&lt;\/td&gt;&lt;td&gt;1850 MHz to 1910 MHz&lt;\/td&gt;&lt;td&gt;1930 MHz to 1990 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n3&lt;\/td&gt;&lt;td&gt;1710 MHz to 1785 MHz&lt;\/td&gt;&lt;td&gt;1805 MHz to 1880 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n5&lt;\/td&gt;&lt;td&gt;824 MHz to 849 MHz&lt;\/td&gt;&lt;td&gt;869 MHz to 894 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n7&lt;\/td&gt;&lt;td&gt;2500 MHz to 2570 MHz&lt;\/td&gt;&lt;td&gt;2620 MHz to 2690 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n8&lt;\/td&gt;&lt;td&gt;880 MHz to 915 MHz&lt;\/td&gt;&lt;td&gt;925 MHz to 960 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n20&lt;\/td&gt;&lt;td&gt;832 MHz to 862 MHz&lt;\/td&gt;&lt;td&gt;791 MHz to 821 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n28&lt;\/td&gt;&lt;td&gt;703 MHz to 748 MHz&lt;\/td&gt;&lt;td&gt;758 MHz to 803 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n38&lt;\/td&gt;&lt;td&gt;2570 MHz to 2620 MHz&lt;\/td&gt;&lt;td&gt;2570 MHz to 2620 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n41&lt;\/td&gt;&lt;td&gt;2496 MHz to 2690 MHz&lt;\/td&gt;&lt;td&gt;2496 MHz to 2690 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n50&lt;\/td&gt;&lt;td&gt;1432 MHz to 1517 MHz&lt;\/td&gt;&lt;td&gt;1432 MHz to 1517 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n51&lt;\/td&gt;&lt;td&gt;1427 MHz to 1432 MHz&lt;\/td&gt;&lt;td&gt;1427 MHz to 1432 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n66&lt;\/td&gt;&lt;td&gt;1710 MHz to 1780 MHz&lt;\/td&gt;&lt;td&gt;2110 MHz to 2200 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n70&lt;\/td&gt;&lt;td&gt;1695 MHz to 1710 MHz&lt;\/td&gt;&lt;td&gt;1995 MHz to 2020 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n71&lt;\/td&gt;&lt;td&gt;663 MHz to 698 MHz&lt;\/td&gt;&lt;td&gt;617 MHz to 652 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n74&lt;\/td&gt;&lt;td&gt;1427 MHz to 1470 MHz&lt;\/td&gt;&lt;td&gt;1475 MHz to 1518 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n75&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;1432 MHz to 1517 MHz&lt;\/td&gt;&lt;td&gt;SDL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n76&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;1427 MHz to 1432 MHz&lt;\/td&gt;&lt;td&gt;SDL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n77&lt;\/td&gt;&lt;td&gt;3300 MHz to 4200 MHz&lt;\/td&gt;&lt;td&gt;3300 MHz to 4200 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n78&lt;\/td&gt;&lt;td&gt;3300 MHz to 3800 MHz&lt;\/td&gt;&lt;td&gt;3300 MHz to 3800 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n79&lt;\/td&gt;&lt;td&gt;4400 MHz to 5000 MHz&lt;\/td&gt;&lt;td&gt;4400 MHz to 5000 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n80&lt;\/td&gt;&lt;td&gt;1710 MHz to 1785 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n81&lt;\/td&gt;&lt;td&gt;880 MHz to 915 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n82&lt;\/td&gt;&lt;td&gt;832 MHz to 862 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n83&lt;\/td&gt;&lt;td&gt;703 MHz to 748 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n84&lt;\/td&gt;&lt;td&gt;1920 MHz to 1980 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n86&lt;\/td&gt;&lt;td&gt;1710 MHz to 1780 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-51 &lt;\/span&gt;5G NR frequency bands for FR1.&lt;\/p&gt;\n\n&quot;}">Fig. 1-51</a>). In addition, some bands can be used in one direction only as a supplementary downlink (<abbr class="eh-abbreviation" title="Supplementary downlink" lang="en"><span class="eh-tooltip" title="Supplementary downlink">SDL</span></abbr>) or supplementary uplink (<abbr class="eh-abbreviation" title="Supplementary uplink" lang="en"><span class="eh-tooltip" title="Supplementary uplink">SUL</span></abbr>).</p>


<a id="page_1030_c644"></a><div class="table-scroll"><table id="table007" class="eh-table eh-table--alternate"><colgroup><col><col><col><col></colgroup><thead><tr><th>NR operating band</th><th>Uplink (UL) operating band <br>BS receive/UE transmit <br>FUL_low to FUL_high</th><th>Downlink (DL) operating band<br>
							BS transmit/UE receive<br>
							FDL_low to FDL_high</th><th>Duplex mode</th></tr></thead><tbody><tr><td>n1</td><td>1920 MHz to 1980 MHz</td><td>2110 MHz to 2170 MHz</td><td>FDD</td></tr><tr><td>n2</td><td>1850 MHz to 1910 MHz</td><td>1930 MHz to 1990 MHz</td><td>FDD</td></tr><tr><td>n3</td><td>1710 MHz to 1785 MHz</td><td>1805 MHz to 1880 MHz</td><td>FDD</td></tr><tr><td>n5</td><td>824 MHz to 849 MHz</td><td>869 MHz to 894 MHz</td><td>FDD</td></tr><tr><td>n7</td><td>2500 MHz to 2570 MHz</td><td>2620 MHz to 2690 MHz</td><td>FDD</td></tr><tr><td>n8</td><td>880 MHz to 915 MHz</td><td>925 MHz to 960 MHz</td><td>FDD</td></tr><tr><td>n20</td><td>832 MHz to 862 MHz</td><td>791 MHz to 821 MHz</td><td>FDD</td></tr><tr><td>n28</td><td>703 MHz to 748 MHz</td><td>758 MHz to 803 MHz</td><td>FDD</td></tr><tr><td>n38</td><td>2570 MHz to 2620 MHz</td><td>2570 MHz to 2620 MHz</td><td>TDD</td></tr><tr><td>n41</td><td>2496 MHz to 2690 MHz</td><td>2496 MHz to 2690 MHz</td><td>TDD</td></tr><tr><td>n50</td><td>1432 MHz to 1517 MHz</td><td>1432 MHz to 1517 MHz</td><td>TDD</td></tr><tr><td>n51</td><td>1427 MHz to 1432 MHz</td><td>1427 MHz to 1432 MHz</td><td>TDD</td></tr><tr><td>n66</td><td>1710 MHz to 1780 MHz</td><td>2110 MHz to 2200 MHz</td><td>FDD</td></tr><tr><td>n70</td><td>1695 MHz to 1710 MHz</td><td>1995 MHz to 2020 MHz</td><td>FDD</td></tr><tr><td>n71</td><td>663 MHz to 698 MHz</td><td>617 MHz to 652 MHz</td><td>FDD</td></tr><tr><td>n74</td><td>1427 MHz to 1470 MHz</td><td>1475 MHz to 1518 MHz</td><td>FDD</td></tr><tr><td>n75</td><td>N/A</td><td>1432 MHz to 1517 MHz</td><td>SDL</td></tr><tr><td>n76</td><td>N/A</td><td>1427 MHz to 1432 MHz</td><td>SDL</td></tr><tr><td>n77</td><td>3300 MHz to 4200 MHz</td><td>3300 MHz to 4200 MHz</td><td>TDD</td></tr><tr><td>n78</td><td>3300 MHz to 3800 MHz</td><td>3300 MHz to 3800 MHz</td><td>TDD</td></tr><tr><td>n79</td><td>4400 MHz to 5000 MHz</td><td>4400 MHz to 5000 MHz</td><td>TDD</td></tr><tr><td>n80</td><td>1710 MHz to 1785 MHz</td><td>N/A</td><td>SUL</td></tr><tr><td>n81</td><td>880 MHz to 915 MHz</td><td>N/A</td><td>SUL</td></tr><tr><td>n82</td><td>832 MHz to 862 MHz</td><td>N/A</td><td>SUL</td></tr><tr><td>n83</td><td>703 MHz to 748 MHz</td><td>N/A</td><td>SUL</td></tr><tr><td>n84</td><td>1920 MHz to 1980 MHz</td><td>N/A</td><td>SUL</td></tr><tr><td>n86</td><td>1710 MHz to 1780 MHz</td><td>N/A</td><td>SUL</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-51 </span>5G NR frequency bands for FR1.</p>


<a id="page_1030_c645"></a><p>For frequency range FR2, the bands in (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1030_c646\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table008\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;NR operating band&lt;\/th&gt;&lt;th&gt;Uplink (UL) operating band &lt;br&gt;(in MHz)&lt;br&gt;\n\t\t\t\t\t\t\tBS receive\/UE transmit&lt;br&gt;\n\t\t\t\t\t\t\tFUL_low to FUL_high&lt;\/th&gt;&lt;th&gt;Downlink (DL) operating band (in MHz)&lt;br&gt;\n\t\t\t\t\t\t\tBS transmit\/UE receive&lt;br&gt;\n\t\t\t\t\t\t\tFDL_low to FDL_high&lt;\/th&gt;&lt;th&gt;Duplex mode&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;n257&lt;\/td&gt;&lt;td&gt;26 500 to 29 500&lt;\/td&gt;&lt;td&gt;26 500 to 29 500&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n258&lt;\/td&gt;&lt;td&gt;24 250 to 27 500&lt;\/td&gt;&lt;td&gt;24 250 to 27 500&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n260&lt;\/td&gt;&lt;td&gt;37 000 to 40 000&lt;\/td&gt;&lt;td&gt;37 000 to 40 000&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n261&lt;\/td&gt;&lt;td&gt;27 500 to 28 350&lt;\/td&gt;&lt;td&gt;27 500 to 28 350&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-52 &lt;\/span&gt;5G NR frequency bands for FR2.&lt;\/p&gt;\n\n&quot;}">Fig. 1-52</a>) are defined in the current version of the specification <span class="eh-hint" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4" lang="en"><span class="eh-tooltip" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4">TS 38.101</span></span>.</p>


<a id="page_1030_c646"></a><div class="table-scroll"><table id="table008" class="eh-table eh-table--alternate"><colgroup><col><col><col><col></colgroup><thead><tr><th>NR operating band</th><th>Uplink (UL) operating band <br>(in MHz)<br>
							BS receive/UE transmit<br>
							FUL_low to FUL_high</th><th>Downlink (DL) operating band (in MHz)<br>
							BS transmit/UE receive<br>
							FDL_low to FDL_high</th><th>Duplex mode</th></tr></thead><tbody><tr><td>n257</td><td>26 500 to 29 500</td><td>26 500 to 29 500</td><td>TDD</td></tr><tr><td>n258</td><td>24 250 to 27 500</td><td>24 250 to 27 500</td><td>TDD</td></tr><tr><td>n260</td><td>37 000 to 40 000</td><td>37 000 to 40 000</td><td>TDD</td></tr><tr><td>n261</td><td>27 500 to 28 350</td><td>27 500 to 28 350</td><td>TDD</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-52 </span>5G NR frequency bands for FR2.</p>


<a id="page_1030_c647"></a><p>In addition to the frequency bands, <span class="eh-hint" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4" lang="en"><span class="eh-tooltip" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4">TS 38.101</span></span> specifies per band and per subcarrier spacing a different transmission bandwidth configuration, representing the channel bandwidth. For FR1, transmission bandwidth configurations of 5 MHz, 10 MHz, 15 MHz, 20 MHz, 25 MHz, 30 MHz, 40 MHz, 50 MHz, 60 MHz, 70 MHz (only for gNB), 80 MHz, 90 MHz and 100 MHz are allowed. See <span class="eh-hint" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4" lang="en"><span class="eh-tooltip" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4">TS 38.101</span></span> and <span class="eh-hint" title="3GPP TS 38.104: NR; Base Station (BS) radio transmission and reception" lang="en"><span class="eh-tooltip" title="3GPP TS 38.104: NR; Base Station (BS) radio transmission and reception">TS 38.104</span></span> for further information about which transmission bandwidth configuration is allowed per band and per subcarrier spacing. For FR2, transmission bandwidth configurations of 50 MHz, 100 MHz, 200 MHz and 400 MHz are specified. See <span class="eh-hint" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4" lang="en"><span class="eh-tooltip" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4">TS 38.101</span></span> for further information about which transmission bandwidth configuration is allowed per band and per subcarrier spacing.</p><p>In addition to greater bandwidth, 5G NR supports carrier aggregation such that in total, up to 16 component carriers can be combined and various combinations for intra-band and inter-band carrier aggregation are also possible. Carrier aggregation is a spectrum combination tool for multiple bands. In consideration of the propagation aspects or reliability, it is a smart feature that can be used to combine, e.g. wide bandwidth at higher frequencies susceptible to greater path loss with narrow bandwidth at lower frequencies that have reduced propagation loss. In terms of inter-RAT operation, 5G NR provides the possibility to combine 5G NR and EUTRAN carrier overlapping in frequency, allowing a smooth transition from 4G to 5G and the spectrum sharing concept.</p><p>In combination with the carrier aggregation mechanism or dual connectivity, <abbr class="eh-abbreviation" title="Supplementary downlink" lang="en"><span class="eh-tooltip" title="Supplementary downlink">SDL</span></abbr> supports spectrum usage in a more efficient manner. By combining a lower frequency supplementary carrier, an improvement in cell coverage can also be obtained. For the uplink direction, <abbr class="eh-abbreviation" title="Supplementary uplink" lang="en"><span class="eh-tooltip" title="Supplementary uplink">SUL</span></abbr> is defined in the current release as a supplementary uplink that would substitute for the current uplink, i.e. it represents a kind of “either or” decision concerning which of the two possible uplink bands can be used. For example, for one DL the UE is configured with two ULs and the network scheduler has to avoid overlapping <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>/<abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> transmissions on both ULs in time. Besides capacity issues, the goal here is also to provide a way to increase the uplink cell size when switching to a carrier with better propagation characteristics. As it is assumed that the UE maximum transmit power is typically lower than the gNB maximum transmit power. The switching of the uplink carrier frequency to one carrier that has less propagation loss represents a possible method to satisfy the higher data rate requests of UEs being at the cell edge.</p><p>As described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1004" class="eh-link eh-link--page">1.1 Overall system overview, page 10</a>, interworking operation is possible between EUTRAN and 5G NR. TS 38.101-3 specifies the maximum number of bands and carriers that can be combined via <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> and/or carrier aggregation.</p><p>The <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1030_c648\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table009\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Parameter&lt;\/th&gt;&lt;th&gt;FR1&lt;\/th&gt;&lt;th&gt;FR2&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Carrier aggregation&lt;\/td&gt;&lt;td colspan=\&quot;2\&quot;&gt;Up to 16 carriers&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Bandwidth per carrier&lt;\/td&gt;&lt;td&gt;5, 10, 15, 20, 25, 30, 40, 50, 60, 70, 80, 90, 100 MHz&lt;\/td&gt;&lt;td&gt;50, 100, 200, 400 MHz&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Subcarrier spacing&lt;\/td&gt;&lt;td&gt;15, 30, 60 kHz&lt;\/td&gt;&lt;td&gt;60, 120, 240 (not for data) kHz&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Max. number of subcarriers&lt;\/td&gt;&lt;td colspan=\&quot;2\&quot;&gt;3300 (FFT4096 mandatory)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Modulation scheme&lt;\/td&gt;&lt;td colspan=\&quot;2\&quot;&gt;QPSK, 16QAM, 64QAM, 256QAM; uplink also supports \u03c0\/2-BPSK (only DFT-s-OFDM)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Radio frame length&lt;\/td&gt;&lt;td colspan=\&quot;2\&quot;&gt;10 ms&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Subframe duration&lt;\/td&gt;&lt;td colspan=\&quot;2\&quot;&gt;1 ms (alignment at symbol boundaries every 1 ms)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;MIMO scheme&lt;\/td&gt;&lt;td colspan=\&quot;2\&quot;&gt;Max. 2 codewords mapped to max. 8 layers in downlink and to max. &lt;br&gt;4 layers in uplink&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Duplex mode&lt;\/td&gt;&lt;td&gt;TDD, FDD&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Access scheme&lt;\/td&gt;&lt;td colspan=\&quot;2\&quot;&gt;DL: CP-OFDM; UL: CP-OFDM, DFT-s-OFDM&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-53 &lt;\/span&gt;5G NR physical layer parameters overview.&lt;\/p&gt;\n\n&quot;}">Fig. 1-53</a> summarizes the main parameters on the 5G NR physical layer.</p>


<a id="page_1030_c648"></a><div class="table-scroll"><table id="table009" class="eh-table eh-table--alternate"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>FR1</th><th>FR2</th></tr></thead><tbody><tr><td>Carrier aggregation</td><td colspan="2">Up to 16 carriers</td></tr><tr><td>Bandwidth per carrier</td><td>5, 10, 15, 20, 25, 30, 40, 50, 60, 70, 80, 90, 100 MHz</td><td>50, 100, 200, 400 MHz</td></tr><tr><td>Subcarrier spacing</td><td>15, 30, 60 kHz</td><td>60, 120, 240 (not for data) kHz</td></tr><tr><td>Max. number of subcarriers</td><td colspan="2">3300 (FFT4096 mandatory)</td></tr><tr><td>Modulation scheme</td><td colspan="2">QPSK, 16QAM, 64QAM, 256QAM; uplink also supports π/2-BPSK (only DFT-s-OFDM)</td></tr><tr><td>Radio frame length</td><td colspan="2">10 ms</td></tr><tr><td>Subframe duration</td><td colspan="2">1 ms (alignment at symbol boundaries every 1 ms)</td></tr><tr><td>MIMO scheme</td><td colspan="2">Max. 2 codewords mapped to max. 8 layers in downlink and to max. <br>4 layers in uplink</td></tr><tr><td>Duplex mode</td><td>TDD, FDD</td><td>TDD</td></tr><tr><td>Access scheme</td><td colspan="2">DL: CP-OFDM; UL: CP-OFDM, DFT-s-OFDM</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-53 </span>5G NR physical layer parameters overview.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1031" data-prevpid="1030" data-nextpid="1032" data-chapter="1.2.5.2 5G NR baseband signal generation" id="page_1031">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.2.5.2 5G NR baseband signal generation</h4>
						
<a id="page_1031_c649"></a><p><span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span> specifies the OFDMA baseband signal generation used in 5G NR (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-054__OFDMA_baseband_signal_generation_in_5G_NR.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-54 &lt;\/span&gt;OFDMA baseband signal generation in 5G NR.&quot;}]">Fig. 1-54</a>). 5G NR implements the subcarrier allocation in relation to a so-called “point A” at the lowest frequency of the channel bandwidth. The definition of resource grids or carrier bandwidth parts allowing various 5G NR numerologies is then applied in the same channel bandwidth (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-057__DCsubcarrier_position_indication.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-57 &lt;\/span&gt;Indication of the DC subcarrier via a higher layer parameter in a manner specific to the resource grid (a downlink example is shown here).&quot;}]">Fig. 1-57, page 78</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1047" class="eh-link eh-link--page">1.4 Bandwidth part fundamentals, page 182</a>).</p><p>A time domain correction factor t<sup>μ</sup><sub>start,l</sub> has been introduced to allow to allocation of a mini-slot, i.e. resource allocation that occupies a few OFDMA symbols only.</p>


<a id="page_1031_c650"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:36%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-054__OFDMA_baseband_signal_generation_in_5G_NR_0bcb8aebfb.png" width="800" height="284" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-54 </span>OFDMA baseband signal generation in 5G NR.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1031_c651"></a><p>The subcarriers are numbered in positive order up to a maximum value, limited by the maximum transmission bandwidth configuration. The given description has to be understood as per resource grid, which is the mapping of a certain 5G NR numerology within the overall channel bandwidth (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1026" class="eh-link eh-link--page">1.2.2 Resource grid, page 56</a> for details).</p><p>As a major difference to EUTRAN, 5G NR no longer uses the band-centric definition of subcarrier #0 that was in the center of the transmission bandwidth configuration, but still equal in spectrum with the EUARFCN. By way of reminder, the OFDMA baseband signal generation of EUTRAN on the downlink (where subcarriers are numbered with reference to the center, the so-called subcarrier #0, in positive and negative order) is shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-055__OFDMA_baseband_signal_generation_on_the_downlink_EUTRAN.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-55 &lt;\/span&gt;OFDMA baseband signal generation on the downlink in EUTRAN.&quot;}]">Fig. 1-55</a>. In EUTRAN, due to the potential for direct current (<abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr>) leakage, there was an agreement that no data would be mapped onto subcarrier #0 in order to avoid interference. Note that this omission of one subcarrier is no longer mandatory in 5G NR.</p>


<a id="page_1031_c652"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:16%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-055__OFDMA_baseband_signal_generation_on_the_downlink_EUTRAN_c1428d20a7.png" width="800" height="127" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-55 </span>OFDMA baseband signal generation on the downlink in EUTRAN.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1031_c653"></a><p>To better understand the signaling of the <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> position, we will provide a brief overview of the direct current (<abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr>) problem based on the receiver example in the following <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-056__DC_leakage_problem.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-56 &lt;\/span&gt;Overview of the DC leakage problem based on a receiver example.&quot;}]">Fig. 1-56</a>. We assume that a receiver is asked to downconvert a frequency f<sub>RX</sub> to the baseband frequency f<sub>B</sub><sub>B</sub>. A common method is to use a mixer stage; a tunable frequency f<sub>LO</sub> is set on a local oscillator such that the following equation is true: f<sub>B</sub><sub>B</sub> = f<sub>R</sub><sub>X</sub> – f<sub>L</sub><sub>O</sub>. Unfortunately, the real world is not so ideal and there is a common problem related to leakage of the local oscillator input that spreads into the R<sub class="eh-text__number">X</sub> frequency input. Thus, a frequency error f<sub>e</sub> is visible at both mixer inputs, which results in a direct current at the output (<abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> leakage).</p>


<a id="page_1031_c654"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:46%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-056__DC_leakage_problem_ddc7ef780a.png" width="800" height="368" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-56 </span>Overview of the <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> leakage problem based on a receiver example.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1031_c655"></a><p>In order to allow mitigation procedures to be implemented in a manufacturer-dependent manner, the position of the <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> carrier is signaled from the transmitter perspective. The higher layer parameters DCsubcarrierDL and DCsubcarrierUL indicate the position of the <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> subcarrier for the uplink and downlink respectively, as is relevant for each resource grid (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-057__DCsubcarrier_position_indication.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-57 &lt;\/span&gt;Indication of the DC subcarrier via a higher layer parameter in a manner specific to the resource grid (a downlink example is shown here).&quot;}]">Fig. 1-57</a>). Note that the <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> subcarrier may be outside the prevailing resource grid, in which case DCsubcarrierDL may assume a value of 3300.</p>


<a id="page_1031_c656"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:46%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-057__DCsubcarrier_position_indication_e05524feea.png" width="800" height="368" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-57 </span>Indication of the <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> subcarrier via a higher layer parameter in a manner specific to the resource grid (a downlink example is shown here).</figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1032" data-prevpid="1031" data-nextpid="1033" data-chapter="1.2.5.3 Physical channels in 5G NR" id="page_1032">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.2.5.3 Physical channels in 5G NR</h4>
						
<a id="page_1032_c657"></a><p>Physical channels are used to transport information over the radio channel and are characterized by their function as well as by RF aspects such as the modulation scheme, reference signal mapping, transmit power, coding, etc. There are physical channels that carry higher layer information as well as physical channels that are terminated in the physical layer (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-058__5G_NR_channels.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-58 &lt;\/span&gt;Overview of the 5G NR physical channel structure.&quot;}]">Fig. 1-58</a>). The nomenclature for the physical channels in 5G NR corresponds in a straightforward manner to the nomenclature in LTE.</p><p>The physical channels defined on the downlink are:</p><ul class="eh-list eh-list--line"><li>Physical downlink shared channel (<abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>)</li><li>Physical downlink control channel (<abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>)</li><li>Physical broadcast channel (<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>) </li></ul><p>The physical channels defined on the uplink are:</p><ul class="eh-list eh-list--line"><li>Physical random access channel (<abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr>)</li><li>Physical uplink shared channel (<abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>)</li><li>Physical uplink control channel (<abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>)</li></ul><p>These physical channels resemble those from EUTRAN, and only the channels <abbr class="eh-abbreviation" title="Physical hybrid indicator channel" lang="en"><span class="eh-tooltip" title="Physical hybrid indicator channel">PHICH</span></abbr> and PCFICH have been eliminated. The <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> operation has been updated to a more flexible configuration performed by the network vis-à-vis the UE in relation to the timing of the scheduling transport block and the corresponding acknowledgments (<abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK). Moreover, the format of the downlink control channel (<abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>) is now indicated by layer 3 procedures.</p>


<a id="page_1032_c658"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:54%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-058__5G_NR_channels_7b0a440de8.png" width="800" height="429" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-58 </span>Overview of the 5G NR physical channel structure.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1032_c659"></a><p class="eh-headline-207 ">
				Physical downlink shared channel (<abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>)
			</p>


<a id="page_1032_c660"></a><p>The physical downlink shared channel (<abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>) is used to carry downlink data on a time and frequency shared basis. The <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> contains DL user data, UE-specific higher layer control messages, system information blocks and paging. The main characteristic here is a high degree of flexibility; frequency resource allocation is performed in units of <em>resource blocks</em>. The <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> uses a flexible modulation scheme depending on the actual <em>SNR</em> and a flexible coding scheme, i.e. using <em>LDPC</em> as coding scheme with a variable puncturing mechanism for coded bits, results in a flexible code rate.</p><p>The downlink physical layer processing of transport channels (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-059__PDSCH_physical_layer_processing.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-59 &lt;\/span&gt;PDSCH physical layer processing.&quot;}]">Fig. 1-59</a>) consists of the following steps (explained in greater detail in <span class="eh-hint" title="3GPP TS 38.300: NR; Overall description; Stage-2" lang="en"><span class="eh-tooltip" title="3GPP TS 38.300: NR; Overall description; Stage-2">TS 38.300</span></span> and <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>):</p><ul class="eh-list eh-list--line"><li>Transport block <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> attachment (<abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> above 3824 has 24-bit <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr>, otherwise 16-bit <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr>)</li><li>Up to two code words can be sent using single-user <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> (<abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr>)</li><li>One code word can be mapped to up to four layers, meaning that <abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr> is supported for up to 8-layer transmission.</li><li>Code block segmentation and code block <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> attachment (24-bit <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr>)</li><li>Channel coding: <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> coding (base graph #1 or base graph #2)</li><li>Physical-layer hybrid-ARQ processing and rate matching</li><li>Bit interleaving</li><li>Code block concatenation</li><li>Scrambling with <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> or cell ID to randomize data and make it user-specific</li><li>Modulation: <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr>, 16QAM, 64QAM and 256QAM</li><li>Layer mapping and transparent precoding</li><li>Mapping to virtual resource block</li><li>Mapping to assigned physical resources and <em>antenna ports</em></li></ul><a id="page_1032_c661"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:77%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-059__PDSCH_physical_layer_processing_907237a289.png" width="800" height="610" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-59 </span><abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> physical layer processing.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1032_c662"></a><p>At first glance, one aspect of the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> code word and layer may appear strange: There can be a maximum of two code words but eight layers per transmission. Spatial multiplexing or <abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr> is said to allow 8 × 8 <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> schemes, i.e. with eight TX and eight RX antennas implemented, and thus we would expect the throughput to increase by a factor of eight. The asymmetry of code words vs. layers has resulted in the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback mechanism. By transmitting two code words, only two <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedbacks are needed instead of eight, so one code word may be sent via four-layer transmission. The drawback is that a probable negative acknowledgment will trigger retransmission of all four layers. Thus, the current specification can be seen as a trade-off between robustness and signaling overhead. Based on a realistic assumption, 8 × 8 <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> only seems feasible under very good <abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr> conditions where the probability of negative feedback is low.</p><p>The UE can assume that at least one symbol with a demodulation reference signal is present on each layer in which the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> is transmitted to a UE. The number of <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> symbols and the mapping to resource element is configured by higher layers. For more details on <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1035" class="eh-link eh-link--page">1.2.5.6 Physical signals in 5G NR, page 110</a>.</p><p>The phase tracking reference signals (<abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr>) can be transmitted on additional symbols to help with receiver phase tracking. Precoding is not defined as mandatory as it was in LTE based on the codebook, but it is possible in a flexible scheme (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1034" class="eh-link eh-link--page">1.2.5.5 Antenna ports, precoding and quasi co-located ­antennas, page 98</a> for further details). Thus, layer mapping to resource blocks is performed in a manner that is specification transparent (known as non-codebook-based) and hence allows an operator-specific implementation of beamforming or precoding techniques transparent to the UE. For unicast <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> transmission, it is possible to mark certain resources by higher layers that are not available for the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>. This parameterization may configure rate matching patterns with <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr> and symbol level granularity or RE level granularity. One option resulting from this omission is the possibility to include LTE <abbr class="eh-abbreviation" title="Cell specific reference signal (LTE)" lang="en"><span class="eh-tooltip" title="Cell specific reference signal (LTE)">CRS</span></abbr> in cases where 5G NR and LTE share the same spectrum. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-060__Baseband_signal_generation_for_downlink_PDSCH_in_5G_NR.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-60 &lt;\/span&gt;Baseband signal generation for the downlink PDSCH in 5G NR.&quot;}]">Fig. 1-60</a> summarizes the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> signal generation.</p>


<a id="page_1032_c663"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:43%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-060__Baseband_signal_generation_for_downlink_PDSCH_in_5G_NR_ed5b08d33b.png" width="800" height="341" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-60 </span>Baseband signal generation for the downlink <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> in 5G NR.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1032_c664"></a><p class="eh-headline-207 ">
				Physical downlink control channel (<abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>)
			</p>


<a id="page_1032_c665"></a><p>The physical downlink control channel (<abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>) is used to carry downlink control information (<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>) primarily for scheduling DL transmissions on the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> and UL transmissions on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. The <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> always uses <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr> as its modulation scheme and polar coding as its channel coding scheme, except for small packets. The downlink control information (<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>) on the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> includes:</p><ul class="eh-list eh-list--line"><li>Downlink assignments containing at least the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> resource allocation, modulation and coding scheme (<abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr>) and hybrid-ARQ information related to <abbr class="eh-abbreviation" title="Downlink shared channel" lang="en"><span class="eh-tooltip" title="Downlink shared channel">DL-SCH</span></abbr></li><li>Uplink scheduling grants containing at least the modulation and coding format, resource allocation, power control information and hybrid-ARQ information related to <abbr class="eh-abbreviation" title="Uplink shared channel" lang="en"><span class="eh-tooltip" title="Uplink shared channel">UL-SCH</span></abbr></li><li>In addition, <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> can be used to convey signaling information for future releases such as the Rel. 16 work item “sidelink operation” and also for the future (optional) introduction of <abbr class="eh-abbreviation" title="Enhanced machine type communication" lang="en"><span class="eh-tooltip" title="Enhanced machine type communication">eMTC</span></abbr> scheduling information</li></ul><p>A <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> is confined within one <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> and may contain UE-specific or common control information. Further details on <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling are found in the section describing the <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1023" class="eh-link eh-link--page">1.2 Physical access fundamentals, page 46</a>). Chapter <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076" class="eh-link eh-link--page">2.2.3 DL resource assignment, page 295</a> contains further details on the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> content. Control channels are formed through aggregation of control channel elements, and each control channel element consists of a set of resource element groups. Different code rates for the control channels are realized by aggregating different numbers of control channel elements. Unlike the data channel <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> where <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> coding is applied, polar coding is used for the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>. To adapt either UE-specific scheduling or a common scheduling message, each resource element group carrying the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> has its own <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> that can be either cell-specific or UE-specific. This allows usage of beamforming techniques for the control channel. For improved robustness, <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr> modulation is used for the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>. Legacy technologies such as the LTE control channels are always distributed across the entire system bandwidth, thereby requiring a UE to scan the entire bandwidth and also meaning that in a situation with overlapping coverage areas, the inter-cell interference affects the entire bandwidth. Transmission of the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> in a configurable <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> introduces a much higher degree of flexibility for the control region definition concerning time, frequency and numerology. Such flexibility is accompanied by the requirement for higher layer configuration of this <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> and thus the replacement of the legacy control channel PCFICH to indicate the format <span class="eh-reference" title="X. Lin, R. Baldemair, T. Cheng, S. Parkvall, D.Larsson et al., 5G New Radio: unveiling the essentials of the next generation wireless access technology, Ericsson, 2018" lang="en"><span class="eh-tooltip" title="X. Lin, R. Baldemair, T. Cheng, S. Parkvall, D.Larsson et al., 5G New Radio: unveiling the essentials of the next generation wireless access technology, Ericsson, 2018">[Ref. 24]</span></span>.</p>


<a id="page_1032_c666"></a><p class="eh-headline-207 ">
				Physical broadcast channel (<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>)
			</p>


<a id="page_1032_c667"></a><p>The <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> is part of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>, the P/S-SCH synchronization block that is sent in the initial bandwidth part (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1066" class="eh-link eh-link--page">2.1.2 5G NR signal quality measurements and reporting, page 237</a>). Its job is to provide the UEs with the master information block (<abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>) content. In addition, the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> supports the synchronization on time and frequency and plays an important role in cell acquisition, cell selection and cell reselection situations. The <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> uses a fixed transport format and there is one <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> transport block that extends over a <abbr class="eh-abbreviation" title="Transmission time interval" lang="en"><span class="eh-tooltip" title="Transmission time interval">TTI</span></abbr> of 80 ms. The <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> uses a <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr> modulation scheme and a cell-specific <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> pattern that can be used for beamforming as discussed in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1039" class="eh-link eh-link--page">1.3 Beamforming fundamentals, page 169</a>. The applied channel coding scheme is polar coding.</p>


<a id="page_1032_c668"></a><p class="eh-headline-207 ">
				Physical uplink shared channel (<abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>)
			</p>


<a id="page_1032_c669"></a><p>The physical uplink shared channel (<abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>) is used to carry user data in the uplink direction on a time and frequency shared basis. It contains uplink user data from the <abbr class="eh-abbreviation" title="Uplink shared channel" lang="en"><span class="eh-tooltip" title="Uplink shared channel">UL-SCH</span></abbr> and higher layer control messages. Like the downlink channel <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>, the uplink <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> also exhibits a high degree of flexibility. Frequency resource allocation is performed in units of <em>resource blocks</em> and uses a flexible modulation scheme that depends on the actual <abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr> along with a flexible coding scheme, i.e. <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> as the coding scheme with a variable puncturing mechanism for coded bits resulting in a flexible code rate. To support channel estimation and proper demodulation, the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> contains <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> reference signals, mapped with either type A or type B depending on the higher layer configuration. Difference between type A or B mapping of <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> is the OFDM symbol where the counting starts, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-087__DM-RS-configuration_parameters_01.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-87 &lt;\/span&gt;PDSCH DMRS configuration parameters.&quot;}]">Fig. 1-87, page 112</a>. It is possible to multiplex uplink control information (<abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr>) within the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> as opposed to <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> transmission. Although the default waveform for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> is OFDMA, a higher layer may activate transform precoding as described in the section <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1038_c881" class="eh-link eh-link--page eh-link--ce">DFT-s-OFDMA signal generation, page 166</a>.</p><p>Uplink physical-layer processing of transport channels (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-061__PUSCH_physical_layer_processing.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-61 &lt;\/span&gt;PUSCH physical layer processing.&quot;}]">Fig. 1-61</a>) involves the following steps:</p><ul class="eh-list eh-list--line"><li>Transport block <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> attachment (<abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> above 3824 has 24-bit <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr>, otherwise 16-bit <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr>)</li><li>Code block segmentation and code block <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> attachment (24-bit <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr>)</li><li>Channel coding: <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> coding (base graph #1 or base graph #2)</li><li>Bit interleaving</li><li>Code block concatenation</li><li>Data and control multiplexing</li><li>Scrambling with <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> or cell ID to randomize data and make it user-specific</li><li>Modulation: π/2 <abbr class="eh-abbreviation" title="Binary phase shift keying" lang="en"><span class="eh-tooltip" title="Binary phase shift keying">BPSK</span></abbr> (with transform precoding only), <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr>, 16QAM, 64QAM and 256QAM</li><li>Layer mapping supporting uplink <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> with up to four layers</li><li>Optional activation of transform precoding, i.e. waveform DFT-s-OFDMA instead of <abbr class="eh-abbreviation" title="Cyclic prefix OFDMA" lang="en"><span class="eh-tooltip" title="Cyclic prefix OFDMA">CP-OFDMA</span></abbr></li><li>Codebook-based precoding</li><li>Mapping to virtual resource blocks</li><li>Mapping to assigned resources and antenna ports</li></ul><a id="page_1032_c670"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:77%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-061__PUSCH_physical_layer_processing_29db97603f.png" width="800" height="609" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-61 </span><abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> physical layer processing.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1032_c671"></a><p>The UE transmits at least one symbol with a demodulation reference signal on each layer in which the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> is transmitted. The number of <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> symbols and the mapping to resource elements are configured by the higher layers.</p><p>Phase tracking RS can be transmitted on additional symbols to help with receiver phase tracking. If a <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> is scheduled and the UE has to send uplink control information (<abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr>), these <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> bits are multiplexed with <abbr class="eh-abbreviation" title="Uplink shared channel" lang="en"><span class="eh-tooltip" title="Uplink shared channel">UL-SCH</span></abbr> information onto the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-062__Signal_generation_uplink_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-62 &lt;\/span&gt;Baseband signal generation for the uplink PUSCH in 5G NR.&quot;}]">Fig. 1-62</a> summarizes the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> signal generation.</p>


<a id="page_1032_c672"></a><p class="eh-headline-207 ">
				Physical uplink control channel (<abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>)
			</p>


<a id="page_1032_c673"></a><p>The physical uplink control channel (<abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>) carries the uplink control information (<abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr>) from the UE to the gNB. Note that depending on the resource allocation, the <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> can also be sent on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>, while the downlink <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> always uses the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>. In the current release, however, there is no simultaneous transmission of the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>.</p>


<a id="page_1032_c674"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:47%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-062__Signal_generation_uplink_v4_c40b5e5a68.png" width="800" height="373" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-62 </span>Baseband signal generation for the uplink <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> in 5G NR.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1032_c675"></a><p>Five formats exist for the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> depending on the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> duration and <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> payload size (<span class="eh-hint" title="3GPP TS 38.300: NR; Overall description; Stage-2" lang="en"><span class="eh-tooltip" title="3GPP TS 38.300: NR; Overall description; Stage-2">TS 38.300</span></span>):</p><ul class="eh-list eh-list--line"><li><strong>Format 0:</strong> Short <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> having 1 or 2 symbols with small <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> payloads of up to 2 bits with up to 6 UE multiplexing capacity in the same <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr></li><li><strong>Format 1:</strong> Long <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> having 4 to 14 symbols with small <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> payloads of up to 2 bits with UE multiplexing capacity of up to 84 UEs without frequency hopping and 36 UEs with frequency hopping in the same <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr></li><li><strong>Format 2:</strong> Short <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> having 1 or 2 symbols with large <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> payloads of more than 2 bits with no UE multiplexing capability in the same PRBs</li><li><strong>Format 3:</strong> Long <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> having 4 to 14 symbols with large <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> payloads of more than 2 bits with no UE multiplexing capability in the same PRBs</li><li><strong>Format 4:</strong> Long <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> having 4 to 14 symbols with moderate <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> payloads of more than 2 bits with multiplexing capacity of up to 4 UEs in the same PRBs</li></ul><p>The short <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> format with up to two <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> bits is based on sequence selection, while the short <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> format with more than two <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> bits frequency-multiplexes the <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> and <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>. The long <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> formats time-multiplex the <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> and <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>. Frequency hopping is supported for long <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> formats and for short <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> formats with a duration of two symbols. Long <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> formats can be repeated over multiple slots.</p><p>There is no direct <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> simultaneous transmission, but in cases where the <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> has to be sent simultaneously with the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> data, it is known as <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> multiplexing in <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> and is supported when <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmissions coincide in the same slot:</p><ul class="eh-list eh-list--line"><li><abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> to be mapped on <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> carrying HARQ-ACK feedback with one or two bits is multiplexed by puncturing mechanisms</li><li>In all other cases, <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> to be mapped on <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> is multiplexed by rate matching mechanisms</li><li>The <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> consists of the following information:</li><li>Channel state information (<abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr>)</li><li><abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback, <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK</li><li>Scheduling request</li></ul><p>Unlike the LTE <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> which is located at the edges of the uplink carrier bandwidth and has a fixed duration, 5G NR provides much greater flexibility for configuration of the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> transmission in frequency and time. It may even be possible to have two <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> instances during one slot for sending different <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> content such as <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback and <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> within one slot with two <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> instances. As described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-063__PUCCH_signal_generation__Formeln.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-63 &lt;\/span&gt;PUCCH signal generation for various formats.&quot;}]">Fig. 1-63</a>, higher layers can configure the time duration as the number of symbols and slots and the frequency occupation as the number of RBs. <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr> modulation is used for long PUCCHs with two or more bits of information and short PUCCHs with more than two bits of information.</p><p><abbr class="eh-abbreviation" title="Binary phase shift keying" lang="en"><span class="eh-tooltip" title="Binary phase shift keying">BPSK</span></abbr> modulation is used for long PUCCHs with one information bit. Transform precoding is applied to long PUCCHs. Depending on the higher layer parameter pucch-group-Hopping, frequency hopping can be activated for <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>. The sequence for the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> differs in accordance with the formats that are described above. If the UE has to generate <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> format 0 or 1, the signal generation is based on low-PAPR sequence generation. This sequence uses a cyclic shift function based on pseudorandom generation including parameters such as the slot and OFDMA symbol as well as the content. Especially for <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> format 0 where only one or two bits are sent, these bits will be replaced by a certain cyclic shift sequence instead. Format 1 which uses a longer sequence will apply the <abbr class="eh-abbreviation" title="Binary phase shift keying" lang="en"><span class="eh-tooltip" title="Binary phase shift keying">BPSK</span></abbr> or <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr> modulation scheme for the data content and scramble these with the cyclic shifted base low-PAPR sequence. In addition to format 0, <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> format 1 applies a <abbr class="eh-abbreviation" title="Code division multiplex" lang="en"><span class="eh-tooltip" title="Code division multiplex">CDM</span></abbr> spreading code. Format 2 is the modulated content scrambled with a scrambling sequence, initialized with either a UE-specific higher layer parameter <em>dataScramblingIdentityPUSCH</em> or the physical cell ID. A similar signal generation procedure is performed for <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> formats 3 and 4 (modulated bit pattern scrambled), but format 4 is also <abbr class="eh-abbreviation" title="Code division multiplex" lang="en"><span class="eh-tooltip" title="Code division multiplex">CDM</span></abbr> spread in a block-wise operation (<span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>). In <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> formats 1, 3 and 4, the reference symbols <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> are time division multiplexed with symbols carrying the <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> to maintain low <abbr class="eh-abbreviation" title="Peak-to-average power ratio" lang="en"><span class="eh-tooltip" title="Peak-to-average power ratio">PAPR</span></abbr>, whereas in <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> format 2, the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> symbol is frequency multiplexed through mapping onto subcarriers. Usage of cyclic shift and orthogonal cover code in <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> format 0, 1 and 4 enables multi-user multiplexing so that several UEs may share the same <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> resource.</p>


<a id="page_1032_c676"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:145%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-063__PUCCH_signal_generation__Formeln_1222b273fd.png" width="800" height="1153" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-63 </span><abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> signal generation for various formats.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1032_c677"></a><p>The UE sends the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> in a so-called <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> resource set that is configured by higher layers, either via the UE-specific control information PUCCH-Config or via a common description <em>PUCCH-Resource-Common</em> included in SIB1. The PUCCH-Config contains UE-specific <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> parameters (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-064__PUCCH_configuration_parameters.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-64 &lt;\/span&gt;PUCCH configuration parameters.&quot;}]">Fig. 1-64</a>) that are valid for a certain <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>. Using this information element, details can be given about the configuration of each <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> format.</p>


<a id="page_1032_c678"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:49%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-064__PUCCH_configuration_parameters_2f9894aace.png" width="800" height="392" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-64 </span><abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> configuration parameters.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1032_c679"></a><p>Major <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> configuration parameters are, for example, the power control settings for <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>, format-specific values such as additional <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>, the maximum code rate or number of slots, the starting <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr>, the frequency hopping activation and format-dependent parameters such as the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> bandwidth given as the number of RBs, number of symbols or orthogonal code details (<span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span>). A higher layer can configure a UE with <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> resources for <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting or <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> requests. For <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback, a UE can be configured with up to four <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> resource sets based on the <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> size and each set can contain a maximum of 32 <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> resources. The <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> information given by the higher layer parameter <em>PUCCH-Resource-Common</em> includes up to 16 resources, each corresponding to a <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> format, a first symbol, a duration, a <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr> offset and a cyclic shift index set for a <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> transmission. The <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> format is selected by the UE based on the <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> size and in addition, the downlink <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> may contain a <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> resource indicator. The network controls the transmit power of the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>.</p>


<a id="page_1032_c680"></a><p class="eh-headline-207 ">
				Physical random access channel (<abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr>)
			</p>


<a id="page_1032_c681"></a><p>The <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> is used for channel access and transmits an initial random access preamble. Random access preamble sequences of two different lengths are supported. A long sequence length of 839 is applied with subcarrier spacings of 1.25 kHz and 5 kHz and a short sequence length of 139 is applied with subcarrier spacings of 15 kHz and 30 kHz for FR1 and 60 kHz and 120 kHz for FR2. Long sequences support unrestricted sets and restricted sets of type A and type B, while short sequences support unrestricted sets only. Constraining the available sequences into a restricted set can be used to avoid inter-cell interference especially with larger cell sizes, or it may be applied in relation to the contention free random access procedure. The restricted set of preambles can be subdivided into two groups, type A and type B. Selection of a preamble of either type A set or type B set allows to indicate whether the UE requests small data transfer. If the UE requests data larger than a <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> threshold it may select a preamble out of set type B, for further details see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1064" class="eh-link eh-link--page">2.1.1.2 LTE initial access procedure, page 222</a>). Like in LTE, the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> preamble sequence is based on a <span class="eh-text--nowrap">Zadoff-Chu</span> sequence, inheriting the characteristics of constant amplitude, zero auto-correlation and low cross-correlation. The long sequence of length 839 contains four preamble formats. In terms of implementation aspects, the long sequence is targeted at larger cell size deployments. For the short sequence of length 139, overall nine different preamble formats are defined, targeting the implementation of smaller or indoor cells.</p><p>Multiple <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> preamble formats are defined with one or more <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> OFDMA symbols and different values for the cyclic prefix and guard time. The <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> preamble configuration to be used is provided to the UE in the system information.</p><p>There is a specific procedure for power ramping based on the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr>: The UE calculates the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> transmit power of the first preamble based on the network signaled expected power value <em>PREAMBLE_RECEIVED_TARGET_POWER</em> and an estimated path loss. For consecutive retransmission of the preamble, the UE includes for power calculation purposes the most recent estimate of the path loss and the power ramping steps given by the higher layers. If the UE performs beam switching, the counter for the power ramping remains unchanged (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1036_c789" class="eh-link eh-link--page eh-link--ce">Physical random access channel (PRACH) – power control, page 130</a>).</p><p>The system information informs the UE of the association between the <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr> blocks and the <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> resources. The threshold of the <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr> block for <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> resource association is based on the <abbr class="eh-abbreviation" title="Reference signal received power" lang="en"><span class="eh-tooltip" title="Reference signal received power">RSRP</span></abbr> and network configuration. Higher layers use two possible configuration messages for detailed generation and configuration of <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> sequences: The <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> RACH-ConfigGeneric specifies cell-specific parameters for generic regular random access. In addition for beam failure recovery procedures, the <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> RACH-ConfigDedicated specifies dedicated random access procedure parameters (<span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span>). Parameters for the generic random access configuration are, for example, the frequency and time transmission occasion information, <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> sequence configuration, initial transmit power information, retransmission maximum and receive time window information for random access response.</p>


<a id="page_1032_c682"></a><p class="eh-headline-207 ">
				Random access preamble formats
			</p>


<a id="page_1032_c683"></a><p>The <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> sequence is based on a length of 839 or 139. It uses a structure known as the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> preamble format (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-065__Prach_format_general_structure.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-65 &lt;\/span&gt;PRACH format. General structure for long and short sequences.&quot;}]">Fig. 1-65</a> to <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-069__Prach_format_short_sequences_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-69 &lt;\/span&gt;PRACH preamble formats for short sequences.&quot;}]">Fig. 1-69</a>). For the long sequence of 839, a total of four formats exist, and for the short sequence of 139, a total of nine formats exist. The general structure of the format can be given as a symbol part length N<sub>u</sub> based on the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> sequence T<sub>SEQ</sub> and possible repetitions, in addition to a cyclic prefix length N<sub>CP</sub> and a possible guard time N<sub>GP</sub> (<span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>). Note that the guard time is not directly defined; for the long sequence, the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> sequence plus the cyclic prefix results in a time length that does not comply with the subframe duration of 1 ms. Therefore the guard time is the remaining time of the subframe duration, such that the sum of the durations of the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> sequence, cyclic prefix and the guard time equal an integer multiple of subframes. If the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> sequence is the short sequence, the timing reference for an optional guard time is the duration of one OFDMA symbol or multiple symbols instead of subframe duration. Thus, we can understand the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> format as being shorter than the specified timing duration of either slot, multiple of slots, subframe or multiple of subframes. This is in order to compensate a propagation delay due to a distance between the UE and gNB since the message 1 or <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> preamble is the only signal that is not time-aligned via a timing advance control mechanism (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1083_c1311" class="eh-link eh-link--page eh-link--ce">Uplink time alignment procedures, page 368</a>). The allowed subcarrier spacing when applying the long sequence for the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> preamble can be either 1.25 kHz or 5 kHz. The short preamble duration allows the subcarrier spacings <span class="eh-text--nowrap">15 kHz ∙ 2</span><sup class="eh-text__letter">µ</sup> with <em>µ</em> = [0, 1, 2 or 3] depending on the frequency range. In numbers, the short preamble for FR1 can assume the values 15 kHz or 30 kHz as the subcarrier spacing and 60 kHz or 120 kHz as the subcarrier spacing for FR2. The exact time parameters for the preamble format are listed in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1032_c686\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table010\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Format&lt;\/th&gt;&lt;th&gt;Subcarrier spacing&lt;\/th&gt;&lt;th&gt;N&lt;sub&gt;u&lt;\/sub&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;N&lt;sub&gt;CP&lt;\/sub&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;N&lt;sub&gt;GP&lt;\/sub&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;Length in subframes&lt;\/th&gt;&lt;th&gt;Max. cell size&lt;\/th&gt;&lt;th&gt;Use case&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;1.25 kHz&lt;\/td&gt;&lt;td&gt;24 576&lt;\/td&gt;&lt;td&gt;3168&lt;\/td&gt;&lt;td&gt;2976&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;15 km&lt;\/td&gt;&lt;td&gt;LTE and 5G shared&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1.25 kHz&lt;\/td&gt;&lt;td&gt;2\u221924 576&lt;\/td&gt;&lt;td&gt;21024&lt;\/td&gt;&lt;td&gt;21 984&lt;\/td&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;110 km&lt;\/td&gt;&lt;td&gt;Large outdoor cells&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1.25 kHz&lt;\/td&gt;&lt;td&gt;4\u221924 576&lt;\/td&gt;&lt;td&gt;4688&lt;\/td&gt;&lt;td&gt;19 888&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;100 km&lt;\/td&gt;&lt;td&gt;Large outdoor cells&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;5 kHz&lt;\/td&gt;&lt;td&gt;4\u22196144&lt;\/td&gt;&lt;td&gt;3168&lt;\/td&gt;&lt;td&gt;2976&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;15 km&lt;\/td&gt;&lt;td&gt;High Doppler shift&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-66 &lt;\/span&gt;PRACH preamble formats for long sequences, L = 839 and subcarrier spacing of 1.25 kHz or 5 kHz. Values in multiples of T&lt;sub&gt;c&lt;\/sub&gt; and \u03f0.&lt;\/p&gt;\n\n&quot;}">Fig. 1-66</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1032_c688\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table011\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Format&lt;\/th&gt;&lt;th&gt;Subcarrier spacing&lt;\/th&gt;&lt;th&gt;N&lt;sub&gt;u&lt;\/sub&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;N&lt;sub&gt;CP&lt;\/sub&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;N&lt;sub&gt;GP&lt;\/sub&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;Max. cell size&lt;\/th&gt;&lt;th&gt;Use case&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;A1&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;2\u22192048&lt;\/td&gt;&lt;td&gt;288&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0 km&lt;\/td&gt;&lt;td&gt;Pre-synchronized timing advance&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A2&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;4\u22192048&lt;\/td&gt;&lt;td&gt;576&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0 km&lt;\/td&gt;&lt;td&gt;Indoor, small cell&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A3&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;6\u22192048&lt;\/td&gt;&lt;td&gt;864&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0 km&lt;\/td&gt;&lt;td&gt;Indoor, small cell&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B1&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;2\u22192048&lt;\/td&gt;&lt;td&gt;216&lt;\/td&gt;&lt;td&gt;72&lt;\/td&gt;&lt;td&gt;0.3 km&lt;\/td&gt;&lt;td&gt;Small cell&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B2&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;4\u22192048&lt;\/td&gt;&lt;td&gt;360&lt;\/td&gt;&lt;td&gt;216&lt;\/td&gt;&lt;td&gt;1 km&lt;\/td&gt;&lt;td&gt;Urban cell&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B3&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;6\u22192048&lt;\/td&gt;&lt;td&gt;504&lt;\/td&gt;&lt;td&gt;360&lt;\/td&gt;&lt;td&gt;2 km&lt;\/td&gt;&lt;td&gt;Urban cell&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B4&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;12\u22192048&lt;\/td&gt;&lt;td&gt;936&lt;\/td&gt;&lt;td&gt;792&lt;\/td&gt;&lt;td&gt;4 km&lt;\/td&gt;&lt;td&gt;Outdoor cell&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;C0&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;2048&lt;\/td&gt;&lt;td&gt;1240&lt;\/td&gt;&lt;td&gt;1096&lt;\/td&gt;&lt;td&gt;5 km&lt;\/td&gt;&lt;td&gt;Outdoor cell&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;C1&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;4\u22192048&lt;\/td&gt;&lt;td&gt;2048&lt;\/td&gt;&lt;td&gt;2912&lt;\/td&gt;&lt;td&gt;15 km&lt;\/td&gt;&lt;td&gt;Larger outdoor cell&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-68 &lt;\/span&gt;PRACH preamble formats for short sequences, L = 139 and subcarrier spacing of 15 kHz. Values in multiples of T&lt;sub&gt;c&lt;\/sub&gt; and \u03f0.&lt;\/p&gt;\n\n&quot;}">Fig. 1-68</a>. In the case of the short <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> sequence, the time information is depending on the 5G NR numerology or <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr>. For reading aspects, the time information that is given has to be multiplied by the time parameter Kappa (ϰ), representing a unit of time T<sub>c</sub> (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-040__Time_unit_Tc_used_for_5G_NR_in_comparison_to_time_unit_Ts_known_from_EUTRAN.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-40 &lt;\/span&gt;Time unit Tc used in 5G NR in comparison with time unit Ts from EUTRAN.&quot;}]">Fig. 1-40</a>). For a short sequence, only the number for 15 kHz <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> is presented, e.g. the timing information such as the guard band is based on an integer multiple of the symbol duration of 66.67 μs for 15 kHz <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr>. In the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-069__Prach_format_short_sequences_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-69 &lt;\/span&gt;PRACH preamble formats for short sequences.&quot;}]">Fig. 1-69</a>, the timing indication corresponds to the duration of two OFDMA symbols assuming 15 kHz <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr>. The maximum cell size is given as a rough estimate based on propagation at the speed of light within the guard time back and forth since it must be compensated by the timing advance signaling parameter.</p>


<a id="page_1032_c684"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:33%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-065__Prach_format_general_structure_e60ba099eb.png" width="800" height="262" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-65 </span><abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> format. General structure for long and short sequences.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1032_c685"></a><p><br></p>


<a id="page_1032_c686"></a><div class="table-scroll"><table id="table010" class="eh-table eh-table--alternate"><colgroup><col><col><col><col><col><col><col><col></colgroup><thead><tr><th>Format</th><th>Subcarrier spacing</th><th>N<sub>u</sub>
&nbsp;</th><th>N<sub>CP</sub>
&nbsp;</th><th>N<sub>GP</sub>
&nbsp;</th><th>Length in subframes</th><th>Max. cell size</th><th>Use case</th></tr></thead><tbody><tr><td>0</td><td>1.25 kHz</td><td>24 576</td><td>3168</td><td>2976</td><td>1</td><td>15 km</td><td>LTE and 5G shared</td></tr><tr><td>1</td><td>1.25 kHz</td><td>2∙24 576</td><td>21024</td><td>21 984</td><td>3</td><td>110 km</td><td>Large outdoor cells</td></tr><tr><td>2</td><td>1.25 kHz</td><td>4∙24 576</td><td>4688</td><td>19 888</td><td>4</td><td>100 km</td><td>Large outdoor cells</td></tr><tr><td>3</td><td>5 kHz</td><td>4∙6144</td><td>3168</td><td>2976</td><td>1</td><td>15 km</td><td>High Doppler shift</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-66 </span><abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> preamble formats for long sequences, L = 839 and subcarrier spacing of 1.25 kHz or 5 kHz. Values in multiples of T<sub>c</sub> and ϰ.</p>


<a id="page_1032_c687"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:43%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-067__Prach_format_long_sequences_0d03a8e593.png" width="800" height="342" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-67 </span><abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> preamble formats for long sequences.<br></figcaption></figure></div></div></div></div></div></div>


<a id="page_1032_c688"></a><div class="table-scroll"><table id="table011" class="eh-table eh-table--alternate"><colgroup><col><col><col><col><col><col><col></colgroup><thead><tr><th>Format</th><th>Subcarrier spacing</th><th>N<sub>u</sub>
&nbsp;</th><th>N<sub>CP</sub>
&nbsp;</th><th>N<sub>GP</sub>
&nbsp;</th><th>Max. cell size</th><th>Use case</th></tr></thead><tbody><tr><td>A1</td><td>15 kHz</td><td>2∙2048</td><td>288</td><td>0</td><td>0 km</td><td>Pre-synchronized timing advance</td></tr><tr><td>A2</td><td>15 kHz</td><td>4∙2048</td><td>576</td><td>0</td><td>0 km</td><td>Indoor, small cell</td></tr><tr><td>A3</td><td>15 kHz</td><td>6∙2048</td><td>864</td><td>0</td><td>0 km</td><td>Indoor, small cell</td></tr><tr><td>B1</td><td>15 kHz</td><td>2∙2048</td><td>216</td><td>72</td><td>0.3 km</td><td>Small cell</td></tr><tr><td>B2</td><td>15 kHz</td><td>4∙2048</td><td>360</td><td>216</td><td>1 km</td><td>Urban cell</td></tr><tr><td>B3</td><td>15 kHz</td><td>6∙2048</td><td>504</td><td>360</td><td>2 km</td><td>Urban cell</td></tr><tr><td>B4</td><td>15 kHz</td><td>12∙2048</td><td>936</td><td>792</td><td>4 km</td><td>Outdoor cell</td></tr><tr><td>C0</td><td>15 kHz</td><td>2048</td><td>1240</td><td>1096</td><td>5 km</td><td>Outdoor cell</td></tr><tr><td>C1</td><td>15 kHz</td><td>4∙2048</td><td>2048</td><td>2912</td><td>15 km</td><td>Larger outdoor cell</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-68 </span><abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> preamble formats for short sequences, L = 139 and subcarrier spacing of 15 kHz. Values in multiples of T<sub>c</sub> and ϰ.</p>


<a id="page_1032_c689"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:42%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-069__Prach_format_short_sequences_v4_c1eeb9c24a.png" width="800" height="332" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-69 </span><abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> preamble formats for short sequences.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1032_c690"></a><p>Generation of the actual <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> sequence is very similar to LTE. The network can configure the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> settings via the cell-specific <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> RACH-ConfigCommon which is valid for the active <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>. First, the UE uses the <em>prach-RootSequenceIndex</em> to build a base Zadoff-Chu sequence (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-070__PRACH_sequence_generation.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-70 &lt;\/span&gt;PRACH sequence generation.&quot;}]">Fig. 1-70</a>). By applying different cyclic shifts, 64 preambles defined in each time-frequency <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> occasion are now obtained. Additional info is provided in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1070" class="eh-link eh-link--page">2.1.4 Random access procedure in 5G NR, page 250</a>.<br></p>


<a id="page_1032_c691"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:795px;"><div class="book-img-wrap__inner" style="padding-bottom:79%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/1-070__PRACH_sequence_generation.png" width="795" height="628" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-70 </span><abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> sequence generation.</figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1033" data-prevpid="1032" data-nextpid="1034" data-chapter="1.2.5.4 Control resource set CORESET" id="page_1033">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.2.5.4 Control resource set CORESET</h4>
						
<a id="page_1033_c692"></a><p>A UE is configured by <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> layer with control and resource set information that comprises the search space where the UE expects downlink control information (<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>) sent on the physical channel <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>. The UE monitors a set of <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> candidates in one or more control resource sets designated as ­CORESET (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-071__Coreset_operation_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-71 &lt;\/span&gt;Control resource set. Operational concept.&quot;}]">Fig. 1-71</a>). There are common search spaces for control information such as paging, system information scheduling or the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> response as well as <span class="eh-text--nowrap">UE-s</span>pecific search spaces for uplink and/or downlink resource scheduling. This represents a change compared to LTE where the control channel <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> is spanned over the entire system bandwidth and allows a time duration that is signaled via a separate control channel for format indication. To introduce greater flexibility and a type of network adaptation to the UE, the concept of ­CORESET is used in 5G NR. One consequence of this greater flexibility is the need for higher layer configuration of this <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr>.</p>


<a id="page_1033_c693"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:42%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-071__Coreset_operation_v4_5b91fed3f8.png" width="800" height="335" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-71 </span>Control resource set. Operational concept.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1033_c694"></a><p>The <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> resource is given by units of <abbr class="eh-abbreviation" title="Resource element group" lang="en"><span class="eh-tooltip" title="Resource element group">REG</span></abbr> and <abbr class="eh-abbreviation" title="Control channel element" lang="en"><span class="eh-tooltip" title="Control channel element">CCE</span></abbr>. A control resource set consists of resource blocks in the frequency domain and several OFDMA symbols [1, 2 or 3] in the time domain. The frequency assignment for <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> within a slot can be contiguous or non-contiguous in spectrum. For slot-based scheduling, the starting symbol can be #0, #1 or #2, which is a difference compared to LTE where the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> always starts at symbol #0.</p><p>Note that this control information is valid for a bandwidth part only (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1047" class="eh-link eh-link--page">1.4 Bandwidth part fundamentals, page 182</a>). Since the UE is only required to receive the active bandwidth part, it would be possible to have multiple ­CORESET configurations active within one carrier frequency bandwidth to enable multiple 5G NR numerologies (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1024_c584\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table003\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Subcarrier spacing (kHz)&lt;\/th&gt;&lt;th&gt;15&lt;\/th&gt;&lt;th&gt;30&lt;\/th&gt;&lt;th&gt;60&lt;\/th&gt;&lt;th&gt;120&lt;\/th&gt;&lt;th&gt;240&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbol duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;66.7&lt;\/td&gt;&lt;td&gt;33.3&lt;\/td&gt;&lt;td&gt;16.7&lt;\/td&gt;&lt;td&gt;8.33&lt;\/td&gt;&lt;td&gt;4.17&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;CP duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4.7&lt;\/td&gt;&lt;td&gt;2.3&lt;\/td&gt;&lt;td&gt;1.2 (normal)&lt;br&gt;4.13 (extended)&lt;\/td&gt;&lt;td&gt;0.59&lt;\/td&gt;&lt;td&gt;0.29&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. nominal bandwidth (MHz)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;50&lt;\/td&gt;&lt;td&gt;100&lt;\/td&gt;&lt;td&gt;100 for FR1&lt;br&gt;200 for FR2&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. FFT size&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbols per slot&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14 &lt;br&gt;12 (extended CP)&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per subframe&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per frame&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;40&lt;\/td&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td&gt;160&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-28&lt;\/span&gt; 3GPP 5G NR numerology based on CP-OFDMA.&lt;\/p&gt;\n\n&quot;}">Fig. 1-28, page 51</a> for details). The higher layer information element (<abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr>) <em>ControlResourceSet</em> contains the number of resource blocks <em>frequencyDomainResources</em> used for the ­CORESET and the time information duration <span class="eh-text--math">∈</span> {1, 2, 3}, indicating the number of OFDMA symbols (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-072__CORESET_definition_01.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-72 &lt;\/span&gt; Control resource set (CORESET) and bandwidth part operation.&quot;}]">Fig. 1-72</a>).</p>


<a id="page_1033_c695"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:51%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-072__CORESET_definition_01_dc7ecab40d.png" width="800" height="402" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-72 </span> Control resource set (<abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr>) and bandwidth part operation.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1033_c696"></a><p>A control channel <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> consists of one or more control channel elements (<abbr class="eh-abbreviation" title="Control channel element" lang="en"><span class="eh-tooltip" title="Control channel element">CCE</span></abbr>). In addition, a certain aggregation level can be applied as shown in the table:</p>


<a id="page_1033_c697"></a><div class="table-scroll"><table class="eh-table eh-table--alternate" id="table012"><colgroup><col><col></colgroup><thead><tr><th scope="col">Aggregation level</th><th scope="col">Number of CCEs</th></tr></thead><tbody><tr><td>1</td><td>1</td></tr><tr><td>2</td><td>2</td></tr><tr><td>4</td><td>4</td></tr><tr><td>8</td><td>8</td></tr><tr><td>16</td><td>16</td></tr></tbody></table></div>


<a id="page_1033_c698"></a><p>The aggregation level is like in EUTRAN: A control channel element (<abbr class="eh-abbreviation" title="Control channel element" lang="en"><span class="eh-tooltip" title="Control channel element">CCE</span></abbr>) can be repeated to increase the receiver performance (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-073__Aggregation_level_coreset_example.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-73 &lt;\/span&gt;Aggregation level for control information transmission (example). [Ref. 32]&quot;}]">Fig. 1-73</a>). Some control channel information uses a constant aggregation level while others can use a variable aggregation level. Thus, the UE must perform blind detection. A control channel element consists of six resource element groups (<abbr class="eh-abbreviation" title="Resource element group" lang="en"><span class="eh-tooltip" title="Resource element group">REG</span></abbr>) where a resource element group equals one resource block during one OFDM symbol. In summary, we can describe the <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> as a set of <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> candidates formed by CCEs at a given aggregation level which the UE is expected to attempt to decode. Such <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> candidates are monitored using search spaces and the UE distinguishes between common and dedicated search spaces. Note that like in EUTRAN, the UE may not exactly know the aggregation level L, resulting in a certain mechanism for blind detection which slightly increases the complexity of decoding.</p>


<a id="page_1033_c699"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:46%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-073__Aggregation_level_coreset_example_bc5dc5611b.png" width="800" height="365" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-73 </span>Aggregation level for control information transmission (example). <span class="eh-reference" title="Erik Dahlmann, Stefan Parkvall, Johan Sköld, 4G LTE / LTE-Advanced for Mobile Broadband, Academic Press, Elseviewer Ltd, 2013, ISBN 978-0-12-419985-9" lang="en"><span class="eh-tooltip" title="Erik Dahlmann, Stefan Parkvall, Johan Sköld, 4G LTE / LTE-Advanced for Mobile Broadband, Academic Press, Elseviewer Ltd, 2013, ISBN 978-0-12-419985-9">[Ref. 32]</span></span></figcaption></figure></div></div></div></div></div></div>


<a id="page_1033_c700"></a><p>A UE may be configured with multiple control resource sets. Each control resource set is associated with one <em>CCE-to-REG mapping</em> only and the mapping for a control resource set may be interleaved or non-interleaved, configured by the higher-layer parameter <em>cce-REG-MappingType</em>. The size of the <abbr class="eh-abbreviation" title="Resource element group" lang="en"><span class="eh-tooltip" title="Resource element group">REG</span></abbr> bundle is indicated by the higher layer <em>reg-BundleSize</em> and the interleaving size is indicated by interleaverSize if these values are configurable. Note that a resource element group (<abbr class="eh-abbreviation" title="Resource element group" lang="en"><span class="eh-tooltip" title="Resource element group">REG</span></abbr>) may or may not contain demodulation reference signals (<abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>).</p><p>For example, the common search space <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr>, indicated via <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>, uses a bundle size of two and an interleaving size of six REGs (see <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span> for further details). The following <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-074__CCE_REG-for_Coreset_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-74 &lt;\/span&gt;Control channel element and resource element group for CORESET configuration.&quot;}]">Fig. 1-74</a> summarizes the aspects of <abbr class="eh-abbreviation" title="Control channel element" lang="en"><span class="eh-tooltip" title="Control channel element">CCE</span></abbr> and <abbr class="eh-abbreviation" title="Resource element group" lang="en"><span class="eh-tooltip" title="Resource element group">REG</span></abbr> by giving an example of <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> occupying one OFDM symbol and with aggregation level two.</p><p>A <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> is confined to one <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> and contains its own <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> symbols. This allows the introduction of beamforming in a PDCCH-specific manner. Per bandwidth part, the UE may be configured to receive the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> types listed in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1033_c703\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table013\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Name&lt;\/th&gt;&lt;th&gt;Common or UE-specific type&lt;\/th&gt;&lt;th&gt;RNTI&lt;\/th&gt;&lt;th&gt;Purpose&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Type0-PDCCH&lt;\/td&gt;&lt;td&gt;Common&lt;\/td&gt;&lt;td&gt;SI-RNTI&lt;\/td&gt;&lt;td&gt;Configured by MIB to indicate system information broadcast for SIB&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Type0A-PDCCH&lt;\/td&gt;&lt;td&gt;Common&lt;\/td&gt;&lt;td&gt;SI-RNTI&lt;\/td&gt;&lt;td&gt;Configured by SIB to indicate system information broadcast for \u201cother system information\u201d&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Type1-PDCCH&lt;\/td&gt;&lt;td&gt;Common&lt;\/td&gt;&lt;td&gt;RA-RNTI, TC-RNTI or C-RNTI&lt;\/td&gt;&lt;td&gt;Scheduling of PRACH response, e.g. message 2 or message 4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Type2-PDCCH&lt;\/td&gt;&lt;td&gt;Common&lt;\/td&gt;&lt;td&gt;P-RNTI&lt;\/td&gt;&lt;td&gt;Indicates paging channel&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Type3-PDCCH&lt;\/td&gt;&lt;td&gt;Common&lt;\/td&gt;&lt;td&gt;INT-RNTI, TPC-CS- RNTI or C-RNTI&lt;\/td&gt;&lt;td&gt;Power control scheduling or scheduling after interruption&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;UE-specific&lt;\/td&gt;&lt;td&gt;Specific per UE&lt;\/td&gt;&lt;td&gt;C-RNTI or CS-RNTI&lt;\/td&gt;&lt;td&gt;PDSCH scheduled UE-specific traffic&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-75 &lt;\/span&gt;Search space types in 5G NR.&lt;\/p&gt;\n\n&quot;}">Fig. 1-75</a>. Each <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> type may be sent on the primary cell only and/or on a secondary cell if the UE supports <abbr class="eh-abbreviation" title="Multi-radio dual connectivity" lang="en"><span class="eh-tooltip" title="Multi-radio dual connectivity">MR-DC</span></abbr> as described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1007" class="eh-link eh-link--page">1.1.2.1 Connectivity scenarios, page 13</a>. The content of the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> channel known as downlink control information message <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> is attached with a <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> scrambled with a physical layer identifier <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr>.</p>


<a id="page_1033_c701"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:52%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-074__CCE_REG-for_Coreset_v4_392a9cfea4.png" width="800" height="415" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-74 </span>Control channel element and resource element group for <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> configuration.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1033_c702"></a><p>There exist several formats, for example, indicating system information, random access response, UE-specific, etc. They are described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1063" class="eh-link eh-link--page">2.1.1.1 LTE cell search, selection and system information acquisition, page 219</a>. Further details on the physical identifier <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> and the various types are given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076" class="eh-link eh-link--page">2.2.3 DL resource assignment, page 295</a>. There can be up to ten search spaces defined per bandwidth part and the following search space types exist in 5G NR.</p>


<a id="page_1033_c703"></a><div class="table-scroll"><table id="table013" class="eh-table eh-table--alternate"><colgroup><col><col><col><col></colgroup><thead><tr><th>Name</th><th>Common or UE-specific type</th><th>RNTI</th><th>Purpose</th></tr></thead><tbody><tr><td>Type0-PDCCH</td><td>Common</td><td>SI-RNTI</td><td>Configured by MIB to indicate system information broadcast for SIB</td></tr><tr><td>Type0A-PDCCH</td><td>Common</td><td>SI-RNTI</td><td>Configured by SIB to indicate system information broadcast for “other system information”</td></tr><tr><td>Type1-PDCCH</td><td>Common</td><td>RA-RNTI, TC-RNTI or C-RNTI</td><td>Scheduling of PRACH response, e.g. message 2 or message 4</td></tr><tr><td>Type2-PDCCH</td><td>Common</td><td>P-RNTI</td><td>Indicates paging channel</td></tr><tr><td>Type3-PDCCH</td><td>Common</td><td>INT-RNTI, TPC-CS- RNTI or C-RNTI</td><td>Power control scheduling or scheduling after interruption</td></tr><tr><td>UE-specific</td><td>Specific per UE</td><td>C-RNTI or CS-RNTI</td><td>PDSCH scheduled UE-specific traffic</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-75 </span>Search space types in 5G NR.</p>


<a id="page_1033_c704"></a><p>Search space operation in idle and dedicated mode is summarized in the following <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-076__Search_space_types.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-76 &lt;\/span&gt;Search space configuration types in 5G NR for UE operation in idle and dedicated mode.&quot;}]">Fig. 1-76</a>.</p>


<a id="page_1033_c705"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:44%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-076__Search_space_types_1ff7e14519.png" width="800" height="352" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-76 </span>Search space configuration types in 5G NR for UE operation in idle and dedicated mode.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1033_c706"></a><p>Note that there is an initial bandwidth part configured per cell and the network should make sure that this initial bandwidth part contains the relevant search spaces for required signaling information such as system information, random access and paging information. The master information block (<abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>) contains an information element pdcch-ConfigSIB1 describing the control resource set configuration for the initial common search space that must be used by the UE to obtain the SIB1 system information block. For further details on <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076_c1161" class="eh-link eh-link--page eh-link--ce">Downlink control information (DCI), page 302</a>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1034" data-prevpid="1033" data-nextpid="1035" data-chapter="1.2.5.5 Antenna ports, precoding and quasi co-located ­antennas" id="page_1034">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.2.5.5 Antenna ports, precoding and quasi co-located ­antennas</h4>
						
<a id="page_1034_c707"></a><p>Like LTE, 5G NR also uses the terms antenna port and precoding in addition to the concept of co-location of antennas. This chapter provides a brief introduction to the abstract definition of antenna ports. It also outlines some of the general aspects of precoding and how this is applied on the 5G downlink and uplink as well as issues related to antenna co-location.</p>


<a id="page_1034_c708"></a><p class="eh-headline-207 ">
				Antenna ports
			</p>


<a id="page_1034_c709"></a><p>At first glance, the term antenna port seems like an abstract concept. Moreover, the official definition for the term antenna port is not easy to understand: <em>An antenna port is defined such that the channel over which a symbol on the antenna port is conveyed can be inferred from the channel over which another symbol on the same antenna port is conveyed</em> (<span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>). To understand this sentence, we must recall certain aspects related to channel estimation based on reference signals. 5G NR contains different types of reference signals, e.g. <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> for demodulation purposes and <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> for channel status reporting. By way of explanation, we can understand an antenna port as an indication of the type of reference signal that is conveyed over the radio channel. Accordingly an antenna port is defined by its reference signal. This means that each antenna port refers to a specific channel model, this in turn helps in channel estimation and equalization at the receiver. In the downlink direction, the following antenna ports are defined <span class="eh-reference" title="R&amp;S®SMW200A signal generator – operating manual, SW option -K84" lang="en"><span class="eh-tooltip" title="R&amp;S®SMW200A signal generator – operating manual, SW option -K84">[Ref. 34]</span></span>:</p><p>Antenna ports for the downlink:</p><ul class="eh-list eh-list--line"><li>Antenna ports starting with 1000 for <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>. Total of up to 8 ports for <span class="eh-text--nowrap">SU-MIMO</span> and up to 12 ports for <abbr class="eh-abbreviation" title="Multi-user MIMO" lang="en"><span class="eh-tooltip" title="Multi-user MIMO">MU-MIMO</span></abbr></li><li>Antenna ports starting with 2000 for <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr></li><li>Antenna ports starting with 3000 for channel-state information reference ­signals</li><li>Antenna ports starting with 4000 for <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block transmission</li></ul><p>The following antenna ports are defined for the uplink:</p><ul class="eh-list eh-list--line"><li>Antenna ports starting with 0 for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> and associated demodulation ­reference signals</li><li>Antenna ports starting with 1000 for <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr></li><li>Antenna ports starting with 2000 for <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr></li><li>Antenna port 4000 for <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr></li></ul><p>From a higher level perspective, the term antenna port has to be considered as a more abstract definition. In a hardware configuration, the virtual antenna port has to be mapped onto a physical antenna that can be either a single dipole or a set of dipoles known as an antenna array. Note that the mapping procedure from virtual antenna ports to physical antennas is not standardized and can be implemented in a flexible and vendor-specific manner. As an example of an antenna port mapping, we will consider a single-panel antenna array. Typically, such an antenna array consists of N<sub class="eh-text__number">1</sub><sub class="eh-text__number"></sub>×<sub class="eh-text__number"></sub>N<sub class="eh-text__number">2</sub> cross polarized antenna elements. Now, it would be possible for each antenna element to send an individual <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> for each polarization, leading to a maximum number of N<sub class="eh-text__number">1</sub> multiplied by N<sub class="eh-text__number">2</sub> times two possible antenna ports.</p>


<a id="page_1034_c710"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:50%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-077__Single-panel_antenna_array_example_01_5ba8a44401.png" width="800" height="395" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-77 </span>Single-panel antenna array example with 4×2 array and max. 16 antenna ports.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1034_c711"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Quasi co-location" lang="en"><span class="eh-tooltip" title="Quasi co-location">QCL</span></abbr> antenna ports
			</p>


<a id="page_1034_c712"></a><p>In addition to the definition of antenna ports, 5G NR introduces a definition for the co-location of antennas using the term quasi co-location (<abbr class="eh-abbreviation" title="Quasi co-location" lang="en"><span class="eh-tooltip" title="Quasi co-location">QCL</span></abbr>), defined as: Two antenna ports are said to be quasi co-located if properties of the channel over which a symbol on one antenna port is conveyed can be inferred from the channel over which a symbol on the other antenna port is conveyed. Since the term antenna port is linked to the type of reference signal that is sent and thus refers to a correlation between different reference signals, the definition of <abbr class="eh-abbreviation" title="Quasi co-location" lang="en"><span class="eh-tooltip" title="Quasi co-location">QCL</span></abbr> is related to the correlation of different antenna ports. Since in 5G NR different physical signals may be sent in different frequency ranges and may be differently precoded and modulated, the network may configure, via higher layers, a transmission configuration indicator (<abbr class="eh-abbreviation" title="Transmission configuration indicator" lang="en"><span class="eh-tooltip" title="Transmission configuration indicator">TCI</span></abbr>). As an example for the data channel, the network can configure the UE with <abbr class="eh-abbreviation" title="Transmission configuration indicator" lang="en"><span class="eh-tooltip" title="Transmission configuration indicator">TCI</span></abbr> state parameters via <em>PDSCH-config</em> to describe a quasi co-location relationship between one or two downlink reference signals and the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> ports of the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>.</p><p>There are four different <abbr class="eh-abbreviation" title="Quasi co-location" lang="en"><span class="eh-tooltip" title="Quasi co-location">QCL</span></abbr> types defined in <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>:</p><ul class="eh-list eh-list--line"><li>“QCL-TypeA”: {Doppler shift, Doppler spread, average delay, delay spread}</li><li>“QCL-TypeB”: {Doppler shift, Doppler spread}</li><li>“QCL-TypeC”: {Doppler shift, average delay}</li><li>“QCL-TypeD”: {Spatial RX parameter}</li></ul><p>For channel estimation and measurement reporting, the network provides reference signals such as <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> and the structure of these signals can be configured by higher layers. One of these configuration parameters is the quasi co-location of different antenna ports; it affects how the UE may evaluate the results obtained from <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> monitoring. Based on the received configuration parameters and an activation command via the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer, the UE maps up to eight <abbr class="eh-abbreviation" title="Transmission configuration indicator" lang="en"><span class="eh-tooltip" title="Transmission configuration indicator">TCI</span></abbr> states to a <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling parameter. The motivation for the <abbr class="eh-abbreviation" title="Quasi co-location" lang="en"><span class="eh-tooltip" title="Quasi co-location">QCL</span></abbr> definition is related to beam management where a UE may use the quasi co-location information to support beam mobility procedures such as beam switching, frequency and time offset estimation due to Doppler shift and delay. QCL-TypeA, B and C are more related to general propagation conditions on a non-directive approach and QCL-TypeD refers to beamforming scenarios by including the spatial domain.</p>


<a id="page_1034_c713"></a><p class="eh-headline-207 ">
				Precoding
			</p>


<a id="page_1034_c714"></a><p>Similar to LTE, 5G NR also uses the concept of precoding for physical channels, e.g. the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-062__Signal_generation_uplink_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-62 &lt;\/span&gt;Baseband signal generation for the uplink PUSCH in 5G NR.&quot;}]">Fig. 1-62</a>, but it offers more ways to exploit the various aspects of precoding. In general, precoding can be interpreted as the modification of physical parameters of the radio signal before it is conveyed over the radio channel in order to help the receiver to achieve better reception. This leads to different kinds of precoding applications or variants, e.g. precoding for mitigation of radio channel impact, precoding for applying a type of directivity as a generalization of beamforming, and precoding for spatial multiplexing aspects to compensate for cross-talk between multiple data streams in <abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr>. In a further enhancement, precoding is used in the background with <abbr class="eh-abbreviation" title="Multi-user MIMO" lang="en"><span class="eh-tooltip" title="Multi-user MIMO">MU-MIMO</span></abbr> to exploit the spatial domain with enhanced beamforming methods such as 3D beamforming. This section should serve as the basis for understanding that there are multiple ways to implement precoding. Thus, only certain aspects are presented. The evolution of precoding techniques can be seen through the various transmission modes over the history of LTE, starting from closed-loop codebook-based precoding and non-codebook-based precoding for single and dual layer beamforming through non-codebook-based precoding for up to eight layers. Furthermore, using sophisticated techniques such as certain aspects of <abbr class="eh-abbreviation" title="Coordinated multipoint" lang="en"><span class="eh-tooltip" title="Coordinated multipoint">CoMP</span></abbr>, precoding can be a technique to mitigate interference between users by applying the ordinary inverse of the channel matrix to generate weighting coefficients such that interference between users is completely zeroed. This principle is known as zero forcing (<abbr class="eh-abbreviation" title="Zero forcing equalization" lang="en"><span class="eh-tooltip" title="Zero forcing equalization">ZF</span></abbr>) and, just for completeness, it is worth mentioning that there are other techniques to mitigate cross-interferences between users like e.g. multiple feedback successive interference cancellation or non-linear approaches. By examining a radio channel in a multipath propagation scenario as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-122__Multipath_propagation_and_intersymbol_interference.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-122 &lt;\/span&gt;Multipath propagation and intersymbol interference (ISI).&quot;}]">Fig. 1-122, page 155</a>, we see that a mathematical interpretation leads to a formula characterizing the received signal depending on the path attenuation, path delay and a path phase for each individual multipath component. Thus, the basic idea of precoding involves the modification of one or more of these three parameters (time, phase and amplitude) before the signal is transmitted. More precisely, the term precoding can be based on the definition of different precoding matrices containing antenna weights, representing a phase shift and amplitude weighting.</p>


<a id="page_1034_c715"></a><p class="eh-headline-207 ">
				Precoding as a generalization of beamforming
			</p>


<a id="page_1034_c716"></a><p>As mentioned above, the term precoding does not embody only a single aspect. Instead, one common application of precoding uses precoding matrices to perform antenna weighting consisting of a phase shift and amplitude weighting for the physical signal prior to transmission. One consequence of antenna weighting when using multiple antennas is the introduction of directivity or a generalization of beamforming. To explain this idea, let us consider the simplified example in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-078__Precoding_example.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-78 &lt;\/span&gt;Precoding, beamforming, a simplified example.&quot;}]">Fig. 1-78</a>.</p>


<a id="page_1034_c717"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:49%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-078__Precoding_example_12df298fab.png" width="800" height="387" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-78 </span>Precoding, beamforming, a simplified example.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1034_c718"></a><p>This simplified example illustrates the basic principle of precoding. We have a TX setup consisting of two physical antennas transmitting the exact same RF signal that is separated by <em>λ</em>/2. A first UE is positioned directly in front of the setup. Assuming no multipath, <abbr class="eh-abbreviation" title="Line of sight" lang="en"><span class="eh-tooltip" title="Line of sight">LOS</span></abbr> condition, the precoding vector [1, 1] results in phase coherent transmission and thus the receiver can benefit from coherent overlapping of the two propagation paths. Now, we consider a second UE that is perpendicular to the transmitter setup. If the transmitter maintains the precoding scheme of [1, 1] such that each signal is sent with the same phase, the result would be that one propagation path is extended by the longer distance of <em>λ</em>/2 and the two radio signals would more or less cancel each other. When changing the precoding scheme into a matrix [1, –1], the effect would be that one RF signal is shifted in phase by 180 degrees (or one π), which compensates the phase shift of the channel. Continuing with our simplified approach, we may understand precoding as a type of directivity that is applied to the transmit signal. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1034_c719\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table014\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Codebook index&lt;\/th&gt;&lt;th&gt;Matrix&lt;\/th&gt;&lt;th&gt;Weights&lt;\/th&gt;&lt;th&gt;Phase&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;&lt;img height=\&quot;70\&quot; src=\&quot;bookassets\/1-079__Formeln.png\&quot; width=\&quot;89\&quot; \/&gt;&lt;\/td&gt;&lt;td&gt;&lt;img height=\&quot;59\&quot; src=\&quot;bookassets\/1-079__Formeln1.png\&quot; width=\&quot;84\&quot; \/&gt;&lt;\/td&gt;&lt;td&gt;0\u00b0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;&lt;img height=\&quot;70\&quot; src=\&quot;bookassets\/1-079__Formeln2.png\&quot; width=\&quot;89\&quot; \/&gt;&lt;\/td&gt;&lt;td&gt;&lt;img height=\&quot;70\&quot; src=\&quot;bookassets\/1-079__Formeln3.png\&quot; width=\&quot;66\&quot; \/&gt;&lt;\/td&gt;&lt;td&gt;180\u00b0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;&lt;img height=\&quot;70\&quot; src=\&quot;bookassets\/1-079__Formeln4.png\&quot; width=\&quot;66\&quot; \/&gt;&lt;\/td&gt;&lt;td&gt;&lt;img height=\&quot;70\&quot; src=\&quot;bookassets\/1-079__Formeln5.png\&quot; width=\&quot;66\&quot; \/&gt;&lt;\/td&gt;&lt;td&gt;90\u00b0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;&lt;img height=\&quot;70\&quot; src=\&quot;bookassets\/1-079__Formeln6.png\&quot; width=\&quot;97\&quot; \/&gt;&lt;\/td&gt;&lt;td&gt;&lt;img height=\&quot;70\&quot; src=\&quot;bookassets\/1-079__Formeln7.png\&quot; width=\&quot;66\&quot; \/&gt;&lt;\/td&gt;&lt;td&gt;270\u00b0&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-79 &lt;\/span&gt;Precoding\/weighting for a single-layer scenario using the codebook index (the phase column indicates the phase difference between the two antenna port signals).&lt;\/p&gt;\n\n&quot;}">Fig. 1-79</a> shows an example of these precoding weights using two antenna ports with single-layer transmission <span class="eh-reference" title="B. Schulz, LTE Transmission modes and beamforming, White Paper 1MA186, Rohde &amp; Schwarz, May 2014" lang="en"><span class="eh-tooltip" title="B. Schulz, LTE Transmission modes and beamforming, White Paper 1MA186, Rohde &amp; Schwarz, May 2014">[Ref. 22]</span></span>.</p>


<a id="page_1034_c719"></a><div class="table-scroll"><table id="table014" class="eh-table eh-table--alternate"><colgroup><col><col><col><col></colgroup><thead><tr><th>Codebook index</th><th>Matrix</th><th>Weights</th><th>Phase</th></tr></thead><tbody><tr><td>0</td><td><img height="70" src="./5G - Book R&amp;S_files/1-079__Formeln.png" width="89"></td><td><img height="59" src="./5G - Book R&amp;S_files/1-079__Formeln1.png" width="84"></td><td>0°</td></tr><tr><td>1</td><td><img height="70" src="./5G - Book R&amp;S_files/1-079__Formeln2.png" width="89"></td><td><img height="70" src="./5G - Book R&amp;S_files/1-079__Formeln3.png" width="66"></td><td>180°</td></tr><tr><td>2</td><td><img height="70" src="./5G - Book R&amp;S_files/1-079__Formeln4.png" width="66"></td><td><img height="70" src="./5G - Book R&amp;S_files/1-079__Formeln5.png" width="66"></td><td>90°</td></tr><tr><td>3</td><td><img height="70" src="./5G - Book R&amp;S_files/1-079__Formeln6.png" width="97"></td><td><img height="70" src="./5G - Book R&amp;S_files/1-079__Formeln7.png" width="66"></td><td>270°</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-79 </span>Precoding/weighting for a single-layer scenario using the codebook index (the phase column indicates the phase difference between the two antenna port signals).</p>


<a id="page_1034_c720"></a><p>This precoding matrix illustrates the principle of quantized phase shifts applied to the signal, e.g. the factor 1 or –1 represents coherent transmission or a phase offset of π and the term +<em>j</em> or <em>–j</em> represents a phase shift of ±π/2. 5G NR introduces more sophisticated techniques for beamforming as discussed in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1039" class="eh-link eh-link--page">1.3 Beamforming fundamentals, page 169</a>. Beamforming is based on the utilization of an antenna array consisting of multiple antenna elements. To obtain a certain directivity, a weighting function is applied to each antenna element signal. In general, a linear multi-antenna transmission scheme can be modeled as an input vector <em>x</em><sub class="eh-text--em eh-text__letter">L</sub> of <em>N</em><sub class="eh-text--em eh-text__letter">L</sub> layers that is mapped to a certain number <em>y</em><sub class="eh-text--em eh-text__letter">T</sub> of transmit antennas by multiplying the input vector <em>x</em><sub class="eh-text--em eh-text__letter">L</sub> by the precoding matrix <em>W</em> (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-080__Precoding_general_model.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-80 &lt;\/span&gt;General model for multi-antenna transmission using precoding for the purpose of beamforming.&quot;}]">Fig. 1-80</a>). Additionally, multi-antenna processing can be performed in the analog part of the transmitter chain (analog beamforming) or it can be performed in the digital part of the transmitter chain (digital beamforming), depending on the implementation.</p>


<a id="page_1034_c721"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:28%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-080__Precoding_general_model_0b287192cb.png" width="800" height="219" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-80 </span>General model for multi-antenna transmission using precoding for the purpose of beamforming.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1034_c722"></a><p class="eh-headline-207 ">
				Precoding in <abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr> spatial multiplexing
			</p>


<a id="page_1034_c723"></a><p>Single-user <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> was used in LTE Rel. 8 to increase the data rate. Different transmission modes supported open-loop and closed-loop <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> operation. The difference between closed-loop and open-loop <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> is related to knowledge about the channel at the transmitter based on channel status feedback. Closed-loop <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> introduced codebook-based precoding. The general idea is to apply precoding to the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> in order to increase the received <abbr class="eh-abbreviation" title="Signal-to-interference-plus-noise ratio" lang="en"><span class="eh-tooltip" title="Signal-to-interference-plus-noise ratio">SINR</span></abbr> by setting different transmit antenna weights for each transmission layer using the obtained <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> feedback information. The ideal transmit antenna weights for precoding are generated from eigenvectors of the covariance matrix of the channel matrix, <em>H</em>, given by <em>H</em><sup class="eh-text--em eh-text__letter">H</sup> × <em>H</em>, where <em>H</em><sup class="eh-text--em eh-text__letter">H</sup> denotes the Hermetian transpose of the channel matrix <span class="eh-reference" title="E. Biglieri, R. Calderbank, A. Constantinides, A. Goldsmith, MIMO Wireless Communications, Cambridge University Press, 2007" lang="en"><span class="eh-tooltip" title="E. Biglieri, R. Calderbank, A. Constantinides, A. Goldsmith, MIMO Wireless Communications, Cambridge University Press, 2007">[Ref. 19]</span></span>. However, algorithms that evaluate and directly feed back estimated channel state information or precoding weights are not practical regarding the required data rate on the reverse control channel and the time variance of the channel itself.</p><p>This lead to the introduction of codebook-based precoding. Such a codebook contains predetermined precoding matrix candidates and the selection of the precoding matrix is based on precoding matrix indicator (<abbr class="eh-abbreviation" title="Precoding matrix indicator" lang="en"><span class="eh-tooltip" title="Precoding matrix indicator">PMI</span></abbr>) feedback. For a better understanding of codebook-based precoding, we will consider some general aspects of <abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr>. To increase capacity and exploit the spatial domain, <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> takes advantage of multiple transmit antennas and multiple receive antennas (and thus multiple path channels). By way of example, the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-081__SU-MIMO_channel_transformation_principle.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-81 &lt;\/span&gt;SU-MIMO channel transformation principle using singular value &lt;br&gt;decomposition (SVD).&quot;}]">Fig. 1-81</a> illustrates the channel matrix condition in a 2×2 <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> scenario. A receiver with two receive antennas, assuming the transmitter sends two different code words using two layers, would then have to solve two equations including the channel matrix <em>H</em>. These two equations can be solved when the channel matrix is known. This can be supported by sending orthogonal reference signals on each of the streams; see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-089__DM-RS_spatial_multiplexing_01.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-89 &lt;\/span&gt;PDSCH DMRS with orthogonal sequence to enable channel estimation for spatial multiplexing.&quot;}]">Fig. 1-89</a>. One idea, that is based on the singular value decomposition (SVD) method known from linear algebra, is to decompose the channel matrix into its factors. In general terms, the SVD method allows factorization of a given matrix <em>H</em> into its decomposition matrices. Such a matrix <em>H</em> is then replaced by the product of a unitary matrix with a diagonal matrix and another unitary matrix (H = U Σ (V<sup class="eh-text__letter">H</sup>)<sup class="eh-text__letter">T</sup>).</p><p>The relevant aspect here is that the diagonal matrix consists of diagonal entries only and these entries are called singular values. In other words, SVD transforms the channel matrix <em>H</em> into a number of parallel <abbr class="eh-abbreviation" title="Additive white Gaussian noise" lang="en"><span class="eh-tooltip" title="Additive white Gaussian noise">AWGN</span></abbr> channels only. The capacity of each of the resulting parallel <abbr class="eh-abbreviation" title="Additive white Gaussian noise" lang="en"><span class="eh-tooltip" title="Additive white Gaussian noise">AWGN</span></abbr> channels is given by its singular value. This is used in reports such as the rank indicator (<abbr class="eh-abbreviation" title="Rank indicator" lang="en"><span class="eh-tooltip" title="Rank indicator">RI</span></abbr>) by sending the number of non-zero singular values as a rank or condition number to the transmitter.</p>


<a id="page_1034_c724"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:59%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-081__SU-MIMO_channel_transformation_principle_a9f9ec0919.png" width="800" height="467" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-81 </span><abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr> channel transformation principle using singular value <br>decomposition (SVD).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1034_c725"></a><p>Through factorization with SVD, the single-channel matrix is transformed into a product of three matrices where the central matrix is the desired diagonal matrix of singular values. As the other two matrices of the factorization product, we have a unitary matrix derived from the eigenvalues of the channel matrix as well as a matrix which is the conjugate transpose of another unitary matrix derived from eigenvalues of the channel matrix. Equalization of the radio channel is the principle by which the receiver multiplies the inverse of the estimated channel response with the received signal. Now, however, after SVD the channel matrix <em>H</em> is decomposed into three matrices of which there are two matrices that require signal processing or equalization. A simple idea is to tackle this from both ends, i.e. at the transmitter and the receiver. The concept of precoding is illustrated in the next figure:</p>


<a id="page_1034_c726"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:66%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-082__Precoding_principle_in_SU-MIMO_ffc04e56b6.png" width="800" height="525" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-82 </span>Precoding principle in <abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr> based on singular value decomposition (SVD).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1034_c727"></a><p>For TDD systems, due to the reciprocity of the channel impulse response the precoding matrix can be generated using singular value decomposition (SVD) at NodeB, making self-based precoding a promising case in the context of the non-codebook-based approach.</p><p>The lower equation in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-082__Precoding_principle_in_SU-MIMO.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-82 &lt;\/span&gt;Precoding principle in SU-MIMO based on singular value decomposition (SVD).&quot;}]">Fig. 1-82</a> explains the mathematics behind precoding. The transmitter sends a modified or precoded version of the signal <em>s</em> as given by <em>s</em> multiplied with the unitary matrix <em>V</em> and the receiver performs signal processing by multiplying the received signal with the conjugate transpose of the other unitary matrix <em>U</em>. A major drawback of this approach is that knowledge of the channel matrix <em>H</em> at the transmitter is required. Assuming the feedback link has sufficient capacity to provide a full description of the channel matrix <em>H</em>, due to the time variance nature of the channel itself, such knowledge would be delayed and thus not useful any longer in certain situations. Academic research on the topic of limited feedback has shown that it is almost as good as ideal channel knowledge. This is based on the equation showing that the transmitter does not need to know the full channel matrix <em>H</em>, but only the unitary matrix <em>V</em> is required. This leads to the idea of predefining a set of unitary matrices in a codebook and selecting one matrix in that codebook in order to maximize the capacity of the current channel <em>H</em>. These unitary matrices from the codebook approximate the singular vector structure of the channel. <abbr class="eh-abbreviation" title="Coordinated multipoint" lang="en"><span class="eh-tooltip" title="Coordinated multipoint">CoMP</span></abbr> introduces various sophisticated signal processing techniques applied at NodeB to reduce interference between transmission layers, including adaptive beam transmission such as null steering, adaptive transmission power control and simultaneous multipoint coherent transmissions. When these sophisticated transmission techniques are applied, the NodeB multiplexes the UE-specific <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> and <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> with the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>. This allows the UE to demodulate the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> without information about the used transmission technology. This increases the flexibility in terms of applying sophisticated transmission techniques on the downlink (e.g. dual connectivity, <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr>).</p>


<a id="page_1034_c728"></a><p class="eh-headline-207 ">
				Precoding in <abbr class="eh-abbreviation" title="Multi-user MIMO" lang="en"><span class="eh-tooltip" title="Multi-user MIMO">MU-MIMO</span></abbr> and for a higher number of layers
			</p>


<a id="page_1034_c729"></a><p>While performance maximization has a clear interpretation in <abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr>, in <abbr class="eh-abbreviation" title="Multi-user MIMO" lang="en"><span class="eh-tooltip" title="Multi-user MIMO">MU-MIMO</span></abbr> a multi-antenna transmitter communicates simultaneously with multiple receivers. This is known as space division multiple access (SDMA). In theory, the precoding algorithms can be subdivided into capacity-generating non-linear precoding algorithms and linear algorithms that generate reasonable performance with much lower complexity. In addition, <abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr> has to support a higher number of layers, e.g. in 5G NR there are eight <abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr> layers possible in 3GPP Release 15. This leads to a new approach in reference signal design. The idea of a cell-specific RS like in LTE Release 8 was left behind and use of UE-specific reference signals were specified. 5G NR applies a similar approach: UE-specific <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> multiplexed within the data and control channels for demodulation and UE-specific <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> signals for channel estimation. The channel estimation accuracy for <abbr class="eh-abbreviation" title="Channel quality indicator" lang="en"><span class="eh-tooltip" title="Channel quality indicator">CQI</span></abbr> is low compared to that for demodulation, thus the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> may have a lower appearance in the time domain. To obtain a certain orthogonality, a specific code division multiplexing scheme is used. This general idea (transmission of UE-specific <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> for <abbr class="eh-abbreviation" title="Channel quality indicator" lang="en"><span class="eh-tooltip" title="Channel quality indicator">CQI</span></abbr> reporting only together with the data channel) also allows for the support of beamforming methods.</p><p>As shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-091__CSI-RS_alternating_mapping_zero_non-zero_power.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-91 &lt;\/span&gt;Example of alternating zero and non-zero power mapping of CSI-RS to support beam mobility.&quot;}]">Fig. 1-91</a>, <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> can be mapped in a beam-specific procedure and based on beam-specific reports, the NodeB can select the most appropriate beam precoding method (random beamforming precoding). A second impact of <abbr class="eh-abbreviation" title="Multi-user MIMO" lang="en"><span class="eh-tooltip" title="Multi-user MIMO">MU-MIMO</span></abbr> and the higher number of layers is the transition into non-codebook-based precoding such as transmission mode 9 in LTE; see also <span class="eh-reference" title="B. Schulz, LTE Transmission modes and beamforming, White Paper 1MA186, Rohde &amp; Schwarz, May 2014" lang="en"><span class="eh-tooltip" title="B. Schulz, LTE Transmission modes and beamforming, White Paper 1MA186, Rohde &amp; Schwarz, May 2014">[Ref. 22]</span></span>.</p>


<a id="page_1034_c730"></a><p class="eh-headline-207 ">
				Precoding configuration aspects in 5G NR
			</p>


<a id="page_1034_c731"></a><p>5G NR supports precoding in both directions (uplink and downlink) and precoding is applied to data and control channels as well as to <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>. Due to the complexity, the exact implementation of precoding differs between the uplink and downlink directions and also depends on the signal types and related feedback. The 5G NR uplink is based primarily on codebook precoding, similar to LTE. The precoding in the uplink direction is based on a codebook containing precoding matrices depending on the transmission rank. The precoding matrix to be used is assigned via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling of <abbr class="eh-abbreviation" title="Transmit precoding matrix indicator" lang="en"><span class="eh-tooltip" title="Transmit precoding matrix indicator">TPMI</span></abbr> and the higher layer parameter <em>txconfig</em>. Note that non-codebook-based precoding is also possible in the uplink <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. The uplink sounding reference signals (<abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr>) may support the network receiver with precoding estimation in case non-codebook precoding is used. In the 5G NR downlink direction, precoding is very flexible and allows usage of various precoding methods depending on the channel and signal types. The network can apply precoding aiming at beamforming on certain signals and the UE will provide support with channel status feedback information.</p><p>Generally in 5G NR, we must distinguish between the number of transmission layers <em>N</em><sub class="eh-text--em eh-text__letter">L</sub> and the number of antenna ports <em>N</em><sub class="eh-text--em eh-text__letter">p</sub>. A certain number of layers are mapped on a certain number of antennas with the aid of a mapping matrix <em>W</em>. This precoding matrix <em>W</em> can be codebook-based, non-codebook-based or more generally, any kind of signal processing method such as analog beamforming. The number of antenna ports is determined by the antenna panel in use, i.e. the parameters <em>N</em><sub class="eh-text__number">1</sub> and <em>N</em><sub class="eh-text__number">2</sub> in an array like the one in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-077__Single-panel_antenna_array_example_01.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-77 &lt;\/span&gt;Single-panel antenna array example with 4\u00d72 array and max. 16 antenna ports.&quot;}]">Fig. 1-77</a>. Only certain configurations are supported in <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>. The uplink channel <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> uses a codebook-based precoding mechanism, similar to LTE downlink precoding, by default. As mentioned above, non-codebook-based precoding is also possible but is not considered in further detail in this section. The exact definition of <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> precoding is given with the aid of precoding matrices defined for different layer scenarios in <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>. One example is the precoding matrix for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> for single-layer transmission with two antenna ports shown in the following figure:</p>


<a id="page_1034_c732"></a><div class="table-scroll"><table id="table015" class="eh-table eh-table--alternate"><colgroup><col><col><col><col><col><col><col><col><col></colgroup><thead><tr><th>TPMI index</th><th colspan="8">&nbsp;
<strong><em>W</em></strong> (ordered from left to right in increasing order of TPMI index)</th></tr></thead><tbody><tr><td>0 to 5</td><td><img height="70" src="./5G - Book R&amp;S_files/1-083__Formeln.png" width="89"></td><td><img height="70" src="./5G - Book R&amp;S_files/1-083__Formeln1.png" width="89"></td><td><img height="70" src="./5G - Book R&amp;S_files/1-083__Formeln2.png" width="89"></td><td><img height="70" src="./5G - Book R&amp;S_files/1-083__Formeln3.png" width="89"></td><td><img height="70" src="./5G - Book R&amp;S_files/1-083__Formeln4.png" width="89"></td><td><img height="70" src="./5G - Book R&amp;S_files/1-083__Formeln5.png" width="89"></td><td> –</td><td> –</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-83 </span>Precoding for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> – single-layer transmission with two antenna ports.</p>


<a id="page_1034_c733"></a><p>Selection of the precoding matrix <em>W</em> is based on the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling information <abbr class="eh-abbreviation" title="Transmit precoding matrix indicator" lang="en"><span class="eh-tooltip" title="Transmit precoding matrix indicator">TPMI</span></abbr>, the higher layer parameter <em>txconfig</em> for codebook configuration and the number of layers. In addition, it is possible to restrict the codebook entries to a certain subset of precoding matrices (<span class="eh-hint" title="3GPP TS 38.212: NR; Multiplexing and channel coding" lang="en"><span class="eh-tooltip" title="3GPP TS 38.212: NR; Multiplexing and channel coding">TS 38.212</span></span>). As was already mentioned, in the 5G NR downlink direction precoding is very flexible and allows usage of various precoding methods depending on the channel and signal types. The <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-084__Precoding_overview_5GNR_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-84 &lt;\/span&gt;5G NR precoding overview.&quot;}]">Fig. 1-84</a> illustrates the precoding scenarios in 5G NR in a generalized manner:</p>


<a id="page_1034_c734"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:37%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-084__Precoding_overview_5GNR_v4_d48c0bb6a5.png" width="800" height="295" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-84 </span>5G NR precoding overview.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1034_c735"></a><p>In the downlink direction, precoding is much more flexible, but unfortunately it is also more complex since more sophisticated techniques such as 3-dimensional beamforming can be applied. To allow various antenna configuration deployments, the network configures the UE with additional parameters about the antenna configuration such as single panel or multi panel and whether <span class="eh-text--nowrap">MU-MIMO</span> is the main target in comparison to <abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr>. Recall that downlink channels such as <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> or <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> are multiplexed with DM-RS. Thus, any optional precoding scheme is also applied to these reference signals, meaning they do not need to be scheduled to the UE directly. The UE sees the product of the precoding, beamforming matrix and channel matrix at its receiver and provides feedback about the channel status to the network. In addition, the network can send multiple reference signals <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>. The main idea is that beamforming should be applied to the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> and the UE should select the <span class="eh-text--nowrap">CSI-RS beam</span> corresponding to the best beam. The network can configure the UE with <span class="eh-text--nowrap">CSI-RS resources</span> where it has to perform measurements and the UE will provide channel status feedback to the gNB.</p><p>This feedback is known as <abbr class="eh-abbreviation" title="CSI-RS resource indicator" lang="en"><span class="eh-tooltip" title="CSI-RS resource indicator">CRI</span></abbr>. Basically, the UE sees a product of the beamforming matrix and the channel matrix for the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>. The reported best ­CSI-RS beam can then be used for other channels such as the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>. On the selected beam, the UE calculates <abbr class="eh-abbreviation" title="Rank indicator" lang="en"><span class="eh-tooltip" title="Rank indicator">RI</span></abbr> and <abbr class="eh-abbreviation" title="Precoding matrix indicator" lang="en"><span class="eh-tooltip" title="Precoding matrix indicator">PMI</span></abbr> and in case of a closed loop condition, the network can use the reported <abbr class="eh-abbreviation" title="Rank indicator" lang="en"><span class="eh-tooltip" title="Rank indicator">RI</span></abbr> and <abbr class="eh-abbreviation" title="Precoding matrix indicator" lang="en"><span class="eh-tooltip" title="Precoding matrix indicator">PMI</span></abbr> for the downlink <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>. Reporting of the <abbr class="eh-abbreviation" title="Precoding matrix indicator" lang="en"><span class="eh-tooltip" title="Precoding matrix indicator">PMI</span></abbr> is based on a precoding matrix concept, introducing three different types of codebook. The UE reports the <abbr class="eh-abbreviation" title="Precoding matrix indicator" lang="en"><span class="eh-tooltip" title="Precoding matrix indicator">PMI</span></abbr> based on the assumption of a codebook definition to reduce the signaling overhead in the uplink direction. It is then a network decision whether to use the uplink <abbr class="eh-abbreviation" title="Precoding matrix indicator" lang="en"><span class="eh-tooltip" title="Precoding matrix indicator">PMI</span></abbr> feedback when applying any kind of precoding technique to downlink channels such as <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> or <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>. Precoding can be performed based on a resource block bundle granularity, where the bundle size is configurable by higher layers. The UE assumes the precoding is constant over a certain number of consecutive RBs; the number of RBs can be one of the values <span class="eh-text--nowrap">[2, 4 or wideband]</span> and is indicated by the higher layer parameter <em>bundlesize</em> in the <em>PRB-bundleType</em> of <em>PDSCH-config</em>. The bundle type can be either static or dynamic. If the static bundle type is applied, the resource block granularity for precoding is a constant value signaled via bundlesize. If the bundle type is dynamic, the network can configure two different sets of <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr> precoding granularity, each set allowing the values <span class="eh-text--nowrap">[2, 4 or wideband]</span>. In this case the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling parameter <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr> bundling size indicator can switch between set 1 or 2 of the precoding granularity sets (<span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>). At first glance, there is no direct precoding codebook matrix indicated for <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>, but the principle follows the <abbr class="eh-abbreviation" title="Multi-user MIMO" lang="en"><span class="eh-tooltip" title="Multi-user MIMO">MU-MIMO</span></abbr> precoding aspect which is based on UE-specific reference signals. The downlink <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> is multiplexed with <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> that are precoded in the same manner as the data symbols and accompanied by UE-specific <span class="eh-text--nowrap">CSI-RS</span> that are beamformed. The <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> precoding is transparent since the UE will perform <abbr class="eh-abbreviation" title="Channel quality indicator" lang="en"><span class="eh-tooltip" title="Channel quality indicator">CQI</span></abbr> evaluation based on the received reference signals <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> and <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>. The reported value <abbr class="eh-abbreviation" title="Precoding matrix indicator" lang="en"><span class="eh-tooltip" title="Precoding matrix indicator">PMI</span></abbr> may help with the selection of the precoding matrix. In addition, the <span class="eh-text--nowrap">CSI-RS</span> allow a very flexible beamforming or precoding scheme that can either be codebook-based with the possibility to steer in the azimuth and elevation direction or can be based on reciprocity of the channel using eigenvector calculations. The higher layer parameter CodebookType can set the <abbr class="eh-abbreviation" title="Precoding matrix indicator" lang="en"><span class="eh-tooltip" title="Precoding matrix indicator">PMI</span></abbr> reporting based on the used antenna configuration at the gNB. The following types are allowed: Type 1 single panel codebook, Type 1 multi panel codebook or Type 2 codebook.</p><p>Type 1 single panel codebook is the base station antenna configuration for a single antenna panel from the UE perspective, thus assuming a UE considers the situation where only one beam may be sent to this UE at any one time and the precoding targets a <abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr> scenario of possible high-order spatial multiplexing. Type 1 multi panel codebook allows dynamic configuration or dismantling of the panels to suit practical applications. It can be seen as a sophisticated evolution of dynamic multipoint transmission or joint transmission derived from <abbr class="eh-abbreviation" title="Coordinated multipoint" lang="en"><span class="eh-tooltip" title="Coordinated multipoint">CoMP</span></abbr> techniques. Type 2 <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> primarily targets <abbr class="eh-abbreviation" title="Multi-user MIMO" lang="en"><span class="eh-tooltip" title="Multi-user MIMO">MU-MIMO</span></abbr> scenarios where multiple UEs are scheduled simultaneously within the same time and frequency resources to exploit the spatial dimensions, but typically in such a scenario, the number of layers for spatial multiplexing is of a lower number. The report for type 2 is much more extensive and requires a higher data rate on the feedback channel. Thus, it is considered primarily for scenarios with low user mobility such as indoor or pedestrian scenarios. <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span> defines certain <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> precoding matrices for up to 32 antenna ports and up to 8 layers. The case with two antenna ports and one or two layers is the same as for LTE (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1034_c736\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table016\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th rowspan=\&quot;2\&quot;&gt;Codebook index&lt;\/th&gt;&lt;th colspan=\&quot;2\&quot;&gt;Number of layers &lt;strong&gt;&lt;em&gt;\u03c5&lt;\/em&gt;&lt;\/strong&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;th&gt;1&lt;\/th&gt;&lt;th&gt;2&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;&lt;img height=\&quot;70\&quot; src=\&quot;bookassets\/1-085__Formeln.png\&quot; width=\&quot;89\&quot; \/&gt;&lt;\/td&gt;&lt;td&gt;&lt;img height=\&quot;70\&quot; src=\&quot;bookassets\/1-085__Formeln1.png\&quot; width=\&quot;99\&quot; \/&gt;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;&lt;img height=\&quot;70\&quot; src=\&quot;bookassets\/1-085__Formeln2.png\&quot; width=\&quot;89\&quot; \/&gt;&lt;\/td&gt;&lt;td&gt;&lt;img height=\&quot;70\&quot; src=\&quot;bookassets\/1-085__Formeln3.png\&quot; width=\&quot;115\&quot; \/&gt;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;&lt;img height=\&quot;70\&quot; src=\&quot;bookassets\/1-085__Formeln4.png\&quot; width=\&quot;89\&quot; \/&gt;&lt;\/td&gt;&lt;td&gt; \u2013&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;&lt;img height=\&quot;70\&quot; src=\&quot;bookassets\/1-085__Formeln5.png\&quot; width=\&quot;89\&quot; \/&gt;&lt;\/td&gt;&lt;td&gt; \u2013&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-85 &lt;\/span&gt;Precoding codebook for CSI-RS, two antenna ports and one or two layers.&lt;\/p&gt;\n\n&quot;}">Fig. 1-85</a>). For a higher number of antenna ports and a higher number of layers, the entries of these matrices contain various values for the amplitude and phase offsets in the azimuth and elevation direction. Thus, sophisticated techniques like <span class="eh-text--nowrap">MU-MIMO</span> or 3D beamforming can be applied.</p>


<a id="page_1034_c736"></a><div class="table-scroll"><table id="table016" class="eh-table eh-table--alternate"><colgroup><col><col><col></colgroup><thead><tr><th rowspan="2">Codebook index</th><th colspan="2">Number of layers <strong><em>υ</em></strong>
&nbsp;</th></tr><tr><th>1</th><th>2</th></tr></thead><tbody><tr><td>0</td><td><img height="70" src="./5G - Book R&amp;S_files/1-085__Formeln.png" width="89"></td><td><img height="70" src="./5G - Book R&amp;S_files/1-085__Formeln1.png" width="99"></td></tr><tr><td>1</td><td><img height="70" src="./5G - Book R&amp;S_files/1-085__Formeln2.png" width="89"></td><td><img height="70" src="./5G - Book R&amp;S_files/1-085__Formeln3.png" width="115"></td></tr><tr><td>2</td><td><img height="70" src="./5G - Book R&amp;S_files/1-085__Formeln4.png" width="89"></td><td> –</td></tr><tr><td>3</td><td><img height="70" src="./5G - Book R&amp;S_files/1-085__Formeln5.png" width="89"></td><td> –</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-85 </span>Precoding codebook for <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>, two antenna ports and one or two layers.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1035" data-prevpid="1034" data-nextpid="1036" data-chapter="1.2.5.6 Physical signals in 5G NR" id="page_1035">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.2.5.6 Physical signals in 5G NR</h4>
						
<a id="page_1035_c737"></a><p>In addition to the physical channels, that provide services to higher layers, a number of additional physical signals are defined in 5G NR. They are used by the physical layer, but they do not carry information originating from the higher layers. The main purpose of the physical signals is related to synchronization aspects, channel estimation, tracking and beam identification for beamforming optimization, and channel status reporting. The following UL physical signals are defined in <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>, section 6.1.2:</p><ul class="eh-list eh-list--line"><li>Demodulation reference signals (<em>DMRS</em>) for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr></li><li>Phase-tracking reference signals (<em>PTRS</em>) for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr></li><li>Sounding reference signal (<em>SRS</em>)</li></ul><p>For the DL, the following downlink physical signals are defined:</p><ul class="eh-list eh-list--line"><li>Demodulation reference signals (<em>DMRS</em>) for <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>, <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr></li><li>Phase-tracking reference signals (<em>PTRS</em>) for <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr></li><li>Channel-state information reference signal (<em>CSI-RS</em>)</li><li>Tracking reference signals (<em>TRS</em>)</li><li>Primary synchronization signal (<em>PSS</em>)</li><li>Secondary synchronization signal (<em>SSS</em>)</li></ul><a id="page_1035_c738"></a><p class="eh-headline-207 ">
				Demodulation reference signals (<abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>)
			</p>


<a id="page_1035_c739"></a><p>The demodulation reference signals are included in the downlink channels <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>, <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> and the uplink channels <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. They are used for channel estimation and equalization at the receiver for better decoding. The <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> also play an important role in power allocation, i.e. the network may set the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> power as a reference value and indicate its level to the UE via signaling procedures to enable the UE receiver to estimate the path attenuation. See section <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1036_c769" class="eh-link eh-link--page eh-link--ce">Power allocation for the downlink, page 121</a>, for further details on power control. The main characteristic of 5G NR is that the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> is configured individually for each physical channel, i.e the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> uses a different <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> compared to the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>, even if the generation principle is similar. Like many other aspects of 5G NR, the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> signals also provide great flexibility, e.g. the number of reference signals per slot is configurable. Thus, the network can respond to different propagation situations and provide a flexible degree of robustness concerning the equalization. Generation of the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> is based on pseudorandom signal generation that results in <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr> constellation symbols that are then mapped on to certain resource elements in time and frequency. The downlink <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> for <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> is initialized by a pseudorandom sequence generator set with either the higher layer values <span class="eh-text--nowrap">scramblingID</span> in the <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>DMRS-DownlinkConfig</em> or if absent, it is set with the physical cell ID (<abbr class="eh-abbreviation" title="Physical cell identity" lang="en"><span class="eh-tooltip" title="Physical cell identity">PCI</span></abbr>). Note that 5G NR does not contain cell-specific reference signals (<abbr class="eh-abbreviation" title="Cell specific reference signal (LTE)" lang="en"><span class="eh-tooltip" title="Cell specific reference signal (LTE)">CRS</span></abbr>) like in EUTRAN; demodulation and decoding must rely on the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> signals only. Like in the downlink case, the uplink <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> is initialized either by a higher layer scrambling indication or by the physical cell ID. For the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>, the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> sequence generation is dependent only on the physical cell ID (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1043" class="eh-link eh-link--page">1.3.2.1 SS/PBCH block details, page 174</a>). The generation algorithm for <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> on the uplink and downlink is illustrated in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-086__DMRS_generation_01.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-86 &lt;\/span&gt;Demodulation reference signal (DMRS) sequence generation.&quot;}]">Fig. 1-86</a>. Note that for the uplink control channel <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>, various formats exist, and various <span class="eh-text--nowrap">DMRS sequences</span> are thus also defined in <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>.</p>


<a id="page_1035_c740"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:43%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-086__DMRS_generation_01_87025f0ad5.png" width="800" height="341" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-86 </span>Demodulation reference signal (<abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>) sequence generation.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1035_c741"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> for <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>
			</p>


<a id="page_1035_c742"></a><p>The main configuration parameters for the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> are given by the higher layers via the <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>DMRS-DownlinkConfig</em>. Important parameters are the mapping type A or B, the configuration type 1 or 2, and the length of the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> within a slot. They can be configured by higher layer control information. Mapping type A indicates that the time reference for the symbols is the start of the slot and the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> is then either mapped on the second or third symbol depending on the higher layer parameter <em>dmrs-TypeA-Position</em> given via the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>; otherwise, mapping type B indicates a <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> position relative to the start of the scheduled <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> resources. The length of the front loaded <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> can either be one or two consecutive symbols, indicated by the parameter <em>maxLength</em>. If channel conditions such as the <abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr> or Doppler frequency shift are getting worse, one mechanism that can provide additional protection is to place a larger number of <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> symbols (up to four), indicated by the higher layer parameter <em>dmrs-AdditionalPosition</em>. Thus, the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> sacrifices data throughput in favor of robustness. The parameter <em>dmrs-Type</em> in the downlink DM-RS configuration <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> indicates whether type 1 or 2 is used. Here, the main difference is that in type 1, the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> is mapped onto subcarriers in non-contiguous manners while in type 2, the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> may use two adjacent subcarriers in a contiguous manner. There is a subcarrier start position ∆ to obtain some type of orthogonality between <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> signals mapped to different antenna ports. Overall for these signaling parameters, we can say that 5G NR provides a highly flexible mechanism for the mapping of demodulation reference signals onto the physical channel <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> in order to respond to various propagation scenarios. The <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-087__DM-RS-configuration_parameters_01.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-87 &lt;\/span&gt;PDSCH DMRS configuration parameters.&quot;}]">Fig. 1-87</a> provides an overview of these important higher layer configuration parameters.</p>


<a id="page_1035_c743"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:50%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-087__DM-RS-configuration_parameters_01_995c8909ff.png" width="800" height="394" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-87 </span><abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> configuration parameters.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1035_c744"></a><p>The detailed mapping of the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> to physical resources is determined by the formula in <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>:</p>


<a id="page_1035_c745"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:726px;"><div class="book-img-wrap__inner" style="padding-bottom:54%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/1-088__Formeln__PDSCH_DM-RS_mapping.png" width="726" height="385" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-88 </span><abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> mapping to physical resources.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1035_c746"></a><p>As was already mentioned, 5G NR does not support cell-specific reference signals. One aspect of channel estimation involves the situation with <abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr> or spatial multiplexing where the receiver has to estimate the cross-correlation or condition number in order to provide feedback in the form of a rank indicator. In LTE, this was solved by mapping the cell-specific reference signals onto a physical resource element such that only one antenna is active per time and subcarrier regarding the reference signal position. This is not possible in 5G NR since <abbr class="eh-abbreviation" title="Cell specific reference signal (LTE)" lang="en"><span class="eh-tooltip" title="Cell specific reference signal (LTE)">CRS</span></abbr> symbols are not available and it would somehow violate the idea of directivity due to beamforming and the bandwidth part operation. The method that is applied in 5G NR is shown in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-089__DM-RS_spatial_multiplexing_01.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-89 &lt;\/span&gt;PDSCH DMRS with orthogonal sequence to enable channel estimation for spatial multiplexing.&quot;}]">Fig. 1-89</a>, using an example of <span class="eh-text--nowrap">2 </span>×<span class="eh-text--nowrap"></span><span class="eh-text--nowrap">2 SU-MIMO</span> with two transmit and two receive antennas. The pseudo-noise sequence <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> is additionally spread with an orthogonal sequence. Thus in the case of spatial multiplexing, multiple antenna ports (which have to be mapped onto different physical antennas) may send the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> simultaneously on the same frequency, but each antenna port then uses a different orthogonal code to enable the estimation of the condition number for rank indicator reporting.</p>


<a id="page_1035_c747"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:49%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-089__DM-RS_spatial_multiplexing_01_eaf6fe9afe.png" width="800" height="385" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-89 </span><abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> with orthogonal sequence to enable channel estimation for spatial multiplexing.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1035_c748"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>
			</p>


<a id="page_1035_c749"></a><p>The uplink channel <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> also contains <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> reference signals that are highly flexible. The main configuration parameters for the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> are given by higher layers via the <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>DMRS-UplinkConfig</em>. If uplink transform precoding is enabled, the sequence for <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> is not generated as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-086__DMRS_generation_01.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-86 &lt;\/span&gt;Demodulation reference signal (DMRS) sequence generation.&quot;}]">Fig. 1-86</a> (see <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span> for further details). The important parameters, that can be signaled by higher layer control information, are the mapping type A or B, the configuration type 1 or 2, and the length of the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> within a slot. Many of the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> parameters are similar to the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> for <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>, except in the case where two sequences and mapping schemes are defined depending on whether transform precoding is activated or not. Some minor mapping details are also different in case frequency hopping is enabled (see <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span> for further details).</p>


<a id="page_1035_c750"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> for <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>, <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>
			</p>


<a id="page_1035_c751"></a><p>5G NR also defines <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> for the physical control channels <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>, <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>. There are fewer configuration parameters given by higher layers compared to <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. The <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> for the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> is based on a pseudonoise sequence initialized with either the higher layer value <em>pdcch-DMRS-ScramblingID</em> or the physical cell ID. The <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> symbols are mapped in the time domain only onto resource elements that belong to an OFDM symbol within a slot that is used for the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>. In the frequency domain, the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> are mapped onto three subcarriers within one resource block (more precisely, onto subcarriers 1, 5 and 9 of one resource block, with a distance of four subcarriers between them). The <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> for the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> is based on a pseudo-noise sequence initialized with the physical cell ID and an <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> index (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1043" class="eh-link eh-link--page">1.3.2.1 SS/PBCH block details, page 174</a> for further details). Like with the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>, the uplink <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> also has two cases for <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> sequence generation depending on whether transform precoding is activated or not. In addition, the mapping of the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> to physical resource elements differs depending on the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> format (see <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span> for further details).</p>


<a id="page_1035_c752"></a><p class="eh-headline-207 ">
				Phase-tracking reference signals (<abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr>) for <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>
			</p>


<a id="page_1035_c753"></a><p>As shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-031__Effect_of_phase_noise.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-31 &lt;\/span&gt;EVM degradation as a result of phase noise (example 16QAM).&quot;}]">Fig. 1-31</a>, phase noise represents a challenge, especially when using up- or down-conversion methods in higher frequency ranges. To tackle phase noise effects, 3GPP introduced a dedicated reference signal <abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr> that can be used optionally in the 5G NR downlink and uplink signal. This signal enables suppression of phase noise and common phase error at the receiver end, which is needed especially in higher frequency ranges (FR2). Phase error is a common problem due to phase noise which results mainly from mismatching of transmitter and receiver local oscillators. If the <abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr> is active, it is generated based on the principle of <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> sequence generation with a slight exception if transform precoding is active, but scaled with an individual power value. The <abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr> is included in the data channels <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> only. Due to the fact that phase noise is a more permanent disturbance, the <abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr> signal may have a lower density in the frequency domain but a higher density in the time domain. The exact mapping to the time and frequency resources is flexible and configured by the higher layers. The main idea here is to adapt the <abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr> to the actual <abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr> and frequency range in the background. See <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span> for details on when the <abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr> is active and <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span> for further details on how the phase tracking reference signal is generated. The higher layer parameters <em>PTRS-DownlinkConfig </em>and <em>PTRS-UplinkConfig</em> indicate configuration details for <abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr> signals such as the resource element offset, frequency density [2, 4 or not present] and time density [1, 2, 4 or not present] depending on the scheduled <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr>. In addition, the transmit power of the <abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr> may be signaled as an offset <abbr class="eh-abbreviation" title="Energy per resource element" lang="en"><span class="eh-tooltip" title="Energy per resource element">EPRE</span></abbr> to the transmit power of the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> via <em>PTRS EPRE</em> to <em>PDSCH EPRE</em>.</p>


<a id="page_1035_c754"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:33%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-090__PTRS_configuration_parameters_01_d35fe1a0fd.png" width="800" height="258" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-90 </span><abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr> configuration parameters (example: downlink <abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr>).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1035_c755"></a><p class="eh-headline-207 ">
				Sounding reference signals (<abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr>) for the uplink
			</p>


<a id="page_1035_c756"></a><p>The concept of sounding reference signals in 5G NR is similar to the sounding reference signal in LTE. Both technologies are based on a flexible scheduling concept by using only a segment of the overall channel bandwidth or aperiodic time scheduling. To enable the base station for channel estimation, the UE can be configured to send the <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> in the uplink direction. In 3GPP Release 15, the UE does not transmit the <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> outside of the active <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> in the uplink direction. Based on channel estimation with the <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr>, the network can make a decision on link adaptation (e.g. <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> selection, UE scheduling). Assuming a certain channel reciprocity, especially in TDD, the <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> supports downlink precoding selection functions, beamforming adaptation and scheduling selection for <abbr class="eh-abbreviation" title="Multi-user MIMO" lang="en"><span class="eh-tooltip" title="Multi-user MIMO">MU-MIMO</span></abbr>. Additionally, for possible non-codebook-based uplink precoding, the <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> reference signals can be used together with the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> signals inside the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> to estimate the precoding mechanism at the base station receiver. The higher layer <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>SRS-Config </em>defines a list of <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> resource sets where each <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> resource set contains a list of <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> resources.</p><p><abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> resource may be aperiodic, periodic or semi-persistent, i.e. it is triggered by <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> commands (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076_c1161" class="eh-link eh-link--page eh-link--ce">Downlink control information (DCI), page 302</a> for further details). The sounding reference signal is configured by parameters such as a frequency domain position as a start value in the frequency domain, a frequency domain shift as a density indication in the frequency domain, or a start position and a number of symbols plus a repetition factor as time domain behavior. The transmit power of the <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> is controlled by the network. (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1036_c787" class="eh-link eh-link--page eh-link--ce">Sounding reference signals (SRS) – power control, page 129</a>). The <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> resource spans 1, 2 or 4 consecutive symbols in the time domain that can be repeated up to four times to improve the uplink coverage. Furthermore, techniques such as frequency hopping and transmission comb to switch between TX antennas within a slot are also possible. Transmission comb describes a technique of interleaved mapping of <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> symbols onto subcarriers within one symbol, e.g. mapping onto even or uneven subcarriers during one transmission period. <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span> contains further details about the configuration option for the sounding reference signals. Generation is based on a pseudorandom sequence known as Zhadoff-Chu sequence with the characteristic of a low-PAPR. The symbols are spread over a certain sounding signal bandwidth with possible application of frequency hopping and the option for periodic behavior. Further details on sequence generation and <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> configuration can be found in <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>, <span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span> and <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>.</p>


<a id="page_1035_c757"></a><p class="eh-headline-207 ">
				Channel-state information reference signal (<abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>)
			</p>


<a id="page_1035_c758"></a><p>The <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> is a specific type of reference signal enabling the UE to report channel state information to the network. Unlike the first release of LTE which had cell-specific reference signals (<abbr class="eh-abbreviation" title="Cell specific reference signal (LTE)" lang="en"><span class="eh-tooltip" title="Cell specific reference signal (LTE)">CRS</span></abbr>) permanently on the air, 5G NR does not have such a reference signal concept. For decoding purposes, the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> signals are defined. Recall that these signals are specific to the physical channel and are thus received only when the UE has to receive this particular physical channel. As a result, the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> could only be used to report channel status over a certain bandwidth and valid for a certain time only. For situations such as idle mode or for neighbor cell or neighbor beam detection, the concept of <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> would not be sufficient. The gNB thus sends <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reference signals which are used to report channel status information such as <abbr class="eh-abbreviation" title="CSI reference signal received power" lang="en"><span class="eh-tooltip" title="CSI reference signal received power">CSI-RSRP</span></abbr>, <abbr class="eh-abbreviation" title="CSI reference signal received quality" lang="en"><span class="eh-tooltip" title="CSI reference signal received quality">CSI-RSRQ</span></abbr> and <abbr class="eh-abbreviation" title="CSI reference signal to noise and interference ratio" lang="en"><span class="eh-tooltip" title="CSI reference signal to noise and interference ratio">CSI-SINR</span></abbr> especially for mobility procedures (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1086" class="eh-link eh-link--page">2.3 Overall Mobility, page 386</a> for more details).</p><p>The <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> are used for beamforming support. They are mapped onto certain resources in the frequency and time domain. In terms of the content, they can be configured by layer 3 to be either beam-specific or UE-specific. One idea could be to have a beam-specific <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> and configure the UE for measuring and reporting the beam-specific <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> status. Thus, these <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> signals play an essential role in performing tasks such as beam acquisition and evaluation, adaption of the beam (beam refinement), beam switching decision-making and UE tracking with steerable beams. As a first option, the network could schedule the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> as a specific reference signal per beam to allow them to be distinguished from one another. As a second option, the resource element(s) carrying the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> can be configured to be either zero power (ZP-CSI-RS) or non zero power (NZP-CSI-RS). One objective could be to provide a configuration that contains transmission gaps so that the UE can perform interference measurements and provide feedback. In addition, it may be used for optional beamforming implementations where the zero and non-zero power concept can be used to distinguish between beams. The <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-091__CSI-RS_alternating_mapping_zero_non-zero_power.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-91 &lt;\/span&gt;Example of alternating zero and non-zero power mapping of CSI-RS to support beam mobility.&quot;}]">Fig. 1-91</a> shows a possible usage example for such a mapping of zero and non-zero power signals. Assuming a beam mobility condition, the gNB here uses two beams with identical physical layer settings such as the bandwidth part and <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> definition as well as the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> resources.</p>


<a id="page_1035_c759"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:51%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-091__CSI-RS_alternating_mapping_zero_non-zero_power_17bda2d2af.png" width="800" height="406" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-91 </span>Example of alternating zero and non-zero power mapping of <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> to support beam mobility.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1035_c760"></a><p>For more details on beam mobility, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1087" class="eh-link eh-link--page">2.3.1 Beam mobility procedure, page 387</a>. In the example below, the UE must decide which beam is best. Technically speaking, we can define “best” as the highest received power level ­CSI-RSRP per beam. In the example given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-091__CSI-RS_alternating_mapping_zero_non-zero_power.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-91 &lt;\/span&gt;Example of alternating zero and non-zero power mapping of CSI-RS to support beam mobility.&quot;}]">Fig. 1-91</a>, the gNB has configured the ­CSI-RS resources in an alternating mapping such that for each <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> instance in the time domain, only one of the two beams would have a non-zero power <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>.The gNB can then decide, based on the <abbr class="eh-abbreviation" title="Channel quality indicator" lang="en"><span class="eh-tooltip" title="Channel quality indicator">CQI</span></abbr> reports on the uplink which beam to use and whether to apply a beam switching procedure.</p><p>Sequence generation for the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> is based on a pseudo-noise reference signal initialized with the higher layer parameter <em>scramblingID</em> that is signaled to the UE via the serving cell together with additional configuration parameters in the CSI-RS-ResourceMapping<strong></strong><abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr>. Using these parameters, it is possible to configure the position and quantity of <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> in the frequency and time domain based on the resource block and slot definition, density in time and frequency, and <abbr class="eh-abbreviation" title="Code division multiplex" lang="en"><span class="eh-tooltip" title="Code division multiplex">CDM</span></abbr> scheme for orthogonal code division multiplexing. Density means repetition of the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> in multiples of slots and resource blocks. For inter-cell mobility procedures, the measurements are either based on the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> or if known, based on the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1095" class="eh-link eh-link--page">2.3.3 Mobility measurement, page 401</a> for further details on mobility measurements). Measurement reports based on the <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> are configured by a higher layer and can be periodic, aperiodic or semi-persistent (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1082" class="eh-link eh-link--page">2.2.9 Uplink control information (UCI), page 340</a> for further details).</p>


<a id="page_1035_c761"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:98%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-092__CSI-RS_signal_generation__Formeln_8325e8d28c.png" width="800" height="780" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-92 </span><abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> signal generation aspects.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1035_c762"></a><p class="eh-headline-207 ">
				Tracking reference signal (<abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr>)
			</p>


<a id="page_1035_c763"></a><p>The tracking reference signal (<abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr>) is used for fine timing and frequency tracking in 5G NR. It replaces the cell reference signal (<abbr class="eh-abbreviation" title="Cell specific reference signal (LTE)" lang="en"><span class="eh-tooltip" title="Cell specific reference signal (LTE)">CRS</span></abbr>) known from LTE that was originally designed for this purpose. When work began on 5G NR in 3GPP, there were several goals in mind to ensure compatibility both for the future releases and the features. One of the goals was to minimize transmission of always-on signals such as the <abbr class="eh-abbreviation" title="Cell specific reference signal (LTE)" lang="en"><span class="eh-tooltip" title="Cell specific reference signal (LTE)">CRS</span></abbr> that was used in LTE. In LTE, the <abbr class="eh-abbreviation" title="Cell specific reference signal (LTE)" lang="en"><span class="eh-tooltip" title="Cell specific reference signal (LTE)">CRS</span></abbr> provides important information such as fine time and frequency tracking and <abbr class="eh-abbreviation" title="Quasi co-location" lang="en"><span class="eh-tooltip" title="Quasi co-location">QCL</span></abbr> assumptions. In 5G NR, that information is still needed and therefore must be distributed in other reference signals <span class="eh-reference" title="3GPP R1-1701700, Reference Signal for fine time and frequency tracking, 3GPP meeting #88, February 2017" lang="en"><span class="eh-tooltip" title="3GPP R1-1701700, Reference Signal for fine time and frequency tracking, 3GPP meeting #88, February 2017">[Ref. 27]</span></span>. Several design options were considered during the development of 5G NR and each has its own drawbacks:</p><ul class="eh-list eh-list--line"><li>Usage of a common reference signal (RS) would result in the same drawback as LTE’s <abbr class="eh-abbreviation" title="Cell specific reference signal (LTE)" lang="en"><span class="eh-tooltip" title="Cell specific reference signal (LTE)">CRS</span></abbr>. It is rather inefficient and has the additional problem (especially in high mobility scenarios) that it is difficult to support a flexible <abbr class="eh-abbreviation" title="Quasi co-location" lang="en"><span class="eh-tooltip" title="Quasi co-location">QCL</span></abbr> with a reference signal that is common to all users</li><li>Usage of <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> and <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr> synchronization signals makes it clear that the density of <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> transmissions is too low in both the time and the frequency domain for fine time and frequency tracking</li><li>Usage of the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> reveals the problem that the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> is only transmitted in scheduled resources and may not be scheduled in short enough intervals for fine tracking. In addition, the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> also relies on other <abbr class="eh-abbreviation" title="Quasi co-location" lang="en"><span class="eh-tooltip" title="Quasi co-location">QCL</span></abbr> reference signals to demodulate the data</li><li>Usage of <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>: The <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> is used for beam management and is configurable, making it suitable for supporting a flexible <abbr class="eh-abbreviation" title="Quasi co-location" lang="en"><span class="eh-tooltip" title="Quasi co-location">QCL</span></abbr> assumption. The LTE <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> density is also too low, meaning 5G NR requires a new configuration</li></ul><p>Ultimately, the group decided that the <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr> should be configured as a ­CSI-RS resource set and signaled by a higher layer. An <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> parameter is included in the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> set to indicate that it can be used for time/frequency tracking. The <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr> can be periodic (also known as “Basic TRS”) or aperiodic (also known as “­CSI-RS for tracking”). The UE must support periodic transmission, while aperiodic transmission is optional. The burst structure for periodic <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr> is shown in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-093__TRS_parameters.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-93 &lt;\/span&gt;Tracking reference signal (TRS) framework.&quot;}]">Fig. 1-93</a> <span class="eh-reference" title="3GPP R1-1708602 Further analysis on fine time/frequency tracking RS design, 3GPP meeting #89, May 2017" lang="en"><span class="eh-tooltip" title="3GPP R1-1708602 Further analysis on fine time/frequency tracking RS design, 3GPP meeting #89, May 2017">[Ref. 26]</span></span>, where <em>Y</em> is the periodicity and can be 10 ms, 20 ms, 40 ms or 80 ms. <em>X</em> is the number of slots and currently, <em>X</em> = 2 for FR1 and <em>X</em> = 1 or 2 for FR2.</p>


<a id="page_1035_c764"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:19%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-093__TRS_parameters_7cfe4fe8b9.png" width="800" height="145" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-93 </span>Tracking reference signal (<abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr>) framework.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1035_c765"></a><p>To fully characterize the reference signal design which is required for fine time and frequency tracking, several parameters need to be considered:</p><ul class="eh-list eh-list--line"><li>Enabling time tracking possibilities<ul><li class="Flie-text_Flie-text-Aufz2-Strich">Resolvable tracking range, determined by the reference signal spacing in terms of the RE number in the frequency domain</li><li class="Flie-text_Flie-text-Aufz2-Strich">Tracking granularity, determined by the reference signal bandwidth</li></ul></li><li>Enabling frequency tracking possibilities<ul><li class="Flie-text_Flie-text-Aufz2-Strich">Resolvable tracking range, determined by the reference signal spacing in terms of the OFDM symbol number in the time domain</li></ul></li><li>Number of OFDM symbols containing the <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr> within a <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr> burst, e.g. as shown in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-093__TRS_parameters.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-93 &lt;\/span&gt;Tracking reference signal (TRS) framework.&quot;}]">Fig. 1-93</a></li><li>Periodicity of the <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr> burst</li><li>Number of ports</li></ul><p>The parameters for the <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr> structure inside a burst are, for example, the <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr> subcarrier spacing, the <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr> symbol spacing within a slot, the number of OFDM symbols per <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr> within a slot and the <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr> bandwidth in the <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr>. For periodic <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr>, the transmission parameters involve a minimum bandwidth of 52 RBs, a <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr> subcarrier spacing of 4 and the number 2 + 2 OFDM symbols containing the <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr> within a slot. The position of these symbols could be (with symbol index starting at 0): symbol 4 and 8, symbol 5 and 9, or symbol 6 and 10. For FR2, there is additional support for <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr> symbol positions of {0, 4}, <span class="eh-text--nowrap">{1, 5},</span> {2, 6}, {3, 7}, {7, 11}, {8, 12} and {9, 13}. One of the main motivations behind adding support for these additional symbol positions is to support multi-beam operation in FR2. During the 3GPP RAN1 meeting in April 2018, an optional aperiodic <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr> was also approved by the group for 3GPP Release 15. Further details on aperiodic <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr> parameters can be found in <span class="eh-reference" title="3GPP R1-1803331, Way forward on UL DCI-Triggered CSIRS resource set for tracking, 3GPP RAN1 meeting #92, February 2018" lang="en"><span class="eh-tooltip" title="3GPP R1-1803331, Way forward on UL DCI-Triggered CSIRS resource set for tracking, 3GPP RAN1 meeting #92, February 2018">[Ref. 28]</span></span>.</p>


<a id="page_1035_c766"></a><p class="eh-headline-207 ">
				Primary and secondary synchronization signals (<abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> and <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr>)
			</p>


<a id="page_1035_c767"></a><p>For cell acquisition (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1043" class="eh-link eh-link--page">1.3.2.1 SS/PBCH block details, page 174</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1067" class="eh-link eh-link--page">2.1.2.1 Other fundamental properties of synchronization signal blocks (SSBs), page 237</a>), the UE uses two reference signals. They are named primary (<abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr>) and secondary synchronization signals (<abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr>). Both, <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> and <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr> are contained in the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> using a bandwidth of 127 subcarriers. They are intended for synchronization in time and frequency to a cell and provision of information about the physical cell ID (<abbr class="eh-abbreviation" title="Physical cell identity" lang="en"><span class="eh-tooltip" title="Physical cell identity">PCI</span></abbr>). The main purpose of the <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> and <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr> is related to initial cell acquisition to determine if system information is transmitted (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1067" class="eh-link eh-link--page">2.1.2.1 Other fundamental properties of synchronization signal blocks (SSBs), page 237</a>). The <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> contains the <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> and <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr> and can be considered as the only “always on air” signal that 5G NR provides and can therefore be detected even when no radio connection has been established such as in UE idle mode. In other words, the SSBs can be used for initial channel estimation or cell-specific channel status measurements such as SS-RSRP or SS-SINR. Note that the 3GPP standard allows multiple <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> transmissions per carrier bandwidth and the frequency position of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> in the carrier bandwidth is up to the network operator. The primary synchronization signal is based on a so-called m-sequence with a length of 127 symbols (unlike LTE where the <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> was based on a <span class="eh-text--nowrap">Zadoff-Chu</span> sequence). The secondary synchronization signal (<abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr>) is also based on an m-sequence with a length of 127 symbols. The length 127 allows the usage of a 128 FFT size, representing a compromise between the acquisition speed and implementation complexity. For faster cell acquisition, the physical cell ID ranging up to 1008 values is subdivided into a first part <em>N</em><sub class="eh-text--em eh-text__letter">_ID1</sub> with 3 possible values and used to generate the <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> and a second part <em>N</em><sub class="eh-text--em eh-text__letter">_ID2</sub>&nbsp; with 336 possible values. Unlike LTE, both sub-values <em>N</em><sub class="eh-text--em eh-text__letter">_ID1</sub> and <em>N</em><sub class="eh-text--em eh-text__letter">_ID2</sub> for the <abbr class="eh-abbreviation" title="Physical cell identity" lang="en"><span class="eh-tooltip" title="Physical cell identity">PCI</span></abbr> are used to generate the <em>m</em>-sequence used by the <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr>. In summary, the <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> can be one of 3 possible sequences and the <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr> can be one of 335 possible sequences, which together results in a maximum of 1008 possible values indicating the physical cell ID. This is exactly twice the number of possible physical cell IDs compared to LTE. Due to the higher propagation attenuation of the carrier frequencies most likely to be used, it is assumed that 5G NR will deploy a much higher number of cells with smaller coverage areas. Thus, dense network deployments are not averted. For interference reduction across neighbor cells (like in LTE), the network operator should avoid neighbor cells using the same <abbr class="eh-abbreviation" title="Physical cell identity" lang="en"><span class="eh-tooltip" title="Physical cell identity">PCI</span></abbr> value. Both sequences <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> and <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr> use a <abbr class="eh-abbreviation" title="Binary phase shift keying" lang="en"><span class="eh-tooltip" title="Binary phase shift keying">BPSK</span></abbr> modulation scheme.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1036" data-prevpid="1035" data-nextpid="1037" data-chapter="1.2.5.7 Transmit power allocation" id="page_1036">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.2.5.7 Transmit power allocation</h4>
						
<a id="page_1036_c768"></a><p>Like other mobile communications technologies, 5G NR also considers aspects related to transmit power allocation in the downlink and uplink directions. Power allocation in the two directions uplink and downlink differs in terms of how the transmit power can be controlled, i.e. the possibility as well as the speed of adapting the transmit power allocation and the signaling of those values. In general, power allocation exhibits certain similarities with EUTRAN, but marginal differences are present. Transmit power allocation in 5G NR is implemented based on an amplitude scaling factor ß that can be configured either per physical channel or per physical signal. There are differences in the signaling of such values: Some amplitude scaling factors are under direct control while others represent a relationship with respect to other physical signals. The following section provides a concise discussion of power allocation in both directions (downlink and uplink).</p>


<a id="page_1036_c769"></a><p class="eh-headline-207 ">
				Power allocation for the downlink
			</p>


<a id="page_1036_c770"></a><p>Downlink power allocation in 5G NR is based on physical signals and physical resource elements. It is typically given as a relative ratio between physical elements or signals whose values are signaled by a higher layer. The downlink power is generally indicated as the energy per resource element (<abbr class="eh-abbreviation" title="Energy per resource element" lang="en"><span class="eh-tooltip" title="Energy per resource element">EPRE</span></abbr>) for each physical channel or signal and described by an amplitude scaling factor ß. For example, the higher layer information element ss-PBCH-BlockPower contains a power indication ranging from –60 dBm to 50 dBm and indicates the transmit power of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> <abbr class="eh-abbreviation" title="Energy per resource element" lang="en"><span class="eh-tooltip" title="Energy per resource element">EPRE</span></abbr>. It is obviously used for SS-RSRP, SS-RSRQ and SS-SINR calculation within the UE. This downlink <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> block power is signaled via system information <abbr class="eh-abbreviation" title="System information block" lang="en"><span class="eh-tooltip" title="System information block">SIB</span></abbr> type 1 containing the <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> ­<em>ServingCellConfigCommonSIB</em> and can be additionally signaled to the UE in <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> situations, for example, when a secondary cell is activated via <em>ServingCellConfigCommon</em>.</p><p>Why is this parameter important in 5G NR? One reason is that the signaled <em>ss-PBCH-BlockPower</em> has a major impact on the initial uplink signal <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> power that the UE transmits at in the initial access procedure (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1070" class="eh-link eh-link--page">2.1.4 Random access procedure in 5G NR, page 250</a>). The signaled <em>ss-PBCH-BlockPower</em> also affects the uplink transmit power that the UE uses for the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>/<abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> physical channels and <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> signals. Such power allocation is controlled via the network, and one mechanism in this power allocation control involves the influence of the path loss (<abbr class="eh-abbreviation" title="Path loss" lang="en"><span class="eh-tooltip" title="Path loss">PL</span></abbr>) in the calculation formula for the uplink transmit power on <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>, <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> or <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr>. The general idea behind the path loss calculation is depicted in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-094__Path_loss_calculation_example.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-94 &lt;\/span&gt;Path loss calculation example.&quot;}]">Fig. 1-94</a>:</p>


<a id="page_1036_c771"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:47%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-094__Path_loss_calculation_example_23560a015f.png" width="800" height="371" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-94 </span>Path loss calculation example.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1036_c772"></a><p><span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span> defines further rules for power allocation such as linear averaging of the power contribution over a certain frequency or time allocation. Like in EUTRAN, 5G also offers the possibility of a power ratio for the downlink <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> vs. reference symbols <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>. This ratio is given as the ratio of <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> <abbr class="eh-abbreviation" title="Energy per resource element" lang="en"><span class="eh-tooltip" title="Energy per resource element">EPRE</span></abbr> to <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> <abbr class="eh-abbreviation" title="Energy per resource element" lang="en"><span class="eh-tooltip" title="Energy per resource element">EPRE</span></abbr> <strong><em>ß</em></strong><sub class="eh-text--strong eh-text__letter">DMRS</sub> and depends on the configuration of the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> signals such as the number of <abbr class="eh-abbreviation" title="Code division multiplex" lang="en"><span class="eh-tooltip" title="Code division multiplex">CDM</span></abbr> groups and <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>_type 1 or 2. If the UE is configured with phase tracking reference signals (<abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr>), there is another power ratio defined as the ratio of <abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr> signal power <em>ß</em><sub class="eh-text--em eh-text__letter">PTRS</sub> vs. <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> power. This value is signaled via higher layers as <em>epre-Ratio</em> in the <em>PTRS-config</em> information element. For further details on downlink power allocation, see <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>. and The figure <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-095__Downlink_power_allocation_example_01.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-95 &lt;\/span&gt;Downlink power allocation \u2013 example.&quot;}]">Fig. 1-95</a> provides an example of a downlink allocation where <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> is scheduled together with <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> using a certain <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> configuration and <abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr> are also scheduled to that particular UE. The example shows the option for a power boost on the control signals <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> and <abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr> (shown in an exemplary manner in this figure).</p>


<a id="page_1036_c773"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:52%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-095__Downlink_power_allocation_example_01_c61d21e3e7.png" width="800" height="415" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-95 </span>Downlink power allocation – example.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1036_c774"></a><p class="eh-headline-207 ">
				Power allocation for the uplink
			</p>


<a id="page_1036_c775"></a><p>The 5G network controls the uplink transmit power on the physical channels <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>, <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> as well as on the physical signal <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr>. The power control mechanism has to find a balance between the need for a sufficient <abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr> at the gNB receiver vs. UE aspects related to battery consumption and mitigation of inter-device or inter-cell interference. The mechanisms for uplink power control are similar to the mechanism used in LTE. <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span> provides further details on uplink power control for these channels. The following section will focus mainly on power control aspects on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> physical channel, other channels are discussed briefly. Generally, uplink power control can be divided into two areas. The first is known as <em>open loop power control </em>and applies to the random access procedure. A brief description of the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> power control aspects is given below. The second is known as <em>closed loop power control</em> and applies to the uplink transmit power when a radio connection is activated. <em>Open loop</em> describes the situation where a radio link has not yet been established, and thus the decision on the applied initial power must be made by the UE solely based on indirect signaling. <em>Closed loop</em> is used when a radio link connection is activated, i.e. the gNB receives uplink signals from the UE and can measure power values such as the <abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr> and execute a power control command to either decrease or increase the future uplink power.</p>


<a id="page_1036_c776"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> power control
			</p>


<a id="page_1036_c777"></a><p>In 5G, the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmit power is influenced by the general configuration settings, the bandwidth and transport format, the optional path loss adaptation and the direct power control commands sent to the UE. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-096__PUSCH_transmit_power_calculation__Formeln.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-96 &lt;\/span&gt;PUSCH transmit power calculation formula.&quot;}]">Fig. 1-96</a> provides an overview of the power control mechanism in 5G NR that applies to the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. The <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission power depends on the carrier frequency <em>f</em>, the transmission occasion i in the time domain, the serving cell c in case dual connectivity or UL <abbr class="eh-abbreviation" title="Carrier aggregation" lang="en"><span class="eh-tooltip" title="Carrier aggregation">CA</span></abbr> is activated, and a bandwidth part b. The formula shows the calculation rule for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission based on a parameter set configuration with index <em>j</em>, a path loss estimation based on a reference signal index <em>q</em><sub class="eh-text--em eh-text__letter">d</sub>, and a power control adjustment state <em>l</em>.</p>


<a id="page_1036_c778"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:63%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-096__PUSCH_transmit_power_calculation__Formeln_0d55459c9b.png" width="800" height="501" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-96 </span><abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmit power calculation formula.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1036_c779"></a><p>The next section will further examine the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> power calculation formula (see <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span> for details).</p><p><strong><em>P</em></strong><sub class="eh-text--em eh-text__letter">CMAX</sub> is a transmit power limiting factor that sets the upper boundary as the maximum possible transmit power given by the UE power class defined in <span class="eh-hint" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4" lang="en"><span class="eh-tooltip" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4">TS 38.101</span></span> or permitted in the current cell. Typical values are, e.g. +23 dBm also known as power class 3 Note that in the current release the UE power class is defined per frequency band and some bands allow a second power class 2 corresponding to +26 dBm.</p><p>The parameter <strong><em>P</em></strong><sub>O_PUSCH</sub> is built on two components: a nominal cell-specific parameter <strong><em>P</em></strong><sub>O_NOMINAL_PUSCH</sub> and a UE-specific component <strong><em>P</em></strong><sub>O_UE_PUSCH</sub>. Note that the parameter <strong><em>P</em></strong><sub>O_PUSCH</sub> is specific to a parameter configuration set with index <em>j</em>. What is the purpose of such a parameter configuration set? It allows definition of open loop base starting points for various allocation scenarios. Some possible allocation scenarios are, for example, the transmission of message 3 in an initial setup procedure or the semi-persistent or grant-free scheduling case (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1084" class="eh-link eh-link--page">2.2.11 Dynamic, semi-persistent and grant-free scheduling, page 382</a>). These differences are referred to as “with grant” or “without grant” in certain higher layer signaling messages, i.e. the P<sub>O_NOMINAL</sub> can either be signaled as the <em>p0-NominalWithGrant</em> element within <em>PUSCH-ConfigCommon</em> or signaled as <em>p0-NominalWithoutGrant</em> within a UE-specific control element <em>PUSCH-PowerControl</em>. The value <em>P</em><sub>0_UE_PUSCH</sub> can be provided as a parameter set with the information element <em>P0-PUSCH-AlphaSet</em>. In addition, 5G NR supports beamforming technology. Thus, it would be possible, assuming uplink beamforming is enabled, for the network to configure a parameter set in a beam-specific manner.</p><p><strong><em>M</em></strong><sub>R</sub><sub>B</sub><sup class="eh-text__letter">PUSCH</sup> represents a bandwidth factor for physical resource assignment and is expressed in the number of resource blocks for the corresponding <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission occasion i. Note that this scaling factor takes into account the flexible numerologies and resulting subcarrier spacings.</p><p>As an option, the uplink transmit power may be influenced by the prevailing path loss condition. Why is this optional? The term <strong><em>α</em></strong><strong>(</strong><strong><em>j</em></strong><strong>)</strong> can be considered as a scaling factor that may assume values in the range from 0 to 1 in steps of 0.1. It is signaled via the higher layer parameter <em>alpha</em> via a parameter set <em>P0-PUSCH-AlphaSet</em> within the UE-specific control message <em>PUSCH-PowerControl</em> and is specific to the configuration parameter set j that allows allocation grant or beamforming specific power allocation settings. In other words, the weighting or scaling factor alpha prohibits, permits or partially permits the influence of the current path loss described as <strong><em>PL</em></strong><strong>(</strong><strong><em>q</em></strong><sub class="eh-text--em eh-text__letter">d</sub><strong>)</strong>. The path loss is calculated based on a configurable path loss reference <em>PUSCH-PathlossReferenceRS</em> that indicates either the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> block index or the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> resource index to be used for path loss calculations by the UE (see <span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span>, <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-094__Path_loss_calculation_example.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-94 &lt;\/span&gt;Path loss calculation example.&quot;}]">Fig. 1-94</a> for details).</p><p>∆<sub class="eh-text--em eh-text__letter">TF</sub> may be considered as a transport format adaptation parameter that can be activated by the higher layer signaling value <em>deltaMCS</em> in the <em>PUSCH-PowerControl</em> information element. It can either be enabled or disabled and refers to an adaptation formula that is influenced by channel coding parameters such as the number of code blocks, code rate, size of <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> and number of resource elements. If deltaMCS is disabled or the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> extends over more than one layer, i.e. uplink <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> is activated, the value of ∆<sub class="eh-text--em eh-text__letter">TF</sub> is set to 0. The formula to calculate it in case it is enabled is given in <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span>.</p><p>The function <strong><em>f</em></strong><strong>(</strong><strong><em>i</em></strong><strong>,</strong><strong><em>l</em></strong><strong>)</strong> represents the dynamic or closed loop part of the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission power control mechanism. As an initial difference compared to LTE, the network can configure two power control adjustment states indexed with l and configured via <em>twoPUSCH-PC-AdjustmentStates</em> in <em>PUSCH-PowerControl</em>. The idea here is to configure two different power adjustment states within the UE for various situations, i.e. <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow dependent, or when considering <abbr class="eh-abbreviation" title="Semi-persistent scheduling" lang="en"><span class="eh-tooltip" title="Semi-persistent scheduling">SPS</span></abbr> or grant-free scheduling, it can be a method to react to fast-changing radio conditions associated with propagation loss due to fast fading. The power control loop or adjustment state that has to be used is signaled via <em>powerControlLoopToUse</em> in <em>ConfiguredGrantConfig</em>, which provides further control information about non-dynamic grant scheduling. Another important higher layer control information that may distinguish or switch between two distinct power control loops accumulative or absolute power control is the <em>tpc-Accumulation</em> element that indicates whether the received power control commands are to be accumulated or not. The network sends via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1080" class="eh-link eh-link--page">2.2.7 UL grant reception or UL assignment, page 329</a>) a transmit power control command (<abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr>), which is referenced in the above function <strong><em>f</em></strong><strong>(</strong><strong><em>i</em></strong><strong>,</strong><strong><em>l</em></strong><strong>)</strong> as <strong><em>δ</em></strong><sub class="eh-text--em eh-text__letter">PUSCH</sub>. Values for these <abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> commands are given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1036_c780\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table017\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;TPC command field&lt;\/th&gt;&lt;th&gt;Accumulated power control activated&lt;\/th&gt;&lt;th&gt;Absolute power control activated&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;\u20131&lt;\/td&gt;&lt;td&gt;\u20134&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;\u20131&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-97 &lt;\/span&gt;Mapping of the TPC command received via DCI scheduling to TPC command values.&lt;\/p&gt;\n\n&quot;}">Fig. 1-97</a>. The accumulative inner loop power control in 5G NR has progressed from the simple “up” or “down” <abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> commands to a more complex scenario. The received <abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> command is considered as a power control adjustment command, that is derived as the sum of a received <abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> command value set with a certain cardinality within the last period, that occurred before the corresponding <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission occasion. Accumulative power control means that the <abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> command comes on top of the actual <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmit power for this particular time incidence. The period in the time domain, that is relevant for the accumulation of power commands, is given by the specification in terms of two sets of symbols, valid for the active UL <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>. First a number of symbols <em>K</em><sub>PUSCH</sub>(<em>i </em>– <em>i</em><sub class="eh-text__number">0</sub>) –1 before <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission occasion <em>i </em>– <em>i</em><sub class="eh-text__number">0</sub> and second a number of symbols <em>K</em><sub>PUSCH</sub>(<em>i</em>) before <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission occasion <em>i</em>.</p>


<a id="page_1036_c780"></a><div class="table-scroll"><table id="table017" class="eh-table eh-table--alternate"><colgroup><col><col><col></colgroup><thead><tr><th>TPC command field</th><th>Accumulated power control activated</th><th>Absolute power control activated</th></tr></thead><tbody><tr><td>0</td><td>–1</td><td>–4</td></tr><tr><td>1</td><td>0</td><td>–1</td></tr><tr><td>2</td><td>1</td><td>1</td></tr><tr><td>3</td><td>3</td><td>4</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-97 </span>Mapping of the <abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> command received via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling to <abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> command values.</p>


<a id="page_1036_c781"></a><p>See <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span> for further details on how this accumulation sum has to be calculated. It is necessary to handle different timing aspects of UE reaction times to execute the received power command. In case of accumulated power control commands, the range of reachable power values is determined at both ends by either the maximum UE power <strong><em>P</em></strong><sub class="eh-text--strong eh-text__letter">cmax</sub> or the minimum allowed power <strong><em>P</em></strong><sub>cmi</sub><sub>n</sub>. If the dynamic power control component is set to absolute power control, the value of the function <em>f</em>(<em>i</em>, <em>l</em>) is directly given as one value from the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1036_c780\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table017\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;TPC command field&lt;\/th&gt;&lt;th&gt;Accumulated power control activated&lt;\/th&gt;&lt;th&gt;Absolute power control activated&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;\u20131&lt;\/td&gt;&lt;td&gt;\u20134&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;\u20131&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-97 &lt;\/span&gt;Mapping of the TPC command received via DCI scheduling to TPC command values.&lt;\/p&gt;\n\n&quot;}">Fig. 1-97</a> within a range of [–4, +4]. Note that in such cases typically the UE transmit power cannot be controlled over the full dynamic range. Thus, it represents a state where the UE transmit power can be kept somewhat constant over a longer period of time, i.e. the channel condition does not exhibit fast fading effects.</p>


<a id="page_1036_c782"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:54%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-098__PUSCH_power_control_-_accumulative_mode_d05186cca2.png" width="800" height="429" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-98 </span><abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> power control – accumulative mode example.<br></figcaption></figure></div></div></div></div></div></div>


<a id="page_1036_c783"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:56%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-099__PUSCH_power_control__-_absolute_mode_3211a49786.png" width="800" height="442" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-99 </span><abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> power control – absolute mode example.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1036_c784"></a><p><strong>PUCCH power control</strong></p><p>The UE may have physical resources to transmit an uplink control channel <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> and as previously described for the case of <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission, <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> transmission must also apply some rules for power control. These parameters are valid for a <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> transmission occasion <em>i</em> within a certain cell in case of dual connectivity, a certain bandwidth part b and for a certain frequency <em>f</em>. Most of the uplink power control settings for <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> are similar to the principles that were described above for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. For the sake of brevity, only some differences compared to <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> power control are mentioned here. Additional information can be found in <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span>. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-100__PUCCH_and_SRS_transmit_power_calculation__Formeln.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-100 &lt;\/span&gt;PUCCH and SRS transmit power calculation formula.&quot;}]">Fig. 1-100</a> describes the formula for <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> transmit power calculation. There are similar values like in the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> case such as cell- and UE-specific nominal power settings, bandwidth adaptation, transport format adaptation and direct power control commands.</p>


<a id="page_1036_c785"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:84%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-100__PUCCH_and_SRS_transmit_power_calculation__Formeln_55c7db6970.png" width="800" height="667" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-100 </span><abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> and <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> transmit power calculation formula.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1036_c786"></a><p><strong><em>P</em></strong><sub>O_PUCCH</sub> is a parameter composed of a cell-specific higher layer component <strong><em>P</em></strong><sub>O_NOMI- NAL_PUCCH</sub> and if provided, a UE-specific parameter <strong><em>P</em></strong><sub>O_UE_PUCC</sub><sub>H</sub>.</p><p><strong><em>M</em></strong><sub>R</sub><sub>B</sub><sup class="eh-text__letter">PUCCH</sup> is the bandwidth of the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> resource assignment expressed in the number of resource blocks.</p><p><strong><em>PL</em></strong> is the path loss calculated by the UE based on the indicated reference signal resource, typically given as the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> block <abbr class="eh-abbreviation" title="Energy per resource element" lang="en"><span class="eh-tooltip" title="Energy per resource element">EPRE</span></abbr> power. Unlike <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>, the path loss always influences the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> transmit power. Thus, there is no weighting factor alpha.</p><p>The parameter <strong>∆</strong><sub>F_PUCCH</sub> is provided by the higher layer parameters <em>deltaF-PUCCH-f0</em> for <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> format 0, <em>deltaF-PUCCH-f1</em> for <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> format 1, ­<em>deltaF-PUCCH-f2</em> for <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> format 2, <em>deltaF-PUCCH-f3</em> for <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> format 3 and <em>deltaF-PUCCH-f4</em> for <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> format 4.</p><p>Similar to the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>, there is a format adaptation parameter given as <strong>∆</strong><sub>T</sub><sub>F</sub>, which defines a power adjustment depending on the various <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> formats that are applied. It is influenced by e.g. the number of <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> bits, the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback size, the <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> and <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> bits plus additionally the <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> size of the corresponding <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> format.</p><p>The dynamic closed loop power control mechanism in the case of <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> only uses the accumulative <abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> principle, i.e. one of two possible power adjustment states given by index <strong><em>l</em></strong> in function <strong><em>g</em></strong><strong>(</strong><strong><em>i</em></strong><strong>, </strong><strong><em>l</em></strong><strong>)</strong> is updated with a relative <abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> command <strong><em>δ</em></strong><sub>PUCCH</sub><strong>(</strong><strong><em>i, </em></strong><strong><em>l</em></strong><strong>)</strong> with values in the range [–1, +3].</p>


<a id="page_1036_c787"></a><p class="eh-headline-207 ">
				Sounding reference signals (<abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr>) – power control
			</p>


<a id="page_1036_c788"></a><p>As described, the UE may send uplink sounding reference signals to allow the gNB to perform channel status estimation. Such <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> signals may occur in conjunction with simultaneous transmission of the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> or may be standalone. Similar to <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> power control, the <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> transmit power is also calculated based on a formula that is influenced by factors such as the bandwidth, higher layer parameters, path loss estimation and directly received <abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> commands. Unlike the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> or <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>, the <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> uplink power is not adapted via a certain transport format. The higher layer <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>SRS-Config</em> from <span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span> provides certain configuration parameters for the <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> and some of them are used for power control mechanisms.</p><p><strong><em>P</em></strong><sub>0_SRS</sub> is provided by the higher layer parameter <em>p0</em> signaled via SRS-config and can take even values in the range –202 dBm to +24 dBm.</p><p><strong><em>M</em></strong><sub>SRS</sub> is the bandwidth of the sounding reference signal expressed as the number of resource blocks.</p><p><strong>Alpha</strong> or <strong><em>α</em></strong><sub>SRS</sub> is a path loss adaptation scaling factor like in the case of <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmit power and its value is signaled via SRS-config to the UE.</p><p>Similar to the case of the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>, the UE performs a path loss estimate <strong><em>PL</em></strong><strong>(q</strong><sub>d</sub><strong>)</strong> valid for a reference signal resource set indicated by higher layers.</p><p>Last but not least, there is a dynamic closed loop transmit power command (<abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr>) mechanism, defining a power adjustment state given as <strong><em>h</em></strong><strong>(</strong><strong><em>i. </em></strong><strong><em>l</em></strong><strong>)</strong> from the definition of up to two power level adjustments and its value is updated via the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling of <abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> command <strong><em>δ</em></strong><sub>SR</sub><sub>S</sub>. As a side note, recall that the <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> power adjustment state may be linked via higher layer signaling to the power level adjustment of the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> and will thus not be represented as an independent power control loop. Depending on the setting for <em>tpc-Accumulation</em> within <em>SRS-config</em>, the received power level commands <strong><em>δ</em></strong><sub>SRS</sub> have to be recognized as either an absolute value or accumulative. </p>


<a id="page_1036_c789"></a><p class="eh-headline-207 ">
				Physical random access channel (<abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr>) – power control
			</p>


<a id="page_1036_c790"></a><p>The physical random access channel used for channel access uses an open loop power control method, similar to the one used in LTE networks. Based on the expected power level, path loss situation and higher layer configuration, the UE calculates an initial transmit power to be applied for the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> preamble transmission. Further details on the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> transmit power and <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> configuration are found in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1070" class="eh-link eh-link--page">2.1.4 Random access procedure in 5G NR, page 250</a>, as well as in the specifications <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span>, <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span> and <span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span>. The transmit power on the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> is based on a minimum function given as:</p>


<a id="page_1036_c791"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:6%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-101__Initial_transmission_power_..._Formel_cce26defb7.png" width="800" height="42" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-101 </span>Initial transmission power for the preamble on the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1036_c792"></a><p><em>P</em><sub>CMAX</sub> corresponds to the maximum UE transmit power, given by the UE power class as defined individually for certain frequency bands.</p><p>The second aspect of the minimum function depends on the preamble initial target power and the path loss. The path loss is determined based on the SS-RSRP measurement as illustrated with an example in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-094__Path_loss_calculation_example.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-94 &lt;\/span&gt;Path loss calculation example.&quot;}]">Fig. 1-94</a>. The preamble initial target power is signaled as the information element preambleReceivedTargetPower as part of the generic parameters for random access. It can assume values between –202 dBm and –60 dBm.</p><p>If the UE does not receive a random access response (<abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>) from the network in adequate time (ra-ResponseWindow), the UE will retransmit the preamble a maximum of preambleTransMax<strong></strong>times. The power for the preamble retransmission is increased by a Δ-power value that is dependent on the preamble format and subcarrier spacing and a higher layer signaled parameter powerRampingStep. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1071_c1074\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table032\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Preamble format&lt;\/th&gt;&lt;th&gt;Values (in dB), \u00b5&lt;span class=\&quot;eh-text--math\&quot;&gt;\u2208&lt;\/span&gt; {0, 1, 2, 3}&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;\u20133&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;\u20136&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A1&lt;\/td&gt;&lt;td&gt;8 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A2&lt;\/td&gt;&lt;td&gt;5 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A3&lt;\/td&gt;&lt;td&gt;3 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B1&lt;\/td&gt;&lt;td&gt;8 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B2&lt;\/td&gt;&lt;td&gt;5 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B3&lt;\/td&gt;&lt;td&gt;3 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B4&lt;\/td&gt;&lt;td&gt;3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;C0&lt;\/td&gt;&lt;td&gt;11 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;C2&lt;\/td&gt;&lt;td&gt;5 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-32 &lt;\/span&gt;\u0394-preamble power values.&lt;\/p&gt;\n\n&quot;}">Fig. 2-32, page 262</a> shows the settings for DELTA_PREAMBLE for each preamble format. Depending on the transmission counter for the preamble, the power is even further increased as the current counter setting is multiplied by the signaled power ramping step (<em>powerRampingStep</em>) which can be 0 dB, 2 dB, 4 dB or 6 dB. The maximum number of preamble transmissions <em>preambleTransMax</em> can assume the following values: 3, 4, 5, 6, 7, 8, 10, 20, 50, 100, 200 transmissions. The appropriate response time for the <abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>, given as the higher layer parameter <em>ra-Response</em><em>-</em><em>Window</em>, can have the following values: 11, 12, 14, 18, 110, 120, 140 or 180 slots. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-102__PRACH_preamble_transmit_power_configuration_-_open_....png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-102 &lt;\/span&gt;PRACH preamble transmit power configuration \u2013 open loop power control.&quot;}]">Fig. 1-102</a> summarizes the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> power control configuration for initial transmission of <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> preambles:</p>


<a id="page_1036_c793"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:63%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-102__PRACH_preamble_transmit_power_configuration_-_open_..._210122dc63.png" width="800" height="499" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-102 </span><abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> preamble transmit power configuration – open loop power control.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1036_c794"></a><p class="eh-headline-207 ">
				Dual connectivity – power control aspects
			</p>


<a id="page_1036_c795"></a><p>The UE may be configured for dual connectivity, corresponding to multiple simultaneous radio links being either 5G-DC or <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr>. The specification document <span class="eh-hint" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4" lang="en"><span class="eh-tooltip" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4">TS 38.101</span></span> defines a maximum total transmit power the UE must be capable of. For dual connectivity situations, this maximum transmit power is divided and shared among the various radio access technologies. For example, for <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> if a UE is configured with a <abbr class="eh-abbreviation" title="Master cell group" lang="en"><span class="eh-tooltip" title="Master cell group">MCG</span></abbr> using E-UTRA radio access and with a <abbr class="eh-abbreviation" title="Secondary cell group" lang="en"><span class="eh-tooltip" title="Secondary cell group">SCG</span></abbr> using NR radio access, the UE is configured to maximum power for transmissions on the LTE <abbr class="eh-abbreviation" title="Master cell group" lang="en"><span class="eh-tooltip" title="Master cell group">MCG</span></abbr> by the higher layer parameter <em>p-MaxEUTRA</em> and maximum power for transmissions on the <abbr class="eh-abbreviation" title="Secondary cell group" lang="en"><span class="eh-tooltip" title="Secondary cell group">SCG</span></abbr> by the higher layer parameter <em>p-NR</em>. For further information on power sharing among various <abbr class="eh-abbreviation" title="Radio access technology" lang="en"><span class="eh-tooltip" title="Radio access technology">RAT</span></abbr> and cells, see <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1037" data-prevpid="1036" data-nextpid="1038" data-chapter="1.2.5.8 Channel coding" id="page_1037">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.2.5.8 Channel coding</h4>
						
<a id="page_1037_c796"></a><p>In comparison with LTE, 5G NR uses two different channel coding methods: Low density parity check (<abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr>) codes for data channels instead of turbo codes and polar codes for control data. <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes meet the requirements for higher data rates and provide a good balance between implementation complexity and coding efficiency. Polar codes provide high coding efficiency and were thus selected for the control channels in 5G NR. The following chapter provides an introduction to the technical aspects behind these 5G NR channel coding methods. It is structured to include an initial brief digression into general channel coding aspects before introducing the 5G NR relevant coding aspects.</p>


<a id="page_1037_c797"></a><p class="eh-headline-207 ">
				Brief digression into channel coding, <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> and polar codes
			</p>


<a id="page_1037_c798"></a><p>Since channel coding is a substantial feature of mobile communications systems, a brief digression into the general aspects of channel coding is included here to help the reader understand the procedures used in 5G NR. It is not the intention of this book to discuss channel coding in detail. Interested readers can seek out relevant literature on this topic, e.g. <span class="eh-reference" title="Digital Communications, John G. Proakis, Mcgraw-Hill Publ. Comp, Jan 2008" lang="en"><span class="eh-tooltip" title="Digital Communications, John G. Proakis, Mcgraw-Hill Publ. Comp, Jan 2008">[Ref. 1]</span></span>, <span class="eh-reference" title="Nachrichtenuebertragung, Prof. Dr. K.-D. Kammeyer, University of Bremen, ISBN 978-3-8351-0179-1, Teubner Verlag, March 2008" lang="en"><span class="eh-tooltip" title="Nachrichtenuebertragung, Prof. Dr. K.-D. Kammeyer, University of Bremen, ISBN 978-3-8351-0179-1, Teubner Verlag, March 2008">[Ref. 2]</span></span>, <span class="eh-reference" title="Near Shannon Limit Error-Correction Coding and Decoding: Turbo Codes, C. Berrou, A. Glavieux and P. Thitimajshima, IEEE International Communication Conference ICC, Geneva, May 1993, pp. 1064–1070" lang="en"><span class="eh-tooltip" title="Near Shannon Limit Error-Correction Coding and Decoding: Turbo Codes, C. Berrou, A. Glavieux and P. Thitimajshima, IEEE International Communication Conference ICC, Geneva, May 1993, pp. 1064–1070">[Ref. 3]</span></span> and <span class="eh-reference" title="Digital Communications, B. Sklar, 2nd Edition, Prentice-Hall, Upper Saddle River, NJ, 2001" lang="en"><span class="eh-tooltip" title="Digital Communications, B. Sklar, 2nd Edition, Prentice-Hall, Upper Saddle River, NJ, 2001">[Ref. 4]</span></span>.</p><p>5G NR channel coding comprises block coding with <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> for error detection, <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> or polar coding for error correction, and interleaving to mitigate error bursts. Channel coding is performed in this order at the data source and in the reverse order at the data sink. The <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-103__General_channel_coding_chain_components.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-103 &lt;\/span&gt;General channel coding chain components (example).&quot;}]">Fig. 1-103</a> provides an overview of channel coding and its components on a general basis.</p>


<a id="page_1037_c799"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:53%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-103__General_channel_coding_chain_components_03fe7dfa98.png" width="800" height="424" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-103 </span>General channel coding chain components (example).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c800"></a><p>Channel coding distinguishes between error detection and error correction mechanisms. Error detection is also known as outer loop error correction. This step involves attachment of error detection mechanisms to the data block by the transmitter to enable the receiver to detect errors. Common examples include parity bit attachment and cyclic redundancy checking (<abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr>) using the block coding principle. Block coding involves calculating a certain number of parity bits for a block of data bits and then appending them to the data block. At the data sink, i.e. the receiving end, errors in the received code word can be detected with the aid of these redundancy bits. We would like to present a simple single parity check coding example. Here, the assumption is that we have a 7-bit data sequence <em>d</em><sub class="eh-text__number">1</sub><sub>…</sub><sub class="eh-text__number">7</sub> that is augmented by one parity bit p<sub class="eh-text__number">1</sub> to fulfill the requirement that the number of ones in the 8-bit code word is an even number. More formally using the modulo 2 or XOR operation, we can express this concept as follows:</p>


<a id="page_1037_c801"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:772px;"><div class="book-img-wrap__inner" style="padding-bottom:7%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/K2.1.5.8__Parity_Check_Equation.png" width="772" height="53" alt="" style="display: block;"></div></div></figure></div></div></div></div></div></div>


<a id="page_1037_c802"></a><p>Using such a parity check, the receiver can easily determine if a code word that is sent over a noisy channel has been properly received. Based on the above example, the received code word [1 0 0 1 0 0 1 0] does not contain an even number of ones and is therefore not accepted as a valid code word. This code is not sufficiently powerful to indicate which bit was inverted, nor can it detect a greater number of bit errors. More sophisticated codes are based on multiple parity-check equations, all of which must be satisfied and which thus can be used for error correction as well.</p><p>With forward error correction (<abbr class="eh-abbreviation" title="Forward error correction" lang="en"><span class="eh-tooltip" title="Forward error correction">FEC</span></abbr>), a total code word of <em>n</em> bits is generated. This consists of (<em>n–</em><em>k</em>) redundancy bits that are added to a number <em>k</em> of data bits at the transmitting end to enable the receiving end to implement a correction mechanism.</p><p>The code rate is defined as the ratio of the input bits into the encoder to the output bits from the encoder. For example, a coder with a code rate of ½ generates for each input bit a code word with two output bits. Based on the above example with a code word that must fulfill the parity-check equation, one possible concept known as maximum-likelihood detection involves the idea of replacing the received code word with a valid code word that has the lowest Hamming distance. The Hamming distance is defined as the number of bit positions that differ. One problem here is the increased computational power that can be required since for a large code word, there is an exponential increase in the number of potential data words compared to valid code words. Numerous ingenious solutions have been devised to make this task less complex, such as algebraic codes and <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> iterative decoding.</p>


<a id="page_1037_c803"></a><p class="eh-headline-207 ">
				Low-density parity-check (<abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr>) codes – a brief introduction
			</p>


<a id="page_1037_c804"></a><p>Low-density parity-check (<abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr>) codes were first described by Gallager in 1963 <span class="eh-reference" title="R. G. Gallager, Low-Density Parity-Check Codes. Cambridge, MA:MIT Press, 1963" lang="en"><span class="eh-tooltip" title="R. G. Gallager, Low-Density Parity-Check Codes. Cambridge, MA:MIT Press, 1963">[Ref. 5]</span></span>. They represent a very efficient method for error correction. They were largely neglected for over 35 years due to the high computational power needed to implement them. In the meantime, the field of forward error correction was dominated by highly structured algebraic block and convolutional codes. A relative state of inactivity in the coding field was utterly transformed by the introduction of turbo codes <span class="eh-reference" title="Near Shannon Limit Error-Correction Coding and Decoding: Turbo Codes, C. Berrou, A. Glavieux and P. Thitimajshima, IEEE International Communication Conference ICC, Geneva, May 1993, pp. 1064–1070" lang="en"><span class="eh-tooltip" title="Near Shannon Limit Error-Correction Coding and Decoding: Turbo Codes, C. Berrou, A. Glavieux and P. Thitimajshima, IEEE International Communication Conference ICC, Geneva, May 1993, pp. 1064–1070">[Ref. 3]</span></span> in the 1990s. It was soon recognized that the newly introduced principle of block codes represented a sort of rediscovery of the <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes developed years earlier. The concept of iterative decoding, meaning the output of one decoder can be the input to a subsequent decoder, provides an efficient method for correcting a certain number of transmission errors that is close to attaining the Shannon limit for channel capacity while providing reduced complexity regarding the required computational power. <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes for the data channels enable high data rates with low complexity. Especially in comparison to turbo codes, they provide manageable decoding complexity with relatively good performance. A parallel decoding implementation is possible with <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes, especially at higher coding rates. The complexity of the decoding algorithm is much lower compared to the turbo codes used in LTE. <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> supports a wide range of adaptable code rates and transport block sizes. In addition, it supports the incremental redundancy <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> operation, also known as soft combining, in case of retransmission of erroneous packets with changed redundancy versions. These were the major arguments within the standardization bodies for selection of <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes instead of turbo codes for 5G NR <span class="eh-reference" title="5G implementation challenges and solutions. M. Baker, Nokia Bell labs. Presentation at 5G summit, university Bristol, September 2018" lang="en"><span class="eh-tooltip" title="5G implementation challenges and solutions. M. Baker, Nokia Bell labs. Presentation at 5G summit, university Bristol, September 2018">[Ref. 35]</span></span>. How do <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes work in general? This concise digression only describes the functional principle of <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr>. Readers should consult the relevant literature for further details (e.g. <span class="eh-reference" title="Sarah S. Johnson, Introducing Low-Density Parity-Check Codes, Newcastle university" lang="en"><span class="eh-tooltip" title="Sarah S. Johnson, Introducing Low-Density Parity-Check Codes, Newcastle university">[Ref. 6]</span></span>, <span class="eh-reference" title="T. Strutz, LDPC codes – eine Einfuehrung" lang="en"><span class="eh-tooltip" title="T. Strutz, LDPC codes – eine Einfuehrung">[Ref. 7]</span></span>).</p><p>As our basis, we will consider the principle of block coding. We imagine a group of six data bits arranged in a 2 × 3 block structure (i.e. two lines with three bits each). These data bits are protected by parity bits in the horizontal and vertical structure. The parity bits are defined based on an XOR or modulo 2 operation which can be characterized with equations or in a tabular format.</p>


<a id="page_1037_c805"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:42%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-104__Principle_of_parity_coding_...__dc9a50fa45.png" width="800" height="329" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-104 </span>Principle of parity coding, table and equation view (example).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c806"></a><p>The data bits (d<sub class="eh-text__number">1</sub> d<sub class="eh-text__number">2</sub> d<sub class="eh-text__number">3</sub> d<sub class="eh-text__number">4</sub> d<sub class="eh-text__number">5</sub> d<sub class="eh-text__number">6</sub>) are augmented with parity bits (p<sub class="eh-text__number">1</sub> p<sub class="eh-text__number">2</sub> p<sub class="eh-text__number">3</sub> p<sub class="eh-text__number">4</sub> p<sub class="eh-text__number">5</sub>) to produce a code word (d<sub class="eh-text__number">1</sub> d<sub class="eh-text__number">2</sub> d<sub class="eh-text__number">3</sub> d<sub class="eh-text__number">4</sub> d<sub class="eh-text__number">5</sub> d<sub class="eh-text__number">6</sub> p<sub class="eh-text__number">1</sub> p<sub class="eh-text__number">2</sub> p<sub class="eh-text__number">3</sub> p<sub class="eh-text__number">4</sub> p<sub class="eh-text__number">5</sub>). This kind of code is said to be systematic since the data bits are fully contained in the code word itself. Thus, a fixed number of data bits are augmented by a fixed number of parity bits, producing a linear block code that can also be characterized with the aid of a parity check matrix H:</p>


<a id="page_1037_c807"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:36%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-105__Parity_check_matrix_H_0f951d6cee.png" width="800" height="282" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-105 </span>Parity check matrix <em>H</em> for the parity-check equation in the example above.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c808"></a><p>Each row of the parity check matrix <em>H</em> represents a parity check equation. Each column left of the vertical line represents data bit(s) of the code word and each column right of the vertical line represents a parity bit. The structure of the parity check matrix <em>H</em> is given as a combination of a <span class="eh-text--nowrap">(</span><em>n</em><em>–</em><em>k</em><em>)</em><span class="eh-text--nowrap">·</span><em>k</em> binary matrix <em>C</em><sup class="eh-text--em eh-text__letter">T</sup> and an identity matrix <em>I</em> with rank (<em>n</em><em>–</em><em>k</em>). The characteristic of the parity check matrix <em>H</em> is that the number of ones is small in relation to the total size. Thus, we can call it a sparse matrix or say that it has low density. In a matrix, a received string <em>y</em> = (<em>c</em><sub class="eh-text__number">1</sub><sub class="eh-text__number">…</sub><em>c</em><sub>n</sub>) is a valid code word for the code with the parity-check matrix <em>H</em> if and only if it satisfies the matrix equation <em>Hy</em><sup class="eh-text--em eh-text__letter">T</sup> = 0.</p><p>Encoding can now be performed based on the mathematical principle of Gauss-Jordan elimination on <em>H</em>. From the parity-check matrix <em>H</em>, we can resolve a generator matrix G. Given the above example of parity-check equations and thus the resolving parity-check matrix <em>H</em>, a generator matrix <em>G</em> is obtained as follows.</p>


<a id="page_1037_c809"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:36%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-106__Generator_matrix_G_6af67c851b.png" width="800" height="283" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-106 </span>Generator matrix <em>G</em> for parity-check matrix <em>H</em> in the above example.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c810"></a><p>A channel encoder code word <em>c</em> that is sent over the channel can now be obtained by combining the data word <em>d</em> with the generator matrix <em>G</em> using the matrix <em>XOR</em> or modulo 2 operation as <em>c</em> = <em>d</em><em>XOR</em><em>G</em>. For a binary code with <em>k</em> data bits and length <em>n</em> code words, the generator matrix <em>G</em> becomes a <em>k·</em><em>n</em> matrix and the ratio <em>k</em><em>/</em><em>n</em> is designated as the code rate. A code with <em>k</em> data bits will result in 2<sup class="eh-text__letter">k</sup> possible code words.</p><p>At the channel decoder, the parity-check matrix <em>H</em> can be used to detect and correct possible errors. As mentioned a few lines above, a valid code word must fulfill the equation <em>Hy</em><sup class="eh-text--em eh-text__letter">T</sup> = 0. Assuming a code word <em>y</em><sub class="eh-text--em eh-text__letter">mod</sub> is received, the result of the equation <em>s</em> = <em>Hy</em><sub class="eh-text--em eh-text__letter">mo</sub><sub class="eh-text--em eh-text__letter">d</sub><sup class="eh-text--em eh-text__letter">T</sup>   is now called the syndrome of the code word. One possible correction method known as maximum likelihood detection would involve selecting a valid code word y such that the Hamming distance between y and <em>y</em><sub class="eh-text--em eh-text__letter">mod</sub> is minimized. However, an exhaustive search of this kind is feasible only if the data word is small.</p><p><abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes are block codes with parity-check matrices that contain only a very small number of non-zero entries. The sparseness of <em>H</em> ensures a decoding complexity that only increases linearly with the code word length. Typically, <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes are designed by constructing a sparse parity-check matrix first and then determining the generator matrix for the code afterwards. The relevant parameters for a parity-check matrix for <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes are the number of parity checks and the number of code bits contained in each parity-check equation. If the number of parity checks and the number of code bits per parity-check equation is fixed, the <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> code is said to be regular, otherwise, it is irregular. Gallager first proposed codes that are regular and are defined by a banded structure in <em>H</em> (see <span class="eh-reference" title="R. G. Gallager, Low-Density Parity-Check Codes. Cambridge, MA:MIT Press, 1963" lang="en"><span class="eh-tooltip" title="R. G. Gallager, Low-Density Parity-Check Codes. Cambridge, MA:MIT Press, 1963">[Ref. 5]</span></span> or <span class="eh-reference" title="Sarah S. Johnson, Introducing Low-Density Parity-Check Codes, Newcastle university" lang="en"><span class="eh-tooltip" title="Sarah S. Johnson, Introducing Low-Density Parity-Check Codes, Newcastle university">[Ref. 6]</span></span> for further details).</p><p>For the sake of simplicity, we will have a closer look at channel encoding and decoding based on an iterative graphical procedure, known as a Tanner graph, with a message passing algorithm (<abbr class="eh-abbreviation" title="Message passing algorithm" lang="en"><span class="eh-tooltip" title="Message passing algorithm">MPA</span></abbr>). The assumption here is a code word with six bits and a regular parity-check matrix <em>H</em> resulting from four parity-check equations.</p>


<a id="page_1037_c811"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:41%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-107__LDPC_example_4894fc02d0.png" width="800" height="328" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-107 </span>Example of <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> decoding: code word, parity-check matrix <em>H</em> and parity-check equations.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c812"></a><p>Based on the above example, we would like to introduce a graphical means of representing <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes which is known as a Tanner graph <span class="eh-reference" title="R. M. Tanner, A recursive approach to low complexity codes, IEEE Trans. Inform. Theory, vol. IT-27, no. 5, pp. 533–547, September 1981" lang="en"><span class="eh-tooltip" title="R. M. Tanner, A recursive approach to low complexity codes, IEEE Trans. Inform. Theory, vol. IT-27, no. 5, pp. 533–547, September 1981">[Ref. 8]</span></span>. A Tanner graph uses the aspect of code word bits and parity checks in a graphical structure by applying two vertices. One vertex is called the <em>bit node</em> and represents the code word bits (regardless of whether it is a parity or data bit), which are shown in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-108__Tanner_graph.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-108 &lt;\/span&gt;Tanner graph as a graphical representation of LDPC codes (e.g. Tanner graph for parity-check equation in example above).&quot;}]">Fig. 1-108</a> as circular nodes. The other vertex is called the <em>check node</em> and represents the parity-check equations. They are shown in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-108__Tanner_graph.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-108 &lt;\/span&gt;Tanner graph as a graphical representation of LDPC codes (e.g. Tanner graph for parity-check equation in example above).&quot;}]">Fig. 1-108</a> as square nodes. An edge connects a bit node to a check node if that bit is included in the corresponding parity-check equation. Thus, the number of edges in a ­Tanner graph is equal to the number of ones in the parity-check matrix. Note that a cycle in a Tanner graph is a sequence of connected vertices which start and end at the same vertex in the graph and contain other vertices no more than once (bold lines in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-108__Tanner_graph.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-108 &lt;\/span&gt;Tanner graph as a graphical representation of LDPC codes (e.g. Tanner graph for parity-check equation in example above).&quot;}]">Fig. 1-108</a>). For better coding efficiency, a Tanner graph of cycle length 4 should be avoided.</p>


<a id="page_1037_c813"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:43%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-108__Tanner_graph_09a2bc82b2.png" width="800" height="337" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-108 </span>Tanner graph as a graphical representation of <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes (e.g. Tanner graph for parity-check equation in example above).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c814"></a><p>This graphical representation of <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes (Tanner graph) can be used to illustrate the decoding concept behind <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> coding. One possible decoding method is maximum likelihood detection, but such methods suffer from heightened computational complexity. Another method which is based on graphical representation is known as message passing algorithms (<abbr class="eh-abbreviation" title="Message passing algorithm" lang="en"><span class="eh-tooltip" title="Message passing algorithm">MPA</span></abbr>). A message can be described as the passing of a code word along the edges of a Tanner graph. A bit node is connected with an edge to the check node of the ­Tanner graph.</p><p>Since our work is based on digital standards, the content of a bit node (assuming erroneous data transfer) can now be either a known bit in the form of a one or zero or an unknown, all bit nodes together contain the current status of the code word. The <abbr class="eh-abbreviation" title="Message passing algorithm" lang="en"><span class="eh-tooltip" title="Message passing algorithm">MPA</span></abbr> are also known as iterative decoding algorithms since messages are passed back and forth between the bit and check nodes iteratively until a result is achieved. Note that the messages are bidirectional: There can be a message sent from a bit node to the check node about the confidence level of the bit that has been received by applying a soft decision level and a message from the check node to the bit node about the confidence level after the parity check. To keep our example simple, the content of a bit node is discrete and thus assumes one of three possible values: one, zero or unknown. More complex decoding methods can use a confidence level based on soft decoding for better efficiency. This is also known as the belief propagation algorithm (BPA).</p><p>Based on the example in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-107__LDPC_example.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-107 &lt;\/span&gt;Example of LDPC decoding: code word, parity-check matrix &lt;em&gt;H&lt;\/em&gt; and parity-check equations.&quot;}]">Fig. 1-107</a>, we will now describe a possible decoding scenario. One of the parity-check equations is given as a modulo 2 check for bits <em>c</em><sub class="eh-text__number">1</sub>, <em>c</em><sub class="eh-text__number">2</sub> and <em>c</em><sub class="eh-text__number">4</sub>. Assuming bit <em>c</em><sub class="eh-text__number">1</sub> is known to be zero and bit <em>c</em><sub class="eh-text__number">2</sub> to be one, we can conclude that the content of bit <em>c</em><sub class="eh-text__number">4</sub> must be one to satisfy the parity equation. Based on the <abbr class="eh-abbreviation" title="Message passing algorithm" lang="en"><span class="eh-tooltip" title="Message passing algorithm">MPA</span></abbr> decoding principle, messages are passed along the Tanner graph edge by edge in a straightforward manner. A one-bit node sends its content (zero, one or unknown) to the corresponding check node. If a check node can resolve the unknown bit from one-bit nodes by satisfying the parity check, it replies to the bit node and thus the bit node may change its content. Such a process can now undergo several iterations to obtain the best result. We will now explain this principle based on the example in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-107__LDPC_example.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-107 &lt;\/span&gt;Example of LDPC decoding: code word, parity-check matrix &lt;em&gt;H&lt;\/em&gt; and parity-check equations.&quot;}]">Fig. 1-107</a>. Our assumption is, that the proper code word was generated at the transmitting end as <em>c</em><sub class="eh-text--em eh-text__letter">origina</sub><sub class="eh-text--em eh-text__letter">l</sub> = [0 0 1 0 1 1]. This code word is sent over an erroneous channel and in our example, the receiver detects the code word <em>c</em><sub class="eh-text--em eh-text__letter">erro</sub><sub class="eh-text--em eh-text__letter">r</sub> = [0 0 1 ? ? ?], indicating that three bits were lost over the noisy channel. We can initialize our message decoding with this vector ­<em>c</em><sub class="eh-text--em eh-text__letter">error </sub>and go through the defined iteration of the message decoding steps.</p>


<a id="page_1037_c815"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:49%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-109__MPA_decoding_example_75cd705100.png" width="800" height="389" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-109 </span><abbr class="eh-abbreviation" title="Message passing algorithm" lang="en"><span class="eh-tooltip" title="Message passing algorithm">MPA</span></abbr> decoding example with iterative decoding using a Tanner graph.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c816"></a><p>The above figure <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-109__MPA_decoding_example.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-109 &lt;\/span&gt;MPA decoding example with iterative decoding using a Tanner graph.&quot;}]">Fig. 1-109</a> shows the Tanner graph based decoding procedure using multiple iterations to check each of the given parity-check equations. In our example, the proper code word is obtained after three iterations. Note that iterative decoding can halt after a certain number of iterations or when a final valid parity check iteration has been achieved. The design process for <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes aims to produce a kind of structured graph, resulting in a structured distribution of the ones in the parity check matrix <em>H</em> in order to facilitate parallelism and organize the passing of the messages. The design process typically involves first describing the structure that governs the macroscopic statistics of the graph, i.e. the positions of the ones in the parity check matrix <em>H</em>, and later producing an instance reflecting and reproducing that structure in order to obtain larger matrix sizes <em>H</em> and thus a larger code block length. The structure of such a small graph is known as a base graph or protograph in the literature. To avoid excessive complexity, this section on <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes only contains a brief summary of some of the coding aspects. Readers should consult the relevant literature for further details, e.g. <span class="eh-reference" title="Sarah S. Johnson, Introducing Low-Density Parity-Check Codes, Newcastle university" lang="en"><span class="eh-tooltip" title="Sarah S. Johnson, Introducing Low-Density Parity-Check Codes, Newcastle university">[Ref. 6]</span></span>, <span class="eh-reference" title="T. Strutz, LDPC codes – eine Einfuehrung" lang="en"><span class="eh-tooltip" title="T. Strutz, LDPC codes – eine Einfuehrung">[Ref. 7]</span></span>, <span class="eh-reference" title="R. M. Tanner, A recursive approach to low complexity codes, IEEE Trans. Inform. Theory, vol. IT-27, no. 5, pp. 533–547, September 1981" lang="en"><span class="eh-tooltip" title="R. M. Tanner, A recursive approach to low complexity codes, IEEE Trans. Inform. Theory, vol. IT-27, no. 5, pp. 533–547, September 1981">[Ref. 8]</span></span> as well as many other scientific papers.</p>


<a id="page_1037_c817"></a><p class="eh-headline-207 ">
				Polar codes – a brief introduction
			</p>


<a id="page_1037_c818"></a><p>Polar codes were introduced by E. Arikan in 2008 <span class="eh-reference" title="E. Arıkan. Channel polarization: A method for constructing capacityachieving codes. In Proceedings IEEE International Symposium on Infor- mation Theory (ISIT), pages 1173–1177, July 2008" lang="en"><span class="eh-tooltip" title="E. Arıkan. Channel polarization: A method for constructing capacityachieving codes. In Proceedings IEEE International Symposium on Infor- mation Theory (ISIT), pages 1173–1177, July 2008">[Ref. 9]</span></span> as a method for transformation of the physical channel into a sort of outer virtual channel that provides (after defined recursion) a certain reliability that is either high or low (i.e. polarized). Polar codes are part of the family of linear block correction codes. Unlike <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes, they make use of encoding and decoding algorithms that do not require iterative methods and thus allow complexity reduction. Since the aim of this book is not to delve into the details of polar coding, we will only present some basic aspects. Further details can be found, e.g. in <span class="eh-reference" title="M. Seidl, Polar Coding: Finite-Length Aspects Friedrich-Alexander Universität Erlangen-Nürnberg" lang="en"><span class="eh-tooltip" title="M. Seidl, Polar Coding: Finite-Length Aspects Friedrich-Alexander Universität Erlangen-Nürnberg">[Ref. 10]</span></span>, <span class="eh-reference" title="H. Vangala, Y. Hong, and E. Viterbo, Efficient Algorithms for Systematic Polar Encoding, IEEE" lang="en"><span class="eh-tooltip" title="H. Vangala, Y. Hong, and E. Viterbo, Efficient Algorithms for Systematic Polar Encoding, IEEE">[Ref. 11]</span></span> and <span class="eh-reference" title="E. Sasoglu, Polarization and Polar Codes. Now publishers, 2012" lang="en"><span class="eh-tooltip" title="E. Sasoglu, Polarization and Polar Codes. Now publishers, 2012">[Ref. 12]</span></span>.</p><p>To better understand the innovative idea behind polar coding, recall the legacy approach for the communications channel as shown in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-110__Polar_code_vs_traditional_code.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-110 &lt;\/span&gt;General coding chain and legacy approach with coding + modulation vs. new approach with polarization.&quot;}]">Fig. 1-110</a>. The structure involves various steps such as encoding and decoding, modulation and demodulation, and of course the channel in the middle. These functional blocks are treated as isolated behavioral steps. For example, channel coding is understood as an independent concept that seeks to maximize the Hamming distance between code words. There are also modulation schemes that attempt to maximize the Euclidean distance between modulation symbols (e.g. the famous Gray encoding is a good example). The initial idea behind channel polarization is now to include knowledge of the channel, i.e. the error probability or channel capacity, that has been discovered as an influencing factor, into the code generation itself.</p>


<a id="page_1037_c819"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:42%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-110__Polar_code_vs_traditional_code_7a092536b4.png" width="800" height="336" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-110 </span>General coding chain and legacy approach with coding + modulation vs. new approach with polarization.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c820"></a><p>One typical approach in digital communications is to restrict the channel to being discrete in terms of time and the input alphabet. A common example is the binary-input symmetric memoryless channel (<abbr class="eh-abbreviation" title="Binary-input symmetric memoryless channel" lang="en"><span class="eh-tooltip" title="Binary-input symmetric memoryless channel">BSMC</span></abbr>). The input is a binary alphabet of [0, 1] with a uniform probability distribution, i.e. the number of ones and zeros are more or less equal. Such a channel is described with a binary symmetric channel (BSC) model of the channel <em>W</em> with error probability <em>ε</em> and channel capacity <em>C</em>(<em>W</em>), symmetric capacity <em>I</em>(<em>W</em>) or rate (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-111__Binary_symmetric_channel__BSC__model.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-111 &lt;\/span&gt;Binary symmetric channel (BSC) model.&quot;}]">Fig. 1-111</a>). An input symbol <em>X</em> is transferred over a channel <em>W</em> and results in an output symbol <em>Y</em>. Note that we use capital letters for vector notation and in our case, the input and output symbols have a binary format.</p>


<a id="page_1037_c821"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:28%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-111__Binary_symmetric_channel__BSC__model_f8c8defee0.png" width="800" height="222" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-111 </span>Binary symmetric channel (BSC) model.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c822"></a><p>In block coding schemes, we understand that a certain number <em>N</em> blocks are combined. The term “block” here refers to a quantity of statistically independent uses of a given channel <em>W</em>, i.e. a number of input bits that are statistically uncorrelated. The transmission of a code word that is described as a ­length-<em>N</em> sequence of binary symbols <em>X</em> can thus be equivalently described by single-channel usage of a vector channel <em>W</em><sup class="eh-text--em eh-text__letter">N</sup> with an expanded input alphabet <em>X</em><sup class="eh-text--em eh-text__letter">N</sup> and output Y<sup class="eh-text__letter">N</sup> with resultant capacity <em>C</em>(<em>W</em><sup class="eh-text--em eh-text__letter">N</sup>) = <em>N</em><em>C</em>(<em>W</em>) <span class="eh-reference" title="M. Seidl, Polar Coding: Finite-Length Aspects Friedrich-Alexander Universität Erlangen-Nürnberg" lang="en"><span class="eh-tooltip" title="M. Seidl, Polar Coding: Finite-Length Aspects Friedrich-Alexander Universität Erlangen-Nürnberg">[Ref. 10]</span></span>. We will consider two extreme types of channel capacity: The ideal channel where the capacity is equal to 1 (i.e. a lossless channel) and the opposite case where the capacity is equal to 0 (i.e. a useless channel, every information inserted into the channel will be lost). Here, the basic idea is to now transform the channel vector <em>W</em> into a composite set of <em>N</em> channels with such an extreme nature (capacity of 1 or 0) and use only the subset <em>K</em> of perfect or at least mediocre channels out of the overall number <em>N</em>. In other words, we carry out a sort of “channel polarization”.</p>


<a id="page_1037_c823"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:83%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-112__Abstract_principle_of_polar_coding__711dd631e8.png" width="800" height="661" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-112 </span>Abstract principle of polar coding using channel polarization.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c824"></a><p>Arikan describes the basic principle of channel polarization <span class="eh-reference" title="E. Arıkan. Channel polarization: A method for constructing capacityachieving codes. In Proceedings IEEE International Symposium on Infor- mation Theory (ISIT), pages 1173–1177, July 2008" lang="en"><span class="eh-tooltip" title="E. Arıkan. Channel polarization: A method for constructing capacityachieving codes. In Proceedings IEEE International Symposium on Infor- mation Theory (ISIT), pages 1173–1177, July 2008">[Ref. 9]</span></span>. This principle is performed in different steps, based on the idea of a binary symmetric channel with input vector <em>X</em>, output vector <em>Y</em> and a channel <em>W</em> with a certain capacity. These steps first involve channel combining, then these channels are split and polarized. A basic approach to channel combination as described by Arikan <span class="eh-reference" title="E. Arıkan. Channel polarization: A method for constructing capacityachieving codes. In Proceedings IEEE International Symposium on Infor- mation Theory (ISIT), pages 1173–1177, July 2008" lang="en"><span class="eh-tooltip" title="E. Arıkan. Channel polarization: A method for constructing capacityachieving codes. In Proceedings IEEE International Symposium on Infor- mation Theory (ISIT), pages 1173–1177, July 2008">[Ref. 9]</span></span> is illustrated in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-113__Polar_code_arikan_principle.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-113 &lt;\/span&gt;Polar code: Basic principle of channel combination as described by Arikan.&quot;}]">Fig. 1-113</a>.</p>


<a id="page_1037_c825"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:71%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-113__Polar_code_arikan_principle_559e220577.png" width="800" height="562" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-113 </span>Polar code: Basic principle of channel combination as described by Arikan.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c826"></a><p>The proposed method represents a recursive combination scheme resulting in a number <em>N</em> = 2<sup class="eh-text__letter">n</sup> channels. As <em>N</em> goes to infinity, the theoretical maximum channel capacity can be achieved. These combined channels are then virtually split again into <em>N</em> binary input symmetric memoryless channels <em>W</em><sub class="eh-text--em eh-text__letter">i</sub>. Now, each of these split channels can be polarized, i.e. the individual capacity <em>I</em>(<em>W</em><sub class="eh-text--em eh-text__letter">i</sub>) or rate of each channel is analyzed. The polar coding principle exploits the polarization of these coordinate channels <em>W</em> such that a code is generated to take advantage of the fact that the polarization is high or at least mediocre. Polarization is based on the theoretical idea of defining a value <em>δ</em> as the channel capacity <em>I</em>(<em>W</em>) in the range 0 ≤ δ ≤ 1. Now, the obtained <em>N</em> channels <em>W</em><sub class="eh-text--em eh-text__letter">i</sub> (assuming <em>N</em>→∞) are divided into a fraction <em>K</em> where the capacity <em>I</em>(<em>W</em>) <span class="eh-text--math">∈</span> [1 – δ, 1] goes to <em>I</em>(<em>W</em>) = 1 and another fraction <em>N</em>–<em>K</em> channels where the capacity <em>I</em>(<em>W</em>) <span class="eh-text--math">∈</span> [0,δ] goes to <em>I</em>(<em>W</em>) = 0. In other words, the possible rate for coding is the subset of <em>K</em> channels that are useful.</p><p>As a simplified example, the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-114__Polar_code_example_arikan.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-114 &lt;\/span&gt;Example of the polar coding principle using polarized channels.&quot;}]">Fig. 1-114</a> illustrates the idea of polar coding for <em>N</em>=8 channels. Note that the input vector <em>U</em> contains <em>N</em> symbols (here, <em>N</em> = 8) of which <em>X</em> represent data symbols with <em>X</em> ≤ <em>N</em>. The code rate would then be the ratio of <em>X</em> over <em>N</em>. The example below illustrates a generator matrix concept with XOR operations between the combined channels and a resultant symmetric capacity <em>I</em>(<em>W</em><sub>i</sub>) for each of them. As the polarization result in this example, four channels are used and filled with data symbols. Thus, the overall code rate is ½.</p>


<a id="page_1037_c827"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:61%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-114__Polar_code_example_arikan_f90dbcd8a5.png" width="800" height="485" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-114 </span>Example of the polar coding principle using polarized channels.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c828"></a><p>To summarize our brief discussion above, we can see that a polar code is constructed by recursively applying a linear polarization transform to the binary input symmetric and memoryless channel <em>W</em>, expressed as a 2 × 2 matrix. Repeated application of the transformation, <em>n</em> = log<sub class="eh-text__number">2</sub>(<em>N</em>) times, results in an <em>N</em><em>×</em><em>N</em> matrix, denoting the <em>n</em>-fold Kronecker product. As we have discussed, polar codes leverage the phenomenon of channel polarization where a certain rate of each individual channel is benchmarked and ranked. The transformation above is combined with a successive cancellation decoder structure to turn the <em>N</em> available channels (<em>N </em>channel uses) into another set of <em>N</em> bit channels (synthesized channels) such that the capacities of these bit channels tend to 0 (fully unreliable) or 1 (fully reliable) as <em>N</em> goes to infinity. In fact, the proportion of reliable or useful channels, <em>K</em>, tends to the capacity of the original communications channel. The number of <em>X</em> data bits is communicated by placing information bits on the <em>K</em> reliable channels and placing fixed bits, usually zeros, on the <em>N–</em><em>K</em> unreliable channels. These bits, marked as parity in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-114__Polar_code_example_arikan.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-114 &lt;\/span&gt;Example of the polar coding principle using polarized channels.&quot;}]">Fig. 1-114</a> on the unreliable channels, are referred to as frozen bits, and the set of their positions is referred to as the frozen set <em>F</em> of size <em>N</em><em>–</em><em>K</em>. The frozen bits and the frozen set are known by both the encoder and the decoder. In this manner, a polar code of code length <em>N</em>, information word length <em>K</em> and code rate <em>R</em><em>=</em><em>K</em><em>/N</em> is constructed. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-120__5G_NR_polar_encoding_structure.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-120 &lt;\/span&gt;5G NR polar encoding structure (block diagram).&quot;}]">Fig. 1-120, page 152</a> provides an overview of this encoding process.</p>


<a id="page_1037_c829"></a><p class="eh-headline-207 ">
				5G NR channel coding aspects
			</p>


<a id="page_1037_c830"></a><p>To provide higher data rates and meet the more diverse requirements involved in typical NR scenarios such as <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr>, <abbr class="eh-abbreviation" title="Massive machine type communications" lang="en"><span class="eh-tooltip" title="Massive machine type communications">mMTC</span></abbr> and <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr>, a powerful and flexible channel coding scheme is one of the fundamental components of 5G NR access technology.</p><p>During recent 3GPP discussion, various channel coding methods have been considered such as convolutional coding, turbo coding, polar coding and <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr>, to name a few examples. Various scientific articles and research studies have analyzed and compared the different coding methods. As stipulated in <span class="eh-hint" title="3GPP TS 38.212: NR; Multiplexing and channel coding" lang="en"><span class="eh-tooltip" title="3GPP TS 38.212: NR; Multiplexing and channel coding">TS 38.212</span></span>, the following coding methods are applied:</p><ul class="eh-list eh-list--line"><li>For the current status of the service scenarios <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr> and <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> data channels, <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes are used (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1037_c833" class="eh-link eh-link--page eh-link--ce">5G NR channel coding for data, page 145</a>.</li><li>For <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr> control information, polar codes are used (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1037_c845" class="eh-link eh-link--page eh-link--ce">5G NR channel coding for control information, page 151</a>.</li></ul><p>Data and control streams from/to the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer are encoded/decoded to provide transport and control services over the radio transmission link. The channel coding scheme represents a combination of error detection based on <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> calculation and attachment, error correction with channel coding using either <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> or polar codes, rate matching, interleaving and transport channel or control information mapping onto/splitting from physical channels. The following section describes these processes in greater detail:</p>


<a id="page_1037_c831"></a><p class="eh-headline-207 ">
				5G NR <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> calculation and attachment
			</p>


<a id="page_1037_c832"></a><p>As outer loop or error detection mechanisms in 5G NR, data that is sent over the radio channel is error-protected by a cyclic redundancy checksum (<abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr>) that can have a length of either 24, 16, 11 or 6 bits. A <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> with a length of 24 bits is used if the transport block size on the uplink <abbr class="eh-abbreviation" title="Uplink shared channel" lang="en"><span class="eh-tooltip" title="Uplink shared channel">UL-SCH</span></abbr> or downlink <abbr class="eh-abbreviation" title="Downlink shared channel" lang="en"><span class="eh-tooltip" title="Downlink shared channel">DL-SCH</span></abbr> is greater than 3824 bits; otherwise, a <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> with a length of 16 bits is used. In case of transmitting uplink control information <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> and if the block size is greater than 20 bits, a <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> with a length of 11 bits is used. If the block size is smaller than 12 bits, no <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> is attached. Otherwise, the <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> has length of 6 bits. The <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> calculation is based on a cyclic generator polynomial (see <span class="eh-hint" title="3GPP TS 38.212: NR; Multiplexing and channel coding" lang="en"><span class="eh-tooltip" title="3GPP TS 38.212: NR; Multiplexing and channel coding">TS 38.212</span></span> for details). This is attached to the transport block prior to channel coding.</p>


<a id="page_1037_c833"></a><p class="eh-headline-207 ">
				5G NR channel coding for data
			</p>


<a id="page_1037_c834"></a><p>For 5G NR, the decision was made to abandon EUTRAN’s channel coding scheme based on turbo coding in favor of <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> coding for transport channels <abbr class="eh-abbreviation" title="Downlink shared channel" lang="en"><span class="eh-tooltip" title="Downlink shared channel">DL-SCH</span></abbr> and <abbr class="eh-abbreviation" title="Uplink shared channel" lang="en"><span class="eh-tooltip" title="Uplink shared channel">UL-SCH</span></abbr>. Another decision was made to apply polar coding for control information such as <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>, <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> or <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> with over 12 bits of information and a repetition code for a smaller block length. The transition to <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes is due to high throughput expectations in 5G NR. In addition, the coding scheme must support the incremental-redundancy hybrid <abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr> and a wide range of block length and coding rates. Thus, the number of possible codes is in the thousands, necessitating unification of many codes into a single description. Such a generation process for parity check matrices as described in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1037_c797" class="eh-link eh-link--page eh-link--ce">Brief digression into channel coding, LDPC and polar codes, page 132</a> is specified in <span class="eh-hint" title="3GPP TS 38.212: NR; Multiplexing and channel coding" lang="en"><span class="eh-tooltip" title="3GPP TS 38.212: NR; Multiplexing and channel coding">TS 38.212</span></span>, resulting in a much larger number of codes depending on the code rate and transport block size.</p><p>Like turbo codes, <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes also involve iterative decoding steps using a message passing algorithm. Compared to turbo code decoders, the computation for <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes can be decomposed into a larger number of smaller independent atomic units. Thus, greater parallelism can be realized more effectively in the hardware <span class="eh-reference" title="T. Richardson, S. Kudekar, Design of LDPC codes for 5G New Radio, IEEE March 2018" lang="en"><span class="eh-tooltip" title="T. Richardson, S. Kudekar, Design of LDPC codes for 5G New Radio, IEEE March 2018">[Ref. 13]</span></span>. <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes deliver similar or even higher coding gains compared to turbo codes and can simultaneously be more efficient in computational terms. While Turbo decoding is more of a serial process which makes parallel implementation challenging, <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> decoding is easily parallelized. The turbo code in EUTRAN use a code rate of 1/3 and higher code rates can be achieved through puncturing.</p><p><abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes are based on a high code rate since they are systematic. Various code rates can be attained by attaching more or less parity bits to the check matrix. Decoding scales with the transmitted block length rather than with the information block length, thereby making it easier to attain high peak throughputs <span class="eh-reference" title="T. Richardson, S. Kudekar, Design of LDPC codes for 5G New Radio, IEEE March 2018" lang="en"><span class="eh-tooltip" title="T. Richardson, S. Kudekar, Design of LDPC codes for 5G New Radio, IEEE March 2018">[Ref. 13]</span></span>. <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> code generation in 5G NR uses the same idea as most wireless standards by building a parity check matrix with the aid of a structured base graph. However, this represents a dilemma since on the one hand, the base graph must be structured, but on the other hand (in the interest of an irregular structure), the design process must provide high variety for generation of a parity check matrix. 5G NR provides a mechanism to generate various parity check matrices depending on the code rate and transport block size and thus a high degree of flexibility. The result, however, involves a challenging level of complexity concerning the implementation.</p><p>The 5G NR requirements for <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr> are highly diverse, and transport block size scenarios must be supported for smaller block sizes in the range from a few hundred bits up to transport block sizes with thousands of bits. In addition, code rates in the range of 8/9 for high throughput have been chosen to meet peak data requirements, while robust code rates of 1/5 for low <abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr> and extended coverage are also possible.</p><p>The design process for generating a large variety of <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes for 5G NR is described in further detail in <span class="eh-hint" title="3GPP TS 38.212: NR; Multiplexing and channel coding" lang="en"><span class="eh-tooltip" title="3GPP TS 38.212: NR; Multiplexing and channel coding">TS 38.212</span></span> and <span class="eh-reference" title="T. Richardson, S. Kudekar, Design of LDPC codes for 5G New Radio, IEEE March 2018" lang="en"><span class="eh-tooltip" title="T. Richardson, S. Kudekar, Design of LDPC codes for 5G New Radio, IEEE March 2018">[Ref. 13]</span></span>. In this section, our objective is to provide a concise overview only. In general, a wide range of data rates can be realized through the application of a base graph, which is typically a low density structure, and a subsequent code graph generation process. Such a generation process is based on the principle of circulant matrices, i.e. a shifting operation for the identity matrix. <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes are typically defined by a sparse parity check matrix which is often randomly generated. However, randomly constructed <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes require a significant amount of memory, which is why algebraically structured <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes have generated much interest and the so-called quasi-cyclic <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes represent good candidates for this application <span class="eh-reference" title="S. Park, Y. Wu, H. Kim, N. Hur, J. Kim, Raptor-like rate compatible LDPC codes and their puncturing performance for the cload transmission system, IEEE June 2014" lang="en"><span class="eh-tooltip" title="S. Park, Y. Wu, H. Kim, N. Hur, J. Kim, Raptor-like rate compatible LDPC codes and their puncturing performance for the cload transmission system, IEEE June 2014">[Ref. 14]</span></span>.</p>


<a id="page_1037_c835"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:46%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-115__Principle_of_circulant_matrix_f6242e9f76.jpg" width="800" height="366" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-115 </span>Principle of circulant matrix, shifted identity matrices and null matrix insertion.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c836"></a><p>Based on the principle of circulant matrices, which represent an algebraic way to construct pseudorandom parity check matrices, it is possible to generate a set of lifting sizes Z defined for a single base graph. In 5G NR, the value for <em>Z</em> ranges from 2 up to 384, which is a much greater number compared to, for example, WLAN or satellite communications standards. 5G NR uses two different base graphs since a smaller block length typically requires a smaller base graph, which thus results in a much greater number of lifting sizes Z and becoming more complex since higher code rates are also needed. Thus, the decision was reached in 3GPP to define two base graphs for 5G NR. The base graph that is selected depends on the transport block size and the scheduled <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr>.</p><p>For initial transmission of a transport block with a coding rate indicated by the <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> and subsequent retransmission of the same transport block, each code block of the transport block is encoded with either <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> base graph 1 or 2 as follows:</p><ul class="eh-list eh-list--line"><li><abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> base graph 2 is used if the transport block size is ≤ 292 bits, or if <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> is ≤ 3824 bits and the code rate is ≤ ⅔, or if the code rate is ≤ ¼</li><li><abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> base graph 1 is used otherwise</li></ul><p>Base graph 1 is a matrix with 46 rows and 68 columns, while base graph 2 has 42 rows and 52 columns. The number of ones within the parity matrix used as the base graph depends on indices corresponding to the transport block size and code rate. See <span class="eh-hint" title="3GPP TS 38.212: NR; Multiplexing and channel coding" lang="en"><span class="eh-tooltip" title="3GPP TS 38.212: NR; Multiplexing and channel coding">TS 38.212</span></span> for details on how to obtain the indices that lead to the table defining the position of values within the base graph matrix that will contain a value of 1. The other elements within the base graph have a value of 0. There are overall 51 possible block lengths within such a base graph, starting from a 2 × 2 matrix ranging up to a 384 × 384 matrix, and larger block lengths are generated from a permutation process based on the base graph. This permutation process includes, for example, replacing the value 0 within the base graph by an all-zero matrix of size <em>Z</em><sub class="eh-text--em eh-text__letter">c</sub> × <em>Z</em><sub class="eh-text--em eh-text__letter">c</sub> and replacing the value 1 within the base graph by a circulant-shifted identity matrix <em>I</em>. The index of the circulant shift is given by tables depending on the transport block size and code rate. The structure of the base graph follows a partition concept that is sketched in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-116__Sketch_of_a_base_graph_for_a_parity_check_matrix.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-116 &lt;\/span&gt;Sketch of a base graph for a parity check matrix based on the QC-LDPC principle.&quot;}]">Fig. 1-116</a> <span class="eh-reference" title="S. Park, Y. Wu, H. Kim, N. Hur, J. Kim, Raptor-like rate compatible LDPC codes and their puncturing performance for the cload transmission system, IEEE June 2014" lang="en"><span class="eh-tooltip" title="S. Park, Y. Wu, H. Kim, N. Hur, J. Kim, Raptor-like rate compatible LDPC codes and their puncturing performance for the cload transmission system, IEEE June 2014">[Ref. 14]</span></span>.</p>


<a id="page_1037_c837"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:51%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-116__Sketch_of_a_base_graph_for_a_parity_check_matrix_bdff56345e.png" width="800" height="401" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-116 </span>Sketch of a base graph for a parity check matrix based on the QC-LDPC principle.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c838"></a><p>The base graph adheres to the principle of a quasi-cyclic <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> code consisting of several sub-matrices. The main idea is to generate a high rate matrix <em>A</em> and a low rate matrix <em>C</em> composed of circulant permutation matrices and zero matrices. In 5G NR, multiple sizes are possible for these matrices. In addition, the overall code size is achieved by adding zero matrices, block diagonal and identity matrices. This principle of raptor code generation is described in <span class="eh-reference" title="S. Park, Y. Wu, H. Kim, N. Hur, J. Kim, Raptor-like rate compatible LDPC codes and their puncturing performance for the cload transmission system, IEEE June 2014" lang="en"><span class="eh-tooltip" title="S. Park, Y. Wu, H. Kim, N. Hur, J. Kim, Raptor-like rate compatible LDPC codes and their puncturing performance for the cload transmission system, IEEE June 2014">[Ref. 14]</span></span>.</p><p>In summary, the transition from turbo coding to <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> coding provides a high level of flexibility within 5G NR. Different data rates are possible due to the different transport block sizes as well as different redundancy levels and coding rates. In this manner, various requirements are satisfied including high performance due to coding efficiency, incremental redundancy <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> capability, high parallelism, low decoding latency, large range of rate and block lengths, fine block length granularity and a structured description of the code generation.</p>


<a id="page_1037_c839"></a><p class="eh-headline-207 ">
				Channel coding code block segmentation
			</p>


<a id="page_1037_c840"></a><p>One goal of 5G NR is to provide higher data throughput, thereby requiring a channel coding scheme like the described <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> codes to support a certain block length. To allow larger transport block sizes while retaining an efficient encoding process, the input bit sequence into the channel coding goes after <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> attachment into a code block segmentation to allow parallel processing of channel coding. Depending on the transport block size, resulting in either base graph 1 or 2 selection, the bit sequence is divided into multiple code blocks, where one code block represents such a transport block segment.</p><p>For base graph 1, the maximum code block segment size is 8448 bits and for base graph 2, the maximum code block segment size is 3840 bits. In addition, each code block now has another <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> attached to allow multi-bit <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback. Since 5G NR supports much larger transport block sizes, a single <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> check is possibly inefficient. Thus, the idea is to divide the transport block into multiple code blocks – not only for parallel encoding and decoding but also for individual <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback. This is driven by the idea that in case of large transport block sizes, the retransmission of a large transport block is less efficient than the individual retransmission of a subsegment known as a code block. The <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-117__Transport_block_feedback.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-117 &lt;\/span&gt;Transport block feedback based on CRC.&quot;}]">Fig. 1-117</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-118__Principle_of_code_block_feedback.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-118 &lt;\/span&gt;Principle of code block feedback based on CRC.&quot;}]">Fig. 1-118</a> illustrate this principle.</p>


<a id="page_1037_c841"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:42%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-117__Transport_block_feedback_24814447ce.png" width="800" height="333" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-117 </span>Transport block feedback based on <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c842"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:45%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-118__Principle_of_code_block_feedback_d783aee7bb.png" width="800" height="358" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-118 </span>Principle of code block feedback based on <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c843"></a><p>But as a consequence of such segmentation into smaller code blocks instead of a larger transport block, more <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback bits would be required, i.e. in the worst case, one feedback bit per code block instead of one feedback bit per transport block. The reader might wonder why the maximum transport block size was not simply defined as a much lower number. As an aside, we should recall the behavior of digital communications channels in terms of the data rate vs. the <abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr>, i.e. “waterfall curves” <span class="eh-reference" title="Reiner Stuhlfauth, High Speed Packet Access, Technical book edited by Rohde &amp; Schwarz, 2012" lang="en"><span class="eh-tooltip" title="Reiner Stuhlfauth, High Speed Packet Access, Technical book edited by Rohde &amp; Schwarz, 2012">[Ref. 18]</span></span>. The introduction of enhanced coding mechanisms such as the turbo codes in 3G in combination with the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> principle of acknowledgments and retransmissions makes it possible to reduce the required target <abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr> to a value of about 10 % <abbr class="eh-abbreviation" title="Block error rate" lang="en"><span class="eh-tooltip" title="Block error rate">BLER</span></abbr> on the physical layer. Considering this target of 10 % <abbr class="eh-abbreviation" title="Block error rate" lang="en"><span class="eh-tooltip" title="Block error rate">BLER</span></abbr> on the physical layer, the result would be a majority of ACKs vs. NACKs on the feedback channel. This is now the basis for an optional feedback mechanism in 5G NR, involving the introduction of code blocks with each one having <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> protection. Via higher layer signaling, several code blocks are combined into a code block group (<abbr class="eh-abbreviation" title="Code block group" lang="en"><span class="eh-tooltip" title="Code block group">CBG</span></abbr>) and the received single <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback is associated with a code block group instead of a single code block. Thus, a retransmission request can trigger the retransmission of a code block group. The size of such a code block group is given by the higher layer parameter ­<em>maxCodeBlockGroupsPerTransportBlock</em> which indicates the maximum number of CBGs per transport block and the value derived from the channel coding procedure, total number of code blocks per transport block. See <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span> for further definitions.</p>


<a id="page_1037_c844"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:52%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-119__Code_block_group-based_HARQ_operation_650d928a25.png" width="800" height="410" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-119 </span>Code block group-based <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> operation in 5G NR.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c845"></a><p class="eh-headline-207 ">
				5G NR channel coding for control information
			</p>


<a id="page_1037_c846"></a><p>Control information typically requires very high reliability and robustness but typically does not involve large block sizes and high throughput. EUTRAN applied convolutional coding or repetition (or pattern substitution coding) to control information. 5G NR made the decision to primarily apply polar codes to control information sent on the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>, <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>, <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>. For small message sizes only, repetition coding is applied. The introduction of polar codes facilitates a major increase in coding efficiency since polar codes attain a channel capacity close to the Shannon limit <span class="eh-reference" title="E. Sasoglu, Polarization and Polar Codes. Now publishers, 2012" lang="en"><span class="eh-tooltip" title="E. Sasoglu, Polarization and Polar Codes. Now publishers, 2012">[Ref. 12]</span></span>. The coding chain for 5G NR control information is similar to the data channels regarding the functional blocks. First, depending on the input sequence length, a code block is generated and interleaved as well as rate-matched. Depending on the expected code rate, a total number of encoded bits is calculated as a number <em>N</em> = 2<sup class="eh-text--em eh-text__letter">n</sup>. As illustrated in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-113__Polar_code_arikan_principle.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-113 &lt;\/span&gt;Polar code: Basic principle of channel combination as described by Arikan.&quot;}]">Fig. 1-113</a>, the concept of channel polarization always results in a total number of channels that is a power of 2. A maximum number of <em>N</em><sub class="eh-text--em eh-text__letter">max</sub> = 1024 bits can be encoded. <span class="eh-hint" title="3GPP TS 38.212: NR; Multiplexing and channel coding" lang="en"><span class="eh-tooltip" title="3GPP TS 38.212: NR; Multiplexing and channel coding">TS 38.212</span></span> defines a table with polar sequences depending on the channel reliability and for each of the <em>N </em>≤ <em>N</em><sub class="eh-text--em eh-text__letter">max</sub> bits, a polar sequence is chosen. In summary, polar encoding in 5G NR is structured into three steps (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-120__5G_NR_polar_encoding_structure.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-120 &lt;\/span&gt;5G NR polar encoding structure (block diagram).&quot;}]">Fig. 1-120</a>): For the target code rate based on the actual <abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr>, define the index list of bit positions with decreasing channel capacity <em>I</em>(<em>W</em><sub class="eh-text--em eh-text__letter">i</sub>), then map the <em>K</em> input bits to this index list, and finally perform the XOR operations by applying the generator matrix from a table in <span class="eh-hint" title="3GPP TS 38.212: NR; Multiplexing and channel coding" lang="en"><span class="eh-tooltip" title="3GPP TS 38.212: NR; Multiplexing and channel coding">TS 38.212</span></span>. In 5G NR, <em>K</em><sub class="eh-text--em eh-text__letter">max</sub> is 1024.</p>


<a id="page_1037_c847"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:50%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-120__5G_NR_polar_encoding_structure_b50ab23510.png" width="800" height="395" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-120 </span>5G NR polar encoding structure (block diagram).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1037_c848"></a><p class="eh-headline-207 ">
				Channel coding for small block lengths
			</p>


<a id="page_1037_c849"></a><p>Polar codes in 5G NR are used for block lengths greater than 12 bits. For smaller block lengths, various simple coding schemes are applied:</p><ul class="eh-list eh-list--line"><li><abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> or <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> with block length of <em>K </em>= 1 bit uses a repetition code with repetition factor in the range [1…8] depending on the modulation order</li><li><abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> or <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> with block length of <em>K</em> = 2 bits uses a simplex code. This means the two input bits result into a coding sequence with three bits, where the 3rd bit represents an XOR combination of bits 1 and 2. Depending on the modulation order repeated, this sequence will then result in a [3…24] bit sequence of coded bits</li><li><abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> or <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> with block length of 3 ≤ <em>K </em>≤ 11 bits uses a Reed-Muller code that was previously used in LTE</li></ul><a id="page_1037_c850"></a><p class="eh-headline-207 ">
				5G NR rate matching and interleaving
			</p>


<a id="page_1037_c851"></a><p>The final step in the channel coding process involves rate matching and interleaving. Rate matching ensures that the output from the channel coding process matches the size of the physical layer resource that is scheduled. Interleaving avoids block errors by changing the bit position within a code block. The rate matching and interleaving steps are based on code blocks that are subdivided into subblocks and rate matching includes bit repetitions, bit puncturing or shortening of the code block, representing a reduction of the bit sequence to a certain length.</p><p>Physical layer resource scheduling results in a maximum number of bits depending on parameters such as the number of layers if spatial multiplexing is applied, time and frequency resources, the maximum modulation order permitted by the cell and the maximum coding rate. Similar to EUTRAN, the uplink control information (<abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr>) can use two physical channels for transmission: <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> or <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>. In the case that the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> is configured, the <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> information is multiplexed after the channel coding step with the coded <abbr class="eh-abbreviation" title="Uplink shared channel" lang="en"><span class="eh-tooltip" title="Uplink shared channel">UL-SCH</span></abbr> data bits. This results in two different coding schemes, i.e. <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> and polar codes, in the same physical layer code word.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1038" data-prevpid="1037" data-nextpid="1039" data-chapter="1.2.6 Brief digression on OFDMA multiple access schemes" id="page_1038">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.2.6 Brief digression on OFDMA multiple access schemes</h3>
						
<a id="page_1038_c852"></a><p>For a better understanding of the 5G NR waveform (or for readers who are lacking a detailed technical background on LTE), this chapter gives a brief review of the general aspects of orthogonal frequency division multiplexing (OFDM), orthogonal frequency division multiple access (OFDMA) and discrete Fouriertransformation-spread-orthogonal frequency division multiplexing <span class="eh-text--nowrap">(DFT-s-OFDM)</span>, which are the base waveforms used in 5G NR. Those base waveforms for 5G NR are extended with the introduction of flexibility in the form of various numerologies. As a preface, the term OFDMA signifies the background of multiple access, i.e. different users share the same radio resource in frequency and time, while the term OFDM more or less represents the resource access from the perspective of a single user. For further differences between OFDMA and OFDM, readers should consult the relevant literature. This chapter begins with some motivational aspects related to OFDM regarding radio propagation aspects, followed by details on OFDM implementation aspects such as the need for a cyclic prefix. In addition, there is a review of the spread OFDM method <abbr class="eh-abbreviation" title="Discrete Fourier transform-spread-orthogonal frequency division multiplexing" lang="en"><span class="eh-tooltip" title="Discrete Fourier transform-spread-orthogonal frequency division multiplexing">DFT-s-OFDM</span></abbr> (or <abbr class="eh-abbreviation" title="Single carrier FDMA" lang="en"><span class="eh-tooltip" title="Single carrier FDMA">SC-FDMA</span></abbr>, as it is known in LTE) at the end of this chapter.</p><p>When using a radio channel, we are faced with the known effects of multipath propagation (<abbr class="eh-abbreviation" title="Multipath propagation" lang="en"><span class="eh-tooltip" title="Multipath propagation">MPP</span></abbr>) and Doppler shift. We will now consider a digital transmission scheme using linear carrier modulation (e.g. M-QAM) and a complex symbol duration denoted by <em>T</em><sub class="eh-text--em eh-text__letter">s</sub>. Such a complex symbol is represented as a vector in a constellation diagram consisting of two orthogonal vectors on the real and imaginary axis, or the inphase <em>I</em> and quadrature <em>Q</em> components. Based on a well-known principle, an I/Q modulator upconverts the baseband symbols <em>T</em><em>s</em> onto an RF signal with carrier frequency <em>f</em><sub class="eh-text--em eh-text__letter">c</sub>.</p><p>In a single-carrier transmission scheme, the time-domain symbols <em>T</em><sub class="eh-text--em eh-text__letter">s</sub> are sent over a frequency bandwidth <em>B</em>, the so-called occupied bandwidth. Typically, <em>B</em> is on the order of 1/<em>T</em><sub class="eh-text--em eh-text__letter">s</sub>, e.g. applying a bandpass filter, <em>B</em> = (1 + <em>α</em>) × <em>T</em><sub class="eh-text--em eh-text__letter">s</sub> – 1 for raised-cosine pulses with bandpass rolloff factor <em>α</em>.</p>


<a id="page_1038_c853"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:67%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-121__Block_diagram_for_an_IQ_modulator_fd6397ae75.png" width="800" height="535" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-121 </span>Block diagram for an I/Q modulator.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1038_c854"></a><p>Multipath propagation causes an effect known as intersymbol interference (<abbr class="eh-abbreviation" title="Inter-symbol interference" lang="en"><span class="eh-tooltip" title="Inter-symbol interference">ISI</span></abbr>) in which consecutive symbols interfere with the echo of previous symbols. <abbr class="eh-abbreviation" title="Inter-symbol interference" lang="en"><span class="eh-tooltip" title="Inter-symbol interference">ISI</span></abbr> can be reduced if the symbol duration <em>T</em><sub class="eh-text--em eh-text__letter">s</sub> is larger than the expected delay spread <em>T</em><sub class="eh-text--em eh-text__letter">m </sub>(<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-122__Multipath_propagation_and_intersymbol_interference.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-122 &lt;\/span&gt;Multipath propagation and intersymbol interference (ISI).&quot;}]">Fig. 1-122</a>). Thus, the possible data throughput is affected by the delay spread of the underlying radio channel.</p><p>Equalization techniques can compensate for the impact of <abbr class="eh-abbreviation" title="Inter-symbol interference" lang="en"><span class="eh-tooltip" title="Inter-symbol interference">ISI</span></abbr> on communications technologies. On the one hand, the idea is to obtain high data throughput by reducing the symbol duration on a single carrier. However, this approach can cause enhanced <abbr class="eh-abbreviation" title="Inter-symbol interference" lang="en"><span class="eh-tooltip" title="Inter-symbol interference">ISI</span></abbr> since the interference occurs not only between consecutive symbols but instead has a longer impact. On the other hand, assuming a long duration for the symbols <em>T</em><sub class="eh-text--em eh-text__letter">s</sub> with a mobile receiver in a time-variant scenario, Doppler shift causes channel incoherency. The so-called coherence time can be understood as the time duration where the channel knowledge stays constant. The maximum Doppler spread can be interpreted as the minimum time between two channel estimation samples.</p>


<a id="page_1038_c855"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:73%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-122__Multipath_propagation_and_intersymbol_interference_b0aeb28b15.png" width="800" height="579" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-122 </span>Multipath propagation and intersymbol interference (<abbr class="eh-abbreviation" title="Inter-symbol interference" lang="en"><span class="eh-tooltip" title="Inter-symbol interference">ISI</span></abbr>).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1038_c856"></a><p>Another effect that is due to the physics of the radio channel relates to the used bandwidth. Due to frequency-dependent multipath propagation aspects, the power values seen over the frequency bandwidth at the receiver are not flat, but instead exhibit power variations (ups and downs). This is known as channel frequency selectivity. The consequence is a need for channel equalization in the frequency domain. In the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-123__Narrowband_or_wideband_aspects.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-123 &lt;\/span&gt;Narrowband or wideband aspects of a radio channel (equalization effort)&quot;}]">Fig. 1-123</a>, this principle is illustrated symbolically for the case where we use a large bandwidth in the context of a frequency selective channel. First, we have to sample the power of the received signal based on well-known reference or pilot signals. This process is known as channel estimation. It must be performed over a large bandwidth, thus the quantity of reference signals dispersed over the total bandwidth and the number of channel estimation samples in the frequency domain can become very large. Consequently, the channel equalization methods can become rather complex.</p><p>In simplified terms, we can describe the process as zero-forcing equalization with the goal of characterizing the frequency selectivity by determining a corresponding mathematical equation, calculating its inverted result, and then multiplying by the channel estimation formula to remove the channel impact. This is clearly a technique that requires a certain amount of effort. Now, if we assume that our signal is sent via a narrow bandwidth only, first the frequency selectivity is less severe and second, the equalization scheme can be described as a 1-tap equalization method. This is like interpreting the channel effect as a scalar number instead of an equation. By way of explanation, consider the channel power curve shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-123__Narrowband_or_wideband_aspects.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-123 &lt;\/span&gt;Narrowband or wideband aspects of a radio channel (equalization effort)&quot;}]">Fig. 1-123</a>. By making the bandwidth of the channel infinitely narrow, the affected spectrum is more of a dot than a trajectory. Thus, we can express it as a scalar that is either amplified or attenuated (less than or greater than 1). This is a much simpler calculation since forming the inverse of a scalar involves a much less complex mathematical operation.</p>


<a id="page_1038_c857"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:64%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-123__Narrowband_or_wideband_aspects_7f8a59f98d.png" width="800" height="510" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-123 </span>Narrowband or wideband aspects of a radio channel (equalization effort)</figcaption></figure></div></div></div></div></div></div>


<a id="page_1038_c858"></a><p>A summary of these channel effects is given in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-124__Aspects_of_legacy_radio_channels.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-124 &lt;\/span&gt;Aspects of legacy radio channels with short symbols sent over a wide bandwidth channel.&quot;}]">Fig. 1-124</a>. Assuming high data throughput based on short duration symbols sent over a wide bandwidth, we must perform channel equalization in both the frequency and time domain.</p>


<a id="page_1038_c859"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:61%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-124__Aspects_of_legacy_radio_channels_de043f67de.png" width="800" height="482" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-124 </span>Aspects of legacy radio channels with short symbols sent over a wide bandwidth channel.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1038_c860"></a><p>The basic idea of OFDMA now involves a simple multicarrier transmission scheme. Instead of transmitting complex data symbols as a consecutive time-domain signal, a prior serial-to-parallel conversion allows mapping of the parallel data symbols on narrowband frequency subcarriers. The symbol duration on each subcarrier is increased while the occupied bandwidth of a subcarrier is small. Clearly, the multicarrier operation has the effect that the overall occupied bandwidth remains wide. In simplified terms, we can understand OFDMA as a kind of trick that allows us to consider the channel as a flat fading scenario as opposed to frequency fading.</p><p>Note that by these methods alone, OFDMA does not increase the throughput. If we rationally compare the possible data rate between a multicarrier system and a single-carrier system having the same bandwidth, the achievable data rate will be the same. OFDMA has benefits in the form of a less complex equalization scheme and improved channel robustness. As a result, there is the possibility to apply data rate optimization techniques such as higher-order modulation schemes and <abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr>.</p>


<a id="page_1038_c861"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:73%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-125__Serial-to-parallel_conversion_concept_57d820555e.png" width="800" height="583" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-125 </span>Serial-to-parallel conversion concept as the basis for OFDMA.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1038_c862"></a><p>Now, we can consider the aspect of generating an OFDMA signal. By examining the signal generation principle, we can derive a kind of abstract structure to perform multicarrier signal generation and modulation as shown in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-126__Basic_structure_of_an_OFDMA_modulator.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-126 &lt;\/span&gt;Basic structure of an OFDMA modulator.&quot;}]">Fig. 1-126</a>.</p>


<a id="page_1038_c863"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:31%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-126__Basic_structure_of_an_OFDMA_modulator_d74fdcc23b.png" width="800" height="247" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-126 </span>Basic structure of an OFDMA modulator.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1038_c864"></a><p>First, we must convert the serial data stream into a parallel flow, which is then modulated. Note that in general, the term modulation consists of two steps in the real world: First, by using a mapping scheme, several data bits are mapped onto a complex valued data symbol, i.e. the constellation of a vector having a certain phase and amplitude in an I/Q diagram and representing a certain amount of bits, depending on the modulation scheme. For example, assuming <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr>, the modulator in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-121__Block_diagram_for_an_IQ_modulator.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-121 &lt;\/span&gt;Block diagram for an I\/Q modulator.&quot;}]">Fig. 1-121</a> or <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-126__Basic_structure_of_an_OFDMA_modulator.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-126 &lt;\/span&gt;Basic structure of an OFDMA modulator.&quot;}]">Fig. 1-126</a> would map the two input bits “00” onto a vector with coordinates [+1/√2, +1/√2] in the I/Q diagram. Secondly, this complex symbol or vector is upconverted onto a frequency carrier (indicated as “RF signal generation” in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-126__Basic_structure_of_an_OFDMA_modulator.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-126 &lt;\/span&gt;Basic structure of an OFDMA modulator.&quot;}]">Fig. 1-126</a>).</p><p>For example, let us assume we have a binary serial data sequence where a set of two bits is mapped onto a <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr> valued complex symbol. These complex-valued symbols can now go through a serial-to-parallel conversion stage and will be mapped onto different subcarriers, typically equally spaced in the frequency range. Later, a filter bank handles the combination of these parallel subcarriers into one RF signal. In practical applications, we find this filter bank realized as an inverse fast Fourier transformation (<abbr class="eh-abbreviation" title="Inverse fast Fourier transformation" lang="en"><span class="eh-tooltip" title="Inverse fast Fourier transformation">IFFT</span></abbr>) in the setup.</p><p>To simplify OFDM signal generation and also understand why we are using <abbr class="eh-abbreviation" title="Inverse fast Fourier transformation" lang="en"><span class="eh-tooltip" title="Inverse fast Fourier transformation">IFFT</span></abbr> for the filter bank realization, we will examine two symbolic figures.</p><p>The <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-127__Symbolic_structure_of_an_OFDMA_modulator.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-127 &lt;\/span&gt;Symbolic structure of an OFDMA modulator based on an I\/Q modulator bank.&quot;}]">Fig. 1-127</a> shows a type of “hardware” approach to realize OFDMA signal generation using modulation mappers and a filter bank based on a parallel setup with multiple I/Q modulators.</p>


<a id="page_1038_c865"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:90%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-127__Symbolic_structure_of_an_OFDMA_modulator_6b1c20483f.png" width="800" height="720" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-127 </span>Symbolic structure of an OFDMA modulator based on an I/Q modulator bank.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1038_c866"></a><p>Here, the signal is divided into different parallel data streams which are individually modulated using the classic structure of the I/Q modulator. Clearly, a practical realization of this design would overly increase the complexity and is thus not realistic.</p><p>For better understanding of the algebraic complexity that underlies this hardware setup for OFDMA signal generation, consider <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-128__Symbolic_concept_of_OFDMA_signal_generation.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-128 &lt;\/span&gt;Symbolic concept of OFDMA signal generation divided into \u201cabstract\u201d steps.&quot;}]">Fig. 1-128</a>. First, we assume we have serial data streams. In our example, we have a <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr> modulation mapper such that two bits are mapped onto a complex-valued symbol.</p>


<a id="page_1038_c867"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:80%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-128__Symbolic_concept_of_OFDMA_signal_generation_7b91c061bc.png" width="800" height="639" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-128 </span>Symbolic concept of OFDMA signal generation divided into “abstract” steps.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1038_c868"></a><p>Such a symbol can be expressed in the I/Q diagram as a complex value represented as a vector, consisting of an amplitude h, a component on the I axis and a component on the Q axis. Given each complex-valued symbol as h · (sin<sub class="eh-text--em eh-text__letter">jw</sub><sub class="eh-text--em eh-text__letter">t</sub> + ­cos<sub class="eh-text--em eh-text__letter">jwt</sub>) that must be combined at the end, the derived result would thus involve the formula Σ(sin<sub class="eh-text--em eh-text__letter">jwt</sub> + cos<sub class="eh-text--em eh-text__letter">jwt</sub>) integrated over all subcarriers. Taking a closer look at this formula, we see that the resulting sum is just the well-known formula for a discrete Fourier transform (<abbr class="eh-abbreviation" title="Discrete Fourier transformation" lang="en"><span class="eh-tooltip" title="Discrete Fourier transformation">DFT</span></abbr>), shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-129__Reminder_of_the_discrete_Fourier_transform.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-129 &lt;\/span&gt;Reminder of the discrete Fourier transform (DFT).&quot;}]">Fig. 1-129</a>. More details on <abbr class="eh-abbreviation" title="Discrete Fourier transformation" lang="en"><span class="eh-tooltip" title="Discrete Fourier transformation">DFT</span></abbr> can be found, for example, in <span class="eh-reference" title="Digital Communications, John G. Proakis, Mcgraw-Hill Publ. Comp, Jan 2008" lang="en"><span class="eh-tooltip" title="Digital Communications, John G. Proakis, Mcgraw-Hill Publ. Comp, Jan 2008">[Ref. 1]</span></span>. In a simplified view, <abbr class="eh-abbreviation" title="Discrete Fourier transformation" lang="en"><span class="eh-tooltip" title="Discrete Fourier transformation">DFT</span></abbr> can be seen as an elegant way to sum up these complex-valued modulation symbols.</p>


<a id="page_1038_c869"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:34%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-129__Reminder_of_the_discrete_Fourier_transform_4da981c9c9.png" width="800" height="272" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-129 </span>Reminder of the discrete Fourier transform (<abbr class="eh-abbreviation" title="Discrete Fourier transformation" lang="en"><span class="eh-tooltip" title="Discrete Fourier transformation">DFT</span></abbr>).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1038_c870"></a><p>In other words, we can elegantly replace a hardware solution consisting of multiple parallel I/Q modulators (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-127__Symbolic_structure_of_an_OFDMA_modulator.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-127 &lt;\/span&gt;Symbolic structure of an OFDMA modulator based on an I\/Q modulator bank.&quot;}]">Fig. 1-127</a>) with a <abbr class="eh-abbreviation" title="Discrete Fourier transformation" lang="en"><span class="eh-tooltip" title="Discrete Fourier transformation">DFT</span></abbr> performed in the digital domain (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-134__OFDMA_signal_generation.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-134 &lt;\/span&gt;OFDMA signal generation as used in 3GPP EUTRAN Release 8.&quot;}]">Fig. 1-134</a>).</p><p>In the frequency domain, usage of multiple subcarriers brings up other questions in relation to subcarrier spacing and possible intercarrier interference. Without appropriate countermeasures, such an effect would require either guard bands between the subcarriers (reducing the overall spectral efficiency) or optimally shaped filters with highly rectangular roll-off factors. A better idea is to use some kind of transmit and receive filter to make the subcarriers orthogonal.</p>


<a id="page_1038_c871"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:89%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-130__Intercarrier_interference_in_a_multicarrier_system_3c5fe6c2de.png" width="800" height="710" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-130 </span>Intercarrier interference in a multicarrier system.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1038_c872"></a><p>This is achieved based on the principle of orthogonal frequency division multiplexing (OFDM). Due to the conversion from time to frequency, we can represent a data symbol as a rectangular time-domain pulse, also known as a “window”. This rectangular time-domain signal is represented in the frequency domain with the sinc() function (i.e. sin x/x), which has the useful property of equidistant zero crossings in the frequency domain. Now, the position of each of the center frequencies for the subcarriers is selected from the set that has a difference in the frequency domain such that adjacent subcarriers have a value of zero (zero-crossing) at the sampling instant of the desired subcarrier. The literature also uses terms like “OFDMA windowing” to represent exactly this procedure.</p>


<a id="page_1038_c873"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:35%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-131__Time-to-frequency_conversion_of_a_rectangular_impulsen_2993aad24e.png" width="800" height="280" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-131 </span>Time-to-frequency conversion of a rectangular impulse, resulting in a <span class="eh-text--nowrap">sinc() function</span>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1038_c874"></a><p>Until now, our discussion of OFDMA has described the multicarrier scheme using orthogonal subcarriers based on a serial-to-parallel approach. Due to the multipath propagation shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-122__Multipath_propagation_and_intersymbol_interference.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-122 &lt;\/span&gt;Multipath propagation and intersymbol interference (ISI).&quot;}]">Fig. 1-122</a>, there is still one remaining critical aspect to consider, i.e. the effect of intersymbol interference (<abbr class="eh-abbreviation" title="Inter-symbol interference" lang="en"><span class="eh-tooltip" title="Inter-symbol interference">ISI</span></abbr>). Due to the extension of the symbols in the time domain, <abbr class="eh-abbreviation" title="Inter-symbol interference" lang="en"><span class="eh-tooltip" title="Inter-symbol interference">ISI</span></abbr> is less critical but still important. Time-separated multipath links would cause intersymbol interference and thus something needs to be done.</p><p>One idea would be to insert an empty period, i.e. a guard interval. This would manage to solve the problem with <abbr class="eh-abbreviation" title="Inter-symbol interference" lang="en"><span class="eh-tooltip" title="Inter-symbol interference">ISI</span></abbr>, but it would have a negative impact on, for example, the power amplifier's crest factor or peak-to-average power ratio (<abbr class="eh-abbreviation" title="Peak-to-average power ratio" lang="en"><span class="eh-tooltip" title="Peak-to-average power ratio">PAPR</span></abbr>) due to the resultant on-off behavior. Furthermore, it would cause difficulty in keeping the synchronization up-to-date. Another solution has been selected for OFDMA systems that is known as cyclic-prefix ODFM <span class="eh-text--nowrap">(CP-OFDM)</span>. A certain time period in the OFDM time-domain symbol is copied from the end and pasted at the start of the OFDM symbol. The <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-132__Cyclic_prefix__CP__in_OFDMA_systemss.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-132 &lt;\/span&gt;Cyclic prefix (CP) in OFDMA systems.&quot;}]">Fig. 1-132</a> illustrates this principle.</p>


<a id="page_1038_c875"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:78%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-132__Cyclic_prefix__CP__in_OFDMA_systemss_3394751c5e.png" width="800" height="622" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-132 </span>Cyclic prefix (<abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr>) in OFDMA systems.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1038_c876"></a><p>Clearly, the length of the cyclic prefix must be chosen to be as long as the expected delay spread as dictated by the radio propagation. In LTE as specified in 3GPP Release 8, two different <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> lengths are defined: a normal <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> duration and also an extended <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> duration. The same (normal and extended <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> lengths) is defined in 3GPP Release 15, but with a more flexible numerology (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1024_c584\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table003\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Subcarrier spacing (kHz)&lt;\/th&gt;&lt;th&gt;15&lt;\/th&gt;&lt;th&gt;30&lt;\/th&gt;&lt;th&gt;60&lt;\/th&gt;&lt;th&gt;120&lt;\/th&gt;&lt;th&gt;240&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbol duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;66.7&lt;\/td&gt;&lt;td&gt;33.3&lt;\/td&gt;&lt;td&gt;16.7&lt;\/td&gt;&lt;td&gt;8.33&lt;\/td&gt;&lt;td&gt;4.17&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;CP duration (\u03bcs)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4.7&lt;\/td&gt;&lt;td&gt;2.3&lt;\/td&gt;&lt;td&gt;1.2 (normal)&lt;br&gt;4.13 (extended)&lt;\/td&gt;&lt;td&gt;0.59&lt;\/td&gt;&lt;td&gt;0.29&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. nominal bandwidth (MHz)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;50&lt;\/td&gt;&lt;td&gt;100&lt;\/td&gt;&lt;td&gt;100 for FR1&lt;br&gt;200 for FR2&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;td&gt;400&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Max. FFT size&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;td&gt;4096&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Symbols per slot&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14 &lt;br&gt;12 (extended CP)&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per subframe&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Slots per frame&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;40&lt;\/td&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td&gt;160&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-28&lt;\/span&gt; 3GPP 5G NR numerology based on CP-OFDMA.&lt;\/p&gt;\n\n&quot;}">Fig. 1-28</a>). The cyclic prefix is also used for another purpose in modern communications systems: synchronization. Since the <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> involves a certain redundancy (the <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> is identical at both edges of the OFDMA symbol), a receiver can use the cyclic prefix to identify the optimal position for the OFDMA symbol in the I/Q sample pattern of a receiver based on correlation windows (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-133__Synchronization_due_to_correlation_of_the_cyclic_prefix.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-133 &lt;\/span&gt;Synchronization due to correlation of the cyclic prefix in a receiver I\/Q sample pattern.&quot;}]">Fig. 1-133</a>).</p>


<a id="page_1038_c877"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:71%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-133__Synchronization_due_to_correlation_of_the_cyclic_prefix_3787db0c05.png" width="800" height="564" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-133 </span>Synchronization due to correlation of the cyclic prefix in a receiver I/Q sample pattern.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1038_c878"></a><p>Finally, there is one last question: Why is the cyclic prefix mechanism based on a copy from the end to the beginning? Depending on the selected modulation scheme and the available bandwidth (given as the number of available subcarriers), a certain number of bits from the bit pattern are transferred to the time-domain OFDMA symbol. The following OFDMA symbol in the time domain then transmits another portion of the bit pattern, and it is unlikely that these two symbols carry the same bit content. We thus see a phase shift between two consecutive OFDMA symbols, causing out-of-band spectrum emissions that require a bandpass filter. By adding a <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> to the OFDMA symbols, we would get a second boundary, possibly resulting in another phase shift which has to be canceled by means of filtering or clipping.</p><p>Through proper selection of the cyclic prefix to be copied from the end to the beginning, the phase shift at the boundary between the end of the <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> and the beginning of the OFDMA symbol is eliminated due to the nature of <abbr class="eh-abbreviation" title="Discrete Fourier transformation" lang="en"><span class="eh-tooltip" title="Discrete Fourier transformation">DFT</span></abbr>, an OFDMA symbol is a periodic signal and thus it's end and beginning are identical. In summary, we can illustrate OFDMA signal generation in it's complete form as used in standards such as 3GPP EUTRAN with the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-134__OFDMA_signal_generation.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-134 &lt;\/span&gt;OFDMA signal generation as used in 3GPP EUTRAN Release 8.&quot;}]">Fig. 1-134</a>.</p>


<a id="page_1038_c879"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:89%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-134__OFDMA_signal_generation_7527eed608.png" width="800" height="708" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-134 </span>OFDMA signal generation as used in 3GPP EUTRAN Release 8.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1038_c880"></a><p>Now, we would like to summarize the features of OFDMA in order to evaluate and rate them in a positive and negative sense. First, we have the positive aspects of OFDMA:</p><ul class="eh-list eh-list--line"><li>Scalable data rate per user since OFDMA flexibly allocates the required bandwidth based on the number of subcarriers per user</li><li>Spectral efficiency: Due to the characteristics of orthogonal subcarriers, OFDMA provides higher spectral efficiency than legacy schemes</li><li>Robust against fading: One of the main design criteria for OFDMA is robustness against fading. In the previous section, we described the mechanisms used to tackle frequency- and time-selective fading effects with OFDMA</li><li>1-tap equalization in frequency: The multicarrier concept represents a simplification with the frequency-selective channel converted into a flat fading channel scenario</li></ul><p>As always in technology, there are certain drawbacks or challenges that require special attention (negative aspects):</p><ul class="eh-list eh-list--line"><li>High crest factor or peak-to-average power ratio (<abbr class="eh-abbreviation" title="Peak-to-average power ratio" lang="en"><span class="eh-tooltip" title="Peak-to-average power ratio">PAPR</span></abbr>). OFDMA maps multiple modulation symbols onto multiple subcarriers. This results in a kind of summation at the end.<br><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-128__Symbolic_concept_of_OFDMA_signal_generation.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-128 &lt;\/span&gt;Symbolic concept of OFDMA signal generation divided into \u201cabstract\u201d steps.&quot;}]">Fig. 1-128</a> presents an example of OFDMA signal generation. Assuming a constant sequence of bits (all zeros or all ones), a very high output power will be the result. To avoid this situation, the bit pattern from a higher layer passes through a scrambling generator to prevent constant bit patterns by a kind of randomizing procedure (see e.g. the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> in 5G NR in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-060__Baseband_signal_generation_for_downlink_PDSCH_in_5G_NR.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-60 &lt;\/span&gt;Baseband signal generation for the downlink PDSCH in 5G NR.&quot;}]">Fig. 1-60</a>). As a general characteristic, however, OFDMA inherits a higher crest factor compared to other modulation schemes such as the constant envelope modulation <abbr class="eh-abbreviation" title="Gaussian minimum shift keying" lang="en"><span class="eh-tooltip" title="Gaussian minimum shift keying">GMSK</span></abbr> used in second-generation GSM systems</li><li>Sensitivity to phase noise, time and frequency synchronization. OFDMA uses orthogonal subcarriers (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-131__Time-to-frequency_conversion_of_a_rectangular_impulsen.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-131 &lt;\/span&gt;Time-to-frequency conversion of a rectangular impulse, resulting in a &lt;span class=\&quot;eh-text--nowrap\&quot;&gt;sinc() function&lt;\/span&gt;.&quot;}]">Fig. 1-131</a>), but the attentive reader may have observed that this orthogonality condition is true only when sampling at the peak of a subcarrier. At this point in frequency, the other subcarriers may exhibit a zero-crossing, but what would happen if the sampling in frequency occurs at a certain offset due to a frequency deviation? In this case, we may lose the orthogonality and intercarrier interference can occur. As a result, OFDMA-based systems require a certain degree of synchronization that can be achieved, for example, with reference signals and synchronization channels.<br> Thus, OFDMA-based systems require a synchronization technique to avoid a carrier frequency offset (<abbr class="eh-abbreviation" title="Carrier-frequency offset" lang="en"><span class="eh-tooltip" title="Carrier-frequency offset">CFO</span></abbr>). Note that the orthogonality criterion <span class="eh-text--nowrap">Δf = 1/Δt</span> is violated anyway due to the introduction of the cyclic prefix, the symbol duration Δt is extended. However, this kind of “error” is accepted and tolerated due to the higher spectral efficiency of real-world OFDMA systems</li><li>Overhead due to cyclic prefix. The cyclic prefix that is used to prevent intersymbol interference can be expressed as a sort of redundancy of the content. From a negative perspective, this redundancy thus represents overhead and the system design must be sure to include a proper definition for the <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> length</li></ul><a id="page_1038_c881"></a><p class="eh-headline-207 ">
				DFT-s-OFDMA signal generation
			</p>


<a id="page_1038_c882"></a><p>LTE uses uplink single carrier frequency division multiple access (<abbr class="eh-abbreviation" title="Single carrier FDMA" lang="en"><span class="eh-tooltip" title="Single carrier FDMA">SC-FDMA</span></abbr>). SC <abbr class="eh-abbreviation" title="Frequency division multiple access" lang="en"><span class="eh-tooltip" title="Frequency division multiple access">FDMA</span></abbr> can be best described as a precoded OFDMA scheme. We will compare the signal generation chains for <abbr class="eh-abbreviation" title="Single carrier FDMA" lang="en"><span class="eh-tooltip" title="Single carrier FDMA">SC-FDMA</span></abbr> in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-135__DFT-s-OFDMA_signal_generation.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-135 &lt;\/span&gt;DFT-s-OFDMA signal generation.&quot;}]">Fig. 1-135</a> and for OFDM(A) in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-134__OFDMA_signal_generation.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-134 &lt;\/span&gt;OFDMA signal generation as used in 3GPP EUTRAN Release 8.&quot;}]">Fig. 1-134</a>.</p><p><abbr class="eh-abbreviation" title="Single carrier FDMA" lang="en"><span class="eh-tooltip" title="Single carrier FDMA">SC-FDMA</span></abbr> signal generation is also based on an <abbr class="eh-abbreviation" title="Inverse fast Fourier transformation" lang="en"><span class="eh-tooltip" title="Inverse fast Fourier transformation">IFFT</span></abbr> operation, but the modulated data symbols to be transmitted are not directly mapped to the <abbr class="eh-abbreviation" title="Inverse fast Fourier transformation" lang="en"><span class="eh-tooltip" title="Inverse fast Fourier transformation">IFFT</span></abbr>. Instead, <abbr class="eh-abbreviation" title="Discrete Fourier transformation" lang="en"><span class="eh-tooltip" title="Discrete Fourier transformation">DFT</span></abbr> preprocessing (or “precoding”) is first performed on the modulated data symbols and the result is input to the <abbr class="eh-abbreviation" title="Inverse fast Fourier transformation" lang="en"><span class="eh-tooltip" title="Inverse fast Fourier transformation">IFFT</span></abbr> stage. For this reason, <abbr class="eh-abbreviation" title="Single carrier FDMA" lang="en"><span class="eh-tooltip" title="Single carrier FDMA">SC-FDMA</span></abbr> is also referred to as DFT-spread-OFDM (<abbr class="eh-abbreviation" title="Discrete Fourier transform-spread-orthogonal frequency division multiplexing" lang="en"><span class="eh-tooltip" title="Discrete Fourier transform-spread-orthogonal frequency division multiplexing">DFT-s-OFDM</span></abbr>) or, as we already noted, as precoded OFDM. In 5G NR, this operation is defined as transform precoding.</p>


<a id="page_1038_c883"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:20%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-135__DFT-s-OFDMA_signal_generation_c7f0925e72.png" width="800" height="159" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-135 </span>DFT-s-OFDMA signal generation.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1038_c884"></a><p>What is the benefit of having an additional <abbr class="eh-abbreviation" title="Discrete Fourier transformation" lang="en"><span class="eh-tooltip" title="Discrete Fourier transformation">DFT</span></abbr> stage in the UE compared to the classic OFDMA scheme? The answer is that <abbr class="eh-abbreviation" title="Single carrier FDMA" lang="en"><span class="eh-tooltip" title="Single carrier FDMA">SC-FDMA</span></abbr> significantly reduces the peak-to-average power ratio of the signal, which is important since, as mentioned above, one drawback of OFDMA is the higher crest factor. Signals with a high peak-to-average power ratio degrade the efficiency of the terminal´s power amplifiers, thus the improvement obtained with <abbr class="eh-abbreviation" title="Single carrier FDMA" lang="en"><span class="eh-tooltip" title="Single carrier FDMA">SC-FDMA</span></abbr> is beneficial to UE manufacturers.</p><p>The achieved reduction in the peak-to-average power ratio depends on the signal parameterization (e.g. the modulation scheme) and can be greater than 3 dB. From a negative perspective, with <abbr class="eh-abbreviation" title="Single carrier FDMA" lang="en"><span class="eh-tooltip" title="Single carrier FDMA">SC-FDMA</span></abbr> all the used subcarriers carry more or less the same content, meaning a sort of egalitarian behavior is introduced. In contrast, with OFDMA it is possible to send the allocated subcarriers (or better, the resource blocks) in a frequency distributed procedure, and transmission of different physical channels can be separated in the frequency domain.</p><p>As seen in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-136__DFT-s-OFDMA_effect_producing_spread_OFDMA.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-136 &lt;\/span&gt;DFT-s-OFDMA effect producing spread OFDMA.&quot;}]">Fig. 1-136</a>, the spreading operation symbolically distributes the complex-valued content on all used subcarriers. Thus, all subcarriers carry more or less similar content, which explains why the DFT-s-OFDMA waveform cannot be used in the downlink direction.</p><p>Note that in the downlink direction, a NodeB sends data to multiple UEs so we have a one-to-many connection (requiring OFDMA). However, in the uplink direction one UE sends data to one NodeB only. Since it appears beneficial for power amplifier designs, the DFT-s-OFDMA scheme has been used in EUTRAN. In 5G NR, it is an optional waveform for the uplink direction and is described in the 3GPP standard as a transform precoding stage.</p>


<a id="page_1038_c885"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:39%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-136__DFT-s-OFDMA_effect_producing_spread_OFDMA_7ade642e0c.png" width="800" height="308" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-136 </span>DFT-s-OFDMA effect producing spread OFDMA.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1038_c886"></a><p>On the 5G NR uplink, there are two waveforms. One is specified as cyclic prefix OFDMA and represents the default case. The second is known as transform precoding. It applies a kind of <abbr class="eh-abbreviation" title="Discrete Fourier transformation" lang="en"><span class="eh-tooltip" title="Discrete Fourier transformation">DFT</span></abbr> operation to spread the symbol allocation. <abbr class="eh-abbreviation" title="Cyclic prefix OFDM" lang="en"><span class="eh-tooltip" title="Cyclic prefix OFDM">CP-OFDM</span></abbr> supports spatial multiplexing and wideband operation and permits the design of low-cost transmitters due to the lower complexity. <abbr class="eh-abbreviation" title="Discrete Fourier transform-spread-orthogonal frequency division multiplexing" lang="en"><span class="eh-tooltip" title="Discrete Fourier transform-spread-orthogonal frequency division multiplexing">DFT-s-OFDM</span></abbr> has better performance in the <abbr class="eh-abbreviation" title="Peak-to-average power ratio" lang="en"><span class="eh-tooltip" title="Peak-to-average power ratio">PAPR</span></abbr> and may thus improve the uplink coverage. Transform precoding is activated by higher layer parameters, e.g. <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>transformPrecoder</em> in <em>PUSCH config</em>. When configured, transform precoding is applied for the uplink channels <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> containing reference signals <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> and optionally <abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr>. In the current release of <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>, transform precoding is specified only for single-layer transmission. The transform precoding operation is defined as shown below in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-137__Transform_precoding_in_5G_NR_Formel.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-137 &lt;\/span&gt;Transform precoding in 5G NR (example: here on PUSCH).&lt;br&gt;&quot;}]">Fig. 1-137</a>. In comparison with <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-129__Reminder_of_the_discrete_Fourier_transform.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-129 &lt;\/span&gt;Reminder of the discrete Fourier transform (DFT).&quot;}]">Fig. 1-129</a>, we may understand transform precoding as a kind of <abbr class="eh-abbreviation" title="Discrete Fourier transformation" lang="en"><span class="eh-tooltip" title="Discrete Fourier transformation">DFT</span></abbr> operation that is applied.</p>


<a id="page_1038_c887"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:20%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-137__Transform_precoding_in_5G_NR_Formel_b57950838f.png" width="800" height="159" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-137 </span>Transform precoding in 5G NR (example: here on <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>).<br></figcaption></figure></div></div></div></div></div></div>


<a id="page_1038_c888"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:16%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-138__Transmitter_block_diagram_for_CP-OFDM_1aa6e1c047.png" width="800" height="121" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-138 </span>Transmitter block diagram for <abbr class="eh-abbreviation" title="Cyclic prefix OFDM" lang="en"><span class="eh-tooltip" title="Cyclic prefix OFDM">CP-OFDM</span></abbr> with optional DFT-spreading.</figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1039" data-prevpid="1038" data-nextpid="1040" data-chapter="1.3 Beamforming fundamentals" id="page_1039">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h2>1.3 Beamforming fundamentals</h2>
						
<a id="page_1039_c889"></a><p>Beamforming is a well-known and established antenna technology. Cellular networks such as LTE apply this technology to improve performance. Similarly, radar applications use beamforming to identify objects. Although it is not new, beamforming has a fundamentally different level of importance in 5G cellular communications compared to 4G. Especially to allow deployment of 5G in higher frequency ranges such as the cm- and mm-wave frequency spectrum, beamforming is necessary to achieve sufficient cell coverage, i.e. to compensate for the higher path loss at these frequencies.</p><p>The ability to steer beams dynamically is equally important since blockage scenarios are likely to occur due to moving objects such as cars or even because a human body can block the line of sight (<abbr class="eh-abbreviation" title="Line of sight" lang="en"><span class="eh-tooltip" title="Line of sight">LOS</span></abbr>) path. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-139__Non-mobility_and_mobility_beamforming_scenarios.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-139 &lt;\/span&gt;Non-mobility and mobility beamforming scenarios.&quot;}]">Fig. 1-139</a> illustrates some exemplary scenarios that apply to beamforming. In a fixed wireless access (<abbr class="eh-abbreviation" title="Fixed wireless access" lang="en"><span class="eh-tooltip" title="Fixed wireless access">FWA</span></abbr>) scenario, the customer premises equipment (<abbr class="eh-abbreviation" title="Customer premises equipment" lang="en"><span class="eh-tooltip" title="Customer premises equipment">CPE</span></abbr>) in a household connects to an outdoor 5G base station (upper-left scenario). In this case, no mobility is involved and a beam sweeping procedure would identify the best beam to be used.</p>


<a id="page_1039_c890"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:64%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-139__Non-mobility_and_mobility_beamforming_scenarios_575ae7f1cf.png" width="800" height="509" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-139 </span>Non-mobility and mobility beamforming scenarios.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1039_c891"></a><p>In contrast, beamforming needs to be dynamic (steerable or switchable) when a moving car on a road is connected (lower-right scenario). Different static beams can be applied in an office scenario if multiple rooms are equipped with one transmission point (<abbr class="eh-abbreviation" title="Transmission and reception point" lang="en"><span class="eh-tooltip" title="Transmission and reception point">TRP</span></abbr>) each. All beams in the TRPs belong to the same cell (lower-left scenario). Finally, dynamic beam steering is also required even with a static DUT. This is because a direct line of sight connection may be blocked and an alternative path that exploits reflections from surrounding objects may be required (upper-right scenario).</p><p>The divergent propagation behavior at higher frequencies compared with well-established cellular networks operating below 6 GHz is discussed in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1040" class="eh-link eh-link--page">1.3.1 Propagation at cm-wave and mm-wave frequencies, page 170</a>. Chapter <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1042" class="eh-link eh-link--page">1.3.2 Support for beamforming in 5G NR, page 173</a> illustrates the basic mechanism and how beamforming is supported in 5G NR as specified in 3GPP Release 15. The antenna technology that allows beamforming is discussed in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1044" class="eh-link eh-link--page">1.3.3 Antenna technology for beamforming, page 177</a>. ­Massive <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> antennas use a large number of antenna elements, but operate at frequencies below 6 GHz. Essentially, they exploit a large number of elements to realize a combination of beamforming and spatial multiplexing. Massive <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> is briefly discussed in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1046" class="eh-link eh-link--page">1.3.4 Massive MIMO, page 179</a>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1040" data-prevpid="1039" data-nextpid="1041" data-chapter="1.3.1 Propagation at cm-wave and mm-wave frequencies" id="page_1040">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.3.1 Propagation at cm-wave and mm-wave frequencies</h3>
						
<a id="page_1040_c892"></a><p>Initially, various mobile network operators, research institutes, universities and other industry players conducted extensive channel measurement campaigns to define 5G channel models for standardization bodies such as 3GPP. For example, a portion of the mmMAGIC research project (<a href="https://5g-mmmagic.eu/" target="_blank">https://5g-mmmagic.eu/</a>) was devoted to performing extensive channel measurements in the aim of deriving a channel model covering the frequency range from 6 GHz to 100 GHz (see details in <span class="eh-reference" title="mmMAGIC, Deliverable D2.2 – Measurement Results and Final mmMAGIC Channel Models (download link from an external web site: https://bscw.5g-mmmagic.eu/pub/bscw.cgi/d202656/mmMAGIC_D2-2.pdf)" lang="en"><span class="eh-tooltip" title="mmMAGIC, Deliverable D2.2 – Measurement Results and Final mmMAGIC Channel Models (download link from an external web site: https://bscw.5g-mmmagic.eu/pub/bscw.cgi/d202656/mmMAGIC_D2-2.pdf)">[Ref. 17]</span></span>).</p><p>Various investigations incorporated features specific to mm-waves along with major advances in the areas of ground reflection and blockage effects, support for wide bandwidths and large antenna arrays, provision of spatial consistency, and outdoor-to-indoor penetration loss modeling. As a side note in order to emphasize the different effects at cm-/mm-wave frequencies, the impact due to ground reflection is briefly summarized based on the mmMAGIC results.</p><p>According to the results, grass-covered ground did not exhibit significant specular ground reflection at cm-/mm-wave frequencies. The received power had only minor fluctuations around the free-space path loss. However, ground is usually determined by pavement and asphalt roads, which act as good reflectors. Exemplary measurement data for the street canyon scenario showed that the effect of the ground reflection on the received power can even be dominant if omnidirectional antennas are used.</p><p>Ground reflection fading causes both small- and large-scale fading. Based on these findings, an adaptation of the derived channel model has been proposed.</p><p>Following the early research work, 3GPP finally specified a channel model (see <span class="eh-hint" title="3GPP TR 38.901: Study on channel model for frequencies from 0.5 to 100 GHz" lang="en"><span class="eh-tooltip" title="3GPP TR 38.901: Study on channel model for frequencies from 0.5 to 100 GHz">TR 38.901</span></span>). The modeling methods defined in this technical report are applicable over the range 500 MHz to 100 GHz. The model is applicable for link and system level simulation generally to determine performance requirements.</p><p>In general, we can conclude that the channel characteristics at higher frequencies clearly differ from the characteristics at traditional frequencies below 6 GHz. These differences include:</p><ul class="eh-list eh-list--line"><li>Oxygen and water absorption (e.g. rain or humidity loss) has to be considered for specific bands</li><li>The coherence time of a radio channel is much shorter</li><li>The attenuation of most obstacles is higher (e.g. even high foliage loss is ­present)</li><li>Specular reflections are more common in the mm-wave range</li></ul><p>As an example, we will now illustrate the channel conditions at different frequencies in a specific scenario, i.e. within a factory hall.</p>


<a id="page_1040_c893"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:40%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-140__Measurement_setup_for_channel_sounding_measurement_24371ff789.png" width="800" height="316" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-140 </span>Measurement setup for channel sounding measurement in a factory hall (RX moving).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1040_c894"></a><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-140__Measurement_setup_for_channel_sounding_measurement.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-140 &lt;\/span&gt;Measurement setup for channel sounding measurement in a factory hall (RX moving).&quot;}]">Fig. 1-140</a> illustrates the scenario in detail. The Rohde &amp; Schwarz channel sounding solution (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1041" class="eh-link eh-link--page">1.3.1.1 Channel sounding, page 172</a> for details) was used to determine the channel propagation conditions. During this measurement, the receiver (RX) was continuously moved over a distance of 7 m during a period of about 25 s. In this scenario, we move from a line of sight (<abbr class="eh-abbreviation" title="Line of sight" lang="en"><span class="eh-tooltip" title="Line of sight">LOS</span></abbr>) condition to a non-LOS condition, which reflects typical corner effects.</p>


<a id="page_1040_c895"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:31%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-141__ChannelsSoundingMeasurements_6e8ac124f7.png" width="800" height="243" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-141 </span>Channel sounding measurements results comparing 5.8 GHz (left) and 38 GHz (right) channel conditions.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1040_c896"></a><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-141__ChannelsSoundingMeasurements.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-141 &lt;\/span&gt;Channel sounding measurements results comparing 5.8 GHz (left) and 38 GHz (right) channel conditions.&quot;}]">Fig. 1-141</a> shows two measurement results in order to compare the channel characteristics at 5.8 GHz and 38 GHz. The results confirm the highly divergent behavior at these different frequencies. At lower frequencies, a much higher number of path components is available under <abbr class="eh-abbreviation" title="Line of sight" lang="en"><span class="eh-tooltip" title="Line of sight">LOS</span></abbr> conditions. Moving out of <abbr class="eh-abbreviation" title="Line of sight" lang="en"><span class="eh-tooltip" title="Line of sight">LOS</span></abbr> conditions at 38 GHz results in no remaining signal energy at the receiver, corresponding to a potential link drop, whereas at 5.8 GHz some reflections are still available in order to maintain a connection.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1041" data-prevpid="1040" data-nextpid="1042" data-chapter="1.3.1.1 Channel sounding" id="page_1041">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.3.1.1 Channel sounding</h4>
						
<a id="page_1041_c897"></a><p>Although some channel models have recently been defined, 5G channel sounding campaigns can still be required to understand a specific deployment scenario. One example involves the channel characteristics in an Industry 4.0 application scenario.</p><p>Rohde &amp; Schwarz offers a test solution for 5G channel sounding. It is based on the pulse compression method. The R&amp;S®SMW200A vector signal generator transmits a band-limited channel sounding signal at the frequency of interest. The radio channel alters this signal depending on the surrounding environment, which can include obstacles, reflections, scattering, oxygen absorption and movement.</p><p>The R&amp;S®FSW signal and spectrum analyzer receives and processes the signal from the channel and forwards the resulting I/Q data to the data analysis software. The software correlates the received I/Q data with the originally transmitted signal to estimate the channel impulse response that describes the radio channel (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-142__Basic_channel_sounder_setup.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-142 &lt;\/span&gt;Basic channel sounder setup.&quot;}]">Fig. 1-142</a>).</p>


<a id="page_1041_c898"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:57%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-142__Basic_channel_sounder_setup_f0785f07f7.png" width="800" height="451" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-142 </span>Basic channel sounder setup.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1041_c899"></a><p>The applied 5G channel sounding signals exhibit excellent autocorrelation properties, which provide an additional processing gain. Nevertheless, this method can only be used if both the signal generator (transmitter) and the signal analyzer (receiver) provide the needed bandwidth capability. The R&amp;S®SMW200A and the R&amp;S®FSW both offer up to 2 GHz internal bandwidth, allowing an excellent echo time resolution of up to 0.5 ns.</p><p>The channel sounding solution enables direct measurement of the channel impulse response (CIR) in the time domain. This approach is much faster and more flexible than a test setup that is based on a network analyzer. Since the R&amp;S®SMW200A and the R&amp;S®FSW offer high reference frequency stability, relative power delay profile measurements can be performed without the need for synchronization, making this test solution ideal for 5G outdoor channel measurements over longer ranges.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1042" data-prevpid="1041" data-nextpid="1043" data-chapter="1.3.2 Support for beamforming in 5G NR" id="page_1042">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.3.2 Support for beamforming in 5G NR</h3>
						
<a id="page_1042_c900"></a><p>Support for beamforming is an essential capability in 5G NR technology. Therefore, it is relevant in many areas of the specifications provided by 3GPP. Support for beamforming impacts the physical layer and the higher layer procedures. It is based on two fundamental physical resources: <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> blocks (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1043" class="eh-link eh-link--page">1.3.2.1 SS/PBCH block details, page 174</a>) and the capability to configure channel state information reference signals (<abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>), which is described in more detail in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1087" class="eh-link eh-link--page">2.3.1 Beam mobility procedure, page 387</a>.</p><p>&nbsp;</p><p>Beam management is realized with different operations known as:</p><ul class="eh-list eh-list--line"><li>Beam sweeping<strong>:</strong> Using multiple beams at the base station to cover a geographic area and sweep through them at prespecified intervals</li><li>Beam measurement<strong>:</strong> The UE provides measurement reports to the base station on a per beam basis</li><li>Beam detection<strong>:</strong> The UE identifies the best beam based on power measurements related to the configured thresholds</li><li>Beam switching<strong>:</strong> The UE switches between different beams to support mobility scenarios</li><li>Beam recovery<strong>:</strong> The UE is configured with basic information to recover a beam in case a connection is lost</li></ul><p>Consequently, beamforming is an built-in capability in 5G NR technology.</p><p>The following sections provide basic technical information on the design of synchronization and broadcast signals to support beamforming. These signals provide the basic ability to allow beam sweeping to be established by the base station. The fundamental characteristics that enable per beam measurements from the DUT are also illustrated.</p><p>For more details on beam detection, beam switching and beam recovery, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1066" class="eh-link eh-link--page">2.1.2 5G NR signal quality measurements and reporting, page 237</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1087" class="eh-link eh-link--page">2.3.1 Beam mobility procedure, page 387</a>.</p><p>Beamforming testing as well as general antenna array testing aspects are discussed in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1050" class="eh-link eh-link--page">1.5 Testing fundamentals, page 191</a>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1043" data-prevpid="1042" data-nextpid="1044" data-chapter="1.3.2.1 SS/PBCH block details" id="page_1043">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.3.2.1 SS/PBCH block details</h4>
						
<a id="page_1043_c901"></a><p>Native support for beamforming requires the ability to distinguish between different beams that are applied in the transmit direction. 5G NR provides this feature based on a specific design of the synchronization signals/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> blocks transmitted by the base station. Thus, basic beamforming is supported without signaling any prior knowledge to the end-user device.</p><p>Note that in the case of the non-standalone access architecture (<abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr>) (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1006" class="eh-link eh-link--page">1.1.2 Overall 5G architecture, page 12</a>), some higher layer information on beamforming configurations can be provided via LTE to accelerate access with 5G NR cells. However, this mechanism is not strictly required and is not available in the standalone architecture case.</p><p>The basic structure of an <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block is illustrated in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-143__SS-PBCH_block.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-143 &lt;\/span&gt;SS\/PBCH block.&quot;}]">Fig. 1-143</a>.</p>


<a id="page_1043_c902"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:679px;"><div class="book-img-wrap__inner" style="padding-bottom:67%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/1-143__SS-PBCH_block.png" width="679" height="454" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-143 </span><abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1043_c903"></a><p>Over a period of four symbols, a certain number of subcarriers (SC) are occupied with primary and secondary synchronization signals (<abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> and <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr>) as well as with broadcast information. For a more comprehensive description of the physical layer details, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1066" class="eh-link eh-link--page">2.1.2 5G NR signal quality measurements and reporting, page 237</a>.</p><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1043_c904\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table018\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Channel or signal&lt;\/th&gt;&lt;th&gt;OFDM symbol number l relative to the start of an SS\/PBCH block&lt;\/th&gt;&lt;th&gt;Subcarrier number k relative to the start of an SS\/PBCH block&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;PSS&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;56, 57, \u2026, 182&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;SSS&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;56, 57, \u2026, 182&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Set to 0&lt;\/td&gt;&lt;td&gt;0&lt;br&gt;\n\t\t\t\t\t\t\t2&lt;\/td&gt;&lt;td&gt;0, 1, \u2026, 55, 183, 184, \u2026, 239&lt;br&gt;\n\t\t\t\t\t\t\t48, 49, \u2026, 55, 183, 184, \u2026, 191&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;PBCH&lt;\/td&gt;&lt;td&gt;1, 3&lt;br&gt;\n\t\t\t\t\t\t\t2&lt;\/td&gt;&lt;td&gt;0, 1, \u2026, 239&lt;br&gt;\n\t\t\t\t\t\t\t0, 1, \u2026, 47, 192, 193, \u2026, 239&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;DMRS for PBCH&lt;\/td&gt;&lt;td&gt;1, 3&lt;br&gt;\n\t\t\t\t\t\t\t2&lt;\/td&gt;&lt;td&gt;0 + &lt;em&gt;v&lt;\/em&gt;, 4 + &lt;em&gt;v&lt;\/em&gt;, 8 + &lt;em&gt;v&lt;\/em&gt;, \u2026, 236 + &lt;em&gt;v&lt;\/em&gt;&lt;br&gt;\n\t\t\t\t\t\t\t0 + &lt;em&gt;v&lt;\/em&gt;, 4 + &lt;em&gt;v&lt;\/em&gt;, 8 + &lt;em&gt;v&lt;\/em&gt;, \u2026, 44 + &lt;em&gt;v&lt;\/em&gt;&lt;br&gt;\n\t\t\t\t\t\t\t192 + &lt;em&gt;v&lt;\/em&gt;, 196 + &lt;em&gt;v&lt;\/em&gt;, \u2026, 236 + &lt;em&gt;v&lt;\/em&gt;\n&amp;nbsp;&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-144 &lt;\/span&gt;Resources within an SS\/PBCH block for PSS, SSS, PBCH and DMRS for PBCH.&lt;\/p&gt;\n\n&quot;}">Fig. 1-144</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-145__Demodulation_reference_symbols_.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-145 &lt;\/span&gt;Demodulation reference resource element within an SS\/PBCH block (example: &lt;em&gt;v&lt;\/em&gt; = 1).&quot;}]">Fig. 1-145</a> illustrate the definition of the demodulation reference signals (<abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>) used within this <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block for channel estimation and power measurement purposes. The resource elements marked in red represent the demodulation reference sequence in accordance with <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>.</p><p>Note that the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> are different for different <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> blocks and thus allow individual power measurements per <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block. Furthermore, the quantity <em>v</em> is given by the following equation:</p><p><em>v</em> = <em>N</em><sub>I</sub><sub>D</sub><sup class="eh-text__letter">cel</sup><sup class="eh-text__letter">l</sup>mod4</p><p>and therefore depends on the cell ID.</p>


<a id="page_1043_c904"></a><div class="table-scroll"><table id="table018" class="eh-table eh-table--alternate"><colgroup><col><col><col></colgroup><thead><tr><th>Channel or signal</th><th>OFDM symbol number l relative to the start of an SS/PBCH block</th><th>Subcarrier number k relative to the start of an SS/PBCH block</th></tr></thead><tbody><tr><td>PSS</td><td>0</td><td>56, 57, …, 182</td></tr><tr><td>SSS</td><td>2</td><td>56, 57, …, 182</td></tr><tr><td>Set to 0</td><td>0<br>
							2</td><td>0, 1, …, 55, 183, 184, …, 239<br>
							48, 49, …, 55, 183, 184, …, 191</td></tr><tr><td>PBCH</td><td>1, 3<br>
							2</td><td>0, 1, …, 239<br>
							0, 1, …, 47, 192, 193, …, 239</td></tr><tr><td>DMRS for PBCH</td><td>1, 3<br>
							2</td><td>0 + <em>v</em>, 4 + <em>v</em>, 8 + <em>v</em>, …, 236 + <em>v</em><br>
							0 + <em>v</em>, 4 + <em>v</em>, 8 + <em>v</em>, …, 44 + <em>v</em><br>
							192 + <em>v</em>, 196 + <em>v</em>, …, 236 + <em>v</em>
&nbsp;</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-144 </span>Resources within an <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block for <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr>, <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr>, <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> and <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> for <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>.</p>


<a id="page_1043_c905"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:679px;"><div class="book-img-wrap__inner" style="padding-bottom:220%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/1-145__Demodulation_reference_symbols_.png" width="679" height="1493" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-145 </span>Demodulation reference resource element within an <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block (example: <em>v</em> = 1).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1043_c906"></a><p>Furthermore, <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span> defines the appearance of these <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> blocks within a half frame of the radio frame (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-037__Frame_structure_in_5G_NR.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-37 &lt;\/span&gt;Frame structure in 5G NR (e.g. slot structure for SCS 60 kHz).&quot;}]">Fig. 1-37, page 62</a>). The configuration depends on the used frequency range and the applied subcarrier spacing (<abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr>) as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1043_c907\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table eh-table--alternate\&quot; id=\&quot;table019\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&amp;nbsp;&lt;\/th&gt;&lt;th&gt;&lt;b&gt;FR1&lt;\/b&gt;&lt;\/th&gt;&lt;th&gt;&lt;strong&gt;FR1&lt;\/strong&gt;&lt;\/th&gt;&lt;th&gt;&lt;b&gt;FR2&lt;\/b&gt;&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;SC spacing&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;&lt;strong&gt;&lt;em&gt;f&lt;\/em&gt;&lt;sub class=\&quot;eh-text--strong eh-text__letter\&quot;&gt;c&lt;\/sub&gt;&lt;span lang=\&quot;EN-US\&quot; style=\&quot;font-size:10.0pt\&quot;&gt;&lt;span style=\&quot;line-height:112%\&quot;&gt;&lt;span style=\&quot;font-family:&amp;quot;Arial&amp;quot;,sans-serif\&quot;&gt;\u2264&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt;&amp;nbsp;3 GHz (&lt;em&gt;L&lt;\/em&gt;&lt;sub&gt;max&lt;\/sub&gt; = 4)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;&lt;strong&gt;&lt;em&gt;f&lt;\/em&gt;&lt;sub class=\&quot;eh-text--strong eh-text__letter\&quot;&gt;c&lt;\/sub&gt; &amp;gt; 3 GHz (&lt;em&gt;L&lt;\/em&gt;&lt;sub&gt;max&lt;\/sub&gt; = 8)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;&lt;strong&gt;&lt;em&gt;f&lt;\/em&gt;&lt;sub class=\&quot;eh-text--strong eh-text__letter\&quot;&gt;c&lt;\/sub&gt; &amp;gt; 24.25 GHz (&lt;em&gt;L&lt;\/em&gt;&lt;sub&gt;max&lt;\/sub&gt; = 64)&lt;\/strong&gt;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Case A (15 kHz)&lt;\/td&gt;&lt;td&gt;2, 8, 16, 22&lt;\/td&gt;&lt;td&gt;2, 8, 16, 22, 30, 38, 44, 50&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Case B (30 kHz)&lt;\/td&gt;&lt;td&gt;4, 8, 16, 20&lt;\/td&gt;&lt;td&gt;4, 8, 16, 20, 32, 36, 44, 48&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;&lt;strong&gt;FDD:&amp;nbsp;&lt;em&gt;f&lt;\/em&gt;&lt;sub class=\&quot;eh-text--strong eh-text__letter\&quot;&gt;c&lt;\/sub&gt;&lt;span lang=\&quot;EN-US\&quot; style=\&quot;font-size:10.0pt\&quot;&gt;&lt;span style=\&quot;line-height:112%\&quot;&gt;&lt;span style=\&quot;font-family:&amp;quot;Arial&amp;quot;,sans-serif\&quot;&gt;\u2264&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt; 3 GHz (&lt;em&gt;L&lt;\/em&gt;&lt;sub&gt;max&lt;\/sub&gt; = 4)&lt;br \/&gt; \t\t\tTDD:&amp;nbsp;&lt;em&gt;f&lt;\/em&gt;&lt;sub class=\&quot;eh-text--strong eh-text__letter\&quot;&gt;c&lt;\/sub&gt;&lt;span lang=\&quot;EN-US\&quot; style=\&quot;font-size:10.0pt\&quot;&gt;&lt;span style=\&quot;line-height:112%\&quot;&gt;&lt;span style=\&quot;font-family:&amp;quot;Arial&amp;quot;,sans-serif\&quot;&gt;\u2264&lt;\/span&gt;&lt;\/span&gt;&lt;\/span&gt; 2.4 GHz (&lt;em&gt;L&lt;\/em&gt;&lt;sub&gt;max&lt;\/sub&gt; = 4)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;&lt;strong&gt;FDD:&amp;nbsp;&lt;em&gt;f&lt;\/em&gt;&lt;sub class=\&quot;eh-text--strong eh-text__letter\&quot;&gt;c&lt;\/sub&gt; &amp;gt; 3 GHz (&lt;em&gt;L&lt;\/em&gt;&lt;sub&gt;max&lt;\/sub&gt; = 8)&lt;br \/&gt; \t\t\tTDD:&lt;em&gt; f&lt;\/em&gt;&lt;sub class=\&quot;eh-text--strong eh-text__letter\&quot;&gt;c&lt;\/sub&gt; &amp;gt; 2.4 GHz (&lt;em&gt;L&lt;\/em&gt;&lt;sub&gt;max&lt;\/sub&gt; = 8)&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Case C (30 kHz)&lt;\/td&gt;&lt;td&gt;2, 8, 16, 22&lt;\/td&gt;&lt;td&gt;2, 8, 16, 22, 30, 38, 44, 50&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Case D (120 kHz)&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;4, 8, 16, 20, \u2026, 508, 512, 520, 524&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Case E (240 kHz)&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;8, 12, 16, 20, \u2026, 480, 484, 488, 492&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-146 &lt;\/span&gt;Start symbol for the SS\/PBCH block within a half frame.&lt;\/p&gt;\n\n&quot;}">Fig. 1-146</a>. <em>L</em><sub>max</sub> denotes the maximum number of <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> blocks that can be configured. For higher frequencies, the number is significantly higher (max. 64) compared to the lower 1 GHz frequency range (max. 4), which reflects the need for more and narrower beams in the cm-/mm- wave spectrum. Each <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block has an index with an increasing number from 0 to <em>L</em><sub>max</sub> –1 (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-014__PBCH_payload_generation.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-14 &lt;\/span&gt;PBCH payload generation.&quot;}]">Fig. 2-14, page 242</a>). Note that the index can have the same number for all blocks, if beamforming is not applied.</p><p>Note that two cases (B and C) are defined for 30 kHz subcarrier spacing. Case B has <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> blocks directly adjacent to one other, whereas case C has two free symbols between the <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> blocks. Therefore, the latter is applicable for mini-slot operation, occupying a few symbols only.</p>


<a id="page_1043_c907"></a><div class="table-scroll"><table class="eh-table eh-table--alternate" id="table019"><colgroup><col><col><col><col></colgroup><thead><tr><th>&nbsp;</th><th><b>FR1</b></th><th><strong>FR1</strong></th><th><b>FR2</b></th></tr></thead><tbody><tr><td><strong>SC spacing</strong></td><td><strong><em>f</em><sub class="eh-text--strong eh-text__letter">c</sub><span lang="EN-US" style="font-size:10.0pt"><span style="line-height:112%"><span style="font-family:&quot;Arial&quot;,sans-serif">≤</span></span></span>&nbsp;3 GHz (<em>L</em><sub>max</sub> = 4)</strong></td><td><strong><em>f</em><sub class="eh-text--strong eh-text__letter">c</sub> &gt; 3 GHz (<em>L</em><sub>max</sub> = 8)</strong></td><td><strong><em>f</em><sub class="eh-text--strong eh-text__letter">c</sub> &gt; 24.25 GHz (<em>L</em><sub>max</sub> = 64)</strong></td></tr><tr><td>Case A (15 kHz)</td><td>2, 8, 16, 22</td><td>2, 8, 16, 22, 30, 38, 44, 50</td><td>N/A</td></tr><tr><td>Case B (30 kHz)</td><td>4, 8, 16, 20</td><td>4, 8, 16, 20, 32, 36, 44, 48</td><td>N/A</td></tr><tr><td>&nbsp;</td><td><strong>FDD:&nbsp;<em>f</em><sub class="eh-text--strong eh-text__letter">c</sub><span lang="EN-US" style="font-size:10.0pt"><span style="line-height:112%"><span style="font-family:&quot;Arial&quot;,sans-serif">≤</span></span></span> 3 GHz (<em>L</em><sub>max</sub> = 4)<br> 			TDD:&nbsp;<em>f</em><sub class="eh-text--strong eh-text__letter">c</sub><span lang="EN-US" style="font-size:10.0pt"><span style="line-height:112%"><span style="font-family:&quot;Arial&quot;,sans-serif">≤</span></span></span> 2.4 GHz (<em>L</em><sub>max</sub> = 4)</strong></td><td><strong>FDD:&nbsp;<em>f</em><sub class="eh-text--strong eh-text__letter">c</sub> &gt; 3 GHz (<em>L</em><sub>max</sub> = 8)<br> 			TDD:<em> f</em><sub class="eh-text--strong eh-text__letter">c</sub> &gt; 2.4 GHz (<em>L</em><sub>max</sub> = 8)</strong></td><td>&nbsp;</td></tr><tr><td>Case C (30 kHz)</td><td>2, 8, 16, 22</td><td>2, 8, 16, 22, 30, 38, 44, 50</td><td>N/A</td></tr><tr><td>Case D (120 kHz)</td><td>N/A</td><td>N/A</td><td>4, 8, 16, 20, …, 508, 512, 520, 524</td></tr><tr><td>Case E (240 kHz)</td><td>N/A</td><td>N/A</td><td>8, 12, 16, 20, …, 480, 484, 488, 492</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-146 </span>Start symbol for the <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block within a half frame.</p>


<a id="page_1043_c908"></a><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-147__Example_of_a_beamforming_configuration.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-147 &lt;\/span&gt;Example of a beamforming configuration (here f&lt;sub&gt;c&lt;\/sub&gt; = 3.5 GHz, SCS = 30 kHz, Case B).&quot;}]">Fig. 1-147</a> provides a basic illustration of how beamforming can be applied when 5G NR operates, for example, at 3.5 GHz with a <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> of 30 kHz (case B). In this case, the <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> blocks occupy a bandwidth of 7.2 MHz. Placement of the blocks within the carrier bandwidth is flexible and is configured by the network. In our example, they are placed at the bottom of a 40 MHz carrier. Out of a maximum of eight <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> blocks, only six are configured, thereby realizing six different beam directions. The periodicity is 5 ms.</p>


<a id="page_1043_c909"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:37%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-147__Example_of_a_beamforming_configuration_78e9061757.png" width="800" height="289" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-147 </span>Example of a beamforming configuration (here f<sub>c</sub> = 3.5 GHz, <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> = 30 kHz, Case B).</figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1044" data-prevpid="1043" data-nextpid="1045" data-chapter="1.3.3 Antenna technology for beamforming" id="page_1044">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.3.3 Antenna technology for beamforming</h3>
						
<a id="page_1044_c910"></a><p>Generally, base stations in existing cellular networks use a limited number of antennas, which usually depend on the number of spatial layers for the multiple-input multiple-output (<abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr>) scheme in use.</p><p>For example, a 4 × 2 <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> scheme in LTE would require four transmit antennas at the base station and two receive antennas at the end-user device side. In contrast, beamforming antennas apply a much higher number of antenna elements in a so-called antenna array. For example, the 28 GHz antenna array shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-148__64-element_planar_antenna_array_example.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-148 &lt;\/span&gt;64-element planar antenna array example.&quot;}]">Fig. 1-148</a> uses 64 elements.</p>


<a id="page_1044_c911"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:55%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-148__64-element_planar_antenna_array_example_6392ba72cd.png" width="800" height="434" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-148 </span>64-element planar antenna array example.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1044_c912"></a><p>The large number of antenna elements allows directional signal transmission and reception. To change the directionality of the array, a beamformer controls the phase and amplitude of the signal at each antenna element. The direction <em>θ</em> of the beam depends on the antenna spacing <em>d</em>, wavelength <em>λ</em> and phase shifts between antenna elements.</p><p>Analog, digital and hybrid beamforming schemes are known, whereas hybrid beamforming is most commonly used in 5G. Note that phase shifts on their own would be sufficient to achieve beam steering towards different directions. The ability to change the amplitude enables optimization of the side lobe suppression. </p><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-149__Principles_of_beamforming_and_beamsteering.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-149 &lt;\/span&gt;Principles of beamforming and beamsteering.&quot;}]">Fig. 1-149</a> illustrates the principle of beam steering using phase and amplitude variations.</p>


<a id="page_1044_c913"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:47%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-149__Principles_of_beamforming_and_beamsteering_b4d3b3c941.png" width="800" height="373" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-149 </span>Principles of beamforming and beamsteering.</figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1045" data-prevpid="1044" data-nextpid="1046" data-chapter="1.3.3.1 From analog to digital beamforming" id="page_1045">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.3.3.1 From analog to digital beamforming</h4>
						
<a id="page_1045_c914"></a><p>In an analog beamforming implementation, the baseband signal is first modulated and then amplified and split among the available number of antennas. Each RF chain has the capability to change the amplitude and phase individually. Analog beamforming in the RF path is simple and uses a minimal amount of hardware, making it the most cost-effective way to build a beamforming array. The drawback is that the system can only handle one data stream and generate one signal beam.</p><p>In a digital beamforming implementation, multiple digital streams are already generated in the baseband and as before, each is individually modified in phase and amplitude to generate the desired beam. Therefore, several sets can be created and superimposed before feeding the array elements. This mechanism enables one antenna to generate multiple beams, each with its own signal and serving multiple users.</p><p>A hybrid beamforming approach combines both methods. A limited number of digital streams feed multiple analog beamformers (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-150__Comparison_of_analog__hybrid_and_digital_beamforming.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-150 &lt;\/span&gt;Comparison of analog, hybrid and digital beamforming schemes.&quot;}]">Fig. 1-150</a>), whereas each is connected to a subset of the total elements in the antenna array. These schemes provide a compromise between implementation complexity, cost and flexibility.</p>


<a id="page_1045_c915"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:34%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-150__Comparison_of_analog__hybrid_and_digital_beamforming_41ec0cdb31.png" width="800" height="272" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-150 </span>Comparison of analog, hybrid and digital beamforming schemes.</figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1046" data-prevpid="1045" data-nextpid="1047" data-chapter="1.3.4 Massive MIMO" id="page_1046">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.3.4 Massive MIMO</h3>
						
<a id="page_1046_c916"></a><p>Multiple-input multiple-output (<abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr>) antenna technology is a method for increasing the capacity of a radio link using multiple transmit antennas and multiple receive antennas. Due to multipath propagation and more importantly, decorrelated paths between the transmitter and receiver, multiple data streams can be sent over the same radio channel, thus increasing the peak data rate per user or the capacity of the cellular network. <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> is now a commercial reality in various wireless communications standards such as WLAN and LTE. For example, LTE allows application of up to eight spatial layers in the downlink direction and up to four spatial layers in the uplink direction. Commercial LTE networks tend to use two or four spatial layers.</p><p>If the number of applied antenna elements is significantly increased at the base station, for example, if 64 cross-polarized antennas are used, the network node becomes a massive <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> base station. Even with the increased number of elements, the number of spatial layers is not increased. 5G NR supports eight layers on the downlink and four layers on the uplink (like LTE). However, the large number of elements allows the combination of beamforming with spatial multiplexing. More importantly, 3D or full-dimensional beamforming is enabled. Therefore, massive <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> antennas enable focused transmission and reception of signal energy in smaller regions of space. This technique brings about huge improvements in user throughput, capacity and energy efficiency, especially when combined with simultaneous scheduling of many users. In the established sub-6 GHz frequency spectrum, base stations apply a large number of TX/RX antenna elements to serve multiple users with parallel data streams with moderate antenna gains. In contrast, the high path loss attenuation in the cm-wave and mm-wave bands requires high antenna gains. Consequently, both the base station and the UE antenna implementations focus on high gain and dynamic beamforming algorithms, i.e. all available TX elements are used to create a single beam. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-151__Typical_architecture_for_a_massive_MIMO.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-151 &lt;\/span&gt;Typical architecture for a massive MIMO active antenna system.&quot;}]">Fig. 1-151</a> shows a typical architecture for a massive <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> active antenna base station.</p>


<a id="page_1046_c917"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:68%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-151__Typical_architecture_for_a_massive_MIMO_7e93dffb1d.png" width="800" height="540" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-151 </span>Typical architecture for a massive <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> active antenna system.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1046_c918"></a><p>While massive <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> renders many traditional research problems irrelevant, it is also associated with some entirely new problems that require attention. For example, there is the challenge of manufacturing many low-cost, low-precision components. It also affects how to approach testing and verification of the performance of these antennas since over-the-air test methods must generally be applied. For a more detailed discussion of these requirements, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1050" class="eh-link eh-link--page">1.5 Testing fundamentals, page 191</a>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1047" data-prevpid="1046" data-nextpid="1048" data-chapter="1.4 Bandwidth part fundamentals" id="page_1047">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h2>1.4 Bandwidth part fundamentals</h2>
						
<a id="page_1047_c919"></a><p>A bandwidth part (<abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>) is a UE specific allocation of a certain frequency spectrum within the overall carrier bandwidth in either direction (uplink and downlink). In accordance with <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>, a <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> is a subset of contiguous common resource blocks (<abbr class="eh-abbreviation" title="Common resource block" lang="en"><span class="eh-tooltip" title="Common resource block">CRB</span></abbr>) (see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1026" class="eh-link eh-link--page">1.2.2 Resource grid, page 56</a>) defined for a given 5G numerology on a given carrier. The size and the start of the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> are indicated through the use of so-called physical resource blocks (<abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr>) which are related to the common resource blocks (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-156__Resource_grid__BWP_and_carrier_bandwidth.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-156 &lt;\/span&gt;Resource grid, BWP and carrier bandwidth.&quot;}]">Fig. 1-156, page 188</a>).</p><p>One motivational aspect behind the introduction of the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> concept involves diversification of end-user devices since various UE types can have different bandwidth requirements, e.g. low complexity machine-type communications vs. a high data rate smartphone type. Using <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>, the network adapts the transmission bandwidth to the service requirements or hardware capability of a certain UE. For example, we can imagine a UE with lower complexity supporting only <abbr class="eh-abbreviation" title="Massive machine type communications" lang="en"><span class="eh-tooltip" title="Massive machine type communications">mMTC</span></abbr> services and requiring only a bandwidth of e.g. 5 MHz due to battery-consumption issues, while a high-end UE supporting <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr> services may require up to the maximum bandwidth of e.g. 100 MHz.</p><p>As described in section <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1024" class="eh-link eh-link--page">1.2.1 Flexible numerology, page 48</a>, 5G NR introduces a very flexible air interface numerology with the ability to cope with varying quality of service requirements, e.g. latency aspects for the different use cases: <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr>, <abbr class="eh-abbreviation" title="Massive machine type communications" lang="en"><span class="eh-tooltip" title="Massive machine type communications">mMTC</span></abbr> and <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr>. The introduction of bandwidth parts (<abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>) provides a flexible method to assign various 5G numerologies to a UE, thereby adapting to different <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> requirements for the service currently running on it (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1023" class="eh-link eh-link--page">1.2 Physical access fundamentals, page 46</a>).</p><p>Furthermore, thanks to the flexibility of the bandwidth part, the allocating gNB can adapt the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> to the UE's current state. For example, a typical procedure in mobile communications involves switching between idle and connected mode. When in idle mode, the UE camps on a cell and the main tasks are to retrieve system information and listen to paging information, requiring low throughput and a narrow frequency span. The motivation for this is reduced energy consumption. When the UE is in connected mode, higher throughput is typically requested, resulting in the need for a larger bandwidth. Thus, it is now possible to configure different bandwidth parts and perform dynamic switching between them at different points of time.</p>


<a id="page_1047_c920"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:52%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-152__Bandwidth_part_scenarios_v4_e82536663a.png" width="800" height="411" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-152 </span>Bandwidth part scenarios.<br></figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1048" data-prevpid="1047" data-nextpid="1049" data-chapter="1.4.1 Bandwidth part procedures" id="page_1048">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.4.1 Bandwidth part procedures</h3>
						
<a id="page_1048_c921"></a><p>The network can run several procedures to adapt the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> to the specific state and service requirements of the UE.</p><p>The initial <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> represents a common configuration for all UEs in the cell and is also the default <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> unless otherwise configured. The purpose of the initial <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> is to allow all UE categories on the cell to access the network and efficiently receive system information (<abbr class="eh-abbreviation" title="System information block" lang="en"><span class="eh-tooltip" title="System information block">SIB</span></abbr>). The UE obtains the initial <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> configuration already from the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> by decoding the configuration details of the frequency bandwidth of system information block 1 (SIB1). In case of dual connectivity (i.e. <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr>), an NR secondary node receives the initial <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> configured explicitly using the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> reconfiguration message during the secondary node (<abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr>) addition procedure to the UE.</p>


<a id="page_1048_c922"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:86%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-153__BWP_configuration_and_switching_v4_6323807c76.png" width="800" height="683" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-153 </span><abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> configuration and switching.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1048_c923"></a><p>During the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection setup procedure (in <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> given as <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> reconfiguration), the network can configure up to four BWPs for each UE. Later, one <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> is selected among the four configured BWPs and becomes the “active BWP”. At most, one active <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> is allowed at any time. This restriction in the current release reduces the UE implementation complexity by not requiring simultaneous support for different <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> types.</p><p>Based on a network triggered switching command, the UE can change among the different BWPs or return to the default <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>.</p><p>The 5G NR standard has three different procedures for the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> change in order to account for performance issues.</p><ul class="eh-list eh-list--line"><li><abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> control messages, i.e. <em>ServingCellConfig</em> or ­<em>RRCConnectionReconfiguration</em></li><li>Timer-based. Upon expiry of a timer (BWP-InactivityTimer), the UE switches to a higher-layer-configured default bandwidth part, which is the initial <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> if not indicated otherwise</li><li><abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_1 or <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_1 as shown in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-154__Bandwidth_part_switching.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-154 &lt;\/span&gt;Bandwidth part switching.&quot;}]">Fig. 1-154</a>. Note that <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> switching via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling is optional for the UE (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076_c1161" class="eh-link eh-link--page eh-link--ce">Downlink control information (DCI), page 302</a>).</li></ul><a id="page_1048_c924"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:55%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-154__Bandwidth_part_switching_1ad652c193.png" width="800" height="435" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-154 </span>Bandwidth part switching.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1048_c925"></a><p>As shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-153__BWP_configuration_and_switching_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-153 &lt;\/span&gt;BWP configuration and switching.&quot;}]">Fig. 1-153</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-154__Bandwidth_part_switching.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-154 &lt;\/span&gt;Bandwidth part switching.&quot;}]">Fig. 1-154</a>, <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> adaption with the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> control procedure is used for initial configuration and for reconfiguration of semi-static UE bandwidth. The <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> can also be changed for dynamic data rate adaption, e.g. the UE sends <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> about the pending data and this causes the network to change the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> to allocate more or less bandwidth using a <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_1 or <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_1 message (scheduling assignment). <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> switching via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling is a very fast mechanism for adapting various <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> requirements to the physical layer, but it is optional for the UE. Similarly, the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling procedure for a <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> change may be used for the purpose of a numerology change by scheduling radio resources to fulfill different <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> requests, e.g. a change from the <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> to the <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr> data scenario.</p><p>The last procedure for the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> change involves setting of a timer (BWP-Inactivity timer that ranges from 2 ms to 2 s) by the network. This setting means that the UE is allowed to stay on specific <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> only for a limited time and when the timer expires, UE goes to the default <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>. The typical use case is <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> transmission of burst packets with very low latency. The gNB assigns the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> with higher <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> (i.e. 60 kHz in FR1) to the UE for the time of the transmission and the UE must switch back to the default <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> as soon as the timer expires. This is efficient since the gNB does not need additional signaling (i.e. <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>) to control the switching.</p><p>Similarly, such a time-dependent procedure can be used to toggle between idle mode and connected mode and thus take battery consumption issues into account. Note that these motivations and the resulting <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> switching decisions are dependent on the implementation of each network operator.</p><p>There are also cases where the UE can autonomously switch the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>. For example, if the UE is forced to perform random access and the current active <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> does not have a complete <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> configuration, the UE moves to the default <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> (if the network operator has explicitly configured a default <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>; otherwise, the UE will use the initial <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>).</p><p>Some <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> features are optional since they require specific UE processing capability to permit quick switching of the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> (“retuning time”). This is outlined in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1048_c926\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table eh-table--alternate\&quot; id=\&quot;table020\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Feature&lt;\/th&gt;&lt;th&gt;Explanation&lt;\/th&gt;&lt;th&gt;Requirement&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Support for UE-specific BWP at least as large as initial DL BWP and SSB&lt;\/td&gt;&lt;td&gt;Minimum size of BWP bandwidth&lt;\/td&gt;&lt;td&gt;Mandatory&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Number of UE-specific DL BWPs configured by RRC per carrier&lt;\/td&gt;&lt;td&gt;UE supported number of BWPs in downlink&lt;\/td&gt;&lt;td&gt;Mandatory (1), optional (more than 1)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Reconfiguration with RRC&lt;\/td&gt;&lt;td&gt;BWP allocation and switching&lt;\/td&gt;&lt;td&gt;Mandatory&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Reconfiguration with DCI or timer&lt;\/td&gt;&lt;td&gt;BWP allocation and switching&lt;\/td&gt;&lt;td&gt;Optional&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Different numerology per BWP&lt;\/td&gt;&lt;td&gt;UE supports BWP with different numerologies&lt;\/td&gt;&lt;td&gt;Optional&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;bwp-WithoutRestriction&lt;\/td&gt;&lt;td&gt;Bandwidth restriction means the UE BWP may not include initial BWP&lt;\/td&gt;&lt;td&gt;Optional&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-155 &lt;\/span&gt;BWP related UE capabilites \u2013 extract from TS 38.306.&lt;\/p&gt;\n\n&quot;}">Fig. 1-155</a>.</p><p>For example, the UE might not support the different <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> that are supported among the configured BWPs. Therefore, the UE can transmit its capability for the supported feature with <em>bwp_DiffNumerology</em>, indicating that the four BWPs can be of different numerologies, or alternatively with <em>bwp_SameNumerology</em> that they have to be within the same numerology. See <span class="eh-hint" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities" lang="en"><span class="eh-tooltip" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities">TS 38.306</span></span> for further details on UE capabilities. On the other hand, the network can have an arbitrary number of BWPs since they are UE-specific and BWPs for different UEs may overlap. There is the important restriction that one <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> may only be of one 5G numerology, thus a <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> cannot stretch over two different resource grids (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1026" class="eh-link eh-link--page">1.2.2 Resource grid, page 56</a>).</p>


<a id="page_1048_c926"></a><div class="table-scroll"><table class="eh-table eh-table--alternate" id="table020"><colgroup><col><col><col></colgroup><thead><tr><th>Feature</th><th>Explanation</th><th>Requirement</th></tr></thead><tbody><tr><td>Support for UE-specific BWP at least as large as initial DL BWP and SSB</td><td>Minimum size of BWP bandwidth</td><td>Mandatory</td></tr><tr><td>Number of UE-specific DL BWPs configured by RRC per carrier</td><td>UE supported number of BWPs in downlink</td><td>Mandatory (1), optional (more than 1)</td></tr><tr><td>Reconfiguration with RRC</td><td>BWP allocation and switching</td><td>Mandatory</td></tr><tr><td>Reconfiguration with DCI or timer</td><td>BWP allocation and switching</td><td>Optional</td></tr><tr><td>Different numerology per BWP</td><td>UE supports BWP with different numerologies</td><td>Optional</td></tr><tr><td>bwp-WithoutRestriction</td><td>Bandwidth restriction means the UE BWP may not include initial BWP</td><td>Optional</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-155 </span><abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> related UE capabilites – extract from <span class="eh-hint" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities" lang="en"><span class="eh-tooltip" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities">TS 38.306</span></span>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1049" data-prevpid="1048" data-nextpid="1050" data-chapter="1.4.2 Bandwidth part configuration" id="page_1049">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.4.2 Bandwidth part configuration</h3>
						
<a id="page_1049_c927"></a><p>One important aspect is related to the introduction in 5G NR of very flexible bandwidth allocation, numerology usage and numerology switching capability. The term resource grid (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1026" class="eh-link eh-link--page">1.2.2 Resource grid, page 56</a>) has thus been introduced, describing a kind of semi-static configuration of the system bandwidth into various spectral parts, each of them using one 5G numerology. We may understand the resource grid as a kind of network-specific configuration that is partly transparent to the UE.</p><p>Since the resource grid details are specified and indicated via a system information broadcast, changes are possible, but they are not very dynamic and can be considered as semi-static or even fully static within a cell. In other words, the resource grid provides a network-centric concept of allocating various 5G numerologies within the overall system bandwidth, while the bandwidth part represents the UE-centric allocation of frequency and 5G numerology resources, thereby allowing a much higher level of flexibility as well as more dynamic switching between them.</p><p>The overall carrier bandwidth is segmented into different “resource grids”(“SCS carriers”) with various numerologies within the carrier bandwidth. Each resource grid uses a specific 5G NR numerology and starts from an offset from point A, signaled as offsetToCarrier, and spans a certain bandwidth, indicated as the number of common resource blocks (<abbr class="eh-abbreviation" title="Common resource block" lang="en"><span class="eh-tooltip" title="Common resource block">CRB</span></abbr>) by the higher layer parameter carrierBandwidth shown as <em>N</em><sup class="eh-text--em eh-text__letter">size </sup><sup class="eh-text--em eh-text__letter">μ</sup><sub class="eh-text--em eh-text__letter">grid x</sub> included in <em>SCS-SpecificCarrier</em> (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-156__Resource_grid__BWP_and_carrier_bandwidth.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-156 &lt;\/span&gt;Resource grid, BWP and carrier bandwidth.&quot;}]">Fig. 1-156</a>). CRBs are numbered upwards from 0 in the frequency domain for a common subcarrier spacing configuration and serve as a kind of frequency orientation for each resource grid and spectrum allocation. The CRBs are related to the frequency position point A. For more signaling details in relation to the resource grid, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1026" class="eh-link eh-link--page">1.2.2 Resource grid, page 56</a>.</p><p>A bandwidth part is a subset of contiguous resource blocks within a resource grid, thus one bandwidth part uses one NR numerology. For greater flexibility in spectrum allocation within a resource grid and to allow configuration of different bandwidth parts, the term physical resource block (<abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr>) has been defined. The physical resource blocks are defined within a bandwidth part and numbered from 0 to <em>N</em><sub>BW</sub><sub>P</sub><sup class="eh-text__letter">siz</sup><sup class="eh-text__letter">e</sup>, relative to the start of the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>. The start and bandwidth of a <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> within a resource grid are given by the LocationAndBandwidth parameter.</p>


<a id="page_1049_c928"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:42%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-156__Resource_grid__BWP_and_carrier_bandwidth_410cf6dbb5.png" width="800" height="334" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-156 </span>Resource grid, <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> and carrier bandwidth.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1049_c929"></a><p>A UE is configured with an active <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> in both directions (UL and DL), both for FDD and TDD. There is no downlink reception of <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>/<abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> and uplink transmission of <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>/<abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> outside the allowed active <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>.</p><p>The UE derives the first BW configuration in <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> as frequency bandwidth for receiving the system information block 1 (SIB1). This BW corresponds to the bandwidth of CORESET0 (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1033" class="eh-link eh-link--page">1.2.5.4 Control resource set CORESET, page 94</a>), which is signaled via the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> parameter <em>pdcch-ConfigSIB1</em>. After decoding the SIB1, the UE receives the configuration of the initial <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> which can be used as default <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> if not otherwise configured.</p><p>In case of dual connectivity (i.e. <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr>), an NR secondary node receives the initial <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> configured explicitly using the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> reconfiguration message during the <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> addition procedure to the UE.</p><p>In the opposite direction, an initially active UL <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> is configured in SIB1. This initial UL <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> will be used for initial access and does contain the configuration of the random access channel <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr>.</p><p>If the UE is configured with up to four dedicated bandwidth parts, one of them represents the active bandwidth part. The active DL <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> contains at least the dedicated search spaces and optionally the common search space. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1033" class="eh-link eh-link--page">1.2.5.4 Control resource set CORESET, page 94</a> for further details on <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr>. The UE must know which one of the four configured BWPs contains the common search space. The <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-157__Configuration_parameters_for_the_BWP.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-157 &lt;\/span&gt;Configuration parameters for the BWP.&quot;}]">Fig. 1-157</a> provides details on the configuration of the bandwidth part (see <span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span> for further information).</p>


<a id="page_1049_c930"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:49%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-157__Configuration_parameters_for_the_BWP_130574e511.png" width="800" height="390" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-157 </span>Configuration parameters for the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1049_c931"></a><p>The generic <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> parameter consists of the three values listed in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1049_c932\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table021\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th colspan=\&quot;2\&quot;&gt;Configuration values for BWP generic info&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Location and bandwidth&lt;\/td&gt;&lt;td&gt;0 to 37949&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Subcarrier spacing&lt;\/td&gt;&lt;td&gt;15 to 240 kHz&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Cyclic prefix&lt;\/td&gt;&lt;td&gt;Normal\/extended&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-158 &lt;\/span&gt;Configuration values for BWP generic info.&lt;\/p&gt;\n\n&quot;}">Fig. 1-158</a>.</p>


<a id="page_1049_c932"></a><div class="table-scroll"><table id="table021" class="eh-table eh-table--alternate"><colgroup><col><col></colgroup><thead><tr><th colspan="2">Configuration values for BWP generic info</th></tr></thead><tbody><tr><td>Location and bandwidth</td><td>0 to 37949</td></tr><tr><td>Subcarrier spacing</td><td>15 to 240 kHz</td></tr><tr><td>Cyclic prefix</td><td>Normal/extended</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-158 </span>Configuration values for <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> generic info.</p>


<a id="page_1049_c933"></a><p>The higher layer parameter <em>LocationAndBandwidth</em> is to be understood as a twofold indicator of the frequency position representing the first resource block of that <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> and the bandwidth of the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> given as the number of physical resource blocks for that specific <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>. The procedure is similar to that for the frequency indication resource indicator value (<abbr class="eh-abbreviation" title="Resource indication value" lang="en"><span class="eh-tooltip" title="Resource indication value">RIV</span></abbr>), which is discussed in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1081_c1239" class="eh-link eh-link--page eh-link--ce">Resource assignment in the frequency domain, page 338</a> and specified in <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>. Note that there is no <abbr class="eh-abbreviation" title="Virtual resource block" lang="en"><span class="eh-tooltip" title="Virtual resource block">VRB</span></abbr> to <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr> mapping, thus the frequency bandwidth of a <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> is contiguous; only the UE frequency allocation within the active <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> can be either contiguous or non-contiguous. The first resource block of a <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> is given as an offset to the resource grid start, indicated as the first physical resource block of the surrounding resource grid. The resource grid itself is then related via an offset parameter to a fixed frequency point (Point A) (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-156__Resource_grid__BWP_and_carrier_bandwidth.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-156 &lt;\/span&gt;Resource grid, BWP and carrier bandwidth.&quot;}]">Fig. 1-156</a>).</p><p>The UE remains on the initial <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> until the network triggers a different configuration. Typically, the gNB sets an additional <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> during the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection setup or <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection reconfiguration. Up to four BWPs can be configured separately for the DL and UL in FDD. In TDD, the four possible <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> configurations are defined in pairs for the DL and UL. Different BWPs are configured in dual connectivity or carrier aggregation for each carrier.</p><p>Configuration of the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> is not enough since the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> needs to be activated or changed. For that reason, the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> layer will allocate an index to each configured <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> for that particular UE. Via <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> signaling or via the optional <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> switch command sent on the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> as <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling, the active <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> can be assigned by using that <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> index. Note that the mechanism to switch between configured BWPs via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling involves very fast <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> switching, but its support is optional for the UE. In the current release, a UE may have a maximum of one active <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>, resulting in automatic deactivation of the previous <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> upon switching to a new <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>.</p><p>The initial <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> has an index of 0 and the additional BWPs have a higher index. The <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> index is required for switching between the BWPs but also to define a <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> pair in TDD duplex mode.</p><p>In summary, the introduction of bandwidth parts in 5G NR provides a very flexible mechanism to adapt different <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> requirements, UE capabilities or behavior aspects given by UE states like idle or connected mode to the physical layer and can be seen as an essential characteristic of the 5G NR physical layer. </p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1050" data-prevpid="1049" data-nextpid="1051" data-chapter="1.5 Testing fundamentals" id="page_1050">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h2>1.5 Testing fundamentals</h2>
						
<a id="page_1050_c934"></a><p>Cellular communications systems have been developed and operated through multiple generations from the early days of GSM (2G) to today's successfully deployed LTE networks. 5G NR testing can therefore leverage established test procedures as well as a proven certification framework. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-159__From_3GPP_to_certification.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-159 &lt;\/span&gt;From 3GPP to certification, e.g. GCF.&quot;}]">Fig. 1-159</a> illustrates the established process for end-user device testing in existing cellular technologies.</p>


<a id="page_1050_c935"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:52%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-159__From_3GPP_to_certification_a1933ae1cb.png" width="800" height="412" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-159 </span>From 3GPP to certification, e.g. <abbr class="eh-abbreviation" title="Global certification forum" lang="en"><span class="eh-tooltip" title="Global certification forum">GCF</span></abbr>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1050_c936"></a><p>As the responsible standardization body, 3GPP creates the specification which provides a comprehensive definition of the complete system. More specifically, the 3GPP RAN4 and RAN5 working groups define the base station and user equipment requirements to be tested and verified. Note that verifying base station conformity is commonly a bilateral process between a mobile network operator and the infrastructure vendor who provides the relevant equipment. Obviously, regulatory conformance must be checked in accordance with the requirements of the local authority. In contrast, end-user devices can be operated in multiple mobile networks in different countries in a roaming scenario. This triggered the foundation of certification fora, like e.g. the Global Certification Forum (<abbr class="eh-abbreviation" title="Global certification forum" lang="en"><span class="eh-tooltip" title="Global certification forum">GCF</span></abbr>). The <abbr class="eh-abbreviation" title="Global certification forum" lang="en"><span class="eh-tooltip" title="Global certification forum">GCF</span></abbr> selects a number of test cases for a cellular technology in order to ensure a minimum level of performance for these devices. Independent test labs certify conformity with these requirements. The end-user device tests cover protocol (signaling) and three main categories on a high level.</p><p>The radio transmission and reception (i.e. RF) requirements define the transmitter capabilities (e.g. maximum output power and transmit quality such as EVM and frequency error) and receiver capabilities (e.g. the sensitivity of an end-user device or its ability to maintain a certain throughput in the presence of an interferer or blocking signal). Both are closely related to the hardware implementation of the RF frontend. The second category summarizes the demodulation and channel state information reporting performance. This is, in other words, the ability of a receiver to achieve a certain minimum throughput under various fading conditions. Furthermore, this relates to the required ability to measure and report the channel conditions. The third category verifies the support for radio resource management, i.e. support for handover and mobility scenarios. This is more closely related to the software implementation of the end-user device.</p><p>Formulation of an unambiguous test case to verify a specific throughput requirement or a certain transceiver performance criterion (e.g. EVM) is a challenging task. To ensure interoperability, a common test language was created and further developed over time. The latest established version is known as ­TTCN-3. Using TTCN enables a joint description of all test cases, which are developed within ETSI MTC160 with voluntary contributions from the test industry. This general framework then allows test vendors like Rohde &amp; Schwarz to offer test platforms to execute these test cases. Finally, a certification organization like the Global Certification Forum (<abbr class="eh-abbreviation" title="Global certification forum" lang="en"><span class="eh-tooltip" title="Global certification forum">GCF</span></abbr> – <a href="https://www.globalcertificationforum.org/" target="_blank">https://www.globalcertificationforum.org/</a>) selects the most important test cases to ensure interoperability on a global scale. Founded in 1999, this membership organization brings together technical experts from the world's leading manufacturers, operators and the test industry. Note that on top of certification bodies like the <abbr class="eh-abbreviation" title="Global certification forum" lang="en"><span class="eh-tooltip" title="Global certification forum">GCF</span></abbr>, various operators define their own test cases to ensure compatibility with their deployed networks.</p><p>Thus, we may be tempted to conclude that 5G NR testing is straightforward and does not pose any major challenges after finalization of the technology design. However, although a stable framework exists, there are essential differences. 5G NR is the first cellular technology operating at frequencies in the cm-wave and mm-wave spectrum, requiring the application of advanced antenna technologies (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1039" class="eh-link eh-link--page">1.3 Beamforming fundamentals, page 169</a>). Therefore over-the-air testing represents the default test case (at least in the cm-wave and mm-wave spectrum). Both higher layer testing and core network testing are also affected, as discussed in the following chapters.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1051" data-prevpid="1050" data-nextpid="1052" data-chapter="1.5.1 Physical layer testing" id="page_1051">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.5.1 Physical layer testing</h3>
						
<a id="page_1051_c937"></a><p>5G NR supports coverage for diverse services including throughput intensive data services, massive connectivity applications and ultra-reliable, low-latency services. This goal is achieved by combining networking slicing technologies in the core network with a highly configurable physical layer on the air interface. Obviously, physical layer testing is impacted by the high level of flexibility.</p><p>As an example, LTE applies a fixed carrier bandwidth (in most commercial networks 10 MHz or 20 MHz) with the important broadcast channels and synchronization signals always placed in the center of this carrier. 5G NR introduced the concept of bandwidth parts (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1047" class="eh-link eh-link--page">1.4 Bandwidth part fundamentals, page 182</a>) and broadcast/synchronization signals may now appear at any frequency position within the configured carrier bandwidth. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-160__5G_NR_signal_configuration.jpg&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-160 &lt;\/span&gt;5G NR signal configuration applying two bandwidth parts.&quot;}]">Fig. 1-160</a> illustrates the configuration possibilities for a 5G NR signal.</p>


<a id="page_1051_c938"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:52%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-160__5G_NR_signal_configuration_d42ff3ebca.jpg" width="800" height="411" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-160 </span>5G NR signal configuration applying two bandwidth parts.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1051_c939"></a><p>In this example, we create a 100 MHz signal at 3.8 GHz applying two bandwidth parts with different subcarrier spacings using a Rohde &amp; Schwarz signal generator. The <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> blocks use an <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> of 30 kHz, whereas four out of eight possible <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> transmissions are used. The two bandwidth parts apply 30 kHz and 60 kHz <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> and use 16QAM and 64QAM data modulation, respectively. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-161__Results_summary_for_the_5G_NR_signal.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-161 &lt;\/span&gt;Results summary for the 5G NR signal showing the power spectrum, EVM (per subcarrier and per signal component), constellation diagram and visualization of the allocation in the time\/frequency domain.&quot;}]">Fig. 1-161</a> shows the corresponding measurement result produced by a Rohde &amp; Schwarz spectrum and signal analyzer.</p>


<a id="page_1051_c940"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:80%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-161__Results_summary_for_the_5G_NR_signal_d852d0f671.png" width="800" height="633" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-161 </span>Results summary for the 5G NR signal showing the power spectrum, <abbr class="eh-abbreviation" title="Error vector magnitude" lang="en"><span class="eh-tooltip" title="Error vector magnitude">EVM </span></abbr>(per subcarrier and per signal component), constellation diagram and visualization of the allocation in the time/frequency domain.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1051_c941"></a><p>Configuring the analyzer correctly produces a clean result (<abbr class="eh-abbreviation" title="Error vector magnitude" lang="en"><span class="eh-tooltip" title="Error vector magnitude">EVM </span></abbr>&lt; 1 %), which is what we should expect when the two test instruments are directly connected to each other. The test instrument contributions to the measurement result should be negligible when the measurement is executed on the device under test. Note that the most stringent EVM requirement for a base station applying higher-order modulation schemes such as 256QAM is 3.5 %.</p><p>The <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-162__Results_summary_for_the_5G_NR_signal__2_.jpg&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-162 &lt;\/span&gt;Results summary for the 5G NR signal with incorrect SS\/PBCH case C configuration leading to a ruined constellation diagram.&quot;}]">Fig. 1-162</a> shows the results if only the case setting (C instead of B) for the <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block is set incorrectly (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1043" class="eh-link eh-link--page">1.3.2.1 SS/PBCH block details, page 174</a>).</p>


<a id="page_1051_c942"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:78%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-162__Results_summary_for_the_5G_NR_signal__2__af289952c2.jpg" width="800" height="618" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-162 </span>Results summary for the 5G NR signal with incorrect <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> case C configuration leading to a ruined constellation diagram.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1051_c943"></a><p>This illustrates the importance of choosing the proper settings for measurements in accordance with the applied signal. In contrast to 4G with its relatively restrictive parameter settings on the physical layer, 5G NR offers a great deal of flexibility in configuring the air interface. This flexibility allows network providers to optimally fulfill service performance requirements with major differences, e.g. a mobile broadband service vs. an ultra-low-latency service. However, this also requires a deep understanding of the configuration principles while testing. Rohde &amp; Schwarz supports its customers by providing matching default settings on the signal generator and spectrum and signal analyzer for 5G NR solutions. Furthermore the instruments support all test models as specified in 3GPP Release 15. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1051_c944\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table022\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Parameter&lt;\/th&gt;&lt;th&gt;FR1&lt;\/th&gt;&lt;th&gt;FR2&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Carrier aggregation&lt;\/td&gt;&lt;td colspan=\&quot;2\&quot;&gt;Up to 16 carriers&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Bandwidth per carrier&lt;\/td&gt;&lt;td&gt;5 MHz, 10 MHz, 15 MHz, 20 MHz, 25 MHz, 30 MHz, 40 MHz, 50 MHz, 60 MHz, 80 MHz, 90 MHz, 100 MHz&lt;\/td&gt;&lt;td&gt;50 MHz, 100 MHz, 200 MHz, 400 MHz&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Subcarrier spacing&lt;\/td&gt;&lt;td&gt;15 kHz, 30 kHz, 60 kHz&lt;\/td&gt;&lt;td&gt;60 kHz, 120 kHz, 240 kHz (not for data)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Max. number of subcarriers&lt;\/td&gt;&lt;td colspan=\&quot;2\&quot;&gt;3300 (FFT4096 mandatory)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Modulation scheme&lt;\/td&gt;&lt;td colspan=\&quot;2\&quot;&gt;QPSK, 16QAM, 64QAM, 256QAM; uplink also supports \u03c0\/2-BPSK (only DFT-s-OFDM)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Radio frame length&lt;\/td&gt;&lt;td colspan=\&quot;2\&quot;&gt;10 ms&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Subframe duration&lt;\/td&gt;&lt;td colspan=\&quot;2\&quot;&gt;1 ms (alignment at symbol boundaries every 1 ms)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;MIMO scheme&lt;\/td&gt;&lt;td colspan=\&quot;2\&quot;&gt;Max. 2 code words mapped to max. 8 layers in downlink and to max. 4 layers in uplink&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Duplex mode&lt;\/td&gt;&lt;td&gt;TDD, FDD&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Access scheme&lt;\/td&gt;&lt;td colspan=\&quot;2\&quot;&gt;DL: CP-OFDM; UL: CP-OFDM, DFT-s-OFDM&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-163 &lt;\/span&gt;Summary of 5G NR key parameters.&lt;\/p&gt;\n\n&quot;}">Fig. 1-163</a> shows a high-level overview of 5G NR key parameters.</p>


<a id="page_1051_c944"></a><div class="table-scroll"><table id="table022" class="eh-table eh-table--alternate"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>FR1</th><th>FR2</th></tr></thead><tbody><tr><td>Carrier aggregation</td><td colspan="2">Up to 16 carriers</td></tr><tr><td>Bandwidth per carrier</td><td>5 MHz, 10 MHz, 15 MHz, 20 MHz, 25 MHz, 30 MHz, 40 MHz, 50 MHz, 60 MHz, 80 MHz, 90 MHz, 100 MHz</td><td>50 MHz, 100 MHz, 200 MHz, 400 MHz</td></tr><tr><td>Subcarrier spacing</td><td>15 kHz, 30 kHz, 60 kHz</td><td>60 kHz, 120 kHz, 240 kHz (not for data)</td></tr><tr><td>Max. number of subcarriers</td><td colspan="2">3300 (FFT4096 mandatory)</td></tr><tr><td>Modulation scheme</td><td colspan="2">QPSK, 16QAM, 64QAM, 256QAM; uplink also supports π/2-BPSK (only DFT-s-OFDM)</td></tr><tr><td>Radio frame length</td><td colspan="2">10 ms</td></tr><tr><td>Subframe duration</td><td colspan="2">1 ms (alignment at symbol boundaries every 1 ms)</td></tr><tr><td>MIMO scheme</td><td colspan="2">Max. 2 code words mapped to max. 8 layers in downlink and to max. 4 layers in uplink</td></tr><tr><td>Duplex mode</td><td>TDD, FDD</td><td>TDD</td></tr><tr><td>Access scheme</td><td colspan="2">DL: CP-OFDM; UL: CP-OFDM, DFT-s-OFDM</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-163 </span>Summary of 5G NR key parameters.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1052" data-prevpid="1051" data-nextpid="1053" data-chapter="1.5.1.1 Over-the-air testing" id="page_1052">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.5.1.1 Over-the-air testing</h4>
						
<a id="page_1052_c945"></a><p>Testing of base stations or user devices was established with the early 2G systems based primarily on conducted connections. Even on a component level, usually an RF connector was available allowing connection of a test instrument to measure the parameter of interest, e.g. a transmitter performance indicator such as EVM. Although the antenna implementation plays an equal and crucial role for the overall performance during operation in the field, testing was essentially done conducted. The reason is that most implementations (even up to operation of 4G networks) include passive antennas.</p><p>In an end-user device, the design of the antennas aims for an omnidirectional pattern away from the head. Although base station antennas aim for directional transmissions, for example, realizing 120° for a three-sector cell implementation, the design still targeted static antenna patterns. Note that base station antennas transformed to active implementations in recent years. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-164__Base_station_antenna_evolution.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-164 &lt;\/span&gt;Base station antenna evolution.&quot;}]">Fig. 1-164</a> shows the initial evolution of the base station antenna implementation from 2G to 4G.</p>


<a id="page_1052_c946"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:43%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-164__Base_station_antenna_evolution_c8d989abfa.png" width="800" height="337" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-164 </span>Base station antenna evolution.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1052_c947"></a><p>A 2G base station was usually separated from the (sectorized) antenna and connected with RF cables. In a second evolution phase, the “active” part (usually the power amplifier or more generally the RF unit) moved to the antenna mast. An optical cable connected the baseband and the RF, which reduced cable attenuation significantly and thus improved coverage. This implementation still allowed connection to the transceiver via RF connectors for testing. Since the antenna pattern for both a base station and an end-user device was specifically designed for a fixed pattern, the RF requirements as well as the demodulation and RRM performance were tested conducted.</p><p>The first over-the-air test methods were discussed in conjunction with the commercial adoption of <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> schemes in user devices. The influence of the antenna implementation in combination with the precoding applied to the baseband demanded over-the-air test methods including emulation of real-world fading effects. The discussions on these test methods were extremely long-lasting and eventually resulted in additional OTA test cases for user devices. These additional test cases are specified in <span class="eh-hint" title="3GPP TR 37.544: User Equipment (UE) Over The Air (OTA) performance; Conformance testing" lang="en"><span class="eh-tooltip" title="3GPP TR 37.544: User Equipment (UE) Over The Air (OTA) performance; Conformance testing">TS 37.544</span></span> and generally include output power (<abbr class="eh-abbreviation" title="Transmission and reception point" lang="en"><span class="eh-tooltip" title="Transmission and reception point">TRP</span></abbr>) and sensitivity tests.</p><p>Likewise, the evolutionary step towards active antennas for base stations resulted in two over-the-air requirements. Initially, two distinct RF requirements (radiated output power and radiated sensitivity) were defined in <span class="eh-hint" title="3GPP TS 36.104: Evolved Universal Terrestrial Radio Access (E-UTRA); Base Station (BS) radio transmission and reception" lang="en"><span class="eh-tooltip" title="3GPP TS 36.104: Evolved Universal Terrestrial Radio Access (E-UTRA); Base Station (BS) radio transmission and reception">TS 36.104</span></span>. Reflecting the beam steering capability of active antenna systems, the base station manufacturer needs to verify these two radiated requirements (power and sensitivity) in all extreme steering positions and for the so-called reference beam peak direction. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-165__Five-point_beam_declaration_procedure.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-165 &lt;\/span&gt;Five-point beam declaration procedure for base stations with active antenna systems.&quot;}]">Fig. 1-165</a> illustrates the test procedure highlighting the beam peak direction (blue cross) and one of multiple possible extreme steering directions (red crosses) on an arbitrary surface (light blue).</p>


<a id="page_1052_c948"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:52%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-165__Five-point_beam_declaration_procedure_bb43e61d3c.png" width="800" height="414" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-165 </span>Five-point beam declaration procedure for base stations with active antenna systems.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1052_c949"></a><p>Even with these initial steps in the direction of over-the-air testing, the described OTA test cases for both base stations and user devices are complementary ones. This reflected the need for taking the antenna implementation into account for specific requirements only. However, the vast majority of 2G through 4G testing is still executed in a conducted manner.</p><p>With 5G NR, cm-wave and mm-wave frequency bands are deployed. As introduced in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1039" class="eh-link eh-link--page">1.3 Beamforming fundamentals, page 169</a>, this deployment requires adoption of advanced antenna technologies. Generally, the number of TX/RX antenna elements is significantly increased. Base stations use this large number of antennas for spatial multiplexing of many users or to realize beamforming gain to improve coverage or a combination of both. End-user devices apply the increased number of antenna elements to compensate for the increased path loss in particular at cm-wave and mm-wave frequencies. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-166__Massive_MIMO_antenna_implementation.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-166 &lt;\/span&gt;Massive MIMO antenna implementation.&quot;}]">Fig. 1-166</a> illustrates the implementation details for a massive <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> antenna.</p>


<a id="page_1052_c950"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:43%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-166__Massive_MIMO_antenna_implementation_b69c02e67a.png" width="800" height="340" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-166 </span>Massive <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> antenna implementation.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1052_c951"></a><p>When designing a massive <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> or beamforming active antenna system, development engineers face new challenges that include phase shifter tolerances, thermal effects of the power amplifiers (PA) and frequency drifts between modules, which affect the desired beam patterns. In an active antenna system, the transceiver frontends are integrated together with the antenna array, which means that traditional RF output ports are no longer available.</p><p>Although it involves a generally lower number of applied antenna elements, the same challenges apply when developing the transceiver for an end-user device. Therefore, over-the-air testing is no longer an add-on topic consisting of a limited number of test cases, but has become the default test case at least for FR2 frequencies. This significantly affects the overall test procedures and requires access to the measurement uncertainty in over the air scenarios. In addition, shielding is typically required, not only to avoid influence from radiating sources near the DUT, but also to protect the test engineer from radiation.</p><p>The approach to OTA testing is different for base stations and user devices. Base station manufacturers need to declare the type of base station they are implementing. Four types are possible (see <span class="eh-hint" title="3GPP TS 38.104: NR; Base Station (BS) radio transmission and reception" lang="en"><span class="eh-tooltip" title="3GPP TS 38.104: NR; Base Station (BS) radio transmission and reception">TS 38.104</span></span> for details). Type 1-C base stations represent traditional base stations that do not require over-the-air testing. Type 1-H covers active antenna systems, which still offer RF connectors for testing. In this case, only two requirements (radiated power and radiated sensitivity) are tested over the air, while all remaining requirements are still tested using RF connectors. Finally, type 1-O (covering FR1) and type 2-O (covering FR2) base station types are defined. These base stations are tested solely over the air. The focus for base station OTA testing is on the RF and performance requirements specified in <span class="eh-hint" title="3GPP TS 38.104: NR; Base Station (BS) radio transmission and reception" lang="en"><span class="eh-tooltip" title="3GPP TS 38.104: NR; Base Station (BS) radio transmission and reception">TS 38.104</span></span> section 9 (radiated transmitter), section 10 (radiated receiver) and section 11 (radiated performance).</p><p>In contrast to base stations, for user devices the need for over-the-air testing depends on the frequency bands in which they operate. For FR1, most testing is still conducted since the availability of RF connectors is assumed. User devices supporting FR2 will be tested over the air only (see <span class="eh-hint" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4" lang="en"><span class="eh-tooltip" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4">TS 38.101</span></span>). The test methodology for over-the-air testing of user devices supporting FR2 was studied in <span class="eh-hint" title="3GPP TR 38.810: Study on test methods for New Radio" lang="en"><span class="eh-tooltip" title="3GPP TR 38.810: Study on test methods for New Radio">TR 38.810</span></span>. Generally, the test methodology distinguishes between UE RF testing, UE RRM testing and UE demodulation / <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting. RF testing comprises transmitter and receiver requirements (section 6 and section 7 in <span class="eh-hint" title="3GPP TS 38.521: NR; User Equipment (UE) conformance specification; Radio transmission and reception; Parts 1 to 4" lang="en"><span class="eh-tooltip" title="3GPP TS 38.521: NR; User Equipment (UE) conformance specification; Radio transmission and reception; Parts 1 to 4">TS 38.521</span></span> part 1, 2 and 3), e.g. maximum output power, modulation performance such as EVM, sensitivity or the ability to maintain a certain throughput performance in the presence of a blocking signal. RRM testing ensures the efficient use of the available radio resources. The requirements that are tested include, for example, cell reselection in idle mode and support for mobility (handover) in connected mode (see <span class="eh-hint" title="3GPP TS 38.533: NR; User Equipment (UE) conformance specification; Radio Resource Management (RRM)" lang="en"><span class="eh-tooltip" title="3GPP TS 38.533: NR; User Equipment (UE) conformance specification; Radio Resource Management (RRM)">TS 38.533</span></span> for details). Finally, UE demodulation and <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> testing cover the performance of the receiver under various fading conditions and the UE's ability to correctly measure and report channel state information (<abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr>) to the network. See <span class="eh-hint" title="3GPP TS 38.521: NR; User Equipment (UE) conformance specification; Radio transmission and reception; Parts 1 to 4" lang="en"><span class="eh-tooltip" title="3GPP TS 38.521: NR; User Equipment (UE) conformance specification; Radio transmission and reception; Parts 1 to 4">TS 38.521</span></span> part 4 for details.</p><p>Generally, 3GPP requires all over-the-air measurements to be executed under far field conditions. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1054" class="eh-link eh-link--page">1.5.1.3 Near field/far field, page 207</a> for a more extensive discussion of the near field and far field.</p><p>For RF testing, two main test methods are permitted: the direct far field (<abbr class="eh-abbreviation" title="Direct far field" lang="en"><span class="eh-tooltip" title="Direct far field">DFF</span></abbr>) and the indirect far field (<abbr class="eh-abbreviation" title="Indirect far field" lang="en"><span class="eh-tooltip" title="Indirect far field">IFF</span></abbr>) method. Both use an anechoic chamber for shielding and require a positioning system such that the angle between the dual-polarized measurement antenna and the DUT has at least two axes of freedom and maintains a polarization reference. The <abbr class="eh-abbreviation" title="Direct far field" lang="en"><span class="eh-tooltip" title="Direct far field">DFF</span></abbr> method ensures measurements at a sufficiently large distance according to the Fraunhofer distance. The <abbr class="eh-abbreviation" title="Indirect far field" lang="en"><span class="eh-tooltip" title="Indirect far field">IFF</span></abbr> method uses a hardware transformation of the propagating waves to create plane waves, i.e. far field conditions, at the DUT at a shorter distance compared with the Fraunhofer distance. This reduces the required chamber size and thus reduces the complexity and cost of the test setup. Additionally, the <abbr class="eh-abbreviation" title="Indirect far field" lang="en"><span class="eh-tooltip" title="Indirect far field">IFF</span></abbr> method allows for better control and parametrization (size, quality) of the Quiet Zone (<abbr class="eh-abbreviation" title="Quite zone" lang="en"><span class="eh-tooltip" title="Quite zone">QZ</span></abbr>).</p><p>This solution is also known as a compact antenna test range (<abbr class="eh-abbreviation" title="Compact antenna test range" lang="en"><span class="eh-tooltip" title="Compact antenna test range">CATR</span></abbr>) and is illustrated in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-167__CATR_collimating_a_spherical_wavefront.jpg&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-167 &lt;\/span&gt;CATR collimating a spherical wavefront into a planar wavefront.&quot;}]">Fig. 1-167</a>. Using Fermat's principle of least time, a planar wave can be focused on a single point using a parabolic mirror. If a measurement antenna is placed at this focal point, using the reciprocity principle, a plane wave can be generated since the parabolic mirror reflects a certain planar component of the incoming spherical wave from the measurement (or feed) antenna into the quiet zone where the DUT is placed.</p>


<a id="page_1052_c952"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:48%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-167__CATR_collimating_a_spherical_wavefront_1bcea35370.jpg" width="800" height="380" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-167 </span><abbr class="eh-abbreviation" title="Compact antenna test range" lang="en"><span class="eh-tooltip" title="Compact antenna test range">CATR</span></abbr> collimating a spherical wavefront into a planar wavefront.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1052_c953"></a><p>A <abbr class="eh-abbreviation" title="Compact antenna test range" lang="en"><span class="eh-tooltip" title="Compact antenna test range">CATR</span></abbr> reflector is typically built using a solid piece of aluminum to maintain the strict surface geometry requirements. End-user device realization in FR2 allows for compact and rather light reflectors. For base station testing, the following applies. In contrast to end-user device testing, the reflector weight significantly increases for the FR1 range since massive <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> base station antennas can easily attain radiating dimensions greater than 70 cm or 80 cm. The cost, fabrication time and handling of large, heavy mirrors become prohibitive. Therefore, type 1-O base station RF testing requires alternative solutions.</p><p>For base station testing by combining the radiation of multiple antennas assembled in a phased array and fed with predetermined signal magnitude and phase, a plane wave within a defined quiet zone can be created. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-168__R_S_PWC200_showing_the_PWC_antenna_array__49224_01.jpg&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-168 &lt;\/span&gt;R&amp;amp;S\u00aePWC200 showing the PWC antenna array mounted on a great-circle cut positioner.&quot;}]">Fig. 1-168</a> shows the realization of such a plane wave converter (<abbr class="eh-abbreviation" title="Plane wave converter" lang="en"><span class="eh-tooltip" title="Plane wave converter">PWC</span></abbr>) test system operating in the 2.3 GHz to 3.8 GHz frequency range.</p>


<a id="page_1052_c954"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:67%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-168__R_S_PWC200_showing_the_PWC_antenna_array__49224_01_2771efc71a.jpg" width="800" height="533" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-168 </span>R&amp;S®PWC200 showing the <abbr class="eh-abbreviation" title="Plane wave converter" lang="en"><span class="eh-tooltip" title="Plane wave converter">PWC</span></abbr> antenna array mounted on a great-circle cut positioner.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1052_c955"></a><p>An implementation of the baseline test system for UE demodulation performance and channel state information reporting is sketched in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-169__Baseline_test_setup_for_UE_demodulation.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-169 &lt;\/span&gt;Baseline test setup for UE demodulation and CSI reporting performance.&quot;}]">Fig. 1-169</a> (see <span class="eh-hint" title="3GPP TR 38.810: Study on test methods for New Radio" lang="en"><span class="eh-tooltip" title="3GPP TR 38.810: Study on test methods for New Radio">TR 38.810</span></span> for details). Testing aims to verify the ability of a receiver to achieve a certain minimum throughput under various propagation conditions and involving different signal configurations (e.g. <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> layers and modulation schemes). In addition, the required ability to measure and report the experienced channel conditions is tested. Note that demodulation performance relates to the baseband capability of the end-user device receiver. The RF performance is verified throughout the RF testing steps as illustrated previously. Consequently, in 3GPP Release 15 demodulation performance and <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting do not require far field conditions. Testing in the radiated near field is possible. The minimum measurement distance is defined as <em>R</em> &gt; 0.62 √(D<sup class="eh-text__number">3</sup>⁄<sub>λ</sub>) (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1054" class="eh-link eh-link--page">1.5.1.3 Near field/far field, page 207</a> for details). In the baseline test system, one transmission point, i.e. a single angle of arrival from the emulated eNB, with a dual-polarized antenna is directed to the UE within an anechoic chamber.</p><p>The positioning system is constructed in such a way that the angle between the dual-polarized measurement antenna and the DUT has at least two axes of freedom. Fading conditions are modeled as a tapped delay line. Rank2 transmission, i.e. 2×2 <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr>, is required for some test scenarios and sufficient isolation between both polarizations must be ensured. In an initial step, the best beam is identified and locked for subsequent testing. For <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr> test scenarios, an additional LTE link antenna is used to provide a stable LTE signal. The system applies to DUTs with a device size of D ≤ 15 cm.</p>


<a id="page_1052_c956"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:54%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-169__Baseline_test_setup_for_UE_demodulation_a43969d1c9.png" width="800" height="431" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-169 </span>Baseline test setup for UE demodulation and <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting performance.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1052_c957"></a><p>Finally, support for radio resource management (RRM) must be tested, i.e. support for mobility scenarios like cell re-selection and handover. These RRM scenarios are particularly important since they also include testing of beamforming procedures (see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1042" class="eh-link eh-link--page">1.3.2 Support for beamforming in 5G NR, page 173</a>). There is a trade-off between highly realistic emulation of a real-world network implementation and the need for cost- and time-efficient testing. An implementation of the generalized baseline test setup as described in <span class="eh-hint" title="3GPP TR 38.810: Study on test methods for New Radio" lang="en"><span class="eh-tooltip" title="3GPP TR 38.810: Study on test methods for New Radio">TR 38.810</span></span> is sketched in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-170__Baseline_measurement_setup_for_RRM_characteristics.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-170 &lt;\/span&gt;Baseline measurement setup for RRM characteristics.&quot;}]">Fig. 1-170</a>. It establishes an OTA link between the UE and several emulated base station sources, whereas as of 3GPP Release 15, up to at most two simultaneously active 5G NR transmission and reception points are used. Note that in case of a <abbr class="eh-abbreviation" title="Direct far field" lang="en"><span class="eh-tooltip" title="Direct far field">DFF</span></abbr> and an <abbr class="eh-abbreviation" title="Indirect far field" lang="en"><span class="eh-tooltip" title="Indirect far field">IFF</span></abbr> measurement setup, the maximum number of simultaneously active 5G NR transmission and reception points is two and one, respectively.</p><p>To account for different spatial directions of cells and beams involved in RRM procedures, 3GPP has concluded to a set of relative angular relationship between the – simultaneously or not – active transmission points as follows: 30°, 60°, 90°, 120°, and 150°. Potential spatial RRM requirements are expected to use angular offsets from this set, which shall be supported by the measurement setup accordingly. Again, the positioning system is constructed in such a way that the angle between the dual-polarized measurement antenna and the DUT has at least two axes of freedom and fading is applied using a tapped delay line model. Such a positioning system might allow for support of scenarios with continuous change of angle of arrival during the test.</p>


<a id="page_1052_c958"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:51%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-170__Baseline_measurement_setup_for_RRM_characteristics_027d40eda9.png" width="800" height="404" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-170 </span>Baseline measurement setup for RRM characteristics.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1052_c959"></a><p>From the previous explanations, we conclude that FR2 over the air testing of end-user devices is a comprehensive task, requiring multiple test setups depending on the measurement application. For efficiency reasons, the number of test setups should be reduced as much as possible. In an R&amp;D environment, <abbr class="eh-abbreviation" title="Compact antenna test range" lang="en"><span class="eh-tooltip" title="Compact antenna test range">CATR</span></abbr> setups as illustrated in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-167__CATR_collimating_a_spherical_wavefront.jpg&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-167 &lt;\/span&gt;CATR collimating a spherical wavefront into a planar wavefront.&quot;}]">Fig. 1-167</a> allow high flexibility to operate with different test instruments. In a conformance environment, solutions integrating shielding and the right choice of test instruments are essential. As an example, <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-171__Test_setup_example.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-171 &lt;\/span&gt;Test setup example to enable RF, UE demodulation and CSI reporting, and RRM testing (IFF with one angle of arrival TX\/RX) in a single setup.&quot;}]">Fig. 1-171</a> illustrates a compact solution that enables <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr> RF, RRM (<abbr class="eh-abbreviation" title="Indirect far field" lang="en"><span class="eh-tooltip" title="Indirect far field">IFF</span></abbr> with single <span class="eh-text--nowrap">T</span><span class="eh-text--nowrap">X</span><span class="eh-text--nowrap">/RX)</span> and UE demodulation / <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting measurement applications in a single test setup.</p>


<a id="page_1052_c960"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:42%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-171__Test_setup_example_d9c442e236.png" width="800" height="332" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-171 </span>Test setup example to enable RF, UE demodulation and <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting, and RRM testing (<abbr class="eh-abbreviation" title="Indirect far field" lang="en"><span class="eh-tooltip" title="Indirect far field">IFF</span></abbr> with one angle of arrival TX/RX) in a single setup.</figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1053" data-prevpid="1052" data-nextpid="1054" data-chapter="1.5.1.2 Calibration" id="page_1053">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.5.1.2 Calibration</h4>
						
<a id="page_1053_c961"></a><p>Calibration is an essential task prior to executing a measurement in order to take into account the effects of cables, external power amplifiers, switches and/or any other part of the setup placed between the reference point of the test instrument (the RF connector) and the device under test.</p><p>For conducted measurements in previous technology generations, the task was comparatively straightforward since components such as cables have only a minor influence at frequencies below 6 GHz and more importantly, the changes are limited over temperature, time and/or bending. Although calibration was important, it used to be only an initial task with limited need for repetition.</p><p>For OTA testing at higher frequencies such as 28 GHz or 39 GHz, calibration is critical since, for example, cables are much more sensitive to environmental conditions. Not only the attenuation is significantly higher, but signal flatness becomes important when working with signals with high bandwidth (e.g. 100 MHz and greater). The influence of these system components must be compensated if absolute levels need to be set or measured. For example, a reference sensitivity test for an end-user device requires a specific signal level provided at the input of the device under test. The potential frequency-selective attenuation of a cable or the gain of a power amplifier used in the setup needs to be known in order to adapt the test instrument settings. Absolute values are generally applicable in case of RF (transmit and receive) and performance testing. In addition, RRM test cases define specific scenarios such as multiple cells or beams with defined power levels. Furthermore, the over-the-air test link obviously includes antennas in the test setup and the signal radiates in free space, which requires reference antennas with known gain to undergo a prior calibration process. In contrast, some protocol test cases that are focused solely on a correct message exchange may not require absolute values and thus calibration can be skipped.</p><p>This section covers the main calibration task to be performed before executing OTA measurements. </p>


<a id="page_1053_c962"></a><p class="eh-headline-207 ">
				System path loss calibration
			</p>


<a id="page_1053_c963"></a><p>Generally, the over-the-air test task involves either a vector network analyzer, which includes both a transmitter and a receiver, or separate signal generation and signal analysis instruments. Optionally, a chamber is used to shield the measurement setup from the outer world, minimize reflections and generally create a confined and stable test environment. If a vector network analyzer (<abbr class="eh-abbreviation" title="Vector network analyzer" lang="en"><span class="eh-tooltip" title="Vector network analyzer">VNA</span></abbr>) is used, the transmit signal is fed into a device under test (e.g. an end-user device, but this may also be a component, a chipset or simply an antenna) and the measured signal is fed back to the receive port of the <abbr class="eh-abbreviation" title="Vector network analyzer" lang="en"><span class="eh-tooltip" title="Vector network analyzer">VNA</span></abbr>.</p><p>A conical cut positioning system may be integrated into the chamber. The rotating turntable for the DUT and the rotating arm with the measurement antenna allows two axes of freedom for positioning. It is equally possible to use a transmit input signal from a signal generator and connect the measurement antenna to a spectrum and signal analyzer. A <abbr class="eh-abbreviation" title="Vector network analyzer" lang="en"><span class="eh-tooltip" title="Vector network analyzer">VNA</span></abbr> setup is often used if antenna characterization is the focus of testing since <abbr class="eh-abbreviation" title="Continuous wave" lang="en"><span class="eh-tooltip" title="Continuous wave">CW</span></abbr> signals are usually sufficient in this case. If modulated signals are to be used, signal generators and spectrum signal analyzers are required.</p><p>Vector network analyzer calibration routines are generally available with the test instrument. Therefore, we will focus our attention on OTA calibration methods involving separate signal source and signal analysis instruments. Such a basic test setup is illustrated in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-172__Basic_OTA_setup_including_a_shielding_chamber.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-172 &lt;\/span&gt;Basic OTA setup including a shielding chamber, a measurement antenna and either a vector signal analyzer or a signal generator and spectrum and signal analyzer pair.&quot;}]">Fig. 1-172</a>.</p>


<a id="page_1053_c964"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:53%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-172__Basic_OTA_setup_including_a_shielding_chamber_d6c05d0e4b.png" width="800" height="422" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-172 </span>Basic OTA setup including a shielding chamber, a measurement antenna and either a vector signal analyzer or a signal generator and spectrum and signal analyzer pair.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1053_c965"></a><p>Calibrating the system essentially requires moving the reference plane from the RF port of the signal generator to the input of the DUT (marked in green in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-172__Basic_OTA_setup_including_a_shielding_chamber.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-172 &lt;\/span&gt;Basic OTA setup including a shielding chamber, a measurement antenna and either a vector signal analyzer or a signal generator and spectrum and signal analyzer pair.&quot;}]">Fig. 1-172</a>) and moving the reference plane from the RF port of the spectrum and signal analyzer to the output of the DUT (marked in orange in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-172__Basic_OTA_setup_including_a_shielding_chamber.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-172 &lt;\/span&gt;Basic OTA setup including a shielding chamber, a measurement antenna and either a vector signal analyzer or a signal generator and spectrum and signal analyzer pair.&quot;}]">Fig. 1-172</a>). The calibration method differs slightly depending on whether the DUT operates in transmit mode or in receive mode. However, in both cases the DUT is essentially substituted by a known reference antenna during the calibration process. Note that the setup may be used in a reciprocal manner, i.e. the transmit signal is fed into the rotating antenna and received signals from the device under test are analyzed.</p><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-173__OTA_calibration_for_a_DUT.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-173 &lt;\/span&gt;OTA calibration for a DUT operating in TX (left) and RX (right) mode.&quot;}]">Fig. 1-173</a> illustrates the procedure for both cases. In the TX case, first the power is measured at the input to the DUT and appropriate corrections are applied to the signal generator. For amplitude corrections only, a simple power meter may be used. Amplitude and phase corrections require characterization of the relevant part of the test setup with a <abbr class="eh-abbreviation" title="Vector network analyzer" lang="en"><span class="eh-tooltip" title="Vector network analyzer">VNA</span></abbr>. With this correction, the reference plane is moved from the RF port of the signal generator to the input of the DUT. Second, a known reference antenna replaces the DUT. Third, a defined signal level is input to the reference antenna and the power is measured at the spectrum and signal analyzer. Taking into account the known reference antenna gain, this allows compensation of the free space loss attenuation over the air, the gain of the receive measurement antenna and the impact of the remaining cabling. Corresponding calibration data needs to be applied to the spectrum and signal analyzer, which effectively moves the reference plane from the RF port of the spectrum and signal analyzer to the output of the DUT (see left part in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-173__OTA_calibration_for_a_DUT.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-173 &lt;\/span&gt;OTA calibration for a DUT operating in TX (left) and RX (right) mode.&quot;}]">Fig. 1-173</a>). Both the signal generator and the spectrum and signal analyzer from Rohde &amp; Schwarz offer dedicated software options to include correction files for amplitude and phase. This allows signal generation and analysis in real time without the need for recalibration in case the frequency and/or power levels are modified during the test sequence.</p>


<a id="page_1053_c966"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:34%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-173__OTA_calibration_for_a_DUT_3615860ffc.png" width="800" height="267" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-173 </span>OTA calibration for a DUT operating in TX (left) and RX (right) mode.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1053_c967"></a><p>In the RX case, first a known reference antenna replaces the DUT. Second, the power is measured with the reference antenna and appropriate corrections are applied to the signal generator taking into account the known gain from the reference antenna. This allows compensation for the cabling to the transmit antenna, the gain of the transmit antenna and the free space loss attenuation over the air. This already moves the reference plane from the RF port of the signal generator to the input of the DUT. Again, a simple power meter is adequate in case of amplitude correction only, but for amplitude and phase compensation a <abbr class="eh-abbreviation" title="Vector network analyzer" lang="en"><span class="eh-tooltip" title="Vector network analyzer">VNA</span></abbr> is needed. Third, the signal generator transmits a reference signal and the spectrum and signal analyzer measures the received signal. Taking into account the known reference antenna gain, this allows compensation for the remaining cabling from the reference antenna to the spectrum and signal analyzer. Corresponding calibration data needs to be applied to the spectrum and signal analyzer, which effectively moves the reference plane from the RF port of the spectrum and signal analyzer to the output of the DUT (see right part in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-173__OTA_calibration_for_a_DUT.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-173 &lt;\/span&gt;OTA calibration for a DUT operating in TX (left) and RX (right) mode.&quot;}]">Fig. 1-173</a>).</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1054" data-prevpid="1053" data-nextpid="1055" data-chapter="1.5.1.3 Near field/far field" id="page_1054">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.5.1.3 Near field/far field</h4>
						
<a id="page_1054_c968"></a><p>Generally, 3GPP requires over-the-air testing to be executed under far field conditions for accurate absolute power measurements. In the far field region of an antenna, radiated power decreases as the square of distance. Furthermore, each part of the electromagnetic (EM) field is associated with a change in the other part, and the ratio of the electric and magnetic field intensities is simply the wave impedance. Often, the far field is also described as the region where the electromagnetic waves have become planar waves as illustrated in the upper part of <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-174__Near_field_and_far_field_regions.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-174 &lt;\/span&gt;Near field and far field regions for an electromagnetically long antenna (physically larger than one-half wavelength for the emitted radiation).&quot;}]">Fig. 1-174</a>.</p>


<a id="page_1054_c969"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:61%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-174__Near_field_and_far_field_regions_0824a18902.png" width="800" height="488" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-174 </span>Near field and far field regions for an electromagnetically long antenna (physically larger than one-half wavelength for the emitted radiation).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1054_c970"></a><p>In contrast, in the near field the relationship between E and H becomes very complex and all four polarization types can be present. Note that in the far field, electromagnetic waves are characterized by a single polarization type (horizontal, vertical, circular or elliptical). Furthermore, placing a measurement antenna in the reactive near field would lead to undefined results since any object in this region becomes part of the antenna system under test and interferes with the measurements.</p><p>The outer boundary of the reactive near field region is given by the formula in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-174__Near_field_and_far_field_regions.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-174 &lt;\/span&gt;Near field and far field regions for an electromagnetically long antenna (physically larger than one-half wavelength for the emitted radiation).&quot;}]">Fig. 1-174</a>, assuming the radiator dimension D is greater than <em>λ</em>/2. Measuring in the radiated near field region is possible in general if both the phase and magnitude are determined. Based on this information, the near field to far field (<span class="eh-text--nowrap">NF-FF</span>) transformation can be applied.</p><p>Since 3GPP requires far field measurements, the question is how to determine the far field distance. According to the literature, the far field is defined based on the Fraunhofer formula r &gt; 2<em>D</em><sup class="eh-text__number">2</sup>/<em>λ</em>.</p><p>Here, D corresponds to the diameter of the smallest sphere that encloses the radiating parts of the device under test and <em>λ</em> is the wavelength at the applied frequency. For an illustration of far field distances at 28 GHz and 100 GHz depending on the parameter D, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1054_c971\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table023\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;D (in cm)&lt;\/th&gt;&lt;th&gt;Frequency (in GHz)&lt;\/th&gt;&lt;th&gt;Near\/far boundary (in m)&lt;\/th&gt;&lt;th&gt;Path loss &lt;br&gt;(in dB)&lt;\/th&gt;&lt;th&gt;Frequency (in GHz)&lt;\/th&gt;&lt;th&gt;Near\/far boundary (in m)&lt;\/th&gt;&lt;th&gt;Path loss &lt;br&gt;(in dB)&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td rowspan=\&quot;6\&quot;&gt;28&lt;\/td&gt;&lt;td&gt;0.47&lt;\/td&gt;&lt;td&gt;54.8&lt;\/td&gt;&lt;td rowspan=\&quot;6\&quot;&gt;100&lt;\/td&gt;&lt;td&gt;1.67&lt;\/td&gt;&lt;td&gt;76.9&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;1.87&lt;\/td&gt;&lt;td&gt;66.8&lt;\/td&gt;&lt;td&gt;6.67&lt;\/td&gt;&lt;td&gt;88.9&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td&gt;4.20&lt;\/td&gt;&lt;td&gt;73.9&lt;\/td&gt;&lt;td&gt;15.01&lt;\/td&gt;&lt;td&gt;96&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;7.47&lt;\/td&gt;&lt;td&gt;78.9&lt;\/td&gt;&lt;td&gt;26.68&lt;\/td&gt;&lt;td&gt;101&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;25&lt;\/td&gt;&lt;td&gt;11.67&lt;\/td&gt;&lt;td&gt;82.7&lt;\/td&gt;&lt;td&gt;41.69&lt;\/td&gt;&lt;td&gt;105&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;30&lt;\/td&gt;&lt;td&gt;16.81&lt;\/td&gt;&lt;td&gt;85.9&lt;\/td&gt;&lt;td&gt;60.04&lt;\/td&gt;&lt;td&gt;105&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-175 &lt;\/span&gt;Fraunhofer far field distance for different D for a traditional far field anechoic chamber.&lt;\/p&gt;\n\n&quot;}">Fig. 1-175</a>.</p>


<a id="page_1054_c971"></a><div class="table-scroll"><table id="table023" class="eh-table eh-table--alternate"><colgroup><col><col><col><col><col><col><col></colgroup><thead><tr><th>D (in cm)</th><th>Frequency (in GHz)</th><th>Near/far boundary (in m)</th><th>Path loss <br>(in dB)</th><th>Frequency (in GHz)</th><th>Near/far boundary (in m)</th><th>Path loss <br>(in dB)</th></tr></thead><tbody><tr><td>5</td><td rowspan="6">28</td><td>0.47</td><td>54.8</td><td rowspan="6">100</td><td>1.67</td><td>76.9</td></tr><tr><td>10</td><td>1.87</td><td>66.8</td><td>6.67</td><td>88.9</td></tr><tr><td>15</td><td>4.20</td><td>73.9</td><td>15.01</td><td>96</td></tr><tr><td>20</td><td>7.47</td><td>78.9</td><td>26.68</td><td>101</td></tr><tr><td>25</td><td>11.67</td><td>82.7</td><td>41.69</td><td>105</td></tr><tr><td>30</td><td>16.81</td><td>85.9</td><td>60.04</td><td>105</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-175 </span>Fraunhofer far field distance for different D for a traditional far field anechoic chamber.</p>


<a id="page_1054_c972"></a><p>The Fraunhofer formula can be seen as the safe method to determine the far field distance. However, considering the transition from radiating near field to far field with gradually increasing characteristics of far field rather than an abrupt boundary, this criterion may be overly conservative. Furthermore, the far field distance determines the required chamber size, which is a major complexity and cost factor that must be kept in mind.</p><p>Investigations have shown that measurements are possible at distances that are shorter than the far field according to Fraunhofer in particular if main beam testing is the focus. Two new expressions for far field distances based on assumptions for the maximum order of excited spherical harmonics are derived in <span class="eh-reference" title="Benoît Derat, 5G Antenna Characterization in the Far-Field, IEEE communications magazine, May 2018" lang="en"><span class="eh-tooltip" title="Benoît Derat, 5G Antenna Characterization in the Far-Field, IEEE communications magazine, May 2018">[Ref. 21]</span></span>. The resulting far field distance according to these expressions is on the order of 30 % compared with the Fraunhofer distance. The additional errors related to these much shorter distances are discussed in <span class="eh-reference" title="Benoît Derat, 5G Antenna Characterization in the Far-Field, IEEE communications magazine, May 2018" lang="en"><span class="eh-tooltip" title="Benoît Derat, 5G Antenna Characterization in the Far-Field, IEEE communications magazine, May 2018">[Ref. 21]</span></span>. Measurements performed in a compact anechoic chamber corroborate the findings.</p><p>The 3GPP technical report on NR test methods (see <span class="eh-hint" title="3GPP TR 38.810: Study on test methods for New Radio" lang="en"><span class="eh-tooltip" title="3GPP TR 38.810: Study on test methods for New Radio">TR 38.810</span></span> for details) also includes an experimental method to determine the far field distance based on path loss measurements. By measuring the path loss gradient over a certain distance, the near/far field boundary can be found because the path loss exponent is different in the near field and the far field.</p><p>The results from an experiment conducted on an LTE UE operated at 1.8 GHz are shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-176__Measurements_to_determine_the_minimum_..._.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-176 &lt;\/span&gt;Measurements to determine the minimum far field distance for an LTE UE operating at 1.8 GHz (see TR 38.810 for details).&lt;br&gt;&quot;}]">Fig. 1-176</a>. The minimum far field distance can be found at the regression intercept point. However, <span class="eh-hint" title="3GPP TR 38.810: Study on test methods for New Radio" lang="en"><span class="eh-tooltip" title="3GPP TR 38.810: Study on test methods for New Radio">TR 38.810</span></span> concludes that further work is required to determine whether this technique provides valid results for much higher frequencies and general UE types.</p>


<a id="page_1054_c973"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:65%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-176__Measurements_to_determine_the_minimum_...__f7202b5b46.png" width="800" height="514" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-176 </span>Measurements to determine the minimum far field distance for an LTE UE operating at 1.8 GHz (see <span class="eh-hint" title="3GPP TR 38.810: Study on test methods for New Radio" lang="en"><span class="eh-tooltip" title="3GPP TR 38.810: Study on test methods for New Radio">TR 38.810</span></span> for details).<br></figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1055" data-prevpid="1054" data-nextpid="1056" data-chapter="1.5.2 Signaling testing" id="page_1055">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.5.2 Signaling testing</h3>
						
<a id="page_1055_c974"></a><p>One of the main focuses for the 5G system is to provide support for multiple services as discussed in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1004" class="eh-link eh-link--page">1.1 Overall system overview, page 10</a>. Service requirements such as latency, reliability and throughput require optimum support from each individual layer as well as overall end-to-end optimization.</p><p>Like with previous cellular technologies on top of the verification of each protocol instance, application layer testing is required. We expect new players in the cellular ecosystem such as automotive or industrial companies to focus on specific key performance indicators (<abbr class="eh-abbreviation" title="Key performance indicator" lang="en"><span class="eh-tooltip" title="Key performance indicator">KPI</span></abbr>) for their service of interest. Examples include latency or reliability for <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> use cases and extreme mobility in case of <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr> for high-speed trains.</p><p>A general test setup example is illustrated in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-177__Example_of_an_NSA_FR1_signaling_test_setup.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-177 &lt;\/span&gt;Example of an NSA FR1 signaling test setup emulating LTE and 5G NR.&lt;br&gt;&quot;}]">Fig. 1-177</a>. The setup enables testing of LTE and 5G NR in order to emulate <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr> architecture deployments. In this FR1 example, the testing would be executed using RF connectors. For FR2 OTA setups, additional chamber solutions would be added as described in section <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1052" class="eh-link eh-link--page">1.5.1.1 Over-the-air testing, page 196</a>. </p><p>In the following chapters, we identify the main test topics to be addressed in order to match them with their associated service requirements.</p>


<a id="page_1055_c975"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:95%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-177__Example_of_an_NSA_FR1_signaling_test_setup_62bf2567c6.png" width="800" height="753" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-177 </span>Example of an <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr> FR1 signaling test setup emulating LTE and 5G NR.<br></figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1056" data-prevpid="1055" data-nextpid="1057" data-chapter="1.5.2.1 NR protocol testing" id="page_1056">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.5.2.1 NR protocol testing</h4>
						
<a id="page_1056_c976"></a><p>The NR layer 2 (<abbr class="eh-abbreviation" title="Layer 2 (data link layer)" lang="en"><span class="eh-tooltip" title="Layer 2 (data link layer)">L2</span></abbr>) protocol will consist of four layers as explained in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1012" class="eh-link eh-link--page">1.1.3 Access stratum protocol, page 21</a>. Signaling testing is required for all use cases similar to LTE. Examples include verification for connection establishment, connection reconfiguration, connection release or reestablishment, and paging. However, there are specifics in 5G NR that either will require the addition of certain new test cases or the modification of similar test cases known from LTE to cover this specific characteristic in 5G NR. In the following, we highlight a few of these specific aspects.</p><p>One special case in NR will involve testing of the reception of system broadcast information. In fact, the gNB uses a semistatic periodicity for broadcasting the minimum required system information (<abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>, SIB1). Other required system information (<abbr class="eh-abbreviation" title="Open system interconnection, Other system information" lang="en"><span class="eh-tooltip" title="Open system interconnection, Other system information">OSI</span></abbr>) is optionally present and may be broadcast periodically or on-demand. In the last case gNB can use dedicated signaling per UE (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-178__System_information_request_test_scenarios_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-178 &lt;\/span&gt;System information request test scenarios.&quot;}]">Fig. 1-178</a>). Testing aims to verify the flexibility to support different scenarios as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-178__System_information_request_test_scenarios_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-178 &lt;\/span&gt;System information request test scenarios.&quot;}]">Fig. 1-178</a>. For example, a small cell with few devices reduces the amount of static broadcasting information in favor of on-demand signaling for this low number of users. In contrast, a macro cell can justify occupying downlink resources for static broadcasting. For both cases, correct detection of broadcast information must be verified.</p>


<a id="page_1056_c977"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:36%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-178__System_information_request_test_scenarios_v4_7b34a6b310.png" width="800" height="288" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-178 </span>System information request test scenarios.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1056_c978"></a><p>Another specific of 5G NR is the newly introduced <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>_INACTIVE state. Here, it is required to test new procedures such as release and resume from inactive state, which also requires the recovery of access stratum (<abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr>) context. A typical use case involves a non-mobile UE or a UE with non-continuous but regular access to the same gNB. In this case, the UE context (e.g. number of bearers, security settings) does not change and connection establishment using the resume procedure from the inactive state requires less control plane latency compared with a UE that resumes from the idle state. Obviously, verification of this new <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>_INACTIVE state is important.</p><p>Another testing challenge will be the verification of scheduling processes especially for TDD mode in 5G NR. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1023" class="eh-link eh-link--page">1.2 Physical access fundamentals, page 46</a> explains the flexible 5G NR air interface and specifically the flexible TDD mode, which applies dynamic DL and UL slot configuration and different transmission intervals for <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. Configuration may be semistatic throughout the cell, but can also be dynamic and UE-specific. This flexibility is required to convey different parallel services such as <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> and MBB with contradictory requirements such as short latency and high data rate (large packet) transmission. Therefore, testing will cover multiple TDD configurations and scheduling multiple services based on different <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> processes.</p><p>The introduction of bandwidth parts requires an additional set of protocol test cases. The UE may be configured with up to four bandwidth parts. Although only one bandwidth part is active at a given time, switching between them is crucial in order to optimally satisfy different services supported by a single UE. The change to a different bandwidth part will cover the adoption of a different numerology. Semistatic reconfigurations, time based reconfiguration and changes based on <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> commands need to be verified.</p><p>5G NR enables the UE to require a grant-free UL grant (type 1 configured grant) for an extremely short <abbr class="eh-abbreviation" title="Round trip time" lang="en"><span class="eh-tooltip" title="Round trip time">RTT</span></abbr> (<abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr>) or a semi-persistent grant for long transmission (<abbr class="eh-abbreviation" title="Machine type communication, Measurement timing configuration" lang="en"><span class="eh-tooltip" title="Machine type communication, Measurement timing configuration">MTC</span></abbr>). In particular, the fast grant-free UL operation will require a new test case to make sure the <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> services perform accordingly.</p><p>With the newly introduced logical channel restrictions in the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer, the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> layer can restrict the mapping of a logical channel to a subset of the configured cells, numerologies and <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission durations only. Furthermore, it can control whether a logical channel utilizes the resources allocated by a type 1 configured grant. With such restrictions, it becomes possible to reserve, for instance, the numerology with the largest subcarrier spacing and/or shortest <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission duration only (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1083" class="eh-link eh-link--page">2.2.10 Data flow through 5G NR protocol layers, page 349</a> for <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> services).</p><p>The introduction of supplement channels is not new in 5G NR, but is a known concept that was already applied in LTE. However, it will play an important role in 5G NR since for FR2 deployments, a supplement channel in FR1 would in particular ensure sufficient coverage in the UL direction. Thus, a UE might require a supplementary uplink on lower frequencies as a secure fallback for an uplink frequency on a higher frequency which can ensure the reliability of services. Therefore, protocol verification for assigning supplement channels will play an important role.</p><p><abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> and <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> are core layers that enable reliability thanks to features such as split bearer on carrier aggregation and on dual connectivity and packet duplication. The UE and the network do not need to perform any retransmission for lost and defective packets in case the same packet can be received via the duplicate second carrier. </p><p>For the case of NR connected to <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr>, the new protocol layer <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> has been introduced. Clearly, a new protocol layer requires additional testing. For <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> in particular, it must be ensured that all <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows generated from the core network are routed and mapped to data bearers on the air interface with matching <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1057" data-prevpid="1056" data-nextpid="1058" data-chapter="1.5.2.2 Dual connectivity testing" id="page_1057">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.5.2.2 Dual connectivity testing</h4>
						
<a id="page_1057_c979"></a><p>Dual connectivity (<abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr>) was originally introduced in LTE to support heterogeneous network deployments, i.e. to support small cells within a macro cell area. <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> across both NR and LTE RATs enables incremental steps to deploy 5G NR in an established LTE network. Many operators favor the adoption of <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> for non-standalone (<abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr>) architectures to smooth the NR deployment. Testing dual connectivity is also one main focus of 3GPP standardization. The core functionality is specified in working groups RAN1, RAN2 and RAN3, whereas RAN4 defines the performance and RAN5 specifically defines the UE test cases. 3GPP decided to focus first on the most important network architecture options, which are <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr> option 3 and <abbr class="eh-abbreviation" title="Standalone" lang="en"><span class="eh-tooltip" title="Standalone">SA</span></abbr> option 2 (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1007" class="eh-link eh-link--page">1.1.2.1 Connectivity scenarios, page 13</a> for details).</p><p>Testing the establishment of an NR connection based on the information received via the EUTRA master node is required. The first combination will consider LTE with one or more carriers and NR operating in either FR1 or FR2 with a single carrier. In future releases, the test will eventually cover situations with multiple carriers. As explained in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1061" class="eh-link eh-link--page">2.1 Overall access procedure for NSA mode, page 219</a>, several testing scenarios must be considered for detection and measurement of <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> on NR carriers, which includes receiving the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> embedded in the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> while also receiving the system information from EUTRA.</p>


<a id="page_1057_c980"></a><div class="table-scroll"><table class="eh-table eh-table--alternate" id="table024"><colgroup><col><col><col><col><col></colgroup><thead><tr><th>Mobility</th><th>MCG</th><th>MCG split</th><th>SCG split</th><th>SCG</th></tr></thead><tbody><tr><td class="eh-table__td-bg--blue" style="border-top:1px solid #fff;border-left:1px solid #009bea;border-right:1px solid #fff">MCG</td><td>•</td><td>•</td><td>•</td><td style="border-right:0;">•</td></tr><tr><td class="eh-table__td-bg--blue" style="border-top:1px solid #fff;border-left:1px solid #009bea;border-right:1px solid #fff">MCG split</td><td style="background-color:#cdd4d7;border-top:1px solid #fff">&nbsp;</td><td>•</td><td>•</td><td style="border-right:0;">•</td></tr><tr><td class="eh-table__td-bg--blue" style="border-top:1px solid #fff;border-left:1px solid #009bea;border-right:1px solid #fff">SCG split</td><td style="background-color:#cdd4d7;border-top:1px solid #fff;border-right:1px solid #fff">&nbsp;</td><td style="background-color:#cdd4d7;border-top:1px solid #fff">&nbsp;</td><td>•</td><td style="border-right:0;">•</td></tr><tr><td class="eh-table__td-bg--blue" style="border-top:1px solid #fff;border-left:1px solid #009bea;border-right:1px solid #fff">SCG</td><td style="background-color:#cdd4d7;border-top:1px solid #fff;border-right:1px solid #fff">&nbsp;</td><td style="background-color:#cdd4d7;border-top:1px solid #fff">&nbsp;</td><td>•</td><td style="border-right:0;">•</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 1-179 </span>Bearer switching combinations.</p>


<a id="page_1057_c981"></a><p>Random access on NR requires the selection of proper random access resources depending on the measurement performed on the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>, which in case of beamforming necessitates the complex selection mechanism explained in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1061" class="eh-link eh-link--page">2.1 Overall access procedure for NSA mode, page 219</a> and in <span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span>. It is optionally required to establish an additional signaling bearer (SRB3) to communicate with the secondary node and reconfigure the <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> information.</p><p>Depending on the operator deployment decision, it is possible to use different bearers (i.e. <abbr class="eh-abbreviation" title="Master cell group" lang="en"><span class="eh-tooltip" title="Master cell group">MCG</span></abbr> bearer, <abbr class="eh-abbreviation" title="Secondary cell group" lang="en"><span class="eh-tooltip" title="Secondary cell group">SCG</span></abbr> bearer, split bearers). Switching among bearers is also possible as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1057_c980\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table eh-table--alternate\&quot; id=\&quot;table024\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Mobility&lt;\/th&gt;&lt;th&gt;MCG&lt;\/th&gt;&lt;th&gt;MCG split&lt;\/th&gt;&lt;th&gt;SCG split&lt;\/th&gt;&lt;th&gt;SCG&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=\&quot;eh-table__td-bg--blue\&quot; style=\&quot;border-top:1px solid #fff;border-left:1px solid #009bea;border-right:1px solid #fff\&quot;&gt;MCG&lt;\/td&gt;&lt;td&gt;\u2022&lt;\/td&gt;&lt;td&gt;\u2022&lt;\/td&gt;&lt;td&gt;\u2022&lt;\/td&gt;&lt;td style=\&quot;border-right:0;\&quot;&gt;\u2022&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td class=\&quot;eh-table__td-bg--blue\&quot; style=\&quot;border-top:1px solid #fff;border-left:1px solid #009bea;border-right:1px solid #fff\&quot;&gt;MCG split&lt;\/td&gt;&lt;td style=\&quot;background-color:#cdd4d7;border-top:1px solid #fff\&quot;&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;\u2022&lt;\/td&gt;&lt;td&gt;\u2022&lt;\/td&gt;&lt;td style=\&quot;border-right:0;\&quot;&gt;\u2022&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td class=\&quot;eh-table__td-bg--blue\&quot; style=\&quot;border-top:1px solid #fff;border-left:1px solid #009bea;border-right:1px solid #fff\&quot;&gt;SCG split&lt;\/td&gt;&lt;td style=\&quot;background-color:#cdd4d7;border-top:1px solid #fff;border-right:1px solid #fff\&quot;&gt;&amp;nbsp;&lt;\/td&gt;&lt;td style=\&quot;background-color:#cdd4d7;border-top:1px solid #fff\&quot;&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;\u2022&lt;\/td&gt;&lt;td style=\&quot;border-right:0;\&quot;&gt;\u2022&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td class=\&quot;eh-table__td-bg--blue\&quot; style=\&quot;border-top:1px solid #fff;border-left:1px solid #009bea;border-right:1px solid #fff\&quot;&gt;SCG&lt;\/td&gt;&lt;td style=\&quot;background-color:#cdd4d7;border-top:1px solid #fff;border-right:1px solid #fff\&quot;&gt;&amp;nbsp;&lt;\/td&gt;&lt;td style=\&quot;background-color:#cdd4d7;border-top:1px solid #fff\&quot;&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;\u2022&lt;\/td&gt;&lt;td style=\&quot;border-right:0;\&quot;&gt;\u2022&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-179 &lt;\/span&gt;Bearer switching combinations.&lt;\/p&gt;\n\n&quot;}">Fig. 1-179</a>. In the latter case, several procedures are required to reset and reestablish the protocol layer as explained in <span class="eh-hint" title="3GPP TS 37.340: NR; Multi-connectivity; Overall description; Stage-2" lang="en"><span class="eh-tooltip" title="3GPP TS 37.340: NR; Multi-connectivity; Overall description; Stage-2">TS 37.340</span></span> Annex A.</p><p>Multi-PDN will be required from the core network where they can be distributed between <abbr class="eh-abbreviation" title="Master node" lang="en"><span class="eh-tooltip" title="Master node">MN</span></abbr> and <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr>. Each PDN might convey several <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr>, which can be mapped to more <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>. Especially for FR2, operators might decide to have a topology with multiple small cells as secondary nodes and therefore test scenario to add and remove secondary node is expected. Here, it is also expected that LTE <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> and NR <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> are combined on a single stack and a test scenario for switching between NR and EUTRA <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> must be considered.</p>


<a id="page_1057_c982"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:64%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-180__Protocol_test_architecture_48c687c57d.png" width="800" height="506" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-180 </span>Protocol test architecture.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1057_c983"></a><p>In case of connectivity with the <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> core (i.e. option 5), testing is required on the <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> protocol layer along with new <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> signaling with <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>/<abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1058" data-prevpid="1057" data-nextpid="1059" data-chapter="1.5.2.3 Mobility testing" id="page_1058">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>1.5.2.3 Mobility testing</h4>
						
<a id="page_1058_c984"></a><p>The mobility test scenario will have a new topic in the form of beam mobility as discussed in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1087" class="eh-link eh-link--page">2.3.1 Beam mobility procedure, page 387</a>. For testing, the network emulation needs to perform beam sweeping to allow the UE to measure neighbor beams and report the results to the higher layer protocol. This is an important basic functionality to perform beam switching, detect beam failures and perform beam recovery. Measurement for beam mobility is a difficult configuration since it involves beam-based configuration, beam-based measurement with multiple <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> in a carrier and beam filtering.</p>


<a id="page_1058_c985"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:46%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-181__Mobility_overview_537601e9d5.png" width="800" height="362" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-181 </span>Mobility overview.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1058_c986"></a><p>Mobility test scenarios also include idle mode reselection, connected mode intra-RAT and inter-RAT. A special test case must consider inter-system handover in which the UE might move from LTE connected to <abbr class="eh-abbreviation" title="Evolved packet core" lang="en"><span class="eh-tooltip" title="Evolved packet core">EPC</span></abbr> to NR connected to <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr>. In addition, the 3GPP SA2 working group has defined the possibility of multiple UE registrations on both core networks (<span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span>).</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1059" data-prevpid="1058" data-nextpid="1060" data-chapter="1.5.3 Field testing" id="page_1059">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>1.5.3 Field testing</h3>
						
<a id="page_1059_c987"></a><p>Beside testing chip sets, user equipment and/or base stations in a lab environment, we would like to illustrate testing procedures that can be used to characterize a deployed network. There are many ways to verify the network performance as soon as a network is deployed. These include monitoring tools in the core or radio access network, benchmarking solutions (which primarily compare different networks deployed in the same area based on identical end-user devices and services) and drive testing (which is generally used to identify and resolve the root causes for critical performance in a specific cell area).</p><p>As has been mentioned several times throughout this work, 5G NR will be also deployed at cm-/mm-wave frequencies and apply beamforming techniques to overcome the increased path loss. Field testing is thus important to verify that the intended coverage is achieved in an operating network. In cellular networks, the coverage area is the geographic area where the base station and the end-user device can communicate. Coverage depends on multiple factors such as the environment (mountains, buildings, etc.), technology, radio frequency and most importantly for two-way telecommunications, the sensitivity and transmit efficiency including the maximum output power of the base station and the end-user device.</p><p>Coverage measurements usually comprise two aspects: First, the availability, i.e. the signal strength above a defined minimum threshold, of the downlink signal components (e.g. broadcast channels, synchronization signals or reference signals) in a geographical area that are required to allow the end-user device to synchronize with the base station and to obtain basic network information. For 5G NR, this basically involves the synchronization signal blocks that were described in detail in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1042" class="eh-link eh-link--page">1.3.2 Support for beamforming in 5G NR, page 173</a>. Second, there is the achieved service quality, e.g. a minimum data rate in case of mobile data services or a minimum speech quality in case of voice services, in a geographical area, which is required or defined.</p><p>The second aspect above requires a communications link that is established between the base station and the end-user device and in the general case, an interface to the end-user device and base station that allows extraction of either measured or achieved parameters such as the signal strength or data rate. The first aspect above can be measured using so-called network scanners, i.e. passive measurement devices that do not require an active communications link between the network scanner and the base station. Scanners do provide reference data for the measurements performed by the end-user device. For example, the <abbr class="eh-abbreviation" title="Signal-to-interference-plus-noise ratio" lang="en"><span class="eh-tooltip" title="Signal-to-interference-plus-noise ratio">SINR</span></abbr> measurement performed in the end-user device is a crucial measurement since it forms the basis for channel quality reporting to the network and determines the achievable throughput in case of a mobile broadband service. Similarly, <abbr class="eh-abbreviation" title="Reference signal received power" lang="en"><span class="eh-tooltip" title="Reference signal received power">RSRP</span></abbr> and RSRQ are important measurements based on known reference signals. They are performed in the end-user device and reported to the network. Scanner equipment provides the same measurements based on known always on signals such as the synchronization signal and <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> blocks (<abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>) without affecting network operation. It is highly recommended during trials as well as the initial network installation phase to use scanner measurements in addition to end-user device measurements/data. Since end-user devices may be in the prototype or precommercial stage, scanner data serve as an independent source of measurement results. Furthermore, scanners generally provide better sensitivity and more accurate results.</p><p>Rohde &amp; Schwarz offers a drive test measurement solution as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-182__Field_testing_setup.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-182 &lt;\/span&gt;Field testing setup for characterizing 5G NR deployed networks.&quot;}]">Fig. 1-182</a>. An ultra-compact scanner is used to provide measurements based on the SSBs. In case of FR1 deployments, the R&amp;S®TSME6 scanner is sufficient. The scanner is connected to the R&amp;S®ROMES drive test software (e.g. running on an external laptop) to display the results. As an alternative, the scanner and the R&amp;S®ROMES software can be provided as integrated solutions, i.e. the R&amp;S®TSMA6. In case of FR2 deployments, an additional downconverter (R&amp;S®TSME30DC) is used to downconvert the cm-wave frequency to an intermediate frequency of 3 GHz.</p>


<a id="page_1059_c988"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:42%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-182__Field_testing_setup_93c7b6ec20.png" width="800" height="333" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-182 </span>Field testing setup for characterizing 5G NR deployed networks.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1059_c989"></a><p>The scanner identifies the beam index of the SSBs and thus provides measurement results on a per beam basis.</p><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-183__Sample_screenshot_with_5G_NR_measurement_results__49013_23b.jpg&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-183 &lt;\/span&gt;Mobile network testing solution including sample screenshot with 5G NR measurement result from the field.&quot;}]">Fig. 1-183</a> shows a sample result. The power and <abbr class="eh-abbreviation" title="Signal-to-interference-plus-noise ratio" lang="en"><span class="eh-tooltip" title="Signal-to-interference-plus-noise ratio">SINR</span></abbr> measurements per beam are shown in the upper right part of the screenshot. Thanks to the GPS functionality provided with the scanner, measurement results can also be plotted on a map (left middle part of screenshot).</p>


<a id="page_1059_c990"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:70%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_1-183__Sample_screenshot_with_5G_NR_measurement_results__49013_23b_ccfe4bea73.jpg" width="800" height="557" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 1-183 </span>Mobile network testing solution including sample screenshot with 5G NR measurement result from the field.</figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1060" data-prevpid="1059" data-nextpid="1061" data-chapter="2 Procedures" id="page_1060">
			
					
						<div class="page-section__image parallax-container" style="background-image:url(&#39;/ebooksindex.php?eID=tx_securedownloads&amp;p=4&amp;u=0&amp;g=0&amp;t=1581839908&amp;hash=0362972be3167dc9401aff68a78aa4177f5f3847&amp;file=/fileadmin/templates/base/img/background/rohde-schwarz-kapitel-2.jpg&#39;);"></div>
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h1>2 Procedures</h1>
						


					</div>
				
		</section><section class="page-section eh-inview" data-pid="1061" data-prevpid="1060" data-nextpid="1062" data-chapter="2.1 Overall access procedure for NSA mode" id="page_1061">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h2>2.1 Overall access procedure for NSA mode</h2>
						
<a id="page_1061_c991"></a><p>Although 5G NR supports both non-standalone (<abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr>) and standalone (<abbr class="eh-abbreviation" title="Standalone" lang="en"><span class="eh-tooltip" title="Standalone">SA</span></abbr>) mode, this chapter will focus only on how a 5G NR device accesses the network with <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr> mode and specifically the <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> option. Since there cannot be a 5G connection without an LTE connection in place, the fundamentals of gaining access to LTE are reviewed and the changes with respect to <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr> mode are highlighted.</p><p>A review of the LTE access procedure is also helpful in understanding the access procedure for 5G NR and the similarities and in analyzing the differences. The information exchange between the LTE network and the UE is explained in this chapter. This control information enables the UE to carry out signal quality measurements on 5G NR signals before accessing the 5G NR radio access network (RAN). The details of the initial access procedure for 5G NR are explained, including a detailed look at the relevant physical layer signals and channels used during this procedure. Furthermore, we will consider the network side and see how the UE's connection to the 5G RAN is prepared by the LTE network.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1062" data-prevpid="1061" data-nextpid="1063" data-chapter="2.1.1 Gaining access to the LTE network" id="page_1062">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.1.1 Gaining access to the LTE network</h3>
						


					</div>
				
		</section><section class="page-section eh-inview" data-pid="1063" data-prevpid="1062" data-nextpid="1064" data-chapter="2.1.1.1 LTE cell search, selection and system information acquisition" id="page_1063">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.1.1.1 LTE cell search, selection and system information acquisition</h4>
						
<a id="page_1063_c992"></a><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-001__Gaining_access_to_the_LTE_network.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-1 &lt;\/span&gt;Gaining access to the LTE network.&quot;}]">Fig. 2-1</a> visualizes the steps for gaining access to the LTE network and highlights the part of the different steps that is relevant for 5G.</p>


<a id="page_1063_c993"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:28%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-001__Gaining_access_to_the_LTE_network_02ebe0d186.png" width="800" height="220" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-1 </span>Gaining access to the LTE network.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1063_c994"></a><p>As highlighted in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1006" class="eh-link eh-link--page">1.1.2 Overall 5G architecture, page 12</a>, non-standalone mode (specifically <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr>) requires an LTE connection as a an anchor for initial exchange of control and signaling information between the LTE serving network and the UE.</p><p>Therefore, any 5G NR capable UE that supports EUTRA-NR dual connectivity (EN <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr>; see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1007" class="eh-link eh-link--page">1.1.2.1 Connectivity scenarios, page 13</a>) performs the LTE cell search and selection procedure upon being switched on, followed by LTE system information acquisition and execution of the LTE initial access procedure to become fully registered on the LTE network.</p><p>The UE starts scanning the LTE frequency bands with a 100 kHz channel raster using the preferred EUTRA absolute radio frequency channel number (<abbr class="eh-abbreviation" title="EUTRA ARFCN" lang="en"><span class="eh-tooltip" title="EUTRA ARFCN">EARFCN</span></abbr>), determined by the information stored on the universal subscriber identity module (<abbr class="eh-abbreviation" title="UMTS subscriber identity module" lang="en"><span class="eh-tooltip" title="UMTS subscriber identity module">USIM</span></abbr>) on the univseral integrated circuit card (<abbr class="eh-abbreviation" title="Universal integrated circuit card" lang="en"><span class="eh-tooltip" title="Universal integrated circuit card">UICC</span></abbr>). It searches for the LTE primary and secondary synchronization signals (<abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr>, <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr>) to identify the physical cell identity (<abbr class="eh-abbreviation" title="Physical cell identity" lang="en"><span class="eh-tooltip" title="Physical cell identity">PCI</span></abbr>) of that particular radio cell. If the UE is not successful in finding the synchronization signals on this particular frequency band, it scans the other supported frequency bands and the preferred <abbr class="eh-abbreviation" title="EUTRA ARFCN" lang="en"><span class="eh-tooltip" title="EUTRA ARFCN">EARFCN</span></abbr> in a priority order specified on the <abbr class="eh-abbreviation" title="UMTS subscriber identity module" lang="en"><span class="eh-tooltip" title="UMTS subscriber identity module">USIM</span></abbr>.</p><p>For each detected cell, an <abbr class="eh-abbreviation" title="Received signal strength indicator" lang="en"><span class="eh-tooltip" title="Received signal strength indicator">RSSI</span></abbr> measurement is performed, the results are listed in order, and only for signals that are above an implementation-specific threshold is the next step performed (i.e. decoding of the <abbr class="eh-abbreviation" title="Physical cell identity" lang="en"><span class="eh-tooltip" title="Physical cell identity">PCI</span></abbr>). There are 504 cell identities overall that are defined for LTE. Due to the synchronization signal design and broadcasting of <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr>, <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr> twice per radio frame (every 5 ms), the UE becomes fully synchronized in frequency and time. <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> and <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr> are transmitted on the inner six resource blocks (<abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr> = 6 · 12 subcarrier · 15 kHz = 1.08 MHz) surrounding the center frequency (= <abbr class="eh-abbreviation" title="EUTRA ARFCN" lang="en"><span class="eh-tooltip" title="EUTRA ARFCN">EARFCN</span></abbr>). By successfully detecting both signals, the UE also knows about the cyclic prefix length and whether the cell supports frequency division duplex (FDD) or time division duplex (TDD) mode since mapping of <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> and <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr> in the time domain is different for FDD and TDD operation.</p><p>The next step is to decode the physical broadcast channel (<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>) that carries essential system information while broadcasting the master information block (<abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>). The <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> provides the following information:</p><ul class="eh-list eh-list--line"><li>Downlink system bandwidth</li><li>Configuration of the physical hybrid <abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr> indicator channel (<abbr class="eh-abbreviation" title="Physical hybrid indicator channel" lang="en"><span class="eh-tooltip" title="Physical hybrid indicator channel">PHICH</span></abbr>)</li><li>Repetitions of system information block (<abbr class="eh-abbreviation" title="System information block" lang="en"><span class="eh-tooltip" title="System information block">SIB</span></abbr>) type 1 (only relevant for enhanced machine-type communications (<abbr class="eh-abbreviation" title="Enhanced machine type communication" lang="en"><span class="eh-tooltip" title="Enhanced machine type communication">eMTC</span></abbr>) category M1 devices)</li><li>Eight most significant bits (<abbr class="eh-abbreviation" title="Most significant bit" lang="en"><span class="eh-tooltip" title="Most significant bit">MSB</span></abbr>) of the system frame number (<abbr class="eh-abbreviation" title="System frame number" lang="en"><span class="eh-tooltip" title="System frame number">SFN</span></abbr>)</li></ul><p>The other two bits for the <abbr class="eh-abbreviation" title="System frame number" lang="en"><span class="eh-tooltip" title="System frame number">SFN</span></abbr> are derived from the transmission periodicity of the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> (80 ms).</p><p>With the aid of the <abbr class="eh-abbreviation" title="System frame number" lang="en"><span class="eh-tooltip" title="System frame number">SFN</span></abbr>, the UE can now determine in which radio frames (<abbr class="eh-abbreviation" title="System frame number" lang="en"><span class="eh-tooltip" title="System frame number">SFN</span></abbr> mod 8 = 0) to look for system information block type 1 (SIB1) which has a general periodicity of 80 ms and repetitions are made within this 80 ms interval. The repetitions always occur in subframe #5 of radio frames satisfying <span class="eh-text--nowrap">SFN mod 2 = 0</span>. SIB1 provides additional system information that helps to determine if the UE is allowed to access this radio cell.</p><p>Furthermore, additional network parameters allow the UE to calculate the cell selection criterion S. This enables the UE to determine if the received signal quality is above two thresholds (S<sub>rxle</sub><sub>v</sub>, S<sub>qual</sub> &gt; 0) that allow the UE to camp on this cell or if it should start the cell re-selection process immediately. A full list of the parameters that are broadcast in SIB1 can be found in <span class="eh-hint" title="3GPP TS 36.331: E-UTRA; Radio Resource Control (RRC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 36.331: E-UTRA; Radio Resource Control (RRC) protocol specification">TS 36.331</span></span>, section 6.2.2.</p><p>SIB1 plays an important role in acquiring all remaining system information, although until now, there are 25 different SIBs in LTE in addition to <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> and SIB1. Depending on their transmission periodicity, they are grouped into so-called system information (<abbr class="eh-abbreviation" title="System information" lang="en"><span class="eh-tooltip" title="System information">SI</span></abbr>) messages. <abbr class="eh-abbreviation" title="System information" lang="en"><span class="eh-tooltip" title="System information">SI</span></abbr> messages are transmitted in periodic time windows where each <abbr class="eh-abbreviation" title="System information" lang="en"><span class="eh-tooltip" title="System information">SI</span></abbr> message is associated with one <abbr class="eh-abbreviation" title="System information" lang="en"><span class="eh-tooltip" title="System information">SI</span></abbr> window. The window length (1 ms to 40 ms) is configurable but common for all <abbr class="eh-abbreviation" title="System information" lang="en"><span class="eh-tooltip" title="System information">SI</span></abbr> messages. An <abbr class="eh-abbreviation" title="System information" lang="en"><span class="eh-tooltip" title="System information">SI</span></abbr> message can now be transmitted multiple times within almost every subframe within this window, but there are a few exceptions for the subframes that cannot be used (see <span class="eh-hint" title="3GPP TS 36.331: E-UTRA; Radio Resource Control (RRC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 36.331: E-UTRA; Radio Resource Control (RRC) protocol specification">TS 36.331</span></span> for details). Any legacy LTE UE must always acquire <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>, SIB1 (which is periodically broadcast) and SIB2 (which is part of every <abbr class="eh-abbreviation" title="System information" lang="en"><span class="eh-tooltip" title="System information">SI</span></abbr> message and always the first entry in such a message). The reason is its importance in providing all relevant information and parameters to perform the initial LTE access procedure to fully synchronize on the downlink and uplink and register on the LTE network.</p><p>To find the physical resource blocks (<abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr>) that carry an <abbr class="eh-abbreviation" title="System information" lang="en"><span class="eh-tooltip" title="System information">SI</span></abbr> message, the UE has to monitor the physical downlink control channel (<abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>) for the system information radio network temporary identifier (<abbr class="eh-abbreviation" title="System information radio network temporary identifier" lang="en"><span class="eh-tooltip" title="System information radio network temporary identifier">SI-RNTI</span></abbr>). Depending on the channel bandwidth, the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> occupies up to three OFDM symbols in a subframe if the system bandwidth is 5 MHz, 10 MHz, 15 MHz or 20 MHz. The number of symbols is indicated by the physical control format indicator channel (PCFICH) that is always transmitted in the very first OFDM symbol of a subframe. By identifying the <abbr class="eh-abbreviation" title="System information radio network temporary identifier" lang="en"><span class="eh-tooltip" title="System information radio network temporary identifier">SI-RNTI</span></abbr> on the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>, the UE has to decode the associated downlink control indicator (<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>) format that provides relevant information about e.g. the number of resource blocks used on the physical downlink shared channel (<abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>) carrying system information messages and the used modulation and coding scheme (see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076_c1161" class="eh-link eh-link--page eh-link--ce">Downlink control information (DCI), page 302</a>).</p><p>By demodulating the relevant PRBs on the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> and decoding the transmitted content, the UE gains information about the transmitted <abbr class="eh-abbreviation" title="System information" lang="en"><span class="eh-tooltip" title="System information">SI</span></abbr> message and thus all information provided by SIB2. This includes, among other things, all necessary details on how to use, for example, the physical random access channel (<abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr>) and the signal used to transmit on this physical channel. With this information, the UE can perform the initial random access procedure.</p><p>At this point, it is important to highlight that besides all the required information to access the LTE network, a new information element has been added to SIB2 with 3GPP Release 15 that is of significance for <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> mode. It is known as <em>PLMN-Info-List-r15</em>. For each listed network, an <em>upperLayerIndication-r15</em><em></em>is set to “true” in case if that network supports <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr>. For an LTE UE, this information element is not relevant. However, for a 5G NR capable device it will indicate that this radio cell belonging to this network is <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> capable. It triggers additional actions by the UE once it starts registering with the LTE network. In other words, the LTE network broadcasts with SIB2 that it is <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> capable and thus whether or not it supports <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr> mode for 5G NR.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1064" data-prevpid="1063" data-nextpid="1065" data-chapter="2.1.1.2 LTE initial access procedure" id="page_1064">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.1.1.2 LTE initial access procedure</h4>
						
<a id="page_1064_c995"></a><p>After cell search, cell selection and system information acquisition, the end-user device is ready to start the initial access to the LTE network using the random access procedure (<abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr>). LTE defines two forms of random access: contention-based and contention-free. Contention-based means that there is an inherent risk of collisions between devices attempting to access the network, whereas contention-free is structured to avoid collisions. In LTE, the contention-free random access procedure is used e.g. to synchronize to the target cell when performing a handover. The contention-based procedure is typically intended for initial access, connection setup or connection reestablishment, and it is useful to review this in order to compare to this procedure in 5G NR.</p>


<a id="page_1064_c996"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:51%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-002__LTE_random_access_procedure_2ce6896a88.png" width="800" height="406" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-2 </span>LTE random access procedure (contention-based).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1064_c997"></a><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-002__LTE_random_access_procedure.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-2 &lt;\/span&gt;LTE random access procedure (contention-based).&quot;}]">Fig. 2-2</a> shows the required steps for the contention-based random access procedure in LTE. Step 1, or simply transmitting “message 1” (Msg1), is the UE randomly selecting a preamble and transmitting it on the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr>. Since the preamble is randomly chosen, there is a possibility that another UE selects the same preamble, which could lead to a collision at the eNB receiver. The preamble itself consists of a Zadoff-Chu sequence and cyclic prefix. There are four different formats defined for FDD mode and one additional format for TDD mode.</p><p>Each format is defined by the length of the <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> and the length of the sequence. These formats have been designed to support different cell sizes, link budget and load situations. However, the base sequence length for FDD has been determined to be 800 µs.</p><p>Larger cell size support is achieved by repeating the transmission of the sequence in consecutive subframes. Thus, from a time domain perspective in FDD, one, two or up to three subframes can be occupied by the preamble transmission, depending on the chosen preamble format. The base sequence length of 800 µs leads to a preamble subcarrier spacing of 1.25 kHz. In TDD, the sequence is shorter (4096 · <em>T</em><sub>Sample</sub>) and thus the related subcarrier spacing is 7.5 kHz. In total, there are 64 preambles a UE may select from, but in a real deployment scenario some of the preambles are reserved for the contention-free random access procedure.</p><p>The information about how many contention-based signatures (4, 8, 12, …, 56, 60, 64) are available in a particular radio cell is transmitted in SIB2 and this also indicates how the actual preamble has to be generated by the UE. The preamble itself is a Zadoff-Chu sequence, i.e. a signal that provides excellent auto correlation behavior. Preamble generation is based on a root index and the 64 different preambles are generated by cyclic shifts of this base sequence that is in total 839 samples long (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-070__PRACH_sequence_generation.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-70 &lt;\/span&gt;PRACH sequence generation.&quot;}]">Fig. 1-70, page 93</a>). The root index and additional information having an impact on the cyclic shift of the base sequence are also part of SIB2. The UE uses all this information coming from SIB2 to generate all 64 possible preambles and then selects one of them randomly based on a defined maximum range, for example, one between 1 and 56. From a frequency domain perspective, the sequence is mapped to 839 subcarriers including 12 and 13 surrounding subcarriers used as a guard band. This leads to a total bandwidth of 1.08 MHz (i.e. six PRBs). These six resource blocks can now be located anywhere within the available uplink bandwidth. The frequency offset given as the number of PRBs that defines where these six PRBs are located, is also provided by the SIB2.</p><p>Given knowledge of how to generate the sequence, the selection of the preamble and where to transmit it in the frequency domain, it is important to know which of the formats to use and in which subframe to start the transmission of the preamble. Therefore, SIB2 contains an information element known as the <em>prach-ConfigIndex</em> which provides one of 64 different indexes. Each index is related to a specific format, which <abbr class="eh-abbreviation" title="System frame number" lang="en"><span class="eh-tooltip" title="System frame number">SFN</span></abbr> (even numbered or any number) can be used for transmission and which subframe within that radio frame can be used for the transmission of the preamble.</p><p>The preamble transmission power is another important factor for the initial attach, and is also affected by SIB2. The power is chosen by taking the smaller of two values: the maximum allowed transmit power in the cell (P<sub>cmax</sub>, typically +23 dBm), and the receiver power that the eNB expects (preamble received target power) compensated by the estimated path loss. P<sub>cmax</sub> is known to the UE by decoding SIB1, but the path loss must be calculated in order to compensate the preamble received target power. This is done using a signal quality measurement known as reference signal received power (<abbr class="eh-abbreviation" title="Reference signal received power" lang="en"><span class="eh-tooltip" title="Reference signal received power">RSRP</span></abbr>) that is based on measuring cell-specific reference signals which occur periodically in the LTE downlink in well defined time and frequency locations. The original transmit power level is sent as part of SIB2 and thus the UE can determine the path loss by comparing this value to the measured power.</p><p>The preamble received target power is the sum of the preamble initial received target power, part of SIB2, and delta preamble value. The delta value (0 dB, –3 dB or 8 dB) depends on the used preamble format. This summation changes and adds to additional components in case the preamble needs to be transmitted. This happens if the UE does not receive a random access response (<abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>) from the base station in a given time window (defined in SIB2). If there is a retransmission, the power is increased by a power ramping step (0 dB, 2 dB, 4 dB or 6 dB) that is multiplied with the preamble transmission counter. That means the transmission power for the preamble increases with every retransmission. Of course, there is a maximum number of retransmissions (3, 4, 5, 6, 7, 8, 10, 20, 50, 100, 200), followed by a wait time, both part of SIB2.</p><p>One important aspect of the random access procedure is the so-called random access radio network temporary identifier (<abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr>). It is calculated by the UE and base station to simply identify the transmission of the preamble on the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> by the UE and to schedule corresponding resources on the downlink that carry the network's response. As every information of the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> preamble is based on its physical layer characteristic, so is the <abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr>. It is calculated based on an equation considering the time and frequency resources it is transmitted in. For LTE FDD, it is very much the subframe n where the preamble is transmitted plus 1 (<abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr> = n + 1) and therefore <abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr> in FDD can range from 1 to 10. For LTE TDD mode, it adds a frequency domain aspect and <abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr> can range from 1 to 60.</p><p>Assuming the eNB has detected the preamble transmitted by the UE, it prepares “message 2” (Msg2) also known as the random access response (<abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>) to be sent on the downlink.</p><p>Equivalent to the transmission of system information, a specific <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format scrambled with the device's <abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr> is used on the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> to schedule the PRBs on the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> that carry the <abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>. From a base station point of view, multiple devices may have to be addressed with an <abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>. Therefore, a medium access control (<abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr>) packet data unit (<abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>) at the eNB could consist of multiple random access responses, each of which addresses one particular UE. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-003__Message_2_-_random_access_response.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-3 &lt;\/span&gt;Message 2 (Msg2) \u2013 random access response (RAR) \u2013 within a MAC PDU.&quot;}]">Fig. 2-3</a> illustrates such a <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>.</p>


<a id="page_1064_c998"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:43%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-003__Message_2_-_random_access_response_0f01ca7395.png" width="800" height="344" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-3 </span>Message 2 (Msg2) – random access response (<abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>) – within a <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1064_c999"></a><p>First, a timing advance (<abbr class="eh-abbreviation" title="Timing advance or tracking area" lang="en"><span class="eh-tooltip" title="Timing advance or tracking area">TA</span></abbr>) command is sent that forces the UE to advance its uplink transmission to compensate for the propagation time and thus ensure that all transmissions from all UEs in the cell arrive at the eNB receiver at the same time. In addition, the base station assigns an identity to the UE (temporary cellular <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr>) that becomes permanent after the successful execution of the random access procedure.</p><p>Upon reception of the random access response message, the UE is now able to send “message 3” (Msg3) using the information provided with the uplink scheduling grant, such as the modulation and coding scheme and allocated frequency resources on the physical uplink shared channel (<abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>). Message 3 (Msg3) carries the <em>RRCConnectionRequest</em> message, generated by the radio resource control (<abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>) layer (or layer 3) and is the first UE-specific signaling between the UE and the base station and network. The message contains two parameters: the UE's identity and the cause for the connection request.</p><p>If the UE was already registered with the LTE network, the identity would be the <abbr class="eh-abbreviation" title="Service architecture evolution" lang="en"><span class="eh-tooltip" title="Service architecture evolution">SAE</span></abbr> temporary mobile subscriber identity (S-TMSI, 40 bits). During initial access, this S-TMSI is a random, 40-bit number, selected by the UE. The cause for the connection request would be set in the case of initial access to <em>mo-Signaling</em>, where “mo” stands for mobile originated. Other reasons for the establishment cause could be mt-signaling (mobile terminated) or emergency call. <span class="eh-hint" title="3GPP TS 24.301: Non-Access Stratum (NAS) protocol for Evolved Packet System (EPS)" lang="en"><span class="eh-tooltip" title="3GPP TS 24.301: Non-Access Stratum (NAS) protocol for Evolved Packet System (EPS)">TS 24.301</span></span> provides a detailed overview of the mapping for non-access stratum (<abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr>) procedures to each establishment cause.</p><p>At this point, it is worthwhile to discuss the higher layer protocol and operations. The <em>RRCConnectionRequest</em> message is sent on the common control channel (<abbr class="eh-abbreviation" title="Common control channel" lang="en"><span class="eh-tooltip" title="Common control channel">CCCH</span></abbr>, logical channel) using signaling radio bearer 0 (SRB0). The bearer is transmitted using the <abbr class="eh-abbreviation" title="Uplink shared channel" lang="en"><span class="eh-tooltip" title="Uplink shared channel">UL-SCH</span></abbr> transport channel that is finally mapped on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. Details on the channel concept in LTE and its mapping principle can be found in <span class="eh-hint" title="3GPP TS 36.212: E-UTRA; Multiplexing and channel coding" lang="en"><span class="eh-tooltip" title="3GPP TS 36.212: E-UTRA; Multiplexing and channel coding">TS 36.212</span></span>, <span class="eh-hint" title="3GPP TS 36.321: E-UTRA; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 36.321: E-UTRA; Medium Access Control (MAC) protocol specification">TS 36.321</span></span> and <span class="eh-reference" title="Christina Geßner, Long Term Evolution – a concise introduction into LTE and its measurement requirements,Technical book edited by Rohde &amp; Schwarz, 2011" lang="en"><span class="eh-tooltip" title="Christina Geßner, Long Term Evolution – a concise introduction into LTE and its measurement requirements,Technical book edited by Rohde &amp; Schwarz, 2011">[Ref. 30]</span></span>. A bearer is a logical concept, explained from an LTE perspective in <span class="eh-hint" title="3GPP TS 36.331: E-UTRA; Radio Resource Control (RRC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 36.331: E-UTRA; Radio Resource Control (RRC) protocol specification">TS 36.331</span></span>. A bearer can be thought of as a single lane on a multi-lane highway. Each lane has specific attributes, such as what type of vehicles can drive in this lane (cars, 18-wheelers, HOV, etc) and what the speed limit is. For a bearer, these attributes are basically a set of network parameters that define how information (data packets) should be treated when it is traveling over the network. Bearers are used either to transport signaling information between the base station and the end-user device or between the end-user device and the core network. There are three types of signaling radio bearers (SRB0, SRB1, SRB2) for this purpose, with each bearer carrying different <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> messages and having different priorities and security settings. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1064_c1000\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table025\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Radio bearer type&lt;\/th&gt;&lt;th&gt;Channel&lt;\/th&gt;&lt;th&gt;Direc-&lt;br&gt;tion&lt;\/th&gt;&lt;th&gt;RRC message&lt;\/th&gt;&lt;th&gt;Priority&lt;\/th&gt;&lt;th&gt;PDCP&lt;\/th&gt;&lt;th&gt;RLC &lt;br&gt;mode&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Signaling radio bearer 0 (SRB0)&lt;\/td&gt;&lt;td&gt;CCCH&lt;\/td&gt;&lt;td&gt;Down-&lt;br&gt;link&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;Uplink&lt;\/td&gt;&lt;td&gt;RRCConnectionSetup, RRCConnectionReject, RRCConnectionReestablishment, &lt;br&gt;RRCConnectionReestablishment-Reject&lt;br&gt;&lt;br&gt;RRCConnectionRequest, RRCConnectionReestablishmentRequest&lt;\/td&gt;&lt;td&gt;Takes priority over SRB1, SRB2&lt;\/td&gt;&lt;td&gt;No ciphering or integrity protection&lt;\/td&gt;&lt;td&gt;Trans-&lt;br&gt;parent&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Signaling radio bearer 1 (SRB1)&lt;\/td&gt;&lt;td&gt;DCCH&lt;\/td&gt;&lt;td&gt;Down-&lt;br&gt;link&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;Uplink&lt;\/td&gt;&lt;td&gt;RRCConnectionReconfiguration, &lt;br&gt;RRCConnectionRelease, security mode command, UE capability enquiry, downlink information transfer (if no SRB2), mobility from EUTRA command, handover from EUTRA preparation request, CS fallback parameter response, CDMA2000 counter check&lt;br&gt;&lt;br&gt;RRCConnectionSetupComplete, security mode complete, security mode failure, RRCConnectionReconfigurationComplete, RRCConnectionReestablishment&lt;br&gt;Complete, measurement report, UE capability information, uplink information transfer (if no SRB2), uplink handover preparation transfer, CS fallback parameter request, CDMA2000 counter check response&lt;\/td&gt;&lt;td&gt;Takes priority over SRB2&lt;\/td&gt;&lt;td&gt;Ciphered and integrity protected&lt;\/td&gt;&lt;td&gt;Ack\u00adnow-&lt;br&gt;ledged&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Signaling radio bearer 2 (SRB2)&lt;\/td&gt;&lt;td&gt;DCCH&lt;\/td&gt;&lt;td&gt;Down-&lt;br&gt;link&lt;br&gt;&lt;br&gt;Uplink&lt;\/td&gt;&lt;td&gt;Downlink information transfer &lt;br&gt;(i.e. encapsulated NAS message)&lt;br&gt;&lt;br&gt;Uplink information transfer &lt;br&gt;(i.e., encapsulated NAS message)&lt;\/td&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-4 &lt;\/span&gt;Overview of signaling radio bearer (SRB) types in LTE.&lt;\/p&gt;\n\n&quot;}">Fig. 2-4</a> provides an overview of the SRBs in LTE. </p><p>In 5G NR, a fourth type of signaling radio bearer is added: SRB3.</p>


<a id="page_1064_c1000"></a><div class="table-scroll"><table id="table025" class="eh-table eh-table--alternate"><colgroup><col><col><col><col><col><col><col></colgroup><thead><tr><th>Radio bearer type</th><th>Channel</th><th>Direc-<br>tion</th><th>RRC message</th><th>Priority</th><th>PDCP</th><th>RLC <br>mode</th></tr></thead><tbody><tr><td>Signaling radio bearer 0 (SRB0)</td><td>CCCH</td><td>Down-<br>link<br><br><br><br>Uplink</td><td>RRCConnectionSetup, RRCConnectionReject, RRCConnectionReestablishment, <br>RRCConnectionReestablishment-Reject<br><br>RRCConnectionRequest, RRCConnectionReestablishmentRequest</td><td>Takes priority over SRB1, SRB2</td><td>No ciphering or integrity protection</td><td>Trans-<br>parent</td></tr><tr><td>Signaling radio bearer 1 (SRB1)</td><td>DCCH</td><td>Down-<br>link<br><br><br><br><br><br><br><br>Uplink</td><td>RRCConnectionReconfiguration, <br>RRCConnectionRelease, security mode command, UE capability enquiry, downlink information transfer (if no SRB2), mobility from EUTRA command, handover from EUTRA preparation request, CS fallback parameter response, CDMA2000 counter check<br><br>RRCConnectionSetupComplete, security mode complete, security mode failure, RRCConnectionReconfigurationComplete, RRCConnectionReestablishment<br>Complete, measurement report, UE capability information, uplink information transfer (if no SRB2), uplink handover preparation transfer, CS fallback parameter request, CDMA2000 counter check response</td><td>Takes priority over SRB2</td><td>Ciphered and integrity protected</td><td>Ack­now-<br>ledged</td></tr><tr><td>Signaling radio bearer 2 (SRB2)</td><td>DCCH</td><td>Down-<br>link<br><br>Uplink</td><td>Downlink information transfer <br>(i.e. encapsulated NAS message)<br><br>Uplink information transfer <br>(i.e., encapsulated NAS message)</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-4 </span>Overview of signaling radio bearer (<abbr class="eh-abbreviation" title="Signaling radio bearer" lang="en"><span class="eh-tooltip" title="Signaling radio bearer">SRB</span></abbr>) types in LTE.</p>


<a id="page_1064_c1001"></a><p>An LTE device can handle these three SRBs and a maximum of eight data radio bearers (DRBs) since it can be connected to different gateways and access point names (APNs). The <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr> carries the user plane data (<abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> packets) over the air interface. Typically, there are four major attributes related to a data radio bearer: guaranteed or non-guaranteed bit rate, priority, acceptable delay budget and a maximum acceptable packet loss rate. Depending on the type of service (i.e. voice, video streaming, etc.), a quality of service (<abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr>) class identifier (<abbr class="eh-abbreviation" title="QoS class identifier" lang="en"><span class="eh-tooltip" title="QoS class identifier">QCI</span></abbr>) is assigned to the <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr> by the network. Today, there are 17 different QCIs defined for LTE (<span class="eh-hint" title="3GPP TS 23.203: Policy and charging control atchitecture" lang="en"><span class="eh-tooltip" title="3GPP TS 23.203: Policy and charging control atchitecture">TS 23.203</span></span>, Table 6.1.7-A). Quality of service (flow) plays an important role in 5G NR and is thus discussed in more detail in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1020" class="eh-link eh-link--page">1.1.5 Quality of service, page 40</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1075" class="eh-link eh-link--page">2.2.2 End to end quality of service, page 285</a>.</p><p>After the UE has sent the <em>RRCConnectionRequest</em> to the network, it starts two timers: T300 and the contention resolution timer. T300 starts at the transmission of <em>RRCConnectionRequest</em> and ends at the receiption of <em>RRCConnectionSetup</em>. The contention resolution timer defines the subframes, the UE is required to monitor the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> after Msg3 is transmitted. The value for T300 is broadcast in SIB2 and can assume values of 100 ms, 200 ms, 300 ms, 400 ms, 600 ms, 1000 ms, 1500 ms and 2000 ms. If the timer expires, the UE would reset the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr>, collect several important pieces of information such as how many preambles were sent, location information and so on, inform the higher layers about the failure of the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection setup procedure, and then restart the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> procedure until the maximum number of attempts has been reached.</p><p>From a physical layer point of view, the eNB would acknowledge the reception of the <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr> that ultimately carries the <em>RRCConnectionRequest</em> message with an ACKnowledgement sent on the physical hybrid <abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr> indicator channel (<abbr class="eh-abbreviation" title="Physical hybrid indicator channel" lang="en"><span class="eh-tooltip" title="Physical hybrid indicator channel">PHICH</span></abbr>). The contention resolution timer is broadcast with SIB2 and is set in number of subframes up to a maximum of 64 corresponding to 64 ms. If the UE does not receive contention resolution (Msg4), it goes back to step one and retransmits the random access preamble. If the UE receives a <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> NACK on <abbr class="eh-abbreviation" title="Physical hybrid indicator channel" lang="en"><span class="eh-tooltip" title="Physical hybrid indicator channel">PHICH</span></abbr> for Msg3 transmission, it resets the contention resolution timer and restarts the transmission of the preamble.</p><p>In the last step of the random access procedure, the UE waits for the <em>RRCConnectionSetup</em> message (Msg4 with contention resolution; see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-002__LTE_random_access_procedure.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-2 &lt;\/span&gt;LTE random access procedure (contention-based).&quot;}]">Fig. 2-2</a>), transferred from the eNB to the end-user device using SRB0. The UE monitors the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> for the <abbr class="eh-abbreviation" title="Cell RNTI" lang="en"><span class="eh-tooltip" title="Cell RNTI">C-RNTI</span></abbr> that was assigned by the network in the random access response message. By successfully decoding the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1 scrambled with <abbr class="eh-abbreviation" title="Cell RNTI" lang="en"><span class="eh-tooltip" title="Cell RNTI">C-RNTI</span></abbr>, the UE knows the allocated PRBs on the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> that carries the message. The message itself contains information on the SRB1 configuration that is then used to exchange any <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>/<abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> signaling information until SRB2 is established. With the aid of this message, the eNB can instruct the UE to either use the default configuration for SRB1 (defined in <span class="eh-hint" title="3GPP TS 36.331: E-UTRA; Radio Resource Control (RRC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 36.331: E-UTRA; Radio Resource Control (RRC) protocol specification">TS 36.331</span></span>) or a specific configuration.</p><p>Applying a default configuration significantly reduces the initial amount of signaling information to be exchanged. Along with the SRB1 configuration, the eNB could provide additional information on configuration for physical channels (<abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>, <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>, <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>), channel quality indicator (<abbr class="eh-abbreviation" title="Channel quality indicator" lang="en"><span class="eh-tooltip" title="Channel quality indicator">CQI</span></abbr>) reports, sounding reference signal (<abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr>) configuration, antenna configuration and how to submit scheduling requests through the physical uplink control channel (<abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>) as well.</p><p>After receiving the <em>RRCConnectionSetup</em> message, the UE stops the T300 timer and changes from <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>_IDLE to <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>_CONNECTED state. From a physical layer perspective, the UE sends an acknowledgment (<abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>) for Msg4 including a scheduling request via <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> to the eNB to secure resources on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> to transmit another <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> message to the network and initiate the initial evolved packet system (<abbr class="eh-abbreviation" title="Evolved packet system" lang="en"><span class="eh-tooltip" title="Evolved packet system">EPS</span></abbr>) attach procedure.</p><p>Through transmission of <em>RRCConnectionSetup</em> by the eNB and reception of that message by the UE, including successfully changing to the connected state, the four-step random access procedure is completed and the UE continues the initial attach procedure to fully register with the LTE network. Similar to LTE, 5G NR takes advantage of the two types of random access procedures: contention-based and contention-free. The differences are mainly due to the required support for beamforming, in particular for mm-wave frequencies and therefore in the used <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> formats and the preamble sequence generation.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1065" data-prevpid="1064" data-nextpid="1066" data-chapter="2.1.1.3 LTE attach procedure and UE capability transfer" id="page_1065">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.1.1.3 LTE attach procedure and UE capability transfer</h4>
						
<a id="page_1065_c1002"></a><p>The UE acknowledges the reception of message 4 and successful application of the provided configuration by sending the RRCConnectionSetupComplete<em></em>message using SRB1. The resources to send this message were requested previously via a scheduling request sent on the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>. What now follows can be summarized as the LTE initial attach procedure. This procedure contains some critical updates in relation to 5G NR non-standalone mode. Until this point, only the UE knows by having decoded SIB2 that the network it is trying to connect to is <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> capable. Upon successful execution of the attach procedure, the network will also know that a UE in its serving area supports 5G and what its capabilities are.</p><p>The entire content of the <em>RRCConnectionSetupComplete</em> message is shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-005__RRCConnectionSetupComplete_message.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-5 &lt;\/span&gt;RRCConnectionSetupComplete message including attach request and UE network capability.&quot;}]">Fig. 2-5</a>. Throughout the standardization process for LTE (from Release 8 to Release 15), this message has been extended with additional information elements. To provide a complete picture of the importance of this message, these are all listed in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-005__RRCConnectionSetupComplete_message.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-5 &lt;\/span&gt;RRCConnectionSetupComplete message including attach request and UE network capability.&quot;}]">Fig. 2-5</a>. The basic structure and mandatory part of the message are based on 3GPP Release 8.</p><p>Besides a transaction identifier and the selected public land mobile network (<abbr class="eh-abbreviation" title="Public land mobile network" lang="en"><span class="eh-tooltip" title="Public land mobile network">PLMN</span></abbr>) identity in case the radio cell belongs to more than one <abbr class="eh-abbreviation" title="Public land mobile network" lang="en"><span class="eh-tooltip" title="Public land mobile network">PLMN</span></abbr> (<abbr class="eh-abbreviation" title="Public land mobile network" lang="en"><span class="eh-tooltip" title="Public land mobile network">PLMN</span></abbr> identities are broadcast in SIB1), the message contains, among other things, an information element known as <em>dedicatedInfo-NAS</em>. With this information element, the UE informs the network about its request to <em>attach</em> or <em>detach</em> from the network, perform a <em>tracking area update</em> or send a <em>service request</em> or <em>extended service request</em>. For initial access, this field is set to <em>attach</em> and the (<abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr>) <em>attach request</em> message is included.</p><p>As shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-005__RRCConnectionSetupComplete_message.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-5 &lt;\/span&gt;RRCConnectionSetupComplete message including attach request and UE network capability.&quot;}]">Fig. 2-5</a>, the attach request message contains mandatory and optional information elements. For details on the optional information elements, see <span class="eh-hint" title="3GPP TS 24.301: Non-Access Stratum (NAS) protocol for Evolved Packet System (EPS)" lang="en"><span class="eh-tooltip" title="3GPP TS 24.301: Non-Access Stratum (NAS) protocol for Evolved Packet System (EPS)">TS 24.301</span></span>. With the <em>UE network capability</em> information element, the UE informs the network about the features and functions it supports. The information provided here is independent of frequency band and thus represents general information about what the UE is capable of. As a minimum, four octets (32 bits) are used. However, up to 15 octets (120 bits) are reserved, even though at this point in time not all are used. Therefore, the second octet indicates the length of the UE network capability information element.</p>


<a id="page_1065_c1003"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:77%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-005__RRCConnectionSetupComplete_message_4a91476002.png" width="800" height="612" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-5 </span>RRCConnectionSetupComplete message including attach request and UE network capability.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1065_c1004"></a><p>With regards to 5G, bit 5 of octet 9 (highlighted in blue in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-005__RRCConnectionSetupComplete_message.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-5 &lt;\/span&gt;RRCConnectionSetupComplete message including attach request and UE network capability.&quot;}]">Fig. 2-5</a>) of the UE network capability information element plays an important role. If this bit is set to “1”, it indicates that the UE supports <em>dual connectivity</em> with 5G <em>New Radio</em><span class="eh-text--nowrap">(NR-DC)</span>. In other words, the UE supports the <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> non-standalone mode. Further details however, such as the UE supported 5G NR frequency bands are still unknown to the network. This information, along with other important 5G-related parameters, is provided to the network at a later stage of the initial attach procedure.</p><p>After the network has received the attach request message as part of the <em>RRCConnectionSetupComplete</em> message, the eNB forwards the request to the mobile management entity (<abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr>) by establishing the S1 signaling connection with the <abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr>. The <abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr> is the control unit that processes the signaling between the UE and the core network (<abbr class="eh-abbreviation" title="Evolved packet core" lang="en"><span class="eh-tooltip" title="Evolved packet core">EPC</span></abbr>) in terms of bearer and connection management (see <span class="eh-hint" title="3GPP TS 23.002: Network architecture" lang="en"><span class="eh-tooltip" title="3GPP TS 23.002: Network architecture">TS 23.002</span></span>, <span class="eh-hint" title="3GPP TS 24.301: Non-Access Stratum (NAS) protocol for Evolved Packet System (EPS)" lang="en"><span class="eh-tooltip" title="3GPP TS 24.301: Non-Access Stratum (NAS) protocol for Evolved Packet System (EPS)">TS 24.301</span></span>, <span class="eh-hint" title="3GPP TS 36.300: LTE; Evolved Universal Terrestrial Radio Access (EUTRA) and Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall description; Stage 2" lang="en"><span class="eh-tooltip" title="3GPP TS 36.300: LTE; Evolved Universal Terrestrial Radio Access (EUTRA) and Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall description; Stage 2">TS 36.300</span></span> and <span class="eh-hint" title="3GPP TS 36.401: Evolved Universal Terrestrial Radio Access Network (EUTRAN); Architecture description" lang="en"><span class="eh-tooltip" title="3GPP TS 36.401: Evolved Universal Terrestrial Radio Access Network (EUTRAN); Architecture description">TS 36.401</span></span>). As the interface S1 represents the connection between the eNB and the <abbr class="eh-abbreviation" title="Evolved packet core" lang="en"><span class="eh-tooltip" title="Evolved packet core">EPC</span></abbr>, the S1 signaling connection is a dedicated connection, established separately for each user and thus identified by identities assigned by the eNB and <abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr> (eNB UE S1AP, <abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr> S1AP). S1AP messages (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-006__S1AP_-_Initial_UE_message_with_ID__TAI__ECGI_and_NAS_message.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-6 &lt;\/span&gt;S1AP \u2013 Initial UE message with ID, TAI, ECGI and NAS message.&quot;}]">Fig. 2-6</a>) are used to carry information between the base station and the <abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr>. In the initial attach procedure case, this message carries the attach request.</p>


<a id="page_1065_c1005"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:36%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-006__S1AP_-_Initial_UE_message_with_ID__TAI__ECGI_and_NAS_message_23f8c08a93.png" width="800" height="288" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-6 </span>S1AP – Initial UE message with ID, TAI, <abbr class="eh-abbreviation" title="EUTRAN cell global identity" lang="en"><span class="eh-tooltip" title="EUTRAN cell global identity">ECGI</span></abbr> and <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> message.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1065_c1006"></a><p>Upon establishment of the S1 connection with the <abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr>, the UE transitions to the EMM-Registered and ECM-Connected state. These transitions mark the first part of the initial attach procedure from a core network perspective as the attach request message not only contains the UE capabilities as previously discussed, but also includes the international mobile subscriber identity (<abbr class="eh-abbreviation" title="International mobile subscriber identity" lang="en"><span class="eh-tooltip" title="International mobile subscriber identity">IMSI</span></abbr>), i.e. the identity of the UE. Based on the UE capabilities, the <abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr> also knows which security algorithms the UE supports, which is mandatory for the following step in the initial attach procedure (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-007__Five_steps_in_the_LTE_initial_attach_procedure.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-7 &lt;\/span&gt;Five steps in the LTE initial attach procedure.&quot;}]">Fig. 2-7</a>).</p>


<a id="page_1065_c1007"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:62%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-007__Five_steps_in_the_LTE_initial_attach_procedure_dd57dc0f35.png" width="800" height="493" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-7 </span>Five steps in the LTE initial attach procedure.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1065_c1008"></a><p>Step 2 involves authentication between the network and end-user device. There are two parts in the authentication procedure. First, the end-user device authenticates the network and then the network authenticates the device. </p><p>Initially, the <abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr> obtains authentication vectors from the authentication center (AUC). The AUC is typically part of the home subscriber server (<abbr class="eh-abbreviation" title="Home subscriber server" lang="en"><span class="eh-tooltip" title="Home subscriber server">HSS</span></abbr>). The <abbr class="eh-abbreviation" title="Home subscriber server" lang="en"><span class="eh-tooltip" title="Home subscriber server">HSS</span></abbr>/AUC uses the UE's <abbr class="eh-abbreviation" title="International mobile subscriber identity" lang="en"><span class="eh-tooltip" title="International mobile subscriber identity">IMSI</span></abbr> and the serving network's unique <abbr class="eh-abbreviation" title="Public land mobile network" lang="en"><span class="eh-tooltip" title="Public land mobile network">PLMN</span></abbr> identity: country identifier (mobile country code, <abbr class="eh-abbreviation" title="Mobile country code" lang="en"><span class="eh-tooltip" title="Mobile country code">MCC</span></abbr>) and network identifier (mobile network code, <abbr class="eh-abbreviation" title="Mobile network code" lang="en"><span class="eh-tooltip" title="Mobile network code">MNC</span></abbr>) that it receives from the <abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr> and looks up the related LTE master key K which is only stored in the <abbr class="eh-abbreviation" title="UMTS subscriber identity module" lang="en"><span class="eh-tooltip" title="UMTS subscriber identity module">USIM</span></abbr> and the <abbr class="eh-abbreviation" title="Home subscriber server" lang="en"><span class="eh-tooltip" title="Home subscriber server">HSS</span></abbr>/AUC. With this key, the <abbr class="eh-abbreviation" title="Home subscriber server" lang="en"><span class="eh-tooltip" title="Home subscriber server">HSS</span></abbr> generates a sequence number (<abbr class="eh-abbreviation" title="Sequence number (ciphering)" lang="en"><span class="eh-tooltip" title="Sequence number (ciphering)">SQN</span></abbr>) and a random number (RAND). K, <abbr class="eh-abbreviation" title="Sequence number (ciphering)" lang="en"><span class="eh-tooltip" title="Sequence number (ciphering)">SQN</span></abbr> and RAND are input parameters to a cryptofunction that generates the values for the <em>eXpected Response</em> (<abbr class="eh-abbreviation" title="Expected response" lang="en"><span class="eh-tooltip" title="Expected response">XRES</span></abbr>), an <em>authentication token</em> (<abbr class="eh-abbreviation" title="Authentication token" lang="en"><span class="eh-tooltip" title="Authentication token">AUTN</span></abbr>) and the ciphering key and integrity key (<abbr class="eh-abbreviation" title="Ciphering key" lang="en"><span class="eh-tooltip" title="Ciphering key">CK</span></abbr>, <abbr class="eh-abbreviation" title="Integrity key" lang="en"><span class="eh-tooltip" title="Integrity key">IK</span></abbr>). With the help of a key derivation function (<abbr class="eh-abbreviation" title="Key derivation function" lang="en"><span class="eh-tooltip" title="Key derivation function">KDF</span></abbr>) <abbr class="eh-abbreviation" title="Ciphering key" lang="en"><span class="eh-tooltip" title="Ciphering key">CK</span></abbr>, <abbr class="eh-abbreviation" title="Integrity key" lang="en"><span class="eh-tooltip" title="Integrity key">IK</span></abbr>, <abbr class="eh-abbreviation" title="Sequence number (ciphering)" lang="en"><span class="eh-tooltip" title="Sequence number (ciphering)">SQN</span></abbr> and the <abbr class="eh-abbreviation" title="Public land mobile network" lang="en"><span class="eh-tooltip" title="Public land mobile network">PLMN</span></abbr> ID are used to generate the top-level security key K<sub>ASME</sub> (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-008__Authentication_parameters.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-8 &lt;\/span&gt;Authentication parameters and vector generation for LTE.&quot;}]">Fig. 2-8</a>).</p>


<a id="page_1065_c1009"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:722px;"><div class="book-img-wrap__inner" style="padding-bottom:86%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/2-008__Authentication_parameters.png" width="722" height="617" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-8 </span>Authentication parameters and vector generation for LTE.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1065_c1010"></a><p>The <abbr class="eh-abbreviation" title="Home subscriber server" lang="en"><span class="eh-tooltip" title="Home subscriber server">HSS</span></abbr> (AUC) submits the RAND, <abbr class="eh-abbreviation" title="Authentication token" lang="en"><span class="eh-tooltip" title="Authentication token">AUTN</span></abbr>, <abbr class="eh-abbreviation" title="Expected response" lang="en"><span class="eh-tooltip" title="Expected response">XRES</span></abbr> and K<sub>ASME</sub> to the <abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr>, which uses these keys for mutual authentication with the UE. LTE is one cellular technology where the network authenticates the UE and the UE also authenticates the network. Therefore, the <abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr> forwards only RAND and <abbr class="eh-abbreviation" title="Authentication token" lang="en"><span class="eh-tooltip" title="Authentication token">AUTN</span></abbr> directly within the <em>authentication request</em> message (<abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> level) to the eNB which sends these parameters via the established <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection using the <em>downlink information transfer</em> message to the UE. This message is typically used to carry any type of <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> information between the UE and <abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr>. Instead of sending K<sub>ASM</sub><sub>E</sub>, only an index is sent by the network (KSI<sub>ASME</sub>) to provide the UE with all required information to calculate its own authentication keys.</p><p>The UE uses <abbr class="eh-abbreviation" title="Authentication token" lang="en"><span class="eh-tooltip" title="Authentication token">AUTN</span></abbr> to derive the <abbr class="eh-abbreviation" title="Sequence number (ciphering)" lang="en"><span class="eh-tooltip" title="Sequence number (ciphering)">SQN</span></abbr> and then follows the same procedure as the <abbr class="eh-abbreviation" title="Home subscriber server" lang="en"><span class="eh-tooltip" title="Home subscriber server">HSS</span></abbr>/AUC to calculate its keys. The calculated <abbr class="eh-abbreviation" title="Authentication token" lang="en"><span class="eh-tooltip" title="Authentication token">AUTN</span></abbr><sub>UE</sub> is then compared with the received <abbr class="eh-abbreviation" title="Authentication token" lang="en"><span class="eh-tooltip" title="Authentication token">AUTN</span></abbr> and if there is a match, the network has been authenticated by the UE. After that, the UE sends the calculated <em>RESponse</em> (RES) back to the network using the <em>authentication response</em> message where the <abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr> compares <em>RES</em> and <em>XRES</em> and thus authenticates the UE. At this moment, both the network and the UE are mutually authenticated. The <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> security setup now runs to ensure secure delivery of <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> messages between the network and UE. In this step, the <abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr> selects a ciphering and an integrity algorithm that is supported by the UE.</p><p>From the K<sub>ASM</sub><sub>E</sub>, the UE creates an integrity key (<abbr class="eh-abbreviation" title="Integrity key" lang="en"><span class="eh-tooltip" title="Integrity key">IK</span></abbr>) and a ciphering (encryption) key (<abbr class="eh-abbreviation" title="Ciphering key" lang="en"><span class="eh-tooltip" title="Ciphering key">CK</span></abbr>) that is applied to any <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> message to ensure proper ciphering and integrity protection. By sending the <em>security mode command</em>, the <abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr> informs the UE about the selected algorithms which the device acknowledges with the <em>security mode complete</em> message. The <em>security mode command</em> is already integrity-protected. The UE performs an integrity check on the <em>security mode command</em> and calculates both <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> security keys, assuming that the keys are calculated properly once the security check is passed. At this moment, communication between the UE and the network is ciphered and integrity-protected.</p><p>At this point, two more steps (location update and <abbr class="eh-abbreviation" title="Evolved packet system" lang="en"><span class="eh-tooltip" title="Evolved packet system">EPS</span></abbr> session establishment) are required in the core network to complete the initial attach procedure for the UE. At the same time, the base station acquires additional information from the UE about its capabilities in a more detailed manner than provided by the UE network capability indication in the attach request message.</p><p>On the core network side, the <abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr> contacts the <abbr class="eh-abbreviation" title="Home subscriber server" lang="en"><span class="eh-tooltip" title="Home subscriber server">HSS</span></abbr> to indicate that the subscriber has been registered on the network and to check the subscribed services. It informs the <abbr class="eh-abbreviation" title="Home subscriber server" lang="en"><span class="eh-tooltip" title="Home subscriber server">HSS</span></abbr> that the UE is located in one of its controlled tracking areas (<abbr class="eh-abbreviation" title="Timing advance or tracking area" lang="en"><span class="eh-tooltip" title="Timing advance or tracking area">TA</span></abbr>). In return, the <abbr class="eh-abbreviation" title="Home subscriber server" lang="en"><span class="eh-tooltip" title="Home subscriber server">HSS</span></abbr> provides the <abbr class="eh-abbreviation" title="Mobility management entity " lang="en"><span class="eh-tooltip" title="Mobility management entity ">MME</span></abbr> with information about which <abbr class="eh-abbreviation" title="Access point name" lang="en"><span class="eh-tooltip" title="Access point name">APN</span></abbr> the UE is subscribed to, the packet gateway ID (<abbr class="eh-abbreviation" title="Packet gateway" lang="en"><span class="eh-tooltip" title="Packet gateway">P-GW</span></abbr> ID) through which the user can access this <abbr class="eh-abbreviation" title="Access point name" lang="en"><span class="eh-tooltip" title="Access point name">APN</span></abbr>, and the subscribed quality of service (<abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr>) profiles. The final step in the initial attach procedure is <abbr class="eh-abbreviation" title="Evolved packet system" lang="en"><span class="eh-tooltip" title="Evolved packet system">EPS</span></abbr> session establishment (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-009__Default_EPS_bearer_setup.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-9 &lt;\/span&gt;Default EPS bearer setup.&quot;}]">Fig. 2-9</a>). This process involves several steps and a brief summary is given hereafter to allow subsequent comparison to the relevant procedures executed in the 5G core network.</p>


<a id="page_1065_c1011"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:61%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-009__Default_EPS_bearer_setup_382ebec408.png" width="800" height="484" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-9 </span>Default <abbr class="eh-abbreviation" title="Evolved packet system" lang="en"><span class="eh-tooltip" title="Evolved packet system">EPS</span></abbr> bearer setup.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1065_c1012"></a><p>After the activation of <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> security, the eNB sends a <em>UECapabilityEnquiry</em> message over the established <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection to the UE. The message can include different types of requests of which three are meaningful for 5G: <em>eutra</em>, <em>eutra-nr</em> or <em>nr</em>. During initial registration with the LTE network, the network will set the request type to <em>eutra</em>. With Release 15, the enquiry message has been extended by an additional information element <em>requestedFreqBandsNR-MRDC-r15</em> with which the network informs the UE about the frequency bands that it supports in terms of 5G. For the UE, it is also the trigger to include information about these bands in its reply to the network (but only if it supports any of them). The term <abbr class="eh-abbreviation" title="Multi-radio dual connectivity" lang="en"><span class="eh-tooltip" title="Multi-radio dual connectivity">MR-DC</span></abbr> stands for multi-RAT dual connectivity and relates to connectivity between LTE and 5G NR in non-standalone mode.</p><p>The general response by the UE to the enquiry message is sent as <em>UECapabilityInformation</em>. This message has evolved over time with the continuous addition of features to LTE to become the longest and most complex <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> message. Based on the request type set to <em>eutra</em>, the UE would return <em>UE-EUTRA-Capability</em> in its response to the LTE network. This information element provides the necessary information on all UE-supported features and functionalities with respect to LTE. It includes the RF parameters (which frequency bands are supported for single carrier operation), feature group indicator (<abbr class="eh-abbreviation" title="Feature group indicator" lang="en"><span class="eh-tooltip" title="Feature group indicator">FGI</span></abbr>), physical layer parameters and supported inter-RAT technologies. This is fundamental information sent by any attaching LTE UE. Over time, the content of the information element has been gradually extended as the LTE specification has evolved. For example, to support carrier aggregation, there is a 3GPP Release 10 feature to increase the supported bandwidth and thus the throughput. The UE submits its carrier aggregation capability by reporting supported frequency band combinations, individually for the downlink and uplink. For a complete overview of all supported capabilities, see <span class="eh-hint" title="3GPP TS 36.331: E-UTRA; Radio Resource Control (RRC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 36.331: E-UTRA; Radio Resource Control (RRC) protocol specification">TS 36.331</span></span>, section 6.3.6.</p><p>With 3GPP Release 15, the element was extended with another non-critical regular extension to provide information regarding 5G NR support. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-010__Extension_of_the_UE_capability_information_message.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-10 &lt;\/span&gt;Extension of the UE capability information message for 5G NR non-standalone mode support.&quot;}]">Fig. 2-10</a> shows a high-level view of the UE message by expanding the 5G relevant information fields.</p>


<a id="page_1065_c1013"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:72%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-010__Extension_of_the_UE_capability_information_message_3b84d5639e.png" width="800" height="573" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-10 </span>Extension of the UE capability information message for 5G NR non-standalone mode support.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1065_c1014"></a><p>From <em>IRAT-ParametersNR-r15</em>, the network is ensured that the UE is <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> capable and is informed of which frequency bands it supports for 5G NR. It also receives an indication of whether the UE supports the mobility event B2. The inter-RAT mobility event B2 defines a situation in which the serving cell degrades below one absolute threshold and a neighbor cell improves over another absolute threshold, in wich case a handover is triggred.</p><p>Besides the frequency bands, the UE provides information on its capabilities in terms of the packet data convergence protocol (<abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr>) layer for NR, including support for header compression profiles and whether the UE supports voice over NR via the master cell group (<abbr class="eh-abbreviation" title="Master cell group" lang="en"><span class="eh-tooltip" title="Master cell group">MCG</span></abbr>) bearer or secondary cell group (<abbr class="eh-abbreviation" title="Secondary cell group" lang="en"><span class="eh-tooltip" title="Secondary cell group">SCG</span></abbr>) bearer.</p><p>Now that the network knows this UE supports NR in addition to LTE, the network sends another enquiry to that UE, but this time setting the request type to <em>eutra-nr</em>. The UE responds again with its capabilities where the <abbr class="eh-abbreviation" title="Radio access technology" lang="en"><span class="eh-tooltip" title="Radio access technology">RAT</span></abbr> type is set to <em>eutra-nr</em> and includes information about supported <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> features as specified in <span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span>. The UE provides the network with a list of band combinations that it supports for <abbr class="eh-abbreviation" title="Multi-radio dual connectivity" lang="en"><span class="eh-tooltip" title="Multi-radio dual connectivity">MR-DC</span></abbr>. This list is filtered (or better, “mirrored”) based on the list the network has provided in its enquiry since the UE potentially supports more band combinations than indicated by the network. The provided list points further to <em>FeatureSetCombination</em> identities, also provided with the <em>UE-MRDC-Capability</em> information element returned by the UE to the network based on the enquiry request type set to <em>eutra-nr</em>. A <em>FeatureSetCombination</em> is a two-dimensional matrix of <em>feature set</em> entries per supported frequency band combination. The feature set then provides the supported feature set per component carrier that is captured in the <em>UE radio access capability specification</em> (<span class="eh-hint" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities" lang="en"><span class="eh-tooltip" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities">TS 38.306</span></span>).<br></p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1066" data-prevpid="1065" data-nextpid="1067" data-chapter="2.1.2 5G NR signal quality measurements and reporting" id="page_1066">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.1.2 5G NR signal quality measurements and reporting</h3>
						
<a id="page_1066_c1015"></a><p>Based on the UE capability transfer that takes place during the LTE initial attach procedure, the network obtains information about 5G NR frequency band support by the attaching UE. A UE does not start to scan for surrounding 5G NR signals by itself. Instead, the LTE network provides support and instructs the UE to perform due diligence and carry out signal quality measurements on neighbor cells that support 5G NR. The advantage is that the network knows which 5G NR cells are accessible in its serving area and what frequency band is used for each of those cells. The signal quality measurements are carried out on the previously introduced synchronization signal blocks (<abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>); see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1043" class="eh-link eh-link--page">1.3.2.1 SS/PBCH block details, page 174</a>). To perform these measurements, the UE must synchronize to the 5G NR downlink signal which is accomplished with the aid of the SSBs. In the following sections, we will discuss some remaining <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> details before continuing with an explanation of how the UE carries out signal quality measurements on NR signals transmitted by the gNB.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1067" data-prevpid="1066" data-nextpid="1068" data-chapter="2.1.2.1 Other fundamental properties of synchronization signal blocks (SSBs)" id="page_1067">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.1.2.1 Other fundamental properties of synchronization signal blocks (SSBs)</h4>
						
<a id="page_1067_c1016"></a><p>The SSBs consist of the primary synchronization signal (<abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr>), secondary synchronization signal (<abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr>) and physical broadcast channel (<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>). Note that in 5G NR, the same names for physical signals and physical channels are used as in LTE. As shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-143__SS-PBCH_block.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-143 &lt;\/span&gt;SS\/PBCH block.&quot;}]">Fig. 1-143</a>, an <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> encapsulates the <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr>, <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr> and <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> over four consecutive OFDM symbols. From a frequency domain perspective, a total of 240 subcarriers (= 20 <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr>) are reserved for an <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>. These subcarriers are numbered from 0 to 239 and do not necessarily need to follow the default resource grid defined for 5G NR (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1029" class="eh-link eh-link--page">1.2.5 General description of the physical layer, page 73</a>). The reason is that the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> can utilize a different subcarrier spacing than the one used for the control channel (<abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>) and data channel (<abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>), e.g. 240 kHz instead of 120 kHz when using frequencies above 6 GHz.</p><p>In contrast to LTE where the <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> and <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr> have a periodicity of 5 ms and <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> of 10 ms, all signal components of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> are transmitted together, i.e. they all have the same periodicity. SSBs are organized in burst sets, where a burst set is composed of one or more SSBs. The maximum number of SSBs per burst (= L<sub>ma</sub><sub>x</sub>; see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-011__Synchronization_signal.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-11 &lt;\/span&gt;Synchronization signal (SS) burst set.&quot;}]">Fig. 2-11</a>) depends on the deployment frequency range. For f &lt; 3 GHz, L<sub>max</sub> = 4. For 3 GHz &lt; f &lt; 6 GHz, L<sub>max</sub> = 8 and for f &gt; 6 GHz, L<sub>max</sub> = 64. To provide greater flexibility for transmission of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>, the <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr> burst set periodicity can be set to 5 ms, 10 ms, 20 ms, 40 ms, 80 ms or 160 ms. During initial synchronization, a UE would assume a default periodicity of 20 ms. Not all SSBs are always transmitted. In fact, for LTE and NR coexistence some SSBs in certain deployment scenarios or band combinations are not transmitted by the network to avoid interference between LTE and NR. </p><p>In LTE, the <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr>/<abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr> and <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> are always transmitted around the center frequency of the signal. In 5G NR, the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> can be positioned anywhere within the transmission bandwidth of the signal but are subject to either a carrier raster or a so-called synchronization raster depending on the operation mode (<abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr> or <abbr class="eh-abbreviation" title="Standalone" lang="en"><span class="eh-tooltip" title="Standalone">SA</span></abbr>).</p>


<a id="page_1067_c1017"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:69%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-011__Synchronization_signal_a1a82974ad.png" width="800" height="548" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-11 </span>Synchronization signal (<abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>) burst set.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1067_c1018"></a><p>The SSBs are repeated within an <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr> burst set and all transmitted SSBs are mapped to the same antenna port (p = 4000) (see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1034" class="eh-link eh-link--page">1.2.5.5 Antenna ports, precoding and quasi co-located ­antennas, page 98</a>). This stands in contrast to any pre-5G technology such as the proprietary 5G Technology Forum (<abbr class="eh-abbreviation" title="5G technical Forum" lang="en"><span class="eh-tooltip" title="5G technical Forum">5GTF</span></abbr>) standard. Therefore, SSBs are transmitted with time division multiplexing which allows simplified beam sweeping transmission since each <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> can be beamformed in a different spatial direction. This concept also supports a simplified, low-cost analog beamforming architecture.</p>


<a id="page_1067_c1019"></a><p class="eh-headline-207 ">
				Primary synchronization signal (<abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr>) and secondary synchronization ­signal (<abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr>)
			</p>


<a id="page_1067_c1020"></a><p>As in LTE, the <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> and <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr> represent the physical cell identity (<abbr class="eh-abbreviation" title="Physical cell identity" lang="en"><span class="eh-tooltip" title="Physical cell identity">PCI</span></abbr>). In 5G NR, however, the number of identities has been doubled compared to LTE from 504 to 1008 in total. This is because 5G NR is required to support high-density deployment scenarios. The <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> consists of one of three frequency-domain-based binary phase shift keying (<abbr class="eh-abbreviation" title="Binary phase shift keying" lang="en"><span class="eh-tooltip" title="Binary phase shift keying">BPSK</span></abbr>) m-sequences with a length of 127. This sequence is mapped to 127 consecutive subcarriers (subcarriers 56 to 182; see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-143__SS-PBCH_block.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-143 &lt;\/span&gt;SS\/PBCH block.&quot;}]">Fig. 1-143</a>) out of 12 reserved PRBs in the center of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>. The length 127 allows the usage of a 128 FFT size. The secondary synchronization signal is one of 335 Gold sequences with the same length as the <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr>, which is also mapped to the same contiguous subcarriers but in a different symbol. During the initial cell search process, the UE correlates the received signals with the aid of matched filters to identify the physical cell ID and based on signal position in the time domain, the overall symbol timing.</p>


<a id="page_1067_c1021"></a><p class="eh-headline-207 ">
				Physical broadcast channel (<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>) and demodulation reference signal (<abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>)
			</p>


<a id="page_1067_c1022"></a><p>A polar code is used as the channel code for the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>. For an introduction to polar code principles, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1029" class="eh-link eh-link--page">1.2.5 General description of the physical layer, page 73</a>. The modulation scheme used for the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> and its demodulation reference signal is <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr>. The transmit time interval (<abbr class="eh-abbreviation" title="Transmission time interval" lang="en"><span class="eh-tooltip" title="Transmission time interval">TTI</span></abbr>) for the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> is defined to be 80 ms. This means the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> is updated and transmitted every 80 ms, although repetitions may be sent more often. Given the 80 ms <abbr class="eh-abbreviation" title="Transmission time interval" lang="en"><span class="eh-tooltip" title="Transmission time interval">TTI</span></abbr> and the shortest <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr> burst periodicity of 5 ms, there are 16 possible positions within this time interval for transmission of SSBs within the <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr> burst set. These 16 positions (= 2<sup class="eh-text__number">4</sup>) can be identified by the three least significant bits of the <abbr class="eh-abbreviation" title="System frame number" lang="en"><span class="eh-tooltip" title="System frame number">SFN</span></abbr> and the one-bit half frame index that are transmitted as part of the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>'s payload (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-014__PBCH_payload_generation.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-14 &lt;\/span&gt;PBCH payload generation.&quot;}]">Fig. 2-14</a>). For demodulation purpose, the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> does contain demodulation reference signals, further details on the mapping procedure of <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> within <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> are shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-145__Demodulation_reference_symbols_.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-145 &lt;\/span&gt;Demodulation reference resource element within an SS\/PBCH block (example: &lt;em&gt;v&lt;\/em&gt; = 1).&quot;}]">Fig. 1-145, page 176</a>.</p>


<a id="page_1067_c1023"></a><p class="eh-headline-207 ">
				Master information block (<abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>) on the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>
			</p>


<a id="page_1067_c1024"></a><p>As in LTE, in 5G NR the physical broadcast channel (<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>) also carries the master information block (<abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>). However, its content is tailored to 5G. The payload size of the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> is 23 bits.</p><p>The 23 bits of the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> are used as follows:</p><ul class="eh-list eh-list--line"><li><abbr class="eh-abbreviation" title="Most significant bit" lang="en"><span class="eh-tooltip" title="Most significant bit">MSB</span></abbr> of the system frame number (<abbr class="eh-abbreviation" title="System frame number" lang="en"><span class="eh-tooltip" title="System frame number">SFN</span></abbr>) (6 bits)</li><li>Subcarrier spacing used for SIB1, message 2 and message 4 transmission (scs15or60, scs30or120) (1 bit)</li><li>Subcarrier offset (0 to 15) (4 bits)</li><li>Position of demodulation reference signal (<abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>) for <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> (dmrs-TypeA-Position: pos2 or pos3) (1 bit)</li><li><abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> configuration to receive SIB1 (pdcch-ConfigSIB1) (8 bits)</li><li>Cell is barred from UE camping on it (cellBarred) (1 bit)</li><li>Intra-frequency reselection support (intraFreqReselection) (1 bit)</li><li>Spare bit (1 bit)</li></ul><p>The first six bits represent the most significant bits (<abbr class="eh-abbreviation" title="Most significant bit" lang="en"><span class="eh-tooltip" title="Most significant bit">MSB</span></abbr>) of the system frame number. Next is the info on which subcarrier spacing is used for transmission of <abbr class="eh-abbreviation" title="System information block" lang="en"><span class="eh-tooltip" title="System information block">SIB</span></abbr> type 1 (<abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>, <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>) and messages 2 and 4 in the random access procedure (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1070" class="eh-link eh-link--page">2.1.4 Random access procedure in 5G NR, page 250</a>). If the UE acquires the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> at sub-6 GHz frequencies, a 0 or 1 represents 15 kHz or 30 kHz respectively. For frequencies above 6 GHz, it is 60 kHz or 120 kHz. The subcarrier offset corresponds to the parameter k<sub>SSB</sub> (see the resource grid definition in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1027" class="eh-link eh-link--page">1.2.3 Frame structure, page 61</a>), which is the frequency domain offset between the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> and the overall resource block grid in terms of the number of subcarriers. The value range can be extended by an additional bit during <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> payload generation (see below for additional information). The next bit defines the first position of the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>'s demodulation reference signal. A detailed introduction to the usage of demodulation reference signals in 5G NR can be found in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1035" class="eh-link eh-link--page">1.2.5.6 Physical signals in 5G NR, page 110</a>. The next info provided by the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> is the configuration for the control channel to retrieve SIB1, including the bandwidth for the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>, a control resource set (<abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr>), the search space and the necessary <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> parameters. This information is relevant for standalone access (<abbr class="eh-abbreviation" title="Standalone" lang="en"><span class="eh-tooltip" title="Standalone">SA</span></abbr>) (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1099" class="eh-link eh-link--page">2.4 Overall access procedure for SA mode, page 408</a>). For <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr>, this field is not relevant since the remaining minimum system information (<abbr class="eh-abbreviation" title="Remaining minimum system information" lang="en"><span class="eh-tooltip" title="Remaining minimum system information">RMSI</span></abbr>) is delivered via dedicated <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> signaling through the established LTE connection (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-012__System_information__SI__categorization_.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-12 &lt;\/span&gt;System information (SI) categorization in 5G NR.&quot;}]">Fig. 2-12</a>). The next two bits determine whether the UE is allowed to camp on this cell (barred, not barred) and whether the UE is allowed to perform an intra-frequency cell reselection in case the cell is barred. The last bit is a spare bit and is not used.</p>


<a id="page_1067_c1025"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:23%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-012__System_information__SI__categorization__5f8f5762a0.png" width="800" height="177" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-12 </span>System information (<abbr class="eh-abbreviation" title="System information" lang="en"><span class="eh-tooltip" title="System information">SI</span></abbr>) categorization in 5G NR.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1067_c1026"></a><p>Since the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> contains higher layer information, it is transmitted as an <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> message (BCCH-BCH message) utilizing the <abbr class="eh-abbreviation" title="Broadcast control channel (logical channel)" lang="en"><span class="eh-tooltip" title="Broadcast control channel (logical channel)">BCCH</span></abbr> logical channel and <abbr class="eh-abbreviation" title="Broadcast channel (transport channel)" lang="en"><span class="eh-tooltip" title="Broadcast channel (transport channel)">BCH</span></abbr> transport channel and is then finally mapped onto the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>. The structure of the BCCH-BCH message adds another bit to the payload, a so-called “choice bit”. The choice bit was implemented to indicate a change in the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> content that might be added in a later release of the specification. 3GPP is providing some flexibility here for future development of the 5G NR standard.</p><p>The (23 + 1) bits are now channel-coded. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-013__Channel_coding_chain_for_the_MIB.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-13 &lt;\/span&gt;Channel coding chain for the master information block (MIB) in 5G NR.&quot;}]">Fig. 2-13</a> illustrates the individual steps in the channel coding process for the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>.</p>


<a id="page_1067_c1027"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:127%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-013__Channel_coding_chain_for_the_MIB_39a5b52607.png" width="800" height="1013" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-13 </span>Channel coding chain for the master information block (<abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>) in 5G NR.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1067_c1028"></a><p>First, eight additional bits are added to the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> bits (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-014__PBCH_payload_generation.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-14 &lt;\/span&gt;PBCH payload generation.&quot;}]">Fig. 2-14</a>). The first four bits represent the least significant bits of the system frame number. With the six bits transmitted in the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>, a UE is able to determine the <abbr class="eh-abbreviation" title="System frame number" lang="en"><span class="eh-tooltip" title="System frame number">SFN</span></abbr> (0 to 1023) depending on successful decoding of the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> and the carried <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>. The next bit identifies the half frame (5 ms) the SSBs are transmitted in. The meaning of the next three bits depends on the frequency at which the signal is transmitted. As mentioned earlier, for frequencies over 6 GHz a maximum of 64 SSBs per <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> burst is possible. To address each <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> uniquely with an index, six bits are required. For this case (L<sub>max</sub> = 64), the three bits represent the three most significant bits (<abbr class="eh-abbreviation" title="Most significant bit" lang="en"><span class="eh-tooltip" title="Most significant bit">MSB</span></abbr>: 6<sup class="eh-text__letter">th</sup>, 5<sup class="eh-text__letter">th</sup> and 4<sup class="eh-text__letter">th</sup> bit) of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> index. The three least significant bits (<abbr class="eh-abbreviation" title="Least significant bit" lang="en"><span class="eh-tooltip" title="Least significant bit">LSB</span></abbr>) are derived by the UE from the changing <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> sequence of the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> transmitted over the three OFDM symbols in the time domain. These three bits are enough to identify the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> index for frequencies below 6 GHz. Above 6 GHz, the additional three bits in the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> payload generation are required. For frequencies below 6 GHz, the three remaining bits are used as follows: The 6<sup class="eh-text__letter">th</sup> bit is used to extend the range for the parameter k<sub>SS</sub><sub>B</sub>. This means the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> can now be shifted in theory by up to 2<sup class="eh-text__number">5</sup> = 32 subcarriers compared to the basic resource grid. The value of k<sub>SSB</sub> indicates to the UE whether there is an <abbr class="eh-abbreviation" title="System information block" lang="en"><span class="eh-tooltip" title="System information block">SIB</span></abbr> type 1 transmitted in this NR cell. This is the case if k<sub>SSB</sub> &gt; 23 for FR1 and if k<sub>SSB</sub> &gt; 11 for FR2. Bits seven and eight are reserved for future use.</p>


<a id="page_1067_c1029"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:52%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-014__PBCH_payload_generation_0ab4c7dcee.png" width="800" height="413" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-14 </span><abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> payload generation.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1067_c1030"></a><p>The <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> payload (32 bits) is then interleaved in accordance with <span class="eh-hint" title="3GPP TS 38.212: NR; Multiplexing and channel coding" lang="en"><span class="eh-tooltip" title="3GPP TS 38.212: NR; Multiplexing and channel coding">TS 38.212</span></span>, followed by scrambling, where the initialization of the scrambling sequence depends on the physical cell identity. After scrambling, 24 bits are added as a cyclic redundancy check (<abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr>), increasing the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> payload to 56 bits in total. This payload is then polar-coded, producing 512 coded bits which now have to be mapped to 864 available physical bits in the rate matching procedure. Rate matching for polar-codes to increase the number of coded bits to a higher number of physical bits is basically performed by the repetition of bits (352 bits in case of <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>), preceded by a sub-block interleaving step. An optional additional successive bit interleaving is omitted for the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>. The resulting 864 bits are then mapped on the subcarriers that carry the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> in the three symbols within an <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr> block.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1068" data-prevpid="1067" data-nextpid="1069" data-chapter="2.1.2.2 Provisioning of the measurement configuration to the end-user device" id="page_1068">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.1.2.2 Provisioning of the measurement configuration to the end-user device</h4>
						
<a id="page_1068_c1031"></a><p>The signal quality measurements are carried out by the end-user device on the secondary synchronization signal. To determine the received signal quality of surrounding NR cells, three distinct measurements have been defined in accordance with <span class="eh-hint" title="3GPP TS 38.215: NR; Physical layer measurements" lang="en"><span class="eh-tooltip" title="3GPP TS 38.215: NR; Physical layer measurements">TS 38.215</span></span>:</p><ul class="eh-list eh-list--line"><li>Secondary synchronization signal reference signal received power (SS-RSRP) is defined as the linear average of the power contributions (in <em>W</em>) of the resource elements that carry secondary synchronization signals (<abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>). When examining the relevant 5G NR specifications, we must always recall that they are written for both modes: <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr> and <abbr class="eh-abbreviation" title="Standalone" lang="en"><span class="eh-tooltip" title="Standalone">SA</span></abbr>. <span class="eh-hint" title="3GPP TS 38.215: NR; Physical layer measurements" lang="en"><span class="eh-tooltip" title="3GPP TS 38.215: NR; Physical layer measurements">TS 38.215</span></span> states that for assessing <abbr class="eh-abbreviation" title="Reference signal received power" lang="en"><span class="eh-tooltip" title="Reference signal received power">RSRP</span></abbr>, the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> for the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> and the channel state information reference signal (<abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>) can also be optionally utilized by the end-user device. However, this must be signaled by higher layers. The NR cell quality assessment during initial access is based on the <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr> only</li><li>Secondary synchronization signal reference signal received quality (SS-RSRQ). The RSRQ measurement sets the <abbr class="eh-abbreviation" title="Reference signal received power" lang="en"><span class="eh-tooltip" title="Reference signal received power">RSRP</span></abbr> and received signal strength indicator (<abbr class="eh-abbreviation" title="Received signal strength indicator" lang="en"><span class="eh-tooltip" title="Received signal strength indicator">RSSI</span></abbr>) in relation to both indicators assessed over the same measurement bandwidth. The difference between the <abbr class="eh-abbreviation" title="Reference signal received power" lang="en"><span class="eh-tooltip" title="Reference signal received power">RSRP</span></abbr> and <abbr class="eh-abbreviation" title="Received signal strength indicator" lang="en"><span class="eh-tooltip" title="Received signal strength indicator">RSSI</span></abbr> measurement is that <abbr class="eh-abbreviation" title="Received signal strength indicator" lang="en"><span class="eh-tooltip" title="Received signal strength indicator">RSSI</span></abbr> considers total wideband power including all interference and noise contributions within the signal bandwidth. <abbr class="eh-abbreviation" title="Reference signal received power" lang="en"><span class="eh-tooltip" title="Reference signal received power">RSRP</span></abbr> only measures the power on those subcarriers carrying the signal component of interest. In this case, it is the secondary synchronization signal. Therefore, the measurement bandwidth for that measurement is the used subcarrier spacing. <span class="eh-hint" title="3GPP TS 38.215: NR; Physical layer measurements" lang="en"><span class="eh-tooltip" title="3GPP TS 38.215: NR; Physical layer measurements">TS 38.215</span></span> defines the option to measure the <abbr class="eh-abbreviation" title="Received signal strength indicator" lang="en"><span class="eh-tooltip" title="Received signal strength indicator">RSSI</span></abbr> over a certain number of OFDM symbols only. There are four possible configurations that indicate over how many OFDM symbols the <abbr class="eh-abbreviation" title="Received signal strength indicator" lang="en"><span class="eh-tooltip" title="Received signal strength indicator">RSSI</span></abbr> for NR is to be measured. The configuration that the UE should use is signaled via higher layers (<abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>). This type of information is not provided by the measurement object sent over the established <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection via the LTE network. Therefore, this additional setting applies only when sent over the NR <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection (<abbr class="eh-abbreviation" title="Standalone" lang="en"><span class="eh-tooltip" title="Standalone">SA</span></abbr> Mode Option2 or NE-DC Option4)</li><li>Secondary synchronization signal interference to noise ratio (SS-SINR). Like in the SS-RSRP measurement, the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> for <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> can be optionally utilized when indicated by higher layers</li></ul><p>To enable the UE to synchronize and carry out these signal quality measurements, the network provides support by sending the configuration of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> to the UE over the established <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection via the LTE link. The network transmits an <em>RRCConnectionReconfiguration</em> message that includes the measurement configuration with the newly introduced information element MeasObjectNR (see <span class="eh-hint" title="3GPP TS 36.331: E-UTRA; Radio Resource Control (RRC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 36.331: E-UTRA; Radio Resource Control (RRC) protocol specification">TS 36.331</span></span>).</p><p>For each frequency <em>to be measured</em>, one individual measurement object is sent that includes the following information:</p><ul class="eh-list eh-list--line"><li><strong>Carrier frequency (carrierFreq-r15)</strong> – This information element provides the frequency (as ARFCN-ValueNR-r15) on which the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> is transmitted</li><li><strong>Configuration of SSB (rs-ConfigSSB-r15)</strong> – Besides indicating which subcarrier spacing is used for the SSBs (15 kHz, 30 kHz, 120 kHz or 240 kHz), this field provides all required information to the UE to further calculate the measurement window to carry out the quality measurements</li><li><strong>Quality thresholds (threshRS-Index-r15)</strong> – The threshold for SS-RSRP, <span class="eh-text--nowrap">SS-RSRQ</span>, SS-SINR to determine if the measurement results are included in the measurement report or not</li><li><strong>Cell quality (maxRS-IndexCellQual-r15)</strong> – To assess the overall NR cell quality, the measurement results must be averaged over this number of <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> indices when these indices are above the quality threshold <span class="eh-text--nowrap">(threshRS-Index-r15</span>)</li><li><strong>Offset frequency (offsetFreq-r15)</strong> – Defines an offset frequency for the two mobility events B1 and B2</li><li><strong>Do not measure these cells</strong> – With two fields (blackCellsToRemoveList-r15, black-CellsToAddModList-r15), frequencies/cells can be removed or added to the so-called black list. Black-listed cells are not considered for event evaluation or measurement reporting</li><li><strong>Quantity configuration (quantityConfigSet-r15) </strong>– Selects one of up to two quantity configurations</li><li><strong>Frame time difference (cellsForWhichToReportSFTD-r15)</strong> – Cells for which the UE must report the time difference observed between the <abbr class="eh-abbreviation" title="System frame number" lang="en"><span class="eh-tooltip" title="System frame number">SFN</span></abbr> and frame timing of the LTE (EUTRA) cell (<abbr class="eh-abbreviation" title="Primary cell " lang="en"><span class="eh-tooltip" title="Primary cell ">PCell</span></abbr>) and the NR cell (PSCell). The UE reports the <abbr class="eh-abbreviation" title="System frame number" lang="en"><span class="eh-tooltip" title="System frame number">SFN</span></abbr> offset between both cells as the frame boundary offset (see <span class="eh-hint" title="3GPP TS 38.215: NR; Physical layer measurements" lang="en"><span class="eh-tooltip" title="3GPP TS 38.215: NR; Physical layer measurements">TS 38.215</span></span>)</li></ul><p>The carrier frequency for the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> requires a little further explanation. LTE follows a bandwidth-centric approach. A UE only needs to scan the respective frequency band following the channel raster to find the carrier frequency of the signal. That was sufficient and allows the UE to identify the (LTE) <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr>, (LTE) <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr> and (LTE) <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> since they were transmitted on six reserved resource blocks centered around the carrier frequency. A fundamental difference between LTE and 5G NR is the support for so-called bandwidth parts (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1047" class="eh-link eh-link--page">1.4 Bandwidth part fundamentals, page 182</a>) that allow for the first time in cellular communications an asynchronous bandwidth setting between the base station and the UE. Bandwidth parts are not just defined by e.g. occupying a different number of resource blocks but can also use a different numerology. Therefore, the frequency position of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> within the downlink signal needs to be signaled to the UE. This information is signaled as the new radio absolute radio frequency channel number (NR-ARFCN), which can assume a value in the range 0 to 3 279 165. This range is dictated by the global frequency raster defined by 3GPP's working group RAN4 for 5G NR, covering frequencies from 0 to 100 GHz (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1068_c1032\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table026\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;FR1, FR2&lt;\/th&gt;&lt;th&gt;Frequency range&lt;\/th&gt;&lt;th&gt;\u0394F&lt;sub&gt;Global&lt;\/sub&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;F&lt;sub&gt;REF-Off&lt;\/sub&gt;s&lt;\/th&gt;&lt;th&gt;N&lt;sub&gt;REF-Offs&lt;\/sub&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;Range of N&lt;sub&gt;REF&lt;\/sub&gt;&lt;br&gt;\n\t\t\t\t\t\t\t(NR-ARFCN)&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&amp;nbsp;\n&lt;strong&gt;FR1:&lt;\/strong&gt; 450 MHz to &lt;\/td&gt;&lt;td&gt;0 to 3000 MHz&lt;\/td&gt;&lt;td&gt;5 kHz&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0 to 599 999&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;           7.125 GHz&lt;\/td&gt;&lt;td&gt;3000 to 24 250 MHz&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;3000&lt;\/td&gt;&lt;td&gt;600 000&lt;\/td&gt;&lt;td&gt;600 000 to 2 016 666&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&amp;nbsp;\n&lt;strong&gt;FR2:&lt;\/strong&gt; 24.25 GHz to &lt;br&gt;          52.6 GHz&lt;\/td&gt;&lt;td&gt;24250 to 100 000 MHz&lt;\/td&gt;&lt;td&gt;60 kHz&lt;\/td&gt;&lt;td&gt;24 250.08 MHz&lt;\/td&gt;&lt;td&gt;2 016 667&lt;\/td&gt;&lt;td&gt;2 016 667 to 3 279 165&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-15 &lt;\/span&gt;NR-ARFCN parameters for the global frequency raster.&lt;\/p&gt;\n\n&quot;}">Fig. 2-15</a>). In this table, ΔF<sub>Global</sub> defines the fundamental granularity of the global frequency raster and is therefore the basis for calculating the channel raster ΔF<sub>Raster</sub> defined for each frequency band in both frequency ranges FR1, FR2. Ultimately, this results in an NR-ARFCN range per frequency band with a corresponding step size. The relevant details are covered in TS 38.101-1 and TS 38.101-2.</p>


<a id="page_1068_c1032"></a><div class="table-scroll"><table id="table026" class="eh-table eh-table--alternate"><colgroup><col><col><col><col><col><col></colgroup><thead><tr><th>FR1, FR2</th><th>Frequency range</th><th>ΔF<sub>Global</sub>
&nbsp;</th><th>F<sub>REF-Off</sub>s</th><th>N<sub>REF-Offs</sub>
&nbsp;</th><th>Range of N<sub>REF</sub><br>
							(NR-ARFCN)</th></tr></thead><tbody><tr><td>&nbsp;
<strong>FR1:</strong> 450 MHz to </td><td>0 to 3000 MHz</td><td>5 kHz</td><td>0</td><td>0</td><td>0 to 599 999</td></tr><tr><td>           7.125 GHz</td><td>3000 to 24 250 MHz</td><td>15 kHz</td><td>3000</td><td>600 000</td><td>600 000 to 2 016 666</td></tr><tr><td>&nbsp;
<strong>FR2:</strong> 24.25 GHz to <br>          52.6 GHz</td><td>24250 to 100 000 MHz</td><td>60 kHz</td><td>24 250.08 MHz</td><td>2 016 667</td><td>2 016 667 to 3 279 165</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-15 </span>NR-ARFCN parameters for the global frequency raster.</p>


<a id="page_1068_c1033"></a><p>The NR-ARFCN provided within <em>MeasObjectNR</em> corresponds to subcarrier #0 in <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr>#10 of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>.</p>


<a id="page_1068_c1034"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:26%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-016__Carrier_frequency_of_the_SSB_04d55ea1a2.png" width="800" height="202" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-16 </span>Carrier frequency of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> signaled as NR-ARFCN.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1068_c1035"></a><p>5G NR may use the same or a different frequency band compared to LTE and even explore mm-wave frequencies up to 52.6 GHz. For any quality measurement, the UE may have to retune its receiver to a different frequency or frequency band than the current serving LTE cell. Therefore, a time period needs to be defined such that the UE can make these measurements on different frequency bands. This time is provided by either the so-called <em>measurement gap</em> or a <em>measurement window</em>. As mentioned above, the measurement object provides the required information to calculate the measurement timing configuration (<abbr class="eh-abbreviation" title="Machine type communication, Measurement timing configuration" lang="en"><span class="eh-tooltip" title="Machine type communication, Measurement timing configuration">MTC</span></abbr>) to carry out the quality measurement on the <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr>. This includes the periodicity, offset and duration of the window. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-017__NR_measurement_timing_configuration.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-17 &lt;\/span&gt;NR measurement timing configuration (MTC) window.&quot;}]">Fig. 2-17</a> shows an example assuming a periodicity of 40 radio frames and an offset value of 22. The measurement timing configuration window offers great flexibility. However, it needs to match the transmission of <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> within an <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr> burst to enable measurements on the <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr>.</p>


<a id="page_1068_c1036"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:32%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-017__NR_measurement_timing_configuration_bbb33a80cb.png" width="800" height="251" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-17 </span>NR measurement timing configuration (<abbr class="eh-abbreviation" title="Machine type communication, Measurement timing configuration" lang="en"><span class="eh-tooltip" title="Machine type communication, Measurement timing configuration">MTC</span></abbr>) window.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1068_c1037"></a><p>With this information, the UE is now able to carry out signal quality measurements on 5G NR cells since it knows the frequency on which to find the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> and when it can retune its receiver to these frequencies to perform the measurements. If the UE detects multiple beams, it will calculate the linear average over the maximum number of beams (<em>maxRS-IndexCellQual-r15</em>) allowed, only taking <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> beams into account that exceed the defined threshold (<em>threshRS-Index-r15</em>). This will determine the overall cell quality which normally must be reported by the UE.</p><p>Consequently, all measurement results have to be reported back to the LTE network. The measurement configuration (<em>MeasConfig</em>) within the received <em>RRCConnection</em><em>Reconfiguration</em> message includes all required information on how to report the results in terms of quality measurements for 5G NR. Each measurement object has an associated measurement identity that is linked to a reporting identity with an associated reporting configuration. The measurement reports for neighboring NR cells include the physical cell identity for that cell, the measurement result for the cell (<abbr class="eh-abbreviation" title="Reference signal received power" lang="en"><span class="eh-tooltip" title="Reference signal received power">RSRP</span></abbr>, RSRQ, <abbr class="eh-abbreviation" title="Signal-to-interference-plus-noise ratio" lang="en"><span class="eh-tooltip" title="Signal-to-interference-plus-noise ratio">SINR</span></abbr>) and the measurement results for each detected <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> listed by index with the <abbr class="eh-abbreviation" title="Reference signal received power" lang="en"><span class="eh-tooltip" title="Reference signal received power">RSRP</span></abbr>, RSRQ and <abbr class="eh-abbreviation" title="Signal-to-interference-plus-noise ratio" lang="en"><span class="eh-tooltip" title="Signal-to-interference-plus-noise ratio">SINR</span></abbr> result if configured. The best <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> index is reported first, and a hierarchy is built up by decreasing <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> index but only for indexes that are above the configured threshold. To send the report, the UE needs to send a scheduling request on the LTE physical uplink control channel (<abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>) in order to receive an uplink scheduling grant by the eNB to transmit the measurement report (<em>MeasResultCellNR-r15</em>) using the LTE physical uplink shared channel (<abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>).</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1069" data-prevpid="1068" data-nextpid="1070" data-chapter="2.1.3 Connecting the 5G RAN and reconfiguration of the air interface" id="page_1069">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.1.3 Connecting the 5G RAN and reconfiguration of the air interface</h3>
						
<a id="page_1069_c1038"></a><p>Based on the received measurement report, the eNB can then decide to add a 5G NR base station as a secondary node. A basic overview of this procedure is given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-018__Secondary_node__SN__addition_procedure.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-18 &lt;\/span&gt;Secondary node (SN) addition procedure.&quot;}]">Fig. 2-18</a> (see <span class="eh-hint" title="3GPP TS 37.340: NR; Multi-connectivity; Overall description; Stage-2" lang="en"><span class="eh-tooltip" title="3GPP TS 37.340: NR; Multi-connectivity; Overall description; Stage-2">TS 37.340</span></span>, section 10.2.1 for further details).</p>


<a id="page_1069_c1039"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:47%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-018__Secondary_node__SN__addition_procedure_b56afce216.png" width="800" height="372" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-18 </span>Secondary node (<abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr>) addition procedure.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1069_c1040"></a><p>In step 1, the eNB assumes the role of master node (<abbr class="eh-abbreviation" title="Master node" lang="en"><span class="eh-tooltip" title="Master node">MN</span></abbr>, MeNB) and initiates the addition of the secondary node by sending the <em>SgNB addition request</em> command over the non-ideal <abbr class="eh-abbreviation" title="The interface between the eNBs" lang="en"><span class="eh-tooltip" title="The interface between the eNBs">X2</span></abbr> interface to the desired gNB and starting the timer T<sub>DCpre</sub><sub>p</sub>. With this message, the <abbr class="eh-abbreviation" title="Master node" lang="en"><span class="eh-tooltip" title="Master node">MN</span></abbr> requests preparation of radio resources for <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> operation for a specific UE. The detailed content of the message is defined in <span class="eh-hint" title="3GPP TS 36.423: Evolved Universal Terrestrial Radio Access Network (EUTRAN); X2 Application Protocol (X2AP)" lang="en"><span class="eh-tooltip" title="3GPP TS 36.423: Evolved Universal Terrestrial Radio Access Network (EUTRAN); X2 Application Protocol (X2AP)">TS 36.423</span></span>.</p><p>This message includes the following parameters:</p><ul class="eh-list eh-list--line"><li><strong>MeNB to SgNB container</strong> with various information as specified in <span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span>, including:<ul><li class="Flie-text_Flie-text-Aufz2-Strich">Entire UE capabilities</li><li class="Flie-text_Flie-text-Aufz2-Strich">Latest 5G NR measurement results with a list of frequencies configured by the <abbr class="eh-abbreviation" title="Master node" lang="en"><span class="eh-tooltip" title="Master node">MN</span></abbr> to be measured by the UE. This information can be used by the <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> to decide which <abbr class="eh-abbreviation" title="Secondary cell" lang="en"><span class="eh-tooltip" title="Secondary cell">SCell</span></abbr> to configure for this UE</li></ul></li><li><strong>NR security capabilities of the device</strong> – The encryption and integrity protection algorithms the end-user device supports for 5G NR</li><li><strong>EUTRAN radio access bearer</strong> (<abbr class="eh-abbreviation" title="EUTRAN radio access bearer" lang="en"><span class="eh-tooltip" title="EUTRAN radio access bearer">E-RAB</span></abbr>) configuration – <abbr class="eh-abbreviation" title="EUTRAN radio access bearer" lang="en"><span class="eh-tooltip" title="EUTRAN radio access bearer">E-RAB</span></abbr> parameters, transport network layer (<abbr class="eh-abbreviation" title="Transport network layer" lang="en"><span class="eh-tooltip" title="Transport network layer">TNL</span></abbr>) address information</li><li>Information about X2-U bearer operation of <abbr class="eh-abbreviation" title="Master node" lang="en"><span class="eh-tooltip" title="Master node">MN</span></abbr> terminated <abbr class="eh-abbreviation" title="Secondary cell group" lang="en"><span class="eh-tooltip" title="Secondary cell group">SCG</span></abbr> bearers and <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> terminated <abbr class="eh-abbreviation" title="Master cell group" lang="en"><span class="eh-tooltip" title="Master cell group">MCG</span></abbr> bearers</li><li>The maximum supported <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> level using <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> terminated split bearer</li></ul><p>The request can be rejected by the secondary node or acknowledged, in which case the gNB returns the <em>SgNB request acknowledge</em> command to the <abbr class="eh-abbreviation" title="Master node" lang="en"><span class="eh-tooltip" title="Master node">MN</span></abbr>. While doing so, it secures the required radio resources and decides on a primary ­secondary cell (PSCell) and other secondary cells (<abbr class="eh-abbreviation" title="Secondary cell" lang="en"><span class="eh-tooltip" title="Secondary cell">SCell</span></abbr>) to be added to the UE. In case of <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr>, one 5G NR carrier is combined with one or more LTE carriers. Therefore, the carrier activated by the gNB is at this point the PSCell and the only <abbr class="eh-abbreviation" title="Secondary cell" lang="en"><span class="eh-tooltip" title="Secondary cell">SCell</span></abbr> at the very same time. Now, the secondary gNB (SgNB) sends a message back to the MeNB that includes the NR <em>RRCReconfiguration</em> message, the radio bearer configuration, the measurement configuration with frequencies to be measured, their serving cell index and the frequency range type (FR1, FR2) they belong to.</p><p>As the MeNB receives the acknowledgment over the <abbr class="eh-abbreviation" title="The interface between the eNBs" lang="en"><span class="eh-tooltip" title="The interface between the eNBs">X2</span></abbr> interface, it initiates the second major step of the addition procedure by using the provided information to configure or reconfigure the air interface for 5G NR. This involves sending an <em>RRCConnection</em><em>Reconfiguration</em> message over the LTE link. With the evolution of LTE, the content of this message has been extended multiple times. Now, with support for 5G NR, new information elements have been added. One of these new elements is the <em>nr-</em><em>SecondaryCellGroupConfig</em><em>-r15</em> message, which carries the NR RRCReconfiguration message that was received from the SgNB. The <abbr class="eh-abbreviation" title="Master node" lang="en"><span class="eh-tooltip" title="Master node">MN</span></abbr> forwards this message without any modification to the UE, embedding the message content in the LTE <em>RRCConnectionReconfiguration</em> message as <em>nr-</em><em>SecondaryCellGroupConfig-</em><em>r15</em>. The content of this message provides the UE with the bearer configuration, radio resources, cell configuration and measurement configuration. As shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-019__NR_RRCReconfiguration_4_neu.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-19 &lt;\/span&gt;RRC parameterization for CFRA and CBRA.&quot;}]">Fig. 2-19</a>, the message also includes all relevant information on how to use the random access channel to synchronize to the 5G NR cell. The random access procedure in 5G NR is explained in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1070" class="eh-link eh-link--page">2.1.4 Random access procedure in 5G NR, page 250</a>.</p>


<a id="page_1069_c1041"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:91%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-019__NR_RRCReconfiguration_4_neu_3ff925905e.png" width="800" height="725" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-19 </span><abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> parameterization for <abbr class="eh-abbreviation" title="Contention free random access" lang="en"><span class="eh-tooltip" title="Contention free random access">CFRA</span></abbr> and <abbr class="eh-abbreviation" title="Contention based random access" lang="en"><span class="eh-tooltip" title="Contention based random access">CBRA</span></abbr>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1069_c1042"></a><p><em>nr-RadioBearerConfig</em> is also part of the <em>RRCConnectionReconfiguration </em>message and includes the configuration of the radio bearers configured with NR <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr>. Another important information that is provided with the reconfiguration message is the <em>sk-Counter</em> which provides a value in the range 0 to 65 535. This value is used for initial configuration of security for <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr>. The LTE network provides this info to facilitate the configuration of signaling radio bearer 3 (SRB3). SRB3 is configured for the transfer of some NR <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> messages (e.g. measurement configuration and reporting) between the UE and SgNB via the NR radio interface.</p><p>The UE acknowledges successful reception of the message by sending the <em>RRCConnectionReconfigurationComplete</em> message back to the LTE network. The next task for the UE is to establish uplink synchronization with the 5G NR cell using the provided information. Acknowledgment of reception of the <em>RRCConnection</em><em>Reconfiguration</em> message is not dependent on successful execution of the random access procedure for 5G.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1070" data-prevpid="1069" data-nextpid="1071" data-chapter="2.1.4 Random access procedure in 5G NR" id="page_1070">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.1.4 Random access procedure in 5G NR</h3>
						
<a id="page_1070_c1043"></a><p>As in LTE, 5G NR uses a contention-based (<abbr class="eh-abbreviation" title="Contention based random access" lang="en"><span class="eh-tooltip" title="Contention based random access">CBRA</span></abbr>) or contention-free random access (<abbr class="eh-abbreviation" title="Contention free random access" lang="en"><span class="eh-tooltip" title="Contention free random access">CFRA</span></abbr>) procedure. In general, the procedure encompasses the transmission of the random access preamble on the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> (message 1), the random access response by the network via <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> (message 2) and for the contention-based random access procedure, the transmission of the <abbr class="eh-abbreviation" title="Layer 2 (data link layer)" lang="en"><span class="eh-tooltip" title="Layer 2 (data link layer)">L2</span></abbr>/<abbr class="eh-abbreviation" title="Layer 3 (network layer)" lang="en"><span class="eh-tooltip" title="Layer 3 (network layer)">L3</span></abbr> message on <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> (message 3) and the reception of the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> for contention resolution (message 4).</p>


<a id="page_1070_c1044"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:31%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-020__Contention-based_and_contention-free_random_...__2a03d741f7.png" width="800" height="244" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-20 </span>Contention-based and contention-free random access procedure in 5G NR.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1070_c1045"></a><p><abbr class="eh-abbreviation" title="Contention free random access" lang="en"><span class="eh-tooltip" title="Contention free random access">CFRA</span></abbr> is the mode the UE initially uses to perform the random access procedure in non-standalone mode. As shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-020__Contention-based_and_contention-free_random_..._.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-20 &lt;\/span&gt;Contention-based and contention-free random access procedure in 5G NR.&quot;}]">Fig. 2-20</a>, the UE uses an assigned preamble to perform random access and the procedure is concluded once the UE receives the random access response. Contention-based random access is the fallback scenario in non-standalone mode. If <abbr class="eh-abbreviation" title="Contention free random access" lang="en"><span class="eh-tooltip" title="Contention free random access">CFRA</span></abbr> fails, e.g. transmission of the dedicated preamble is not acknowledged within a configured time period, the UE may switch to <abbr class="eh-abbreviation" title="Contention based random access" lang="en"><span class="eh-tooltip" title="Contention based random access">CBRA</span></abbr> to establish uplink synchronization. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1070_c1046\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table eh-table--alternate\&quot; id=\&quot;table027\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Random access procedure modes&lt;\/th&gt;&lt;th&gt;Use cases&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Contention-free random access (CFRA)&lt;\/td&gt;&lt;td&gt;&lt;ul class=\&quot;eh-list eh-list--line\&quot;&gt;&lt;li class=\&quot;Flie-text_Flie-text-Aufz1-Strich\&quot;&gt;Uplink synchronization (e.g. non-standalone mode (EN-DC))&lt;\/li&gt;&lt;li class=\&quot;Flie-text_Flie-text-Aufz1-Strich\&quot;&gt;Beam failure recovery&lt;\/li&gt;&lt;li class=\&quot;Flie-text_Flie-text-Aufz1-Strich\&quot;&gt;Handover&lt;\/li&gt;&lt;li class=\&quot;Flie-text_Flie-text-Aufz1-Strich\&quot;&gt;System information (SI) request&lt;\/li&gt;&lt;\/ul&gt;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Contention-based random access (CBRA)&lt;\/td&gt;&lt;td&gt;&lt;ul class=\&quot;eh-list eh-list--line\&quot;&gt;&lt;li class=\&quot;Flie-text_Flie-text-Aufz1-Strich\&quot;&gt;Initial access (standalone mode)&lt;\/li&gt;&lt;li class=\&quot;Flie-text_Flie-text-Aufz1-Strich\&quot;&gt;Fallback (non-standalone mode)&lt;\/li&gt;&lt;\/ul&gt;&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-21 &lt;\/span&gt;Overview of the different use cases for each procedure&lt;\/p&gt;\n\n&quot;}">Fig. 2-21</a> provides an overview of the different use cases for each procedure. Generally speaking, <abbr class="eh-abbreviation" title="Contention free random access" lang="en"><span class="eh-tooltip" title="Contention free random access">CFRA</span></abbr> is typically applied when the UE is already in connected mode (<span class="eh-text--nowrap">RRC_CONNECTED</span>).</p>


<a id="page_1070_c1046"></a><div class="table-scroll"><table class="eh-table eh-table--alternate" id="table027"><colgroup><col><col></colgroup><thead><tr><th>Random access procedure modes</th><th>Use cases</th></tr></thead><tbody><tr><td>Contention-free random access (CFRA)</td><td><ul class="eh-list eh-list--line"><li class="Flie-text_Flie-text-Aufz1-Strich">Uplink synchronization (e.g. non-standalone mode (<abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr>))</li><li class="Flie-text_Flie-text-Aufz1-Strich">Beam failure recovery</li><li class="Flie-text_Flie-text-Aufz1-Strich">Handover</li><li class="Flie-text_Flie-text-Aufz1-Strich">System information (<abbr class="eh-abbreviation" title="System information" lang="en"><span class="eh-tooltip" title="System information">SI</span></abbr>) request</li></ul></td></tr><tr><td>Contention-based random access (CBRA)</td><td><ul class="eh-list eh-list--line"><li class="Flie-text_Flie-text-Aufz1-Strich">Initial access (standalone mode)</li><li class="Flie-text_Flie-text-Aufz1-Strich">Fallback (non-standalone mode)</li></ul></td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-21 </span>Overview of the different use cases for each procedure</p>


<a id="page_1070_c1047"></a><p>For both modes, the network provides dedicated and common resources to perform the random access towards the SgNB. The information elements that provide all the required information are highlighted in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-019__NR_RRCReconfiguration_4_neu.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-19 &lt;\/span&gt;RRC parameterization for CFRA and CBRA.&quot;}]">Fig. 2-19</a> in blue (<abbr class="eh-abbreviation" title="Contention free random access" lang="en"><span class="eh-tooltip" title="Contention free random access">CFRA</span></abbr>) and green (<abbr class="eh-abbreviation" title="Contention based random access" lang="en"><span class="eh-tooltip" title="Contention based random access">CBRA</span></abbr>, <abbr class="eh-abbreviation" title="Contention free random access" lang="en"><span class="eh-tooltip" title="Contention free random access">CFRA</span></abbr>), respectively.</p><p>The fundamental difference between LTE and 5G NR regarding the random access procedure is that transmission of the random access preamble for initial access is typically tied to reception of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> on the downlink. In other words, the UE performs the previously described signal quality measurements on surrounding NR cells and decides on the best received <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> (beam) index. The identified index now determines on which frequency-time resource the random access preamble is transmitted using the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr>. This enables the base station to focus its subsequent downlink transmission of the random access response in the same direction. For <abbr class="eh-abbreviation" title="Contention free random access" lang="en"><span class="eh-tooltip" title="Contention free random access">CFRA</span></abbr>, the procedure ends with reception of the random access response. For <abbr class="eh-abbreviation" title="Contention based random access" lang="en"><span class="eh-tooltip" title="Contention based random access">CBRA</span></abbr>, the UE uses the information provided by the random access response to begin initial transmission on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> (message 3) using the same beam direction as for preamble transmission. Consequently, the base station sends the contention resolution using the same beam direction as for message 2. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1070_c1048\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table eh-table--alternate\&quot; id=\&quot;table028\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Message no.&lt;\/th&gt;&lt;th&gt;Direction&lt;\/th&gt;&lt;th&gt;Description&lt;\/th&gt;&lt;th&gt;Channel&lt;\/th&gt;&lt;th&gt;Subcarrier spacing&lt;\/th&gt;&lt;th&gt;Beam,&lt;br \/&gt; \t\t\tbeam direction&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;UE \u27f6 gNB&lt;\/td&gt;&lt;td&gt;Preamble transmission (random selection (CBRA) or assigned (CFRA))&lt;\/td&gt;&lt;td&gt;PRACH&lt;\/td&gt;&lt;td&gt;Indicated in &lt;strong&gt;RACH-ConfigCommon&lt;\/strong&gt;, received via LTE RRC connection&lt;\/td&gt;&lt;td&gt;Beam determined based on SSB index and related PRACH occasion in frequency-time&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;UE \u27f5 gNB&lt;\/td&gt;&lt;td&gt;Random access response (RAR)&lt;\/td&gt;&lt;td&gt;PDCCH, PDSCH&lt;\/td&gt;&lt;td&gt;Derived from MIB as &lt;strong&gt;subCarrierSpacing-Common&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;Obtained based on detected PRACH and RACH preamble transmission&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;UE \u27f6 gNB&lt;\/td&gt;&lt;td&gt;Scheduled transmission of e.g. &lt;em&gt;RRCSetup Request&lt;\/em&gt;&lt;br \/&gt; \t\t\t(CBRA only)&lt;\/td&gt;&lt;td&gt;PUSCH&lt;br \/&gt; \t\t\t(transform precoding might be enabled via &lt;strong&gt;RACH-Config-Common&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;Use subcarrier spacing set for initial uplink bandwidth part&lt;\/td&gt;&lt;td&gt;Same as message 1&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;UE \u27f5 gNB&lt;\/td&gt;&lt;td&gt;Contention resolution&lt;br \/&gt; \t\t\t(CBRA only)&lt;\/td&gt;&lt;td&gt;PDCCH, PDSCH&lt;\/td&gt;&lt;td&gt;Same as for message 2&lt;\/td&gt;&lt;td&gt;Same as message 2&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-22 &lt;\/span&gt;Beam management during the 5G NR random access procedure.&lt;\/p&gt;\n\n&quot;}">Fig. 2-22</a> summarizes the subcarrier spacing and beam management during the initial random access procedure.</p>


<a id="page_1070_c1048"></a><div class="table-scroll"><table class="eh-table eh-table--alternate" id="table028"><colgroup><col><col><col><col><col><col></colgroup><thead><tr><th>Message no.</th><th>Direction</th><th>Description</th><th>Channel</th><th>Subcarrier spacing</th><th>Beam,<br> 			beam direction</th></tr></thead><tbody><tr><td>1</td><td>UE ⟶ gNB</td><td>Preamble transmission (random selection (CBRA) or assigned (CFRA))</td><td>PRACH</td><td>Indicated in <strong>RACH-ConfigCommon</strong>, received via LTE RRC connection</td><td>Beam determined based on SSB index and related PRACH occasion in frequency-time</td></tr><tr><td>2</td><td>UE ⟵ gNB</td><td>Random access response (RAR)</td><td>PDCCH, PDSCH</td><td>Derived from MIB as <strong>subCarrierSpacing-Common</strong></td><td>Obtained based on detected PRACH and RACH preamble transmission</td></tr><tr><td>3</td><td>UE ⟶ gNB</td><td>Scheduled transmission of e.g. <em>RRCSetup Request</em><br> 			(CBRA only)</td><td>PUSCH<br> 			(transform precoding might be enabled via <strong>RACH-Config-Common</strong></td><td>Use subcarrier spacing set for initial uplink bandwidth part</td><td>Same as message 1</td></tr><tr><td>4</td><td>UE ⟵ gNB</td><td>Contention resolution<br> 			(CBRA only)</td><td>PDCCH, PDSCH</td><td>Same as for message 2</td><td>Same as message 2</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-22 </span>Beam management during the 5G NR random access procedure.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1071" data-prevpid="1070" data-nextpid="1072" data-chapter="2.1.4.1 Transmission of the random access preamble" id="page_1071">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.1.4.1 Transmission of the random access preamble</h4>
						
<a id="page_1071_c1049"></a><p class="eh-headline-207 ">
				Fundamentals of random access preambles in 5G NR
			</p>


<a id="page_1071_c1050"></a><p>The section <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1032_c680" class="eh-link eh-link--page eh-link--ce">Physical random access channel (PRACH), page 89</a> provided an introduction to the random access preamble, including how it is generated and transmitted on the physical random access channel. This section builds upon on the information provided there. Similar to LTE, the random access preamble is a Zadoff-Chu sequence, i.e. a sequence with constant amplitude zero auto correlation (CAZAC). The standard specifies a short and a long sequence. Like in LTE, the long sequence format is designed for the frequency range FR1 and uses a subcarrier spacing of 1.25 kHz or 5 kHz. It is intended to be used for macro deployments (large cells). There are four different formats available supporting different types of cell sizes. The short sequence, intended for small cell and indoor deployments, can be used for both frequency ranges FR1 and FR2. It utilizes a subcarrier spacing of 15 Hz and 30 kHz for FR1 and 60 kHz and 120 kHz for FR2 (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1030_c644\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table007\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;NR operating band&lt;\/th&gt;&lt;th&gt;Uplink (UL) operating band &lt;br&gt;BS receive\/UE transmit &lt;br&gt;FUL_low to FUL_high&lt;\/th&gt;&lt;th&gt;Downlink (DL) operating band&lt;br&gt;\n\t\t\t\t\t\t\tBS transmit\/UE receive&lt;br&gt;\n\t\t\t\t\t\t\tFDL_low to FDL_high&lt;\/th&gt;&lt;th&gt;Duplex mode&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;n1&lt;\/td&gt;&lt;td&gt;1920 MHz to 1980 MHz&lt;\/td&gt;&lt;td&gt;2110 MHz to 2170 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n2&lt;\/td&gt;&lt;td&gt;1850 MHz to 1910 MHz&lt;\/td&gt;&lt;td&gt;1930 MHz to 1990 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n3&lt;\/td&gt;&lt;td&gt;1710 MHz to 1785 MHz&lt;\/td&gt;&lt;td&gt;1805 MHz to 1880 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n5&lt;\/td&gt;&lt;td&gt;824 MHz to 849 MHz&lt;\/td&gt;&lt;td&gt;869 MHz to 894 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n7&lt;\/td&gt;&lt;td&gt;2500 MHz to 2570 MHz&lt;\/td&gt;&lt;td&gt;2620 MHz to 2690 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n8&lt;\/td&gt;&lt;td&gt;880 MHz to 915 MHz&lt;\/td&gt;&lt;td&gt;925 MHz to 960 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n20&lt;\/td&gt;&lt;td&gt;832 MHz to 862 MHz&lt;\/td&gt;&lt;td&gt;791 MHz to 821 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n28&lt;\/td&gt;&lt;td&gt;703 MHz to 748 MHz&lt;\/td&gt;&lt;td&gt;758 MHz to 803 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n38&lt;\/td&gt;&lt;td&gt;2570 MHz to 2620 MHz&lt;\/td&gt;&lt;td&gt;2570 MHz to 2620 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n41&lt;\/td&gt;&lt;td&gt;2496 MHz to 2690 MHz&lt;\/td&gt;&lt;td&gt;2496 MHz to 2690 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n50&lt;\/td&gt;&lt;td&gt;1432 MHz to 1517 MHz&lt;\/td&gt;&lt;td&gt;1432 MHz to 1517 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n51&lt;\/td&gt;&lt;td&gt;1427 MHz to 1432 MHz&lt;\/td&gt;&lt;td&gt;1427 MHz to 1432 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n66&lt;\/td&gt;&lt;td&gt;1710 MHz to 1780 MHz&lt;\/td&gt;&lt;td&gt;2110 MHz to 2200 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n70&lt;\/td&gt;&lt;td&gt;1695 MHz to 1710 MHz&lt;\/td&gt;&lt;td&gt;1995 MHz to 2020 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n71&lt;\/td&gt;&lt;td&gt;663 MHz to 698 MHz&lt;\/td&gt;&lt;td&gt;617 MHz to 652 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n74&lt;\/td&gt;&lt;td&gt;1427 MHz to 1470 MHz&lt;\/td&gt;&lt;td&gt;1475 MHz to 1518 MHz&lt;\/td&gt;&lt;td&gt;FDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n75&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;1432 MHz to 1517 MHz&lt;\/td&gt;&lt;td&gt;SDL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n76&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;1427 MHz to 1432 MHz&lt;\/td&gt;&lt;td&gt;SDL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n77&lt;\/td&gt;&lt;td&gt;3300 MHz to 4200 MHz&lt;\/td&gt;&lt;td&gt;3300 MHz to 4200 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n78&lt;\/td&gt;&lt;td&gt;3300 MHz to 3800 MHz&lt;\/td&gt;&lt;td&gt;3300 MHz to 3800 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n79&lt;\/td&gt;&lt;td&gt;4400 MHz to 5000 MHz&lt;\/td&gt;&lt;td&gt;4400 MHz to 5000 MHz&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n80&lt;\/td&gt;&lt;td&gt;1710 MHz to 1785 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n81&lt;\/td&gt;&lt;td&gt;880 MHz to 915 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n82&lt;\/td&gt;&lt;td&gt;832 MHz to 862 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n83&lt;\/td&gt;&lt;td&gt;703 MHz to 748 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n84&lt;\/td&gt;&lt;td&gt;1920 MHz to 1980 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n86&lt;\/td&gt;&lt;td&gt;1710 MHz to 1780 MHz&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;SUL&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-51 &lt;\/span&gt;5G NR frequency bands for FR1.&lt;\/p&gt;\n\n&quot;}">Fig. 1-51, page 74</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1030_c646\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table008\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;NR operating band&lt;\/th&gt;&lt;th&gt;Uplink (UL) operating band &lt;br&gt;(in MHz)&lt;br&gt;\n\t\t\t\t\t\t\tBS receive\/UE transmit&lt;br&gt;\n\t\t\t\t\t\t\tFUL_low to FUL_high&lt;\/th&gt;&lt;th&gt;Downlink (DL) operating band (in MHz)&lt;br&gt;\n\t\t\t\t\t\t\tBS transmit\/UE receive&lt;br&gt;\n\t\t\t\t\t\t\tFDL_low to FDL_high&lt;\/th&gt;&lt;th&gt;Duplex mode&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;n257&lt;\/td&gt;&lt;td&gt;26 500 to 29 500&lt;\/td&gt;&lt;td&gt;26 500 to 29 500&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n258&lt;\/td&gt;&lt;td&gt;24 250 to 27 500&lt;\/td&gt;&lt;td&gt;24 250 to 27 500&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n260&lt;\/td&gt;&lt;td&gt;37 000 to 40 000&lt;\/td&gt;&lt;td&gt;37 000 to 40 000&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;n261&lt;\/td&gt;&lt;td&gt;27 500 to 28 350&lt;\/td&gt;&lt;td&gt;27 500 to 28 350&lt;\/td&gt;&lt;td&gt;TDD&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-52 &lt;\/span&gt;5G NR frequency bands for FR2.&lt;\/p&gt;\n\n&quot;}">Fig. 1-52, page 75</a>). For FR2, this results in a minimum bandwidth requirement for <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> transmission of 10 MHz for an <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> of 60 kHz and 20 MHz for an <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> of 120 kHz. This is a major difference compared to LTE. There, the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> that carries the preamble occupied only six resource blocks and thus a total of 1.08 MHz bandwidth using a subcarrier spacing of 1.25 kHz.</p><p>With reception of <em>RRCReconfiguration</em> over the established LTE <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection, the UE receives the <em>RACH-ConfigCommon</em> information element. This message is used to specify cell-specific random access parameters. It includes generic parameters for the regular random access procedure as well as for beam failure recovery. With <em>RACH-ConfigCommon</em>, the network informs the UE directly about which subcarrier spacing (Δ<em>f</em><sub>RA</sub>) to use for transmitting the random access preamble on <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr>. Only the values 15 kHz, 30 kHz, 60 kHz and 120 kHz are applicable for this information element. In other words, if the field is absent the UE must determine the subcarrier spacing differently. In this case, the UE uses the prach-ConfigurationIndex (further details on this information element are found throughout this paragraph). Since higher subcarrier spacings are not applicable, this index will only signal one of the preamble formats 0, 1, 2 or 3 that use 1.25 kHz or 5 kHz, respectively. In other words, in this particular cell only one of these formats (and thus one subcarrier spacing) is applicable.</p><p>The two different types of sequences (long, short) that could be used for the random access preamble differ not only regarding the subcarrier spacing they are defined for. Long sequences support an unrestricted set of preambles and restricted sets of type A and Type B, while short sequences only support unrestricted sets of preambles. An unrestricted set could include all 64 possible preambles, but this is not mandatory due to the support for <abbr class="eh-abbreviation" title="Contention free random access" lang="en"><span class="eh-tooltip" title="Contention free random access">CFRA</span></abbr> in 5G NR since a certain number of preambles are thus reserved for it. For restricted sets, the available number of preambles is organized in two groups (A and B). Group A includes preambles from 0 to the signaled number of preambles and group B consists of the remainder of the available preambles. Group A exists only if group B is configured. There are two groups due to the required uplink grant for message 3 transmission. If the UE only has a small amount of data to transmit or the radio conditions are not very good, an uplink grant with only a small resource allocation but a robust transmission scheme is required. For UEs with more data to transmit or in cases where radio conditions are ideal, a grant reflecting these conditions is required. Therefore, group A has a setting that defines the required transport block size (<abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr>) threshold in bits for the transmission of message 3. In other words, if the potential message size exceeds this threshold (and certain power conditions are met), the UE is required to pick a preamble from group B but otherwise from group A. Preamble selection from one of these groups is still random, so there can be collisions on the air interface since another UE within that cell may pick the same preamble. Again, this “grouping” is only supported for long sequences (i.e. 839) with a subcarrier spacing of 1.25 kHz or 5 kHz and is therefore the same definition as for LTE. Furthermore, it is only applicable to <abbr class="eh-abbreviation" title="Contention based random access" lang="en"><span class="eh-tooltip" title="Contention based random access">CBRA</span></abbr> and not to <abbr class="eh-abbreviation" title="Contention free random access" lang="en"><span class="eh-tooltip" title="Contention free random access">CFRA</span></abbr>.</p><p>As stated in the section <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1032_c680" class="eh-link eh-link--page eh-link--ce">Physical random access channel (PRACH), page 89</a>, generation of the preamble is influenced by several parameters that are available to the UE upon reception of <em>RACH-ConfigCommon</em> and RACH-ConfigGeneric. Upon reception of the root sequence index, the set of 64 preambles can be generated by the UE.</p><p>Based on the provided subcarrier spacing, the UE can already determine if the procedure is based on an unrestricted set (15 kHz, 30 kHz, 60 kHz, 120 kHz) or if there is an unrestricted and restricted set type A or B (1.25 kHz, 5 kHz). Based on this type of information and the subcarrier spacing, the value for the cyclic shift (NCS) to generate the preamble is determined by the UE based on the parameter zeroCorrelationZoneConfig (see <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>) signaled with <span class="eh-text--nowrap">RACH-ConfigGeneric</span> in RACH-ConfigDedicated and RACH-ConfigCommon. RACH-ConfigDedicated and thus RACH-ConfigGeneric are also part of the RRCReconfiguration message received over the LTE <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection.</p>


<a id="page_1071_c1051"></a><p class="eh-headline-207 ">
				When to transmit the random access preamble?
			</p>


<a id="page_1071_c1052"></a><p>The generic parameter (RACH-ConfigGeneric) also includes the <em>prach-­ConfigurationIndex</em>, which informs the UE not only about the preamble format to use but also about the point in time at which to transmit the preamble in the uplink. There are a total of 256 indices (0 to 255), and the configuration of each index depends on the frequency range (FR1 or FR2) and for FR1 also the type of spectrum (paired, unpaired) utilized by the network. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1071_c1053\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table eh-table--alternate\&quot; id=\&quot;table029\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;PRACH&lt;br \/&gt; \t\t\tconfiguration index&lt;\/th&gt;&lt;th&gt;Preamble format&lt;\/th&gt;&lt;th colspan=\&quot;2\&quot;&gt;n&lt;sub&gt;SFN&lt;\/sub&gt; mod x = y&lt;\/th&gt;&lt;th&gt;Subframe number&lt;\/th&gt;&lt;th&gt;Starting symbol&lt;\/th&gt;&lt;th&gt;\u00adNumber of PRACH slots within a subframe&lt;\/th&gt;&lt;th&gt;Number of time- domain PRACH occasions within a PRACH&lt;br \/&gt; \t\t\tslot&lt;\/th&gt;&lt;th&gt;PRACH&lt;br \/&gt; \t\t\tduration&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;-&lt;\/td&gt;&lt;td&gt;-&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;-&lt;\/td&gt;&lt;td&gt;-&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;28&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;-&lt;\/td&gt;&lt;td&gt;-&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;34&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;-&lt;\/td&gt;&lt;td&gt;-&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;66&lt;\/td&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;1, 3, 5, 7, 9&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;-&lt;\/td&gt;&lt;td&gt;-&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;67&lt;\/td&gt;&lt;td&gt;A1&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;109&lt;\/td&gt;&lt;td&gt;A2&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0, 1, 2, 3, 4, 5, 6, 7, 8, 9&lt;\/td&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;132&lt;\/td&gt;&lt;td&gt;A3&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0, 1, 2, 3, 4, 5, 6, 7, 8, 9&lt;\/td&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;133&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;&lt;strong&gt;B1&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;&lt;strong&gt;4&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;&lt;strong&gt;1&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;&lt;strong&gt;9&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;&lt;strong&gt;2&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;&lt;strong&gt;1&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;&lt;strong&gt;6&lt;\/strong&gt;&lt;\/td&gt;&lt;td&gt;&lt;strong&gt;2&lt;\/strong&gt;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;145&lt;\/td&gt;&lt;td&gt;B4&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;12&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;169&lt;\/td&gt;&lt;td&gt;C0&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;210&lt;\/td&gt;&lt;td&gt;C2&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0, 1, 2, 3, 4, 5, 6, 7, 8, 9&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;td&gt;\u2026&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;255&lt;\/td&gt;&lt;td&gt;A3\/B3&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0, 1, 2, 3, 4, 5, 6, 7, 8, 9&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-23 &lt;\/span&gt;Random access configurations for FR1 and unpaired spectrum (TDD).&lt;\/p&gt;\n\n&quot;}">Fig. 2-23</a> shows selected examples from the 0 to 255 indices for FR1 and unpaired spectrum (TDD). The complete table as well as tables for all other configurations can be found in <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>, section 6.3.3.2.</p>


<a id="page_1071_c1053"></a><div class="table-scroll"><table class="eh-table eh-table--alternate" id="table029"><colgroup><col><col><col><col><col><col><col><col><col></colgroup><thead><tr><th>PRACH<br> 			configuration index</th><th>Preamble format</th><th colspan="2">n<sub>SFN</sub> mod x = y</th><th>Subframe number</th><th>Starting symbol</th><th>­Number of PRACH slots within a subframe</th><th>Number of time- domain PRACH occasions within a PRACH<br> 			slot</th><th>PRACH<br> 			duration</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>16</td><td>1</td><td>9</td><td>0</td><td>-</td><td>-</td><td>0</td></tr><tr><td>1</td><td>0</td><td>8</td><td>1</td><td>9</td><td>0</td><td>-</td><td>-</td><td>0</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>28</td><td>1</td><td>16</td><td>1</td><td>7</td><td>0</td><td>-</td><td>-</td><td>0</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>34</td><td>2</td><td>16</td><td>1</td><td>6</td><td>0</td><td>-</td><td>-</td><td>0</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>66</td><td>3</td><td>1</td><td>0</td><td>1, 3, 5, 7, 9</td><td>0</td><td>-</td><td>-</td><td>0</td></tr><tr><td>67</td><td>A1</td><td>16</td><td>1</td><td>9</td><td>0</td><td>2</td><td>6</td><td>2</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>109</td><td>A2</td><td>1</td><td>0</td><td>0, 1, 2, 3, 4, 5, 6, 7, 8, 9</td><td>9</td><td>1</td><td>1</td><td>4</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>132</td><td>A3</td><td>1</td><td>0</td><td>0, 1, 2, 3, 4, 5, 6, 7, 8, 9</td><td>7</td><td>1</td><td>1</td><td>6</td></tr><tr><td><strong>133</strong></td><td><strong>B1</strong></td><td><strong>4</strong></td><td><strong>1</strong></td><td><strong>9</strong></td><td><strong>2</strong></td><td><strong>1</strong></td><td><strong>6</strong></td><td><strong>2</strong></td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>145</td><td>B4</td><td>16</td><td>1</td><td>9</td><td>0</td><td>2</td><td>1</td><td>12</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>169</td><td>C0</td><td>16</td><td>1</td><td>9</td><td>2</td><td>2</td><td>6</td><td>2</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>210</td><td>C2</td><td>1</td><td>0</td><td>0, 1, 2, 3, 4, 5, 6, 7, 8, 9</td><td>8</td><td>1</td><td>1</td><td>6</td></tr><tr><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td><td>…</td></tr><tr><td>255</td><td>A3/B3</td><td>1</td><td>0</td><td>0, 1, 2, 3, 4, 5, 6, 7, 8, 9</td><td>2</td><td>1</td><td>2</td><td>6</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-23 </span>Random access configurations for FR1 and unpaired spectrum (TDD).</p>


<a id="page_1071_c1054"></a><p>Let us now consider an example for <abbr class="eh-abbreviation" title="Contention free random access" lang="en"><span class="eh-tooltip" title="Contention free random access">CFRA</span></abbr> with non-standalone access while assuming that the <em>prach-ConfigurationIndex</em> sent in RACH-ConfigDedicated (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-019__NR_RRCReconfiguration_4_neu.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-19 &lt;\/span&gt;RRC parameterization for CFRA and CBRA.&quot;}]">Fig. 2-19</a>) was set to 133.</p><p>This index instructs the UE to use preamble format B1. Since the above table is for FR1, the potential subcarrier spacing used for data transmission is 15 kHz, 30 kHz or 60 kHz. Assumption is, that the network is configured to use 30 kHz for the initial bandwidth part. In that case, one subframe with the standardized duration of 1 ms consists of two slots with 14 OFDM symbols each. In accordance with <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>, Table 6.3.3.1-2, the total length of any preamble format is determined by the used subcarrier spacing, the cyclic prefix and the sequence length (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-024__PRACH_configuration_index_133_for_FR1.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-24 &lt;\/span&gt;PRACH configuration index 133 for FR1, unpaired spectrum.&quot;}]">Fig. 2-24</a>). For format B1, the sequence is repeated and therefore transmitted twice. Due to the total length of the preamble, some preamble formats (i.e. B1 to C2) must use a guard period (GP) to satisfy the timing definitions for 5G NR. The resulting guard periods are listed in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1032_c688\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table011\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Format&lt;\/th&gt;&lt;th&gt;Subcarrier spacing&lt;\/th&gt;&lt;th&gt;N&lt;sub&gt;u&lt;\/sub&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;N&lt;sub&gt;CP&lt;\/sub&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;N&lt;sub&gt;GP&lt;\/sub&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;Max. cell size&lt;\/th&gt;&lt;th&gt;Use case&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;A1&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;2\u22192048&lt;\/td&gt;&lt;td&gt;288&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0 km&lt;\/td&gt;&lt;td&gt;Pre-synchronized timing advance&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A2&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;4\u22192048&lt;\/td&gt;&lt;td&gt;576&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0 km&lt;\/td&gt;&lt;td&gt;Indoor, small cell&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A3&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;6\u22192048&lt;\/td&gt;&lt;td&gt;864&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0 km&lt;\/td&gt;&lt;td&gt;Indoor, small cell&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B1&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;2\u22192048&lt;\/td&gt;&lt;td&gt;216&lt;\/td&gt;&lt;td&gt;72&lt;\/td&gt;&lt;td&gt;0.3 km&lt;\/td&gt;&lt;td&gt;Small cell&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B2&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;4\u22192048&lt;\/td&gt;&lt;td&gt;360&lt;\/td&gt;&lt;td&gt;216&lt;\/td&gt;&lt;td&gt;1 km&lt;\/td&gt;&lt;td&gt;Urban cell&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B3&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;6\u22192048&lt;\/td&gt;&lt;td&gt;504&lt;\/td&gt;&lt;td&gt;360&lt;\/td&gt;&lt;td&gt;2 km&lt;\/td&gt;&lt;td&gt;Urban cell&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B4&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;12\u22192048&lt;\/td&gt;&lt;td&gt;936&lt;\/td&gt;&lt;td&gt;792&lt;\/td&gt;&lt;td&gt;4 km&lt;\/td&gt;&lt;td&gt;Outdoor cell&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;C0&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;2048&lt;\/td&gt;&lt;td&gt;1240&lt;\/td&gt;&lt;td&gt;1096&lt;\/td&gt;&lt;td&gt;5 km&lt;\/td&gt;&lt;td&gt;Outdoor cell&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;C1&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;4\u22192048&lt;\/td&gt;&lt;td&gt;2048&lt;\/td&gt;&lt;td&gt;2912&lt;\/td&gt;&lt;td&gt;15 km&lt;\/td&gt;&lt;td&gt;Larger outdoor cell&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-68 &lt;\/span&gt;PRACH preamble formats for short sequences, L = 139 and subcarrier spacing of 15 kHz. Values in multiples of T&lt;sub&gt;c&lt;\/sub&gt; and \u03f0.&lt;\/p&gt;\n\n&quot;}">Fig. 1-68</a>.</p>


<a id="page_1071_c1055"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:65%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-024__PRACH_configuration_index_133_for_FR1_15cf0baeee.png" width="800" height="514" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-24 </span><abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> configuration index 133 for FR1, unpaired spectrum.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1071_c1056"></a><p>Based on the index, the UE has an opportunity to send the random access preamble in every radio frame (<abbr class="eh-abbreviation" title="System frame number" lang="en"><span class="eh-tooltip" title="System frame number">SFN</span></abbr>) that fulfills n<sub>SFN</sub> mod 4 = 1. In other words, the UE can send its preamble in radio frames 1, 5, 9, 13, 17, …, etc., which results in a periodicity of 40 ms. Within these radio frames, subframe #9 is reserved for preamble transmission. The starting position (= OFDM symbol) for preamble transmission is based on <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-025__Formel.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-25 &lt;\/span&gt;Calculation of the starting symbol position for preamble transmission&quot;}]">Fig. 2-25</a> as defined in <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>, section 5.3.2.</p>


<a id="page_1071_c1057"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:526px;"><div class="book-img-wrap__inner" style="padding-bottom:12%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/2-025__Formel.png" width="526" height="63" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-25 </span>Calculation of the starting symbol position for preamble transmission</figcaption></figure></div></div></div></div></div></div>


<a id="page_1071_c1058"></a><p>Parameter <em>l</em><sub class="eh-text__number">0</sub> is given by the <em>prach-ConfigurationIndex</em> and in the example with index 133, it is set to 2. The next two parameters define the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> transmission occasion within the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> slot, i.e. the possibility to send the preamble.</p><p>There can be a maximum of eight occasions in the time domain. For index 133, this results in a range from 0 to 5, where the duration is given by the index itself with 2 corresponding to two OFDM symbols. Since the subcarrier spacing for the preamble in this example is set to be 30 kHz, the <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> slot parameter is set to two.</p>


<a id="page_1071_c1059"></a><p class="eh-headline-207 ">
				Frequency position for transmission of the random access preamble
			</p>


<a id="page_1071_c1060"></a><p>As explained, 5G NR makes use of bandwidth parts (<abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>), dividing the available channel bandwidth into different parts that utilize one of the defined numerologies and occupy a defined number of contiguous resource blocks. The fundamentals of bandwidth parts are discussed in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1047" class="eh-link eh-link--page">1.4 Bandwidth part fundamentals, page 182</a>. As it was mentioned there, a UE camps on an initial downlink and uplink bandwidth part that is configured by the network either through dedicated <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> signaling or broadcasting of system information. In non-standalone mode, or more detailed <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> mode, the information is provided to the UE by the established signaling connection via LTE. Upon reception of the <em>RRCReconfiguration</em> message, the network specifies among an initial downlink bandwidth part also the initial uplink bandwidth part a UE should use for its initial transmission such as the random access preamble. First of all, the UE has to determine the position of the carrier. This information is provided by frequencyInfoUL with the two information elements <em>absoluteFrequencyPointA</em><em></em>and <em>scs-</em><em>SpecificCarrierList</em>. These elements are highlighted in orange in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-026__221__NR_RRCReconfiguration_4_neu.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-26 &lt;\/span&gt;RRC parameterization for 5G NR uplink and uplink bandwidth part (BWP).&quot;}]">Fig. 2-26</a>. The latter provides the numerology of the carrier as well its overall bandwidth and the offset to reference Point A that is given as the number of common resource blocks (<em>offsetToCarrier</em>, 0 to 2199). The <em>locationAndBandwidth</em> information element, which is also highlighted in orange in the same graphic, now defines the exact frequency domain location and the number of resource blocks allocated for the uplink bandwidth part. It can assume a value in the range 0 to 37 949. This value is treated as a resource indicator value (<abbr class="eh-abbreviation" title="Resource indication value" lang="en"><span class="eh-tooltip" title="Resource indication value">RIV</span></abbr>) using a <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> size of 275 <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr> as the basis. With this information, the UE can exactly determine the location of the uplink bandwidth part where the random access preamble should be transmitted (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-027__Definition_of_the_initial_uplink_bandwidth_part.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-27 &lt;\/span&gt;Definition of the initial uplink bandwidth part (BWP).&quot;}]">Fig. 2-27</a>).</p>


<a id="page_1071_c1061"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:38%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-026__221__NR_RRCReconfiguration_4_neu_03fcd601b9.png" width="800" height="304" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-26 </span><abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> parameterization for 5G NR uplink and uplink bandwidth part (<abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1071_c1062"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:46%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-027__Definition_of_the_initial_uplink_bandwidth_part_881c6ff0c9.png" width="800" height="365" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-27 </span>Definition of the initial uplink bandwidth part (<abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1071_c1063"></a><p>Continuing with our example, we will assume that the subcarrier spacing used for transmission of the random access preamble is Δ<em>f</em><sub>RA</sub> = 30 kHz. Based on the also known subcarrier spacing used by the initial uplink bandwidth part (Δ<em>f</em>), the number of resource blocks required to transmit the preamble in the frequency domain can be determined.</p><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1071_c1064\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table eh-table--alternate\&quot; id=\&quot;table030\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;LRA&lt;\/th&gt;&lt;th&gt;\u0394&lt;strong&gt;&lt;em&gt;f&lt;\/em&gt;&lt;\/strong&gt;&lt;sub class=\&quot;eh-text--strong eh-text__letter\&quot;&gt;RA&lt;\/sub&gt; for PRACH (in kHz)&lt;\/th&gt;&lt;th&gt;Possible preamble format&lt;\/th&gt;&lt;th&gt;\u0394&lt;em&gt;f&lt;\/em&gt; for PUSCH (in kHz)&lt;\/th&gt;&lt;th&gt;&lt;strong&gt;&lt;em&gt;N&lt;\/em&gt;&lt;\/strong&gt;&lt;sup class=\&quot;eh-text__letter\&quot;&gt;R&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__letter\&quot;&gt;A&lt;\/sup&gt;&lt;sub&gt;RB&lt;\/sub&gt;, allocation expressed in number of RB for PUSCH&lt;\/th&gt;&lt;th&gt;k&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;839&lt;\/td&gt;&lt;td&gt;1.25&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;0, 1, 2&lt;\/td&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;7&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;839&lt;\/td&gt;&lt;td&gt;1.25&lt;\/td&gt;&lt;td&gt;30&lt;\/td&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;839&lt;\/td&gt;&lt;td&gt;1.25&lt;\/td&gt;&lt;td&gt;60&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;133&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;839&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;3&lt;\/td&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td&gt;24&lt;\/td&gt;&lt;td&gt;12&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;839&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;30&lt;\/td&gt;&lt;td&gt;12&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;839&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;60&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;7&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;139&lt;\/td&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td rowspan=\&quot;10\&quot;&gt;A1, A2, A3,&lt;br \/&gt; \t\t\tB1, B2, B3, B4, C0, C2&lt;\/td&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td&gt;12&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;139&lt;\/td&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td&gt;30&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;139&lt;\/td&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td&gt;60&lt;\/td&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;139&lt;\/td&gt;&lt;td&gt;30&lt;\/td&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td&gt;24&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;139&lt;\/td&gt;&lt;td&gt;30&lt;\/td&gt;&lt;td&gt;30&lt;\/td&gt;&lt;td&gt;12&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;139&lt;\/td&gt;&lt;td&gt;30&lt;\/td&gt;&lt;td&gt;60&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;139&lt;\/td&gt;&lt;td&gt;60&lt;\/td&gt;&lt;td&gt;60&lt;\/td&gt;&lt;td&gt;12&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;139&lt;\/td&gt;&lt;td&gt;60&lt;\/td&gt;&lt;td&gt;120&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;139&lt;\/td&gt;&lt;td&gt;120&lt;\/td&gt;&lt;td&gt;60&lt;\/td&gt;&lt;td&gt;24&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;139&lt;\/td&gt;&lt;td&gt;120&lt;\/td&gt;&lt;td&gt;120&lt;\/td&gt;&lt;td&gt;12&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-28 &lt;\/span&gt;Supported combinations of \u0394&lt;em&gt;f&lt;\/em&gt;&lt;sub&gt;RA&lt;\/sub&gt; and \u0394&lt;em&gt;f&lt;\/em&gt;.&lt;\/p&gt;\n\n&quot;}">Fig. 2-28</a> lists the possible combinations and resulting number of required resource blocks.</p>


<a id="page_1071_c1064"></a><div class="table-scroll"><table class="eh-table eh-table--alternate" id="table030"><colgroup><col><col><col><col><col><col></colgroup><thead><tr><th>LRA</th><th>Δ<strong><em>f</em></strong><sub class="eh-text--strong eh-text__letter">RA</sub> for PRACH (in kHz)</th><th>Possible preamble format</th><th>Δ<em>f</em> for PUSCH (in kHz)</th><th><strong><em>N</em></strong><sup class="eh-text__letter">R</sup><sup class="eh-text__letter">A</sup><sub>RB</sub>, allocation expressed in number of RB for PUSCH</th><th>k</th></tr></thead><tbody><tr><td>839</td><td>1.25</td><td rowspan="3">0, 1, 2</td><td>15</td><td>6</td><td>7</td></tr><tr><td>839</td><td>1.25</td><td>30</td><td>3</td><td>1</td></tr><tr><td>839</td><td>1.25</td><td>60</td><td>2</td><td>133</td></tr><tr><td>839</td><td>5</td><td rowspan="3">3</td><td>15</td><td>24</td><td>12</td></tr><tr><td>839</td><td>5</td><td>30</td><td>12</td><td>10</td></tr><tr><td>839</td><td>5</td><td>60</td><td>6</td><td>7</td></tr><tr><td>139</td><td>15</td><td rowspan="10">A1, A2, A3,<br> 			B1, B2, B3, B4, C0, C2</td><td>15</td><td>12</td><td>2</td></tr><tr><td>139</td><td>15</td><td>30</td><td>6</td><td>2</td></tr><tr><td>139</td><td>15</td><td>60</td><td>3</td><td>2</td></tr><tr><td>139</td><td>30</td><td>15</td><td>24</td><td>2</td></tr><tr><td>139</td><td>30</td><td>30</td><td>12</td><td>2</td></tr><tr><td>139</td><td>30</td><td>60</td><td>6</td><td>2</td></tr><tr><td>139</td><td>60</td><td>60</td><td>12</td><td>2</td></tr><tr><td>139</td><td>60</td><td>120</td><td>6</td><td>2</td></tr><tr><td>139</td><td>120</td><td>60</td><td>24</td><td>2</td></tr><tr><td>139</td><td>120</td><td>120</td><td>12</td><td>2</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-28 </span>Supported combinations of Δ<em>f</em><sub>RA</sub> and Δ<em>f</em>.</p>


<a id="page_1071_c1065"></a><p>Now the UE is aware of the required bandwidth for transmitting the random access preamble. With the generic parameter (<em>RACH-</em><em>ConfigGeneric</em>), the UE receives two additional parameters related to transmission of the random access preamble: <em>msg1-FDM</em> and <em>msg1-</em><em>FrequencyStart</em>. The latter dictates the frequency offset in terms of the number of resource blocks from the first resource block in the initial uplink bandwidth part (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-027__Definition_of_the_initial_uplink_bandwidth_part.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-27 &lt;\/span&gt;Definition of the initial uplink bandwidth part (BWP).&quot;}]">Fig. 2-27</a>). The parameter <em>msg1-FDM</em> determines how many <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> occasions in the frequency domain within one time instance (<abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> Occasion, RO) are available to transmit the random access preamble. <em>msg1-FDM</em> can assume values of 1, 2, 4 or 8, which means there is a maximum of eight instances in the frequency domain.</p><p>Based on this information and the previously determined timing information, the UE can clearly identify the time-frequency resource in the uplink direction that allows transmission of the random access preamble. Returning to the example with <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> configuration index 133 and assuming <em>msg1-FDM</em> is set to 4 (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-024__PRACH_configuration_index_133_for_FR1.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-24 &lt;\/span&gt;PRACH configuration index 133 for FR1, unpaired spectrum.&quot;}]">Fig. 2-24</a>), we have a total of 24 <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> occasions (RO). The missing piece of information is how a <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> occasion is linked to a synchronization signal block (<abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>) and which preamble(s) are assigned or mapped to an <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>.</p><p>The answer to this is slightly different when discussing initial access for standalone and non-standalone mode. <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr> uses the <abbr class="eh-abbreviation" title="Contention free random access" lang="en"><span class="eh-tooltip" title="Contention free random access">CFRA</span></abbr> procedure for initial access and the RACH-ConfigDedicated information element provides the following input to the UE to help answer this question: <em>ssb-</em><em>perRACH</em><em>-Occasion</em>, ­<em>ra-ssb-</em><em>OccasionMaskIndex</em> and <em>CFRA-SSB-Resource</em>. The latter assigns one random access preamble to an <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> index. Recall that depending on the deployment frequency range, there can be a maximum of 4 (<em>f</em><sub>c</sub> &lt; 3 GHz), 8 (3 &lt; <em>f</em><sub>c</sub> &lt; 6 GHz) or 64 <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> indices (<em>f</em><sub>c</sub> &gt; 6 GHz) available and transmitted by a network. However, based on <em>ssb-</em><em>PositionsIn</em><em>-Burst</em>, the UE determines how many of these <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> indices are actually transmitted by the network since not all are required to be transmitted. This typically depends on the applied beamforming principles as well as the hardware design and configuration of the 5G NR base station, which naturally can vary from vendor to vendor. The example we were considering is based on FR1. Assuming a carrier frequency of 3.5 GHz, the UE analyses an 8-bit bitmap. If the bit is set to “1”, the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> is transmitted and otherwise it is not. We will now assume that all eight SSBs are transmitted. These SSBs need to be above a threshold that is signaled in <em>RACH-Config-Common</em> as <em>rsrp-</em><em>ThresholdSSB</em> to be considered for random access. Based on the detected <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>(s) that are above the threshold, the UE will select one of these SSBs and use the information provided in <em>CFRA-SSB-Resource</em> to identify the associated sequence for the random access preamble to be used for this <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> index. The question is now which occasion in the time domain to use for transmitting this preamble. This information is identified with the aid of <em>ssb-</em><em>perRACH</em><em>-Occasion</em> which can assume values of ⅛, ¼, ½, 1, 2, 8 or 16. A value of ⅛ means that one <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> is assigned to eight consecutive <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> occasions (marked in blue in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-030__Determination_of_RACH_occasions_.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-30 &lt;\/span&gt;Determination of RACH occasions in frequency-time for transmission of the random access preamble.&quot;}]">Fig. 2-30</a>). Now, <em>ra-ssb-OccasionMaskIndex</em> comes into play, which defines <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> occasion(s) associated with an <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> in which the random access preamble is now transmitted (see <span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span>, section 5.1.2). <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1071_c1066\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table031\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;PRACH mask index&lt;\/th&gt;&lt;th&gt;Allowed PRACH occasion(s) of SSB&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;All&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;PRACH occasion index 1&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;PRACH occasion index 2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;PRACH occasion index 3&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;PRACH occasion index 4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;PRACH occasion index 5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;PRACH occasion index 6&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;PRACH occasion index 7&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;PRACH occasion index 8&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;Every even PRACH occasion&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;Every odd PRACH occasion&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;11&lt;\/td&gt;&lt;td rowspan=\&quot;5\&quot;&gt;Reserved&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;12&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;13&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;15&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-29 &lt;\/span&gt;PRACH mask index values.&lt;\/p&gt;\n\n&quot;}">Fig. 2-29</a> lists all possible indices. In our example with <em>prach-ConfigurationIndex</em> set to 133, there is a total of six <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> occasions available within a <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> slot. The <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> mask index now clearly identifies which of the occasions to use for the preamble transmission.</p>


<a id="page_1071_c1066"></a><div class="table-scroll"><table id="table031" class="eh-table eh-table--alternate"><colgroup><col><col></colgroup><thead><tr><th>PRACH mask index</th><th>Allowed PRACH occasion(s) of SSB</th></tr></thead><tbody><tr><td>0</td><td>All</td></tr><tr><td>1</td><td>PRACH occasion index 1</td></tr><tr><td>2</td><td>PRACH occasion index 2</td></tr><tr><td>3</td><td>PRACH occasion index 3</td></tr><tr><td>4</td><td>PRACH occasion index 4</td></tr><tr><td>5</td><td>PRACH occasion index 5</td></tr><tr><td>6</td><td>PRACH occasion index 6</td></tr><tr><td>7</td><td>PRACH occasion index 7</td></tr><tr><td>8</td><td>PRACH occasion index 8</td></tr><tr><td>9</td><td>Every even PRACH occasion</td></tr><tr><td>10</td><td>Every odd PRACH occasion</td></tr><tr><td>11</td><td rowspan="5">Reserved</td></tr><tr><td>12</td></tr><tr><td>13</td></tr><tr><td>14</td></tr><tr><td>15</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-29 </span><abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> mask index values.</p>


<a id="page_1071_c1067"></a><p>Assuming the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> mask index is set to 4, then <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> occasion index 4 is used for transmission of the preamble, even if there are eight consecutive occasions associated with the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>. As was indicated previously, the parameter <em>msg1-FDM</em> defines the additional occasions from a frequency domain perspective. In the example, it was set to 4. The UE now selects one of the four possible occasions randomly but with equal probability among the consecutive <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> occasions. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-030__Determination_of_RACH_occasions_.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-30 &lt;\/span&gt;Determination of RACH occasions in frequency-time for transmission of the random access preamble.&quot;}]">Fig. 2-30</a> illustrates our example.</p>


<a id="page_1071_c1068"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:43%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-030__Determination_of_RACH_occasions__bc7e0fbc26.png" width="800" height="341" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-30 </span>Determination of <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> occasions in frequency-time for transmission of the random access preamble.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1071_c1069"></a><p>Now the UE has identified the resources in frequency and time for transmission of the random access preamble.</p>


<a id="page_1071_c1070"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> transmission power
			</p>


<a id="page_1071_c1071"></a><p>The final piece of information that the UE requires involves parameter settings to calculate the initial power for transmission of the preamble on the identified resources. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-031__Initial_transmission_power__Formel.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-31 &lt;\/span&gt;Initial transmission power for the preamble on PRACH.&quot;}]">Fig. 2-31</a> shows that this transmit power is a minimum function like in LTE.</p>


<a id="page_1071_c1072"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:6%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-031__Initial_transmission_power__Formel_d9e3839bfa.png" width="800" height="47" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-31 </span>Initial transmission power for the preamble on <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1071_c1073"></a><p><em>P</em><sub>CMAX</sub> corresponds to the maximum UE transmit power. As of today, 5G NR defines three different power classes for FR1. However, only power classes 2 and 3 are applicable. Power class 2, defined for frequency bands n41, n77, n78 and n79, defines a maximum power of +26 dBm with a tolerance of +2/–3 dB. Power class 3, which is applicable to all frequency bands, including n41, n77, n78 and n79, defines +23 dBm, but with frequency band-dependent tolerances.</p><p>The second aspect of the minimum function depends on the preamble initial target power and the path loss. The path loss is determined based on the SS-RSRP measurement carried out on the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> that was selected by the UE to identify the time-frequency resources for preamble transmission. The actual transmit power of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> is signaled to the UE as <em>ss-PBCH-</em><em>BlockPower</em> (via the RRCReconfiguration message) and can be in the range –60 dBm to 50 dBm. The preamble initial target power is signaled as part of the generic parameters for random access signaled to the UE and can assume values between –202 dBm and –60 dBm. This is common for both <abbr class="eh-abbreviation" title="Contention free random access" lang="en"><span class="eh-tooltip" title="Contention free random access">CFRA</span></abbr> and <abbr class="eh-abbreviation" title="Contention based random access" lang="en"><span class="eh-tooltip" title="Contention based random access">CBRA</span></abbr> as the generic parameters are part of both messages (RACH-ConfigCommon and RACH-<span class="eh-text--nowrap">ConfigDedicated</span>).</p><p>In case the UE does not receive a random access response from the network in adequate time (ra-ResponseWindow), the power to transmit the preamble is increased by a Δ-power value that is dependent on the preamble format and subcarrier spacing. In the earlier example with preamble format B1 (index 133) and subcarrier spacing for the preamble transmission of 30 kHz, the Δ-value is 11 dB. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1071_c1074\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table032\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Preamble format&lt;\/th&gt;&lt;th&gt;Values (in dB), \u00b5&lt;span class=\&quot;eh-text--math\&quot;&gt;\u2208&lt;\/span&gt; {0, 1, 2, 3}&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;\u20133&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;\u20136&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A1&lt;\/td&gt;&lt;td&gt;8 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A2&lt;\/td&gt;&lt;td&gt;5 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A3&lt;\/td&gt;&lt;td&gt;3 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B1&lt;\/td&gt;&lt;td&gt;8 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B2&lt;\/td&gt;&lt;td&gt;5 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B3&lt;\/td&gt;&lt;td&gt;3 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B4&lt;\/td&gt;&lt;td&gt;3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;C0&lt;\/td&gt;&lt;td&gt;11 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;C2&lt;\/td&gt;&lt;td&gt;5 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-32 &lt;\/span&gt;\u0394-preamble power values.&lt;\/p&gt;\n\n&quot;}">Fig. 2-32</a> shows the settings for each preamble format. Depending on the counter for transmission of the preamble, the power is increased even further as the current counter setting is multiplied by the signaled power ramping step (powerRampingStep) which can be either 0 dB, 2 dB, 4 dB or 6 dB. The maximum number of preamble transmissions is also signaled to the UE and is equal to 3, 4, 5, 6, 7, 8, 10, 20, 50, 100 or 200 transmissions.</p>


<a id="page_1071_c1074"></a><div class="table-scroll"><table id="table032" class="eh-table eh-table--alternate"><colgroup><col><col></colgroup><thead><tr><th>Preamble format</th><th>Values (in dB), µ<span class="eh-text--math">∈</span> {0, 1, 2, 3}</th></tr></thead><tbody><tr><td>0</td><td>0</td></tr><tr><td>1</td><td>–3</td></tr><tr><td>2</td><td>–6</td></tr><tr><td>3</td><td>0</td></tr><tr><td>A1</td><td>8 + 3 · µ</td></tr><tr><td>A2</td><td>5 + 3 · µ</td></tr><tr><td>A3</td><td>3 + 3 · µ</td></tr><tr><td>B1</td><td>8 + 3 · µ</td></tr><tr><td>B2</td><td>5 + 3 · µ</td></tr><tr><td>B3</td><td>3 + 3 · µ</td></tr><tr><td>B4</td><td>3 · µ</td></tr><tr><td>C0</td><td>11 + 3 · µ</td></tr><tr><td>C2</td><td>5 + 3 · µ</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-32 </span>Δ-preamble power values.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1072" data-prevpid="1071" data-nextpid="1073" data-chapter="2.1.4.2 Reception of the random access response" id="page_1072">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.1.4.2 Reception of the random access response</h4>
						
<a id="page_1072_c1075"></a><p>Like in LTE, the random access response (<abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>) is transmitted by the network on the physical downlink shared channel (<abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>). Information sent on the physical downlink control channel (<abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>) makes it possible to identify the resource blocks that carry the response. The sections <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1032_c664" class="eh-link eh-link--page eh-link--ce">Physical downlink control channel (PDCCH), page 82</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1032_c659" class="eh-link eh-link--page eh-link--ce">Physical downlink shared channel (PDSCH), page 79</a> provide a detailed introduction to these two physical channels and their usage in 5G NR.</p>


<a id="page_1072_c1076"></a><p class="eh-headline-207 ">
				Random access radio network temporary identifier (<abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr>)
			</p>


<a id="page_1072_c1077"></a><p>Each transmission of a random access preamble is associated with a random access radio network temporary identifier (<abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr>). The gNB receiving the preamble will calculate this identifier to scramble the downlink control information (<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>) format with the correct identity. The UE receiving the random access response will also calculate the identity to know for which <span class="eh-text--nowrap">RA-RNTI</span> it must monitor the control channel to identify the resources that carry the expected random access response. The <abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr> is calculated as follows (<span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span>):</p>


<a id="page_1072_c1078"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr> = 1 + s_id + 14 ∙ t_id + 14 ∙ 80 ∙ f_id + 14 ∙ 80 ∙ 8 ∙ ul_carrier_id
			</p>


<a id="page_1072_c1079"></a><p>The individual parameters are as follows:</p><ul class="eh-list eh-list--line"><li><strong>s_id</strong> corresponds to the first OFDM symbol index on which the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> is transmitted (0 ≤ s_id &lt; 14)</li><li><strong>t_id</strong> is the index of the first specified <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> in a system frame (0 ≤ t_id &lt; 80)</li><li><strong>f_id</strong> is the index of the specified <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> in the frequency domain (0 ≤ f_id &lt; 8)</li><li><strong>ul_carrier_id</strong> indicates which uplink carrier is used for message 1 transmission (0 for normal uplink carrier, 1 for supplemental uplink)</li></ul><a id="page_1072_c1080"></a><p class="eh-headline-207 ">
				Monitoring the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> for <abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr>
			</p>


<a id="page_1072_c1081"></a><p>With reception of <em>RACH-</em><em>ConfigGeneric</em>, the UE also receives information about the random access response window (<em>ra-ResponseWindow</em>), i.e. the time at which the UE should receive a response from the network on the transmitted preamble. The time period between the start of this window and the transmission of the random access preamble is at least one OFDM symbol. The length of this monitoring window is provided as the number of slots and can be 1, 2, 4, 8, 10, 20, 40 or 80 slots. A slot is always 14 OFDM symbols, but due to the different subcarrier spacings and thus different symbol lengths, a slot can have a different duration. The network configures a value less than or equal to the radio frame length of 10 ms. For a subcarrier spacing of 30 kHz, the maximum configurable length would be 20 slots. For this time period, the UE starts monitoring the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> for <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 with its <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> scrambled with the previously calculated <span class="eh-text--nowrap">RA-RNTI</span>. Here, the question is which time-frequency resources the UE should monitor.</p><p>This information is available to the UE since the reception of the <em>RRCReconfiguration</em> message that was received as <em>nr-</em><em>SecondaryCellGroupConfig-r15</em> as part of the <em>RRCConnectionReconfiguration</em> message sent via the LTE link. This message includes the common configuration for the control channel and thus provides the UE with information about the so-called <em>search space</em>. The random access response is transmitted in the common search space, thus the UE starts monitoring a Type1-PDCCH common search space set configured by the parameter <em>ra-SearchSpace</em> in the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> information element <em>PDCCH-ConfigCommon</em>. If the parameter <em>ra-SearchSpace</em> is not configured by higher layers, then the UE uses the information provided within the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> to access the Type0-PDCCH common search space. In the following discussion, the assumption is that the network provides information on the search space for random access.</p><p>The total number of search spaces per <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> is limited by the standard to ten. Each search space, and thus the <em>ra-SearchSpace</em>, is identified by a <em>SearchSpaceId </em>associated with a <em>ControlResourceSetId</em>. Both are linked in the information element <em>SearchSpace</em> that defines how and where to search for <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> candidates. This field provides information on which slots to monitor, which offset to the monitoring period to apply, and what the monitoring duration is. An example is given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-033__PDCCH_monitoring_occasionse.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-33 &lt;\/span&gt;PDCCH monitoring occasions (search space) for DCI format 1_0 with CRC scrambled with &lt;span class=\&quot;eh-text--nowrap\&quot;&gt;RA-RNTI&lt;\/span&gt;.&quot;}]">Fig. 2-33</a> where the UE monitors the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> for a <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 with <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> scrambled with the <abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr> within the random access response window duration. It monitors the control channel for four slots and for the signaled number of OFDM symbols (<em>monitoringSymbolsWithinSlot</em>). In the example, it is three OFDM symbols, highlighted in orange.</p>


<a id="page_1072_c1082"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:29%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-033__PDCCH_monitoring_occasionse_8454ce7c15.png" width="800" height="226" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-33 </span><abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> monitoring occasions (search space) for <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 with <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> scrambled with <span class="eh-text--nowrap">RA-RNTI</span>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1072_c1083"></a><p>As explained in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1032_c664" class="eh-link eh-link--page eh-link--ce">Physical downlink control channel (PDCCH), page 82</a>, the frequency domain information is provided with the information element <em>ControlResourceSet</em> that is linked to the particular <em>ControlResourceSetId</em>. The control set provides a bitmap with a length of 45 bits. Each bit stands for six consecutive resource blocks. Thus, the maximum bandwidth for transmission of the control channel in 5G NR is 45 . 6 = 270 <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr>, where the maximum total signal bandwidth (depending on the used subcarrier spacing) can be 273 (TS 38.101-5.3.2). The other information provided by the control resource set information element is the duration (i.e. how many OFDM symbols – up to 3 – are used by the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>), the bundling size info and whether the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> resources are interleaved or non-interleaved.</p><p>If the UE detects the expected scheduling grant (<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>), it decodes the provided information accordingly (see next section). If the UE does not detect a <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> within the random access response window or if it detects the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> but does not correctly receive the transport block on the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> or does not correctly decode the associated transport blocks, then the UE transmits another random access preamble. It is supposed to begin transmission N<sub>T,</sub><sub class="eh-text__number">1 </sub>+ 0.75 ms after the last symbol of the random access response window or the last symbol of the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> reception. N<sub>T,</sub><sub class="eh-text__number">1</sub> is a time duration of N<sub class="eh-text__number">1</sub> symbols corresponding to a <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> reception time for UE processing capability l when additional <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> are configured. This next preamble is transmitted with an increased power level as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1071_c1074\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table032\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Preamble format&lt;\/th&gt;&lt;th&gt;Values (in dB), \u00b5&lt;span class=\&quot;eh-text--math\&quot;&gt;\u2208&lt;\/span&gt; {0, 1, 2, 3}&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;\u20133&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;\u20136&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A1&lt;\/td&gt;&lt;td&gt;8 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A2&lt;\/td&gt;&lt;td&gt;5 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A3&lt;\/td&gt;&lt;td&gt;3 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B1&lt;\/td&gt;&lt;td&gt;8 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B2&lt;\/td&gt;&lt;td&gt;5 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B3&lt;\/td&gt;&lt;td&gt;3 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B4&lt;\/td&gt;&lt;td&gt;3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;C0&lt;\/td&gt;&lt;td&gt;11 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;C2&lt;\/td&gt;&lt;td&gt;5 + 3 \u00b7 \u00b5&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-32 &lt;\/span&gt;\u0394-preamble power values.&lt;\/p&gt;\n\n&quot;}">Fig. 2-32</a>.</p>


<a id="page_1072_c1084"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0
			</p>


<a id="page_1072_c1085"></a><p>The scheduling grant with information about which resource blocks carry the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> with the random access response (<abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>) is provided to the UE via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0. If the network decides to send the <abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>, the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format is mapped to the time and frequency resources discussed in the previous section.</p><p>The actual content of <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 depends on its purpose. In this case, since its <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> is scrambled with the <span class="eh-text--nowrap">RA-RNTI</span>, it provides the following information:</p><ul class="eh-list eh-list--line"><li>Frequency domain resource assignment (<span class="eh-text--math">⎡</span>log<sub>2</sub>(<em>N</em><sub class="eh-text--em eh-text__letter">R</sub><sub class="eh-text--em eh-text__letter">B</sub><sup class="eh-text--em eh-text__letter">D</sup><sup class="eh-text--em eh-text__letter">L</sup><sup class="eh-text--em eh-text__letter">, BW</sup><sup class="eh-text--em eh-text__letter">P</sup> (<em>N</em><sub class="eh-text--em eh-text__letter">R</sub><sub class="eh-text--em eh-text__letter">B</sub><sup class="eh-text--em eh-text__letter">DL, BW</sup><sup class="eh-text--em eh-text__letter">P</sup> + 1) / 2<span class="eh-text--math">⎤</span> bits)<ul><li class="Flie-text_Flie-text-Aufz2-Strich">The number of bits depends on the bandwidth part size. Here, this is the size of <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> 0 (see <span class="eh-hint" title="3GPP TS 38.212: NR; Multiplexing and channel coding" lang="en"><span class="eh-tooltip" title="3GPP TS 38.212: NR; Multiplexing and channel coding">TS 38.212</span></span>)</li></ul></li><li>Time domain resource assignment (4 bits)</li><li>VRB-to-PRB-mapping (1 bit)</li><li>Modulation and coding scheme (5 bits)</li><li><abbr class="eh-abbreviation" title="Transport block" lang="en"><span class="eh-tooltip" title="Transport block">TB</span></abbr> scaling (2 bits)</li><li>Reserved (16 bits)</li></ul><p>5G NR supports two different resource allocation types (0, 1) for the frequency domain in the downlink direction. For <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0, resource allocation type 1 is always used. It is based on interpretation of the signaled resource indication value (<abbr class="eh-abbreviation" title="Resource indication value" lang="en"><span class="eh-tooltip" title="Resource indication value">RIV</span></abbr>). The value of <em>RIV</em> represents a starting resource block (<em>RB</em><sub class="eh-text--em eh-text__letter">Start</sub>) and a number of contiguously allocated resource blocks (<em>L</em><sub class="eh-text--em eh-text__letter">RB</sub>). Calculation of <em>RIV</em> depends on the bandwidth part size. In case of <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 scrambled with <abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr>, it is the number of resource blocks used for the <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> that carries the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>. If (<em>L</em><sub class="eh-text--em eh-text__letter">RBs</sub> – 1 ≤ <span class="eh-text--math">⎣</span><em>N</em><sup class="eh-text--em eh-text__letter">size</sup><sub class="eh-text--em eh-text__letter">BWP</sub>/2<span class="eh-text--math">⎦</span> then <em>RIV</em> = <em>N</em><sup class="eh-text--em eh-text__letter">size</sup><sub class="eh-text--em eh-text__letter">BWP</sub> (<em>L</em><sub class="eh-text--em eh-text__letter">RBs</sub> – 1) + <em>RB</em><sub class="eh-text--em eh-text__letter">star</sub><sub class="eh-text--em eh-text__letter">t</sub>, otherwise <em>RIV</em> = <em>N</em><sup class="eh-text--em eh-text__letter">size</sup><sub class="eh-text--em eh-text__letter">BWP</sub> (<em>N</em><sup class="eh-text--em eh-text__letter">size</sup><sub class="eh-text--em eh-text__letter">BWP</sub> – <em>L</em><sub class="eh-text--em eh-text__letter">RB</sub><sub class="eh-text--em eh-text__letter">s</sub> + 1) + (<em>N</em><sup class="eh-text--em eh-text__letter">size</sup><sub class="eh-text--em eh-text__letter">BWP</sub> – 1 – <em>R</em><em>B</em><sub class="eh-text--em eh-text__letter">start</sub>) (see <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>).</p><p>The four bits that encode the time domain resource assignment value <em>m</em> are used by the UE to determine an index as <em>m + </em>1. This index points to one row in a table that provides the required information on the applied offset K0 from the slot that carries the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> with <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0, the start symbol <em>S</em> of the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> and the number of allocated symbols <em>L</em>. In terms of the Type1-PDCCH common search space with <abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr>, the default <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> time domain resource allocation type A applies (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1072_c1086\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table\&quot; id=\&quot;table033\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Row index&lt;\/th&gt;&lt;th&gt;dmrs-TypeA- Position&lt;\/th&gt;&lt;th&gt;PDSCH mapping type&lt;\/th&gt;&lt;th&gt;K0&lt;\/th&gt;&lt;th&gt;&lt;strong&gt;&lt;em&gt;S&lt;\/em&gt;&lt;\/strong&gt;&lt;\/th&gt;&lt;th&gt;&lt;strong&gt;&lt;em&gt;L&lt;\/em&gt;&lt;\/strong&gt;&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td rowspan=\&quot;2\&quot;&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td rowspan=\&quot;10\&quot;&gt;Type A&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;12&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;11&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td rowspan=\&quot;2\&quot;&gt;2&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;9&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td rowspan=\&quot;2\&quot;&gt;3&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;9&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td rowspan=\&quot;2\&quot;&gt;4&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;7&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td rowspan=\&quot;2\&quot;&gt;5&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td rowspan=\&quot;2\&quot;&gt;6&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td rowspan=\&quot;8\&quot;&gt;Type B&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td rowspan=\&quot;2\&quot;&gt;7&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;2, 3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;7&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;2, 3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;2, 3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;11&lt;\/td&gt;&lt;td&gt;2, 3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;12&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;12&lt;\/td&gt;&lt;td&gt;2, 3&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;Type A&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;13&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;13&lt;\/td&gt;&lt;td&gt;2, 3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;2, 3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td&gt;2, 3&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;Type B&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;7&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;16&lt;\/td&gt;&lt;td&gt;2, 3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-34 &lt;\/span&gt;Default PDSCH time domain resource allocation type A for normal cyclic prefix.&lt;\/p&gt;\n\n&quot;}">Fig. 2-34</a>).</p><p>Based on that table, there is no slot offset K0 applied as it is for all row indices set to 0. This means the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> carrying the <abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr> is transmitted in the very same slot as the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>. The start symbol (<em>S</em>) and the number of contiguously allocated OFDM symbols (<em>L</em>) depend on the position, i.e. the symbol in which the (first) demodulation reference signal for the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> is sent. This can be OFDM symbol #2 or #3 within the slot and this information is encoded in the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>. The <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> mapping type (A, B) determines if the mapping is based relative to the start of the slot (i.e. OFDM symbol #0) or relative to the start of the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> transmission since e.g. the second, third can still be used by the control channel. For more details on the physical layer, see chapter <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1023" class="eh-link eh-link--page">1.2 Physical access fundamentals, page 46</a>.</p>


<a id="page_1072_c1086"></a><div class="table-scroll"><table class="eh-table" id="table033"><colgroup><col><col><col><col><col><col></colgroup><thead><tr><th>Row index</th><th>dmrs-TypeA- Position</th><th>PDSCH mapping type</th><th>K0</th><th><strong><em>S</em></strong></th><th><strong><em>L</em></strong></th></tr></thead><tbody><tr><td rowspan="2">1</td><td>2</td><td rowspan="10">Type A</td><td>0</td><td>2</td><td>12</td></tr><tr><td>3</td><td>0</td><td>3</td><td>11</td></tr><tr><td rowspan="2">2</td><td>2</td><td>0</td><td>2</td><td>10</td></tr><tr><td>3</td><td>0</td><td>3</td><td>9</td></tr><tr><td rowspan="2">3</td><td>2</td><td>0</td><td>2</td><td>9</td></tr><tr><td>3</td><td>0</td><td>3</td><td>8</td></tr><tr><td rowspan="2">4</td><td>2</td><td>0</td><td>2</td><td>7</td></tr><tr><td>3</td><td>0</td><td>3</td><td>6</td></tr><tr><td rowspan="2">5</td><td>2</td><td>0</td><td>2</td><td>5</td></tr><tr><td>3</td><td>0</td><td>3</td><td>4</td></tr><tr><td rowspan="2">6</td><td>2</td><td rowspan="8">Type B</td><td>0</td><td>9</td><td>4</td></tr><tr><td>3</td><td>0</td><td>20</td><td>4</td></tr><tr><td rowspan="2">7</td><td>2</td><td>0</td><td>4</td><td>4</td></tr><tr><td>3</td><td>0</td><td>6</td><td>4</td></tr><tr><td>8</td><td>2, 3</td><td>0</td><td>5</td><td>7</td></tr><tr><td>9</td><td>2, 3</td><td>0</td><td>5</td><td>2</td></tr><tr><td>10</td><td>2, 3</td><td>0</td><td>9</td><td>2</td></tr><tr><td>11</td><td>2, 3</td><td>0</td><td>12</td><td>2</td></tr><tr><td>12</td><td>2, 3</td><td rowspan="3">Type A</td><td>0</td><td>1</td><td>13</td></tr><tr><td>13</td><td>2, 3</td><td>0</td><td>1</td><td>6</td></tr><tr><td>14</td><td>2, 3</td><td>0</td><td>2</td><td>4</td></tr><tr><td>15</td><td>2, 3</td><td rowspan="2">Type B</td><td>0</td><td>4</td><td>7</td></tr><tr><td>16</td><td>2, 3</td><td>0</td><td>8</td><td>4</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-34 </span>Default <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> time domain resource allocation type A for normal cyclic prefix.</p>


<a id="page_1072_c1087"></a><p>The next indication provided with <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 is whether virtual resource block to physical resource block (VRB-to-PRB) mapping is active or not. The setting of this bit determines whether non-interleaved is active or not. Non-interleaved means that a virtual resource block is mapped one-to-one to a physical resource block. However, in case of <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> transmission scheduled by <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 that is transmitted in a common search space, virtual resource block <em>n</em> is mapped to physical resource block <em>n</em> + <em>N</em><sub>star</sub><sub>t</sub><sup class="eh-text__letter">C</sup><sup class="eh-text__letter">ORESE</sup><sup class="eh-text__letter">T</sup>. <em>N</em><sub>star</sub><sub>t</sub><sup class="eh-text__letter">C</sup><sup class="eh-text__letter">ORESE</sup><sup class="eh-text__letter">T</sup> corresponding to the lowest-numbered physical resource block in the control resource set that the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> was received in. In case the bit is set, interleaved mode is enabled. There are different rules for how interleaving is handled based on the type of <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>, the received <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format and the <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr>. Typically, the <em>VRB-to-PRB-Interleaver</em> setting, which is sent in the <em>PDSCH-Config</em> information element, comes into play. The interleave size sets the virtual resource block bundling size to either two or four resource blocks (n2, n4). However, for <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 which is transmitted in any common search space other then the Type0-PDCCH common search space, the bundle size L is set to two resource blocks (see <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>, section 7.3.1.6). The total number of bundles <em>N</em><sub class="eh-text--em eh-text__letter">bundle</sub> depends on the size of the initial bandwidth part (<em>N</em><sup class="eh-text--em eh-text__letter">siz</sup><sup class="eh-text--em eh-text__letter">e</sup><sub class="eh-text--em eh-text__letter">BW</sub><sub class="eh-text--em eh-text__letter">P</sub><sub class="eh-text--em eh-text__letter">,</sub><sub class="eh-text--em eh-text__letter"></sub><sub class="eh-text--em eh-text__letter">init</sub>), the start of the bandwidth part (<em>N</em><sup class="eh-text--em eh-text__letter">star</sup><sup class="eh-text--em eh-text__letter">t</sup><sub class="eh-text--em eh-text__letter">BWP,</sub><sub class="eh-text--em eh-text__letter"></sub><sub class="eh-text--em eh-text__letter">i</sub>) and the start of the ­<em>CORESET</em> (<em>N</em><sub class="eh-text--em eh-text__letter">star</sub><sub class="eh-text--em eh-text__letter">t</sub><sup class="eh-text--em eh-text__letter">CORESE</sup><sup class="eh-text--em eh-text__letter">T</sup>). The last parameter corresponds to the lowest-numbered physical resource block in the control resource set in which the corresponding <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 was received. The first bundle (bundle #0) can have a different size than two, depending on the start of the bandwidth part the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> is transmitted in and the resource block that marks the start of the <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr>. Similar to the first bundle, the last bundle can also have a different size than two resource blocks. This is the case when (<em>N</em><sup class="eh-text--em eh-text__letter">siz</sup><sup class="eh-text--em eh-text__letter">e</sup><sub class="eh-text--em eh-text__letter">BWP, init</sub> + <em>N</em><sup class="eh-text--em eh-text__letter">star</sup><sup class="eh-text--em eh-text__letter">t</sup><sub class="eh-text--em eh-text__letter">BWP,</sub><sub class="eh-text--em eh-text__letter"></sub><sub class="eh-text--em eh-text__letter">i</sub> + <em>N</em><sub class="eh-text--em eh-text__letter">star</sub><sub class="eh-text--em eh-text__letter">t</sub><sup class="eh-text--em eh-text__letter">CORESE</sup><sup class="eh-text--em eh-text__letter">T</sup>) mod <em>L</em> &gt; 0 and thus the number of resource blocks used for the last bundle would be (<em>N</em><sup class="eh-text--em eh-text__letter">siz</sup><sup class="eh-text--em eh-text__letter">e</sup><sub class="eh-text--em eh-text__letter">BWP, init</sub> + <em>N</em><sup class="eh-text--em eh-text__letter">star</sup><sup class="eh-text--em eh-text__letter">t</sup><sub class="eh-text--em eh-text__letter">BWP,</sub><sub class="eh-text--em eh-text__letter"></sub><sub class="eh-text--em eh-text__letter">i</sub> + <em>N</em><sub class="eh-text--em eh-text__letter">star</sub><sub class="eh-text--em eh-text__letter">t</sub><sup class="eh-text--em eh-text__letter">CORESE</sup><sup class="eh-text--em eh-text__letter">T</sup>) mod <em>L</em>. The mapping of virtual resource block bundles to the physical resource block bundle is based on <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-035__Mapping_rules__Formeln.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-35 &lt;\/span&gt;Mapping rules for VRB bundle to PRB bundle.&quot;}]">Fig. 2-35</a>, where <em>j</em> corresponds to the current bundle with an interval of {0, 1, 2, …, <em>N</em><sub class="eh-text--em eh-text__letter">bundl</sub><sub class="eh-text--em eh-text__letter">e</sub><em>–</em> 2}. Virtual resource block bundle <em>N</em><sub class="eh-text--em eh-text__letter">bundl</sub><sub class="eh-text--em eh-text__letter">e</sub><em>–</em> 1 is always mapped to physical resource block bundle <em>N</em><sub class="eh-text--em eh-text__letter">bundl</sub><sub class="eh-text--em eh-text__letter">e</sub><em>–</em> 1. The same is true for bundle #0 according to the equation below. The mapping principle is basically dictated by the parameter C and is thus dependent on the total number of bundles.</p>


<a id="page_1072_c1088"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:325px;"><div class="book-img-wrap__inner" style="padding-bottom:164%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/2-035__Mapping_rules__Formeln.png" width="325" height="532" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-35 </span>Mapping rules for <abbr class="eh-abbreviation" title="Virtual resource block" lang="en"><span class="eh-tooltip" title="Virtual resource block">VRB</span></abbr> bundle to <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr> bundle.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1072_c1089"></a><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-036__VRB_to_PRB_mapping.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-36 &lt;\/span&gt;VRB to PRB mapping example (assumption: total number of bundles = 8).&quot;}]">Fig. 2-36</a> shows a simplified example where the total number of bundles <em>N</em><sub class="eh-text--em eh-text__letter">bundle</sub> is assumed to be eight. Bundle size <em>L</em> is equal to two according to the above rules. For simplicity, we assume the first and last bundles have the same size. In a real network deployment, however, this depends on the overall network settings</p>


<a id="page_1072_c1090"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:63%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-036__VRB_to_PRB_mapping_61e7ec6b43.png" width="800" height="503" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-36 </span><abbr class="eh-abbreviation" title="Virtual resource block" lang="en"><span class="eh-tooltip" title="Virtual resource block">VRB</span></abbr> to <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr> mapping example (assumption: total number of bundles = 8).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1072_c1091"></a><p>The next information in the scheduling grant is the modulation coding scheme used for the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> carrying the random access response. This information is coded with 5 bits. Theoretically, it points to one of 32 possible indexes in one of the three defined <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> tables (modulation and coding scheme, <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr>) (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077" class="eh-link eh-link--page">2.2.4 DL data reception, page 307</a> for details). For <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 where the <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> is scrambled with <span class="eh-text--nowrap">RA-RNTI</span>, only <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> index table 1 is relevant (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1072_c1092\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table eh-table--alternate\&quot; id=\&quot;table034\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;MCS index I&lt;sub&gt;MCS&lt;\/sub&gt;&lt;\/th&gt;&lt;th&gt;Modulation order Q&lt;sub&gt;m&lt;\/sub&gt;&lt;\/th&gt;&lt;th&gt;Target code rate R \u00d7 1024&lt;\/th&gt;&lt;th&gt;Spectral efficiency&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;120&lt;\/td&gt;&lt;td&gt;0.2344&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;157&lt;\/td&gt;&lt;td&gt;0.3066&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;193&lt;\/td&gt;&lt;td&gt;0.3779&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;251&lt;\/td&gt;&lt;td&gt;0.4902&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;208&lt;\/td&gt;&lt;td&gt;0.6016&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;379&lt;\/td&gt;&lt;td&gt;0.7402&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;449&lt;\/td&gt;&lt;td&gt;0.8770&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;526&lt;\/td&gt;&lt;td&gt;1.0273&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;602&lt;\/td&gt;&lt;td&gt;1.1758&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;679&lt;\/td&gt;&lt;td&gt;1.3262&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;340&lt;\/td&gt;&lt;td&gt;1.3281&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;11&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;378&lt;\/td&gt;&lt;td&gt;1.4766&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;12&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;434&lt;\/td&gt;&lt;td&gt;1.6953&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;13&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;490&lt;\/td&gt;&lt;td&gt;1.9141&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;553&lt;\/td&gt;&lt;td&gt;2.1602&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;616&lt;\/td&gt;&lt;td&gt;2.4063&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;16&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;658&lt;\/td&gt;&lt;td&gt;2.5703&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;17&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;438&lt;\/td&gt;&lt;td&gt;2.5664&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;18&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;466&lt;\/td&gt;&lt;td&gt;2.7305&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;19&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;517&lt;\/td&gt;&lt;td&gt;3.0293&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;567&lt;\/td&gt;&lt;td&gt;3.3223&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;21&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;616&lt;\/td&gt;&lt;td&gt;2.6094&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;22&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;666&lt;\/td&gt;&lt;td&gt;3.9023&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;23&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;719&lt;\/td&gt;&lt;td&gt;4.2129&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;24&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;772&lt;\/td&gt;&lt;td&gt;4.5234&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;25&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;822&lt;\/td&gt;&lt;td&gt;4.8164&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;26&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;873&lt;\/td&gt;&lt;td&gt;5.1152&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;27&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;910&lt;\/td&gt;&lt;td&gt;5.3320&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;28&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;948&lt;\/td&gt;&lt;td&gt;5.5547&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;29&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td colspan=\&quot;2\&quot; rowspan=\&quot;3\&quot;&gt;Reserved&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;30&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;31&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-37 &lt;\/span&gt;MCS index table 1 for PDSCH.&lt;\/p&gt;\n\n&quot;}">Fig. 2-37</a>). Furthermore, only entries where the modulation order <em>Q</em><sub class="eh-text--em eh-text__letter">m</sub> is not greater than two are applicable (<em>Q</em><sub class="eh-text--em eh-text__letter">m</sub> &gt; 2; see <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>, section 5.1.3.1). In other words, the resource blocks that are allocated for the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>, carrying the random access response, are <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr> modulated.</p>


<a id="page_1072_c1092"></a><div class="table-scroll"><table class="eh-table eh-table--alternate" id="table034"><colgroup><col><col><col><col></colgroup><thead><tr><th>MCS index I<sub>MCS</sub></th><th>Modulation order Q<sub>m</sub></th><th>Target code rate R × 1024</th><th>Spectral efficiency</th></tr></thead><tbody><tr><td>0</td><td>2</td><td>120</td><td>0.2344</td></tr><tr><td>1</td><td>2</td><td>157</td><td>0.3066</td></tr><tr><td>2</td><td>2</td><td>193</td><td>0.3779</td></tr><tr><td>3</td><td>2</td><td>251</td><td>0.4902</td></tr><tr><td>4</td><td>2</td><td>208</td><td>0.6016</td></tr><tr><td>5</td><td>2</td><td>379</td><td>0.7402</td></tr><tr><td>6</td><td>2</td><td>449</td><td>0.8770</td></tr><tr><td>7</td><td>2</td><td>526</td><td>1.0273</td></tr><tr><td>8</td><td>2</td><td>602</td><td>1.1758</td></tr><tr><td>9</td><td>2</td><td>679</td><td>1.3262</td></tr><tr><td>10</td><td>4</td><td>340</td><td>1.3281</td></tr><tr><td>11</td><td>4</td><td>378</td><td>1.4766</td></tr><tr><td>12</td><td>4</td><td>434</td><td>1.6953</td></tr><tr><td>13</td><td>4</td><td>490</td><td>1.9141</td></tr><tr><td>14</td><td>4</td><td>553</td><td>2.1602</td></tr><tr><td>15</td><td>4</td><td>616</td><td>2.4063</td></tr><tr><td>16</td><td>4</td><td>658</td><td>2.5703</td></tr><tr><td>17</td><td>6</td><td>438</td><td>2.5664</td></tr><tr><td>18</td><td>6</td><td>466</td><td>2.7305</td></tr><tr><td>19</td><td>6</td><td>517</td><td>3.0293</td></tr><tr><td>20</td><td>6</td><td>567</td><td>3.3223</td></tr><tr><td>21</td><td>6</td><td>616</td><td>2.6094</td></tr><tr><td>22</td><td>6</td><td>666</td><td>3.9023</td></tr><tr><td>23</td><td>6</td><td>719</td><td>4.2129</td></tr><tr><td>24</td><td>6</td><td>772</td><td>4.5234</td></tr><tr><td>25</td><td>6</td><td>822</td><td>4.8164</td></tr><tr><td>26</td><td>6</td><td>873</td><td>5.1152</td></tr><tr><td>27</td><td>6</td><td>910</td><td>5.3320</td></tr><tr><td>28</td><td>6</td><td>948</td><td>5.5547</td></tr><tr><td>29</td><td>2</td><td colspan="2" rowspan="3">Reserved</td></tr><tr><td>30</td><td>4</td></tr><tr><td>31</td><td>6</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-37 </span><abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> index table 1 for <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>.</p>


<a id="page_1072_c1093"></a><p>The next two bits inform the UE about the <em>transport block (TB) scaling</em>. As explained in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077" class="eh-link eh-link--page">2.2.4 DL data reception, page 307</a>, the <em>transport block size</em> (<abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr>) determination is different compared to LTE. It is defined as a two-stage process for 5G NR. After determining the modulation and coding scheme (see previous step), two additional calculations are required to determine the <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr>. First, the number of information bits (<em>N</em><sub class="eh-text--em eh-text__letter">info</sub>) is calculated. This number is based on the number of OFDM symbols allocated, the resource elements carrying <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> and the higher layer parameters. Based on the modulation order <em>Q</em><sub class="eh-text--em eh-text__letter">m</sub>, the code rate <em>R N</em><sub class="eh-text--em eh-text__letter">info</sub> is calculated as <em>N</em><sub class="eh-text--em eh-text__letter">info</sub> = <em>S</em> ∙ <em>N</em><sub class="eh-text--em eh-text__letter">R</sub><sub class="eh-text--em eh-text__letter">E</sub> ∙ <em>R</em> ∙ <em>Q</em><sub class="eh-text--em eh-text__letter">m</sub> ∙ <em>ν</em> (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-056__Transport_block_size_calculation_algorithm.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-56 &lt;\/span&gt;Transport block size calculation algorithm (first part: determine intermediate number of information bits).&quot;}]">Fig. 2-56, page 311</a>). ν corresponds to the number of transmission layers. In this particular case, it is one spatial layer (= <em>SISO</em> operation). Only in case the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> is assigned by the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> with <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 where the <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> is scrambled with <abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr>, a scaling factor <em>S</em> is applied to the calculation of <em>N</em><sub class="eh-text--em eh-text__letter">inf</sub><sub class="eh-text--em eh-text__letter">o</sub>. Values for the scaling factor <em>S</em>, based on bit settings within <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0, are listed in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1072_c1094\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table eh-table--alternate\&quot; id=\&quot;table035\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;TB scaling field&lt;\/th&gt;&lt;th&gt;Scaling factor S&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;00&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;01&lt;\/td&gt;&lt;td&gt;0.5&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;0.25&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;11&lt;\/td&gt;&lt;td&gt;Reserved&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-38 &lt;\/span&gt;Scaling factor of N&lt;sub&gt;info&lt;\/sub&gt; for P-RNTI and RA-RNTI.&lt;\/p&gt;\n\n&quot;}">Fig. 2-38</a>.</p>


<a id="page_1072_c1094"></a><div class="table-scroll"><table class="eh-table eh-table--alternate" id="table035"><colgroup><col><col></colgroup><thead><tr><th>TB scaling field</th><th>Scaling factor S</th></tr></thead><tbody><tr><td>00</td><td>1</td></tr><tr><td>01</td><td>0.5</td></tr><tr><td>10</td><td>0.25</td></tr><tr><td>11</td><td>Reserved</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-38 </span>Scaling factor of N<sub>info</sub> for <abbr class="eh-abbreviation" title="Paging RNTI" lang="en"><span class="eh-tooltip" title="Paging RNTI">P-RNTI</span></abbr> and <abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr>.</p>


<a id="page_1072_c1095"></a><p>By successfully decoding <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0, the UE has all required information to identify the physical resource blocks on the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> that carry the random access response</p>


<a id="page_1072_c1096"></a><p class="eh-headline-207 ">
				Content of the random access response
			</p>


<a id="page_1072_c1097"></a><p>The decoded transport blocks from the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> form a <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> that consists of one or more <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> subPDUs and optional padding. The presence and length of the padding are based on the available <abbr class="eh-abbreviation" title="Transport block" lang="en"><span class="eh-tooltip" title="Transport block">TB</span></abbr> size and the size of the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> subPDUs.</p><p>Each <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> subPDU consists of one of the following:</p><ul class="eh-list eh-list--line"><li><abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> subheader with backoff indicator (BI) only</li><li><abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> subheader with random access preamble identifier (<abbr class="eh-abbreviation" title="Random access preamble identifier" lang="en"><span class="eh-tooltip" title="Random access preamble identifier">RAPID</span></abbr>) only</li><li><abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> subheader with <abbr class="eh-abbreviation" title="Random access preamble identifier" lang="en"><span class="eh-tooltip" title="Random access preamble identifier">RAPID</span></abbr> and random access response (<abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>)</li></ul><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-039__MAC_PDU_with_BI__RAPID_and_RAPID.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-39 &lt;\/span&gt;MAC PDU with BI, RAPID and RAPID + random access response (RAR).&quot;}]">Fig. 2-39</a> shows an example of a <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> that carries a different type of information. For more details on processing of the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> subheader with <abbr class="eh-abbreviation" title="Random access preamble identifier" lang="en"><span class="eh-tooltip" title="Random access preamble identifier">RAPID</span></abbr> and <abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>, including processing of the <abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr> and subsequent message 3 transmission, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1099" class="eh-link eh-link--page">2.4 Overall access procedure for SA mode, page 408</a>.</p>


<a id="page_1072_c1098"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:78%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-039__MAC_PDU_with_BI__RAPID_and_RAPID_dd92922333.png" width="800" height="621" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-39 </span><abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> with BI, <abbr class="eh-abbreviation" title="Random access preamble identifier" lang="en"><span class="eh-tooltip" title="Random access preamble identifier">RAPID</span></abbr> and <abbr class="eh-abbreviation" title="Random access preamble identifier" lang="en"><span class="eh-tooltip" title="Random access preamble identifier">RAPID</span></abbr> + random access response (<abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1072_c1099"></a><p class="eh-headline-207 ">
				Backoff indicator (BI)
			</p>


<a id="page_1072_c1100"></a><p>The UE may receive the <em>backoff indicator</em> (BI) with the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>. As the name implies, the BI enables the gNB to instruct the UE to back off for a period of time before attempting random access again. The six bits for BI can be used to set values in the range 5 ms to 1920 ms. In case there is no subMAC <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>, the UE sets the BI to 0 ms.</p>


<a id="page_1072_c1101"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Random access preamble identifier" lang="en"><span class="eh-tooltip" title="Random access preamble identifier">RAPID</span></abbr> only
			</p>


<a id="page_1072_c1102"></a><p>The <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> may also contain a <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> subPDU that provides the <em>random access preamble identifier</em> (<abbr class="eh-abbreviation" title="Random access preamble identifier" lang="en"><span class="eh-tooltip" title="Random access preamble identifier">RAPID</span></abbr>) only. This <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> subPDU is used to acknowledge to the UE that its transmitted random access preamble was successfully received by the network. <abbr class="eh-abbreviation" title="Random access preamble identifier" lang="en"><span class="eh-tooltip" title="Random access preamble identifier">RAPID</span></abbr> only is a special case and is used by the network to respond to the case where the UE used the <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> procedure for the system information (<abbr class="eh-abbreviation" title="System information" lang="en"><span class="eh-tooltip" title="System information">SI</span></abbr>) request.</p>


<a id="page_1072_c1103"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Random access preamble identifier" lang="en"><span class="eh-tooltip" title="Random access preamble identifier">RAPID</span></abbr> and <abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>
			</p>


<a id="page_1072_c1104"></a><p>The common case is that the network is transmitting <abbr class="eh-abbreviation" title="Random access preamble identifier" lang="en"><span class="eh-tooltip" title="Random access preamble identifier">RAPID</span></abbr> and <abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr> as the subMAC <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>. The <abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr> now contains specific information, dependent on which type of random access procedure was used: <abbr class="eh-abbreviation" title="Contention free random access" lang="en"><span class="eh-tooltip" title="Contention free random access">CFRA</span></abbr> and <abbr class="eh-abbreviation" title="Contention based random access" lang="en"><span class="eh-tooltip" title="Contention based random access">CBRA</span></abbr>. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-039__MAC_PDU_with_BI__RAPID_and_RAPID.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-39 &lt;\/span&gt;MAC PDU with BI, RAPID and RAPID + random access response (RAR).&quot;}]">Fig. 2-39</a> shows for the <abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr> the common content when <abbr class="eh-abbreviation" title="Contention based random access" lang="en"><span class="eh-tooltip" title="Contention based random access">CBRA</span></abbr> is used. </p><p>In non-standalone mode, the provided information is different. The purpose of using the <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> procedure in non-standalone mode is to establish uplink synchronization with the gNB. Any cellular network requires the transmissions from all terminals to arrive at the same time at the receiver of the base station to avoid interference. Therefore, terminals further away from the base station have to advance their transmission compared to devices that are close to the base station. This process is known as timing advance (<abbr class="eh-abbreviation" title="Timing advance or tracking area" lang="en"><span class="eh-tooltip" title="Timing advance or tracking area">TA</span></abbr>). A UE is not allowed to make any transmission (other than the random access preamble) without the proper timing advance. The <abbr class="eh-abbreviation" title="Timing advance or tracking area" lang="en"><span class="eh-tooltip" title="Timing advance or tracking area">TA</span></abbr> determined (and maintained) for the LTE connection cannot be used since the LTE eNB and 5G NR gNB might not be co-located and use different frequencies. Therefore, the gNB will determine the time delay based on the transmission of the random access preamble. This delay will be translated into the <abbr class="eh-abbreviation" title="Timing advance or tracking area" lang="en"><span class="eh-tooltip" title="Timing advance or tracking area">TA</span></abbr> command that is sent as part of the <abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr> on the downlink. The timing advance (<abbr class="eh-abbreviation" title="Timing advance or tracking area" lang="en"><span class="eh-tooltip" title="Timing advance or tracking area">TA</span></abbr>) command is 12 bits long and assumes values from 0 to 3846. The time alignment N<sub>TA</sub> is now calculated as N<sub>TA</sub> = <abbr class="eh-abbreviation" title="Timing advance or tracking area" lang="en"><span class="eh-tooltip" title="Timing advance or tracking area">TA</span></abbr>.16.64/2<sup class="eh-text__letter">μ</sup>, where μ depends on the used subcarrier spacing.</p><p>Upon reception of the random access response (with the <abbr class="eh-abbreviation" title="Timing advance or tracking area" lang="en"><span class="eh-tooltip" title="Timing advance or tracking area">TA</span></abbr> command only), the random access procedure (<abbr class="eh-abbreviation" title="Contention free random access" lang="en"><span class="eh-tooltip" title="Contention free random access">CFRA</span></abbr> mode) is considered successful. Contention resolution (like for <abbr class="eh-abbreviation" title="Contention based random access" lang="en"><span class="eh-tooltip" title="Contention based random access">CBRA</span></abbr>) is not required since the UE is uniquely identified by the dedicated <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> resources that were configured by the network and used by the UE to perform random access. At this point in time, the UE is fully synchronized to the gNB on the downlink as well as the uplink.</p>


<a id="page_1072_c1105"></a><p class="eh-headline-207 ">
				What if no random access response (<abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>) is received?
			</p>


<a id="page_1072_c1106"></a><p>If the random access response window expires and no random access response was received, the UE considers the procedure to be unsuccessful and increments the random access preamble transmission counter by 1. It continues this process until it has successfully received an <abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr> or the counter reaches its maximum. The maximum depends on the maximum number of allowed attempts to transmit the random access preamble, which was signaled to the UE (<em>preambleTransMax</em> in <em>RACH-</em><em>ConfigGeneric</em>). If the counter reaches its maximum value, there are two options. First, the UE randomly chooses a value between 0 and the maximum value of the backoff indicator (BI, 1920 ms; see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-039__MAC_PDU_with_BI__RAPID_and_RAPID.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-39 &lt;\/span&gt;MAC PDU with BI, RAPID and RAPID + random access response (RAR).&quot;}]">Fig. 2-39</a>) before it selects a preamble and starts the random access procedure again. In <abbr class="eh-abbreviation" title="Contention free random access" lang="en"><span class="eh-tooltip" title="Contention free random access">CFRA</span></abbr>, using dedicated resources, the UE may switch to <abbr class="eh-abbreviation" title="Contention based random access" lang="en"><span class="eh-tooltip" title="Contention based random access">CBRA</span></abbr>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1073" data-prevpid="1072" data-nextpid="1074" data-chapter="2.2 Overall data transmission" id="page_1073">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h2>2.2 Overall data transmission</h2>
						
<a id="page_1073_c1107"></a><p>The 5G system is a pure packet-switched network that supports data exchange between a UE and a data network. One motivating factor in 5G is to support various services known under the umbrella of the IMT2020 vision concept containing the three main services <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr>, <abbr class="eh-abbreviation" title="Massive machine type communications" lang="en"><span class="eh-tooltip" title="Massive machine type communications">mMTC</span></abbr> and <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-001__5G_ITU_Requirements.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-1 &lt;\/span&gt;ITU Vision for IMT-2020 and Beyond.&quot;}]">Fig. 1-1</a>). For these reasons, 5G NR highly focuses on supporting various quality of service profiles. For the sake of simplicity, we can say that 5G NR is a quality of service driven network. This <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> driven approach will have an impact on the overall 5G NR system, including the flexible architecture which covers aspects such as network slicing, a flexible protocol structure and a highly flexible radio interface. One should not restrict the understanding of the above term “data network” to a remote data server in a traditional client-server architecture. 5G NR is much more flexible. Furthermore, several connection scenarios can be assumed, starting from the classic client-server connection of a UE to an external data network (as is known from the internet) through further connections where the packet data network or data server is part of the 5G system and described by terms such as mobile edge computing (<abbr class="eh-abbreviation" title="Mobile edge computing" lang="en"><span class="eh-tooltip" title="Mobile edge computing">MEC</span></abbr>). There is even the future possibility that two UEs will communicate between one another, i.e. device-to-device (<abbr class="eh-abbreviation" title="Device to device" lang="en"><span class="eh-tooltip" title="Device to device">D2D</span></abbr>). 5G NR supports data transfer procedures for all of these scenarios and the 5G system even inherits the flexibility to support data transfers for future scenarios. The general 5G system data transfer between a UE and a data network can be described with a buffer-based transmission model, i.e. first, a data transfer session is established and then in either direction (UL or DL), the pending data is stored in a data buffer. RAN only allocates radio resources to the DL or UL for buffered data. In the uplink direction, the UE can transmit over the air interface only if the gNB assigns radio resources. The radio resource for data transfer is described in the time and frequency domain. In the time domain, the transmitter in the UE or gNB can transmit only in specific time slots or OFDM symbols. In the frequency domain, the UE or gNB can send or receive only in dedicated physical resource blocks (<abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr>). The main goal of this chapter is to describe the procedures that are involved in the data transfer and explains how such data transfer is performed.</p><p>These procedures are briefly discussed in a top level overview in the next section. Later sections will provide greater detail.</p>


<a id="page_1073_c1108"></a><p class="eh-headline-207 ">
				End to end data session establishment procedure
			</p>


<a id="page_1073_c1109"></a><p>This procedure establishes a packet data unit (<abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>) session that transfers data packets between a UE and a data network. A <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session involves several functions provided by the 5G core network, including session management (<abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr>), user plane functions (<abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr>) and access &amp; mobility functions (<abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>). From the protocol perspective, a signaling connection covering the non-access stratum (<abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr>) is established between the UE and the <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> to perform control communications procedures such as registration procedure, security procedure or mobility procedure.</p><p>The protocol message flow for the end to end data session establishment procedure is depicted in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-040__5G_NR_SA_mode_data_connection.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-40 &lt;\/span&gt;5G NR SA mode data connection establishment procedure example.&quot;}]">Fig. 2-40</a> and details about it are provided in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1074" class="eh-link eh-link--page">2.2.1 End to end data session establishment procedure, page 280</a>.</p>


<a id="page_1073_c1110"></a><p class="eh-headline-207 ">
				End to end quality of service
			</p>


<a id="page_1073_c1111"></a><p>One important characteristic of a 5G system is strong support for various quality of service profiles. Unlike the analogy of a “communistic network, where all bits are equal”, 5G NR supports multiple <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profiles for data transfer. <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profiles are used to guarantee a certain throughput (<abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr>), guarantee a certain throughput in latency critical situations (latency critical <abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr>) or offer data transfer services on a best effort basis for a so-called non-guaranteed bit rate (non-GBR) <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile. Parameters describing the various <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profiles are guaranteed throughput, priority of the data packets among one other or vs. other connections, latency or delay, and packet loss ratio describing the reliability of the connection. To support <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr>, 5G NR introduces a new protocol, the <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr>, which establishes a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow between the UE and <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> that can be summarized as a data tunnel through the entire network providing a certain <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile. Chapter <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1075" class="eh-link eh-link--page">2.2.2 End to end quality of service, page 285</a> describes further details of the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> aspects and how they will be configured and controlled within the 5G system. Note that the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> aspects are visible in the entire description of 5G NR, even if not directly obvious. For example, consider the various 5G numerologies as a method to provide <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profiles even on the radio interface.</p>


<a id="page_1073_c1112"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:61%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-040__5G_NR_SA_mode_data_connection_c1f1452f0a.png" width="800" height="484" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-40 </span>5G NR <abbr class="eh-abbreviation" title="Standalone" lang="en"><span class="eh-tooltip" title="Standalone">SA</span></abbr> mode data connection establishment procedure example.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1073_c1113"></a><p class="eh-headline-207 ">
				Radio resource assignment and data reception
			</p>


<a id="page_1073_c1114"></a><p>The procedures used for data transmission are the assignment procedures for radio resources on the uplink and downlink and the procedures related to data transfer. Later sections will explain these procedures in more detail, separated into procedures for UL and DL assignment and UL and DL data transfer.</p><p>First, the gNB may allocate resources on the downlink (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076" class="eh-link eh-link--page">2.2.3 DL resource assignment, page 295</a>) when data for that specific UE is available on the gNB coming via the NG interface from the <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> or <abbr class="eh-abbreviation" title="Evolved packet core" lang="en"><span class="eh-tooltip" title="Evolved packet core">EPC</span></abbr>. There are various options for deployment of the 5G system architecture, and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-004__Connectivity_options_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-4 &lt;\/span&gt;Connectivity options.&quot;}]">Fig. 1-4</a> shows more details on these various connection options for <abbr class="eh-abbreviation" title="Standalone" lang="en"><span class="eh-tooltip" title="Standalone">SA</span></abbr> or <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr> based architectures. The first downlink assignment happens after completion of the <em>RRCSetupComplete </em>which is called message 5 (Msg5) for a UE transferring from idle mode to connected mode (chapter <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1099" class="eh-link eh-link--page">2.4 Overall access procedure for SA mode, page 408</a> provides more details on the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection setup). The general downlink data reception model is based on a shared channel model for control and data. First, the shared scheduling control channel provides information about the content and ownership of the data channel and second, the shared data channel transmits user data with flexible and dynamic allocations. The two channels providing scheduling information and downlink data are the downlink data channel (<abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>) and the downlink control channel (<abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>), both described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1032" class="eh-link eh-link--page">1.2.5.3 Physical channels in 5G NR, page 78</a>. Since the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> is shared between multiple UEs and in order to support the UE in knowing its specific assignments, the <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> is scrambled or marked with a UE-specific identifier (<abbr class="eh-abbreviation" title="Cell RNTI" lang="en"><span class="eh-tooltip" title="Cell RNTI">C-RNTI</span></abbr>) that was allocated to the UE during the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection setup procedure. The UE reads the content of this scheduling information (<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>) and knows the resource in time and frequency where to receive data on <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>. Further details about data scheduling procedures are found in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076" class="eh-link eh-link--page">2.2.3 DL resource assignment, page 295</a>.</p><p>The motivation behind shared channel operation is an increase in throughput from a network perspective as well as support for flexible allocation, i.e. adaptive modulation and coding schemes as well as dynamic resource allocation in time and frequency. This can be used to describe the performance of the downlink data channel (<abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>) which also contains specific reference signals (<abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>) that support decoding and demodulation (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077" class="eh-link eh-link--page">2.2.4 DL data reception, page 307</a>).</p><p>The radio resources on the uplink are assigned via <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> scheduling and are based on a similar concept to the downlink assignments. The <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> of the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> is scrambled with a UE-specific identifier (<abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr>). If the UE successfully detects its identity and thus decodes a <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling, it uses those assigned resources to transmit data on the UL over the uplink data channel <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1081" class="eh-link eh-link--page">2.2.8 UL data transmission, page 335</a>) and waits for the next assignment on the DL or UL.</p>


<a id="page_1073_c1115"></a><p class="eh-headline-207 ">
				Uplink channel information (<abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr>)
			</p>


<a id="page_1073_c1116"></a><p>To support the network scheduler in optimizing the <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> or with beamforming decisions, the UE is configured with UL resources to report feedback information on the DL channel status. One status information is the downlink signal quality reported as <abbr class="eh-abbreviation" title="Channel quality indicator" lang="en"><span class="eh-tooltip" title="Channel quality indicator">CQI</span></abbr> feedback. It represents the result of regularly executed measurements estimating the signal quality of the DL reference signals. Due to this reporting of the radio signal quality status, the gNB can optimize the assignment of the next resource with an appropriate <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> for the current channel condition. Since 5G NR is a beamforming-based technology, the UE can be configured to provide feedback on the channel status that can be obtained based on channel status reference signals (<abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>). The reporting can be configured in a very flexible way by the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> protocol layer. What has to be reported, when and in what quantity, to name a few possibilities. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1082" class="eh-link eh-link--page">2.2.9 Uplink control information (UCI), page 340</a> for further details on reporting.</p>


<a id="page_1073_c1117"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> operation
			</p>


<a id="page_1073_c1118"></a><p>To ensure proper transfer of data packets, a feedback mechanism is applied that is familiar from LTE. The mechanism known as the hybrid acknowledge repeat (<abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr>) acknowledges the data transmission on the DL. Each data packet is automatically acknowledged and is retransmitted if necessary. To support higher data throughput for a single receiver, there can be multiple receive processes in parallel known as <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> processes. Such a <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process includes data processing steps such as demodulation, decoding, consistency check based on <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> and transmission of <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK feedback. Retransmission can be handled similar to the initial transmission or with a modified puncturing scheme known as the redundancy version. In the uplink <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr>, the UE transmits <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback to confirm reception of DL data via a physical control channel (<abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>) or <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. If this feedback is a negative acknowledgement, the network will retransmit the data packet. In the downlink direction, there is no direct <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback channel like the <abbr class="eh-abbreviation" title="Physical hybrid indicator channel" lang="en"><span class="eh-tooltip" title="Physical hybrid indicator channel">PHICH</span></abbr> channel from LTE. The gNB uses a new data bit (<abbr class="eh-abbreviation" title="New data indicator" lang="en"><span class="eh-tooltip" title="New data indicator">NDI</span></abbr>) in the scheduling message to request either a new data packet or the retransmission of a previous one.</p><p>A major difference compared to LTE is the flexible configuration and handling of timing aspects for the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> operation. There is no longer a constant time between reception of a data packet and its corresponding <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback or consecutive retransmission. These timings can be configured on a bilateral basis between the UE and network by the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> layer. Further details on the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> procedure are given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1078" class="eh-link eh-link--page">2.2.5 Hybrid automatic repeat request (HARQ) operation, page 318</a>.</p>


<a id="page_1073_c1119"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:714px;"><div class="book-img-wrap__inner" style="padding-bottom:127%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/2-041__Overall_data_transmission.png" width="714" height="900" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-41 </span>Overall data transmission.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1073_c1120"></a><p class="eh-headline-207 ">
				Scheduling request and buffer status reporting
			</p>


<a id="page_1073_c1121"></a><p>As soon as higher application request data transmission, the UE needs to request resources to transmit on the UL. The data transmission is based on a transmission buffer concept in which pending data for transmission is placed in a buffer waiting to be transferred. When no radio connection is established, the UE starts the establishment of an <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection setup as a first step via a random access procedure (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1061" class="eh-link eh-link--page">2.1 Overall access procedure for NSA mode, page 219</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1099" class="eh-link eh-link--page">2.4 Overall access procedure for SA mode, page 408</a> for details). After completion of the random access procedure, the UE receives the first UL grant in the <em>RRCConnectionSetup </em>(LTE) or <em>RRCSetup</em> (5G NR) message known as message 4 (Msg4). This represents the procedure for a UE-originated data connection or <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session for UE outgoing data. If there is an ongoing <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session but the UE needs to request UL resources for additional data transmission, it will request resources with the UL grant procedure using a specific <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> <em>scheduling request message</em> (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1079" class="eh-link eh-link--page">2.2.6 Uplink scheduling request and buffer status reporting, page 326</a> for further details). The objective of this scheduling request procedure is to receive permission to transmit data via the physical data channel (<abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>) on the UL (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1080" class="eh-link eh-link--page">2.2.7 UL grant reception or UL assignment, page 329</a>).</p><p>As was already mentioned, the goal of the 5G system is to allow resource allocation and quality of service association for data transmission in a flexible way. To support the scheduler within the network in its decision on how many radio resources should be scheduled to that UE in case of an ongoing <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session with uplink data transfer cases, the UE periodically transmits a buffer status report (<abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr>) to inform the gNB of the amount of data that is pending to be transmitted. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-098__Buffer_status_reporting.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-98 &lt;\/span&gt;Buffer status reporting with MAC CE \u2013 format and structure.&quot;}]">Fig. 2-98, page 375</a> for further details on <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> reporting.</p>


<a id="page_1073_c1122"></a><p class="eh-headline-207 ">
				Data flow through the 5G NR protocol stack
			</p>


<a id="page_1073_c1123"></a><p>The 5G NR protocol stack is divided into a user plane (<abbr class="eh-abbreviation" title="User plane" lang="en"><span class="eh-tooltip" title="User plane">UP</span></abbr>) and a control plane (<abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr>). From a general perspective, the protocol layers have similar functions to those known from LTE, but some differences are worth mentioning. First, there is a new protocol layer introduced for <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow management. The <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> layer at the highest position in the 5G NR user plane stratum manages <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> aspects. The <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer supports security procedures, the data radio bearer procedure and the mechanisms for carrier aggregation or <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> due to the introduction of an optional split bearer concept. The radio link protocol (<abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr>) offers the well known transfer modes <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr>, <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> and <abbr class="eh-abbreviation" title="Transparent mode" lang="en"><span class="eh-tooltip" title="Transparent mode">TM</span></abbr>. Unlike in LTE, 5G NR no longer supports the option to concatenate data packets; only segmentation is possible. This change in <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> was introduced to support latency-critical <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profiles. The <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer offers a wide range of procedures supporting data transfer such as logical channels to the transport channel mapping and control functions such as timing advance control or buffer status and power headroom reporting. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1083" class="eh-link eh-link--page">2.2.10 Data flow through 5G NR protocol layers, page 349</a> for further details on the 5G NR protocol structure procedures.</p>


<a id="page_1073_c1124"></a><p class="eh-headline-207 ">
				Dynamic, semi-persistent and grant-free scheduling
			</p>


<a id="page_1073_c1125"></a><p>As a ubiquitous and universal mobile communications standard, the 5G system supports several types of data transmission depending on what kind of services are requested. If the UE or network needs sporadic data transmission, this refers to dynamic scheduling. In the downlink direction, the gNB uses the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> scheduling channel to send <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> messages scheduling radio resources to the UE. In the uplink direction, assuming a radio connection has been established via <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> procedures, the radio resources for the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> are assigned via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling on the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>. The scheduling request procedure provides a method to request more resources on the uplink. It describes the situation where the UE requests a specific buffer size on the UL with a <em>scheduling request</em> and the gNB assigns in one or more assignments the requested radio resources permitting the clearance of the data transmission buffer. If the UE requires data constantly, for periodic transmission (such as video or voice services), then the procedure is described as semi-persistent scheduling, or <em>grant-free scheduling</em> if configured by the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> layer. After the first scheduling request, the UE is granted periodic assignments in time and in frequency without the need to repeat the request (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1084" class="eh-link eh-link--page">2.2.11 Dynamic, semi-persistent and grant-free scheduling, page 382</a>).</p>


<a id="page_1073_c1126"></a><p class="eh-headline-207 ">
				Data security
			</p>


<a id="page_1073_c1127"></a><p>5G NR is expected to support a wide range of applications expanding the legacy voice and subscriber data centric behavior of a network to multiple tenants and multiple services such as automotive and industrial applications, mission-critical applications and medical or financial services, to mention a few examples. Thus, data security is becoming a vital aspect of future mobile communications networks. 5G NR security procedures include ciphering to avoid eavesdropping, authentication to avoid subscriber fraud, and integrity protection to avoid non-authorized control messages like man in the middle attacks. Chapter <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1085" class="eh-link eh-link--page">2.2.12 Data security, page 384</a> provides a brief overview of 5G NR security procedures.</p><p>Recalling chapter <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1006" class="eh-link eh-link--page">1.1.2 Overall 5G architecture, page 12</a>, we will now review the two different connection types: <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr> mode where LTE is in joint operation with 5G NR and <abbr class="eh-abbreviation" title="Standalone" lang="en"><span class="eh-tooltip" title="Standalone">SA</span></abbr> mode where 5G NR is operated solely. Summarizing the message flows and connection establishment, <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-042__NSA_connection_establishment_.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-42 &lt;\/span&gt;EN-DC connection establishment via RRC connection reconfiguration procedure (example).&quot;}]">Fig. 2-42</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-040__5G_NR_SA_mode_data_connection.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-40 &lt;\/span&gt;5G NR SA mode data connection establishment procedure example.&quot;}]">Fig. 2-40</a> illustrate the connection setup. In <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> mode, first the LTE connection is established and afterwards, the 5G NR connection is established using the <em>RRCReconfiguration</em> message procedure. For <abbr class="eh-abbreviation" title="Standalone" lang="en"><span class="eh-tooltip" title="Standalone">SA</span></abbr> mode, the 5G NR connection is established in a similar procedure to that known from LTE: First, an <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> signaling radio bearer is established via the random access procedure and after the <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> security and authentication procedures, a data connection is activated.</p>


<a id="page_1073_c1128"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:68%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-042__NSA_connection_establishment__17d99613bd.png" width="800" height="543" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-42 </span><abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> connection establishment via <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection reconfiguration procedure (example).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1073_c1129"></a><p>The following sections describe these UL and DL data transfer procedures in greater detail.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1074" data-prevpid="1073" data-nextpid="1075" data-chapter="2.2.1 End to end data session establishment procedure" id="page_1074">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.2.1 End to end data session establishment procedure</h3>
						
<a id="page_1074_c1130"></a><p>Data transmission between the UE and 5G network requires establishment of a packet data unit (<abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>) session and involves logical <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> functions such as <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr>, <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr> and <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>. A <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session or connectivity service provides the exchange of data packets between a UE and a data network, identified by a data network name (<abbr class="eh-abbreviation" title="Data network name" lang="en"><span class="eh-tooltip" title="Data network name">DNN</span></abbr>). The data network <abbr class="eh-abbreviation" title="Data network name" lang="en"><span class="eh-tooltip" title="Data network name">DNN</span></abbr> can be considered as the LTE access point name (<abbr class="eh-abbreviation" title="Access point name" lang="en"><span class="eh-tooltip" title="Access point name">APN</span></abbr>). The session management works in close cooperation with the registration management and connection management, i.e. it is based on interaction between <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr>, <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr> and <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1010" class="eh-link eh-link--page">1.1.2.4 Functional split between 5GC and NG-RAN, page 17</a> for further details). The session management is part of the <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> protocol structure. The term non-access stratum represents a protocol structure, and thus not just a single layer. It is called non-access as it is independent and on-top of the underlying protocol structure controlling the radio interface, i.e. the “access” ­layers.</p><p>The registration management, led by the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>, performs a registration of the UE with the network to receive services that require registration. The registration is updated by the UE in three situations: First, based on a mobility triggered registration update, i.e. registration area change or <abbr class="eh-abbreviation" title="Public land mobile network" lang="en"><span class="eh-tooltip" title="Public land mobile network">PLMN</span></abbr> re-selection, second based on a periodic time requiring a periodic registration update, or third based on a capability update or renegotiation of protocols. The registration procedure is performed via the exchange of the <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> control messages <em>Registration Update</em>, <em>Registration Accept</em> for the successful case or <em>Registration Reject</em> for the unsuccessful case. The registration status is stored in a registration state on both sides, one in the UE and one in the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>, as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-043__Registration_management_states_in_UE_and_AMF.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-43 &lt;\/span&gt;Registration management states in UE and AMF.&quot;}]">Fig. 2-43</a>:</p>


<a id="page_1074_c1131"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:63%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-043__Registration_management_states_in_UE_and_AMF_c9e75faee3.png" width="800" height="504" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-43 </span>Registration management states in UE and <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1074_c1132"></a><p>Connection management (CM) is the function that takes care of communications between the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> and the UE. It comprises the functions of establishing and releasing a signaling connection between a UE and the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> over the N1 interface. This signaling connection is used to enable a <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> signaling exchange between the UE and the core network. </p><p>The CM procedures are started after the access stratum (<abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr>) procedures having successfully established an <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection that is used to exchange higher layer protocol information. The connection management is used to exchange </p><p><abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> control information for either the <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> connection between UE and the <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr>, UE connection related control information or network control information that is connection related. Like the registration management, also the connection management is based on a state model. A UE can be in <em>CM-IDLE</em> or <em>CM-CONNECTED</em> state. A UE in CM-IDLE state has no <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> signaling connection established. This is the state when having successfully established an <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection but not yet a CM connection for <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> messages. In this state, the UE performs cell selection/re-selection and <abbr class="eh-abbreviation" title="Public land mobile network" lang="en"><span class="eh-tooltip" title="Public land mobile network">PLMN</span></abbr> selection. It is possible that the UE is in RM-REGISTERED state and in CM-IDLE. In such a case, the UE listens and responds to paging messages triggered by NG-RAN and it may perform a <em>Service Request</em> signaling procedure in case user data has to be sent. The transmission of an initial <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> message such as a registration request, service request or deregistration request initiates the transition from CM-IDLE to CM-CONNECTED state (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-044__5G_connection_management_states_in_UE_and_AMF.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-44 &lt;\/span&gt;5G connection management states in UE and AMF.&quot;}]">Fig. 2-44</a>). It is possible for the UE to be in <span class="eh-text--nowrap">CM-CONNECTED</span> state but in <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>_INACTIVE state. In such situations, the UE reachability is managed by the NG-RAN and the paging or channel access procedures are used to transfer into the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> active state (<span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span>).</p>


<a id="page_1074_c1133"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:60%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-044__5G_connection_management_states_in_UE_and_AMF_eebeaa262a.png" width="800" height="479" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-44 </span>5G connection management states in UE and <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1074_c1134"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session
			</p>


<a id="page_1074_c1135"></a><p>For each UE, <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> establishes one or more <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> sessions. A <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session should be understood as the connectivity service that supports the exchange of protocol data units (<abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>) between a UE and a data network. Since 5G is understood as a quality of service driven technology, there is a certain <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile (better known as a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow) accompanying a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session. For more details on <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow aspects in 5G, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1075" class="eh-link eh-link--page">2.2.2 End to end quality of service, page 285</a>. The responsible entity in the network to handle the <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session is the session management function (<abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr>). Note that the <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr> belongs to the <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> protocol stack like the access and mobility function (<abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>), but both entities are independent. <span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span> describes the interaction between both entities. The subscription information of the connectivity service may include multiple data network names and it may contain a default <abbr class="eh-abbreviation" title="Data network name" lang="en"><span class="eh-tooltip" title="Data network name">DNN</span></abbr> to which the UE is assigned in case of a missing valid <abbr class="eh-abbreviation" title="Data network name" lang="en"><span class="eh-tooltip" title="Data network name">DNN</span></abbr> in a <em>PDU session establishment request</em> procedure. Examples of <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> sessions are the <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session (supporting both IPv4 and IPv6), the Ethernet <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session and the unstructured <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session. Note that each <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session supports only a single <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session type. The Ethernet <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session type uses the <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr> and <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr> as the session anchor and supports specific behaviors related to the fact that the <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session carries Ethernet frames and no <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> data packets. Allowing some flexibility in architecture deployment, operators can configure whether either the <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr> can act as an anchor or redirect traffic via the <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr>. An example is the usage of mobile edge computing where a remote <abbr class="eh-abbreviation" title="Mobile edge computing" lang="en"><span class="eh-tooltip" title="Mobile edge computing">MEC</span></abbr> inherits some <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr> functions and provides a lower latency <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow. Protocol details regarding Ethernet such as the Ethernet preamble and start of frame delimiter will not be sent over the <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session and also no <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> or <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> address will be allocated to the UE for this <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session.</p><p>In addition, the 5G <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session supports the unstructured <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session type, allowing different point-to-point tunneling techniques based on <abbr class="eh-abbreviation" title="User datagram protocol" lang="en"><span class="eh-tooltip" title="User datagram protocol">UDP</span></abbr>/IPv6 tunneling to send unstructured <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> type data. A probable motivation for such an option could be to serve a network tenant that wants to orchestrate his own data network on proprietary protocol profiles based on a 5G system where it would be up to the negotiation between the 5G system operator and the 5G tenant to agree on the implementation details. See <span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span> for more information about the tunneling techniques allowed in <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr>. The NG-RAN establishes for each UE at least one data radio bearer (<abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>) together with the <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session. Additional <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>(s) for <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow(s) of that <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session can be subsequently configured, based on scheduling decisions by the network. The mapping of <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows to data radio bearers (<abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>) is decided by the network and is flexible. First, the end to end data connection can be described as a session data flow (<abbr class="eh-abbreviation" title="Service data flow" lang="en"><span class="eh-tooltip" title="Service data flow">SDF</span></abbr>) and one <abbr class="eh-abbreviation" title="Service data flow" lang="en"><span class="eh-tooltip" title="Service data flow">SDF</span></abbr> is described by its type of service. Such a <abbr class="eh-abbreviation" title="Service data flow" lang="en"><span class="eh-tooltip" title="Service data flow">SDF</span></abbr> is associated with a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow and later, there can be several <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows mapped onto the same <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr> or various <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows can be mapped on various DRBs. Later in this section, further details are given.</p><p><abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> sessions are established, modified and released using <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> session management signaling messages exchanged between the UE and the <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr>. The <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr> is responsible for checking whether the UE session requests are compliant with the user subscription in cooperation with the data management in the <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr>. A <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session is described and stored with certain attributes, linked to the <abbr class="eh-abbreviation" title="Data network name" lang="en"><span class="eh-tooltip" title="Data network name">DNN</span></abbr> and if applicable also the network slice via the parameter <abbr class="eh-abbreviation" title="Single network slice selection assistance information" lang="en"><span class="eh-tooltip" title="Single network slice selection assistance information">S-NSSAI</span></abbr>:</p><ul class="eh-list eh-list--line"><li><abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session ID to uniquely identify one of a UE's <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> sessions</li><li><abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session type and optionally a default <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session type, both given as one of the values IPv4, IPv6, Ethernet or unstructured</li><li>Quality of service information, i.e. session <abbr class="eh-abbreviation" title="Aggregate maximum bit rate" lang="en"><span class="eh-tooltip" title="Aggregate maximum bit rate">AMBR</span></abbr>, default <abbr class="eh-abbreviation" title="5G QoS identifier" lang="en"><span class="eh-tooltip" title="5G QoS identifier">5QI</span></abbr>, default <abbr class="eh-abbreviation" title="Address resolution protocol, Allocation and retention priority as QoS parameter" lang="en"><span class="eh-tooltip" title="Address resolution protocol, Allocation and retention priority as QoS parameter">ARP</span></abbr> (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1075" class="eh-link eh-link--page">2.2.2 End to end quality of service, page 285</a>)</li><li>Session and service continuity mode</li><li>Data network name (<abbr class="eh-abbreviation" title="Data network name" lang="en"><span class="eh-tooltip" title="Data network name">DNN</span></abbr>)</li><li>Single network slice selection assistance information <abbr class="eh-abbreviation" title="Single network slice selection assistance information" lang="en"><span class="eh-tooltip" title="Single network slice selection assistance information">S-NSSAI</span></abbr> if applicable</li><li>Static <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> address or IPv6 prefix if applicable</li></ul><p>A UE can establish multiple <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> sessions. They may even end at various <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr> entities and thus support the network slicing concept. A <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session is <abbr class="eh-abbreviation" title="Radio access technology" lang="en"><span class="eh-tooltip" title="Radio access technology">RAT</span></abbr> agnostic, thus a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session can either be 3GPP RAN based like 5G NR or EUTRAN, or it can involve non-3GPP access, e.g. WLAN. Another proof of the total flexibility of 5G systems is visible by contemplating the overall possibilities of <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> data sessions that are offered by the system. The following <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session details are supported, for example:</p><ul class="eh-list eh-list--line"><li>A single <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session with multiple <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session anchors implies the possibility that one <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr> is connected via multiple N6 interfaces to the data network to support selective traffic routing functions</li><li>Support for local area data network, meaning that data network access is only available in a specific service area, described as a set of tracking areas</li><li>Secondary authentication/authorization by a <abbr class="eh-abbreviation" title="Data network authentication, authorization and accounting" lang="en"><span class="eh-tooltip" title="Data network authentication, authorization and accounting">DN-AAA</span></abbr> server during the establishment of a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session, representing either a kind of two-stage security procedure performed by the <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> and by the external data network or the option that the <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr> passes the authentication/authorization information for the UE to the data network <abbr class="eh-abbreviation" title="Authentication, authorization and accounting" lang="en"><span class="eh-tooltip" title="Authentication, authorization and accounting">AAA</span></abbr> server</li><li>Selective activation and deactivation of a user plane connection for an existing <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session in case the UE has established multiple <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> sessions</li></ul><a id="page_1074_c1136"></a><p class="eh-headline-207 ">
				Session and service continuity (<abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr>)
			</p>


<a id="page_1074_c1137"></a><p>This function guarantees the session and service mobility for certain mobility or access network change procedures. In the current version of the specification, three <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> modes are supported. They are associated with the <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session and do not change during the lifetime of the <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session:</p><ul class="eh-list eh-list--line"><li>Seamless session and service continuity with <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode 1: The network preserves the connectivity service provided to the UE. For the case of a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session of the IPv4 or IPv6 type, the <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> address is preserved. The <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr> acting as <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session anchor is maintained regardless of the access technology, thus <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode 1 would enable any kind of inter-RAT mobility, even between 3GPP access and non-3GPP access networks, similar to the idea of WAN offloading that has been applied in LTE for some time. <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode 1 can be used as the general session continuity function providing a certain latency and session continuity for data services that require a kind of latency and guaranteed bit rate (e.g. voice or video services).</li><li>Non-seamless session and service continuity with <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode 2: The network may release the connectivity service delivered to the UE and release the corresponding <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session. If a continuation is required, a new <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session would have to be established. For the case of the IPv4 or IPv6 type, the network may release <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> address(es) that were allocated to the UE. In case of a single <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session anchor, the network may trigger the release of this <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session and instruct the UE to establish a new <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session to the same data network immediately after the access network change. The <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode 2 can be understood as the service continuity mode that is applied when latency aspects are less critical, e.g. a standard web browsing application that can tolerate certain delays or interruptions.</li><li><abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode 3 is the seamless session and service continuity funtion for either a latency-critical or interruption-critical data connection. It avoids interruption by applying a “make before break” mechanism. With <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode 3, changes to the user plane can be visible to the UE, while the network ensures that the UE suffers no loss of connectivity. A connection through a new <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session anchor point is established before the previous connection is terminated in order to ensure better service continuity. For the case of the IPv4 or IPv6 type, the <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> address is not preserved in this mode when the <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session anchor changes, but the network supports IPv6 address multi-homing or maintains the old <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> address for a certain time to avoid any data losses. This <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> 3 mode may be used in cases where the interruption time should be minimized, especially for new services in the background of <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> like autonomous driving vehicles.</li></ul><p>The network may provide the UE with a policy of <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> selection, but it is up to the network to accept the UE requested <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode or to renegotiate or reject the proposal.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1075" data-prevpid="1074" data-nextpid="1076" data-chapter="2.2.2 End to end quality of service" id="page_1075">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.2.2 End to end quality of service</h3>
						
<a id="page_1075_c1138"></a><p>Universal and ubiquitous mobile communications technologies like the 5G system are much more than just a “bit pipe” to provide a binary data connection between two endpoints in a kind of “communist – all bits are equal” approach. Furthermore, there is a requirement to offer sufficient quality of experience within different data connection services. The challenge for a universal communications system is the plethora of data connections outlining a multitude of diverse data transmission behaviors, e.g. continuous data transmission vs. sporadic data transmission, periodic data transmission vs. incident driven data, lower latency requirements, requirements for a guaranteed bit rate or priority definition for different data connections among one other, just to name a few examples. Unlike previous technologies, 5GS is designed to serve multiple vertical industry use cases and service types. The technology enablers offer flexibility that allows the optimization of each vertical industry use case, but vertical industries are very diverse and their performance requirements are dictated by the service characteristics of the related vertical segment. End to end <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> support implies various use of 5G technology enablers due to diverse service-specific requirements. A current study item in 3GPP investigates the need for further service-specific requirement specification, e.g. medical requirements, unmanned aerial vehicles or industrial process automation.</p><p>As an abstract definition of certain <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> flows, the term service data flow (<abbr class="eh-abbreviation" title="Service data flow" lang="en"><span class="eh-tooltip" title="Service data flow">SDF</span></abbr>) is used. A service data flow (<abbr class="eh-abbreviation" title="Service data flow" lang="en"><span class="eh-tooltip" title="Service data flow">SDF</span></abbr>) is one or an aggregation of <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> flows classified by the type of service in use.</p><p>Later, such an <abbr class="eh-abbreviation" title="Service data flow" lang="en"><span class="eh-tooltip" title="Service data flow">SDF</span></abbr> is linked to a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow. The binding mechanism is the procedure that associates a service data flow with the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow deemed to transport the service data flow [<span class="eh-hint" title="Policy and Charging Control Framework for the 5G System" lang="en"><span class="eh-tooltip" title="Policy and Charging Control Framework for the 5G System">TS 23.503</span></span>]. Therefore, the capability should be implemented in a 5G system to handle various data connections with different <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> requirements simultaneously. Thus, one of the key features of the 5G system is not only the flexibility and the wide support for various service scenarios such as <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr>, but also the capability to negotiate, guarantee and supervise a quality of service profile on a bilateral basis. We tend to describe an expression like 5G system within the context of a quality of service driven technology, and one can observe such <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> aspects in all stages of the protocol layers. Different terms are introduced in the concept of a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> service model. As a first definition, one should consider the term <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristic, described as a data treatment policy within the overall network including all protocol layers for the forwarding of data. According to the definition of <em>QoS parameters</em>, two entities can exchange <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics in control messages. A set of <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> parameters belonging to such a data connection is grouped into a <em>QoS profile</em>. To guarantee the simultaneous provisioning of different <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics, the term <em>QoS flow</em> is used.</p><p>A simplified example helps clarify these expressions. Given a data connection between a UE and the 5G network, a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristic could be the negotiation of a guaranteed bit rate. The <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> parameter is the term “guaranteed bit rate” that is used in communications between the UE and network and is analogous to the statement “for a video call, I need a guaranteed bit rate of 10 Mbps”. Now, this guaranteed bit rate is, for example, combined with a priority configuration among other packets and this is now the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile that both entities will use. Finally, the simplified description of the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow to be the finest granularity could be the agreement of a data connection that guarantees a bit rate of 12 Mbps with a deviation of ±1 Mbps. As <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics, the 5G system considers the following parameters:</p><ul class="eh-list eh-list--line"><li>Data rate or throughput that can be guaranteed or not, known as <abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr> or non-GBR data flows</li><li>Motivated by potential new <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> services, the 5G system also offers <abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr> <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> with latency critical requirements</li><li>Priority level to prioritize data flows among one other</li><li>Packet delay budget signifying the latency control</li><li>Packet error rate as a kind of measure of the <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> connection quality or error probability and reliability of the end to end connection</li></ul><a id="page_1075_c1139"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow
			</p>


<a id="page_1075_c1140"></a><p>Based on the 5GS quality of service model, the term <em>QoS flow</em> is specified in <span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span>. A <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow represents the finest granularity of <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> differentiation in the <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session and is identified within a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session by a unique <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow ID (<abbr class="eh-abbreviation" title="QoS flow ID" lang="en"><span class="eh-tooltip" title="QoS flow ID">QFI</span></abbr>) in the 5G system. The scheduling function and admission control function in the network entities guarantee the same traffic forwarding treatment for user plane traffic having the same <abbr class="eh-abbreviation" title="QoS flow ID" lang="en"><span class="eh-tooltip" title="QoS flow ID">QFI</span></abbr> within a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session. Three type of <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows are supported: <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows that require a guaranteed flow bit rate (<abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr>), <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows with a <abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr> that are latency critical, and <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows that do not require a guaranteed flow bit rate (non-GBR). Data connections can be different regarding their <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> requirements and in addition they may be direction-dependent. Thus, the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow is allocated independently per direction (downlink and uplink). The characteristics of the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow on the downlink are decided by the network. There are two ways to assign the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow characteristics for the uplink. As the first option, the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow parameters are negotiated between the UE and network via higher layer signaling.</p><p>As the second option, the 5G <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> model supports reflective <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr>, i.e. the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow on the uplink reflects the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow settings on the downlink. Such mechanisms reduce the control overhead especially for bi-directional services such as a typical voice call between two humans in a voice over 5G connection. There is the option for direct negotiation of <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow parameters between the UE and <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> with a corresponding <abbr class="eh-abbreviation" title="QoS flow ID" lang="en"><span class="eh-tooltip" title="QoS flow ID">QFI</span></abbr> allocation. To simplify the negotiation, default <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics are defined, indicated by the identifier <abbr class="eh-abbreviation" title="5G QoS identifier" lang="en"><span class="eh-tooltip" title="5G QoS identifier">5QI</span></abbr>, and optionally the network can use this <abbr class="eh-abbreviation" title="5G QoS identifier" lang="en"><span class="eh-tooltip" title="5G QoS identifier">5QI</span></abbr> scalar value as the <abbr class="eh-abbreviation" title="QoS flow ID" lang="en"><span class="eh-tooltip" title="QoS flow ID">QFI</span></abbr> value. A <abbr class="eh-abbreviation" title="5G QoS identifier" lang="en"><span class="eh-tooltip" title="5G QoS identifier">5QI</span></abbr> is a scalar that is used as a reference to predefined 5G <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1075_c1146\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table\&quot; id=\&quot;table036\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;5QI value&lt;\/th&gt;&lt;th&gt;Resource type&lt;\/th&gt;&lt;th&gt;Default priority level&lt;\/th&gt;&lt;th&gt;Packet delay budget&lt;\/th&gt;&lt;th&gt;Packet error rate&lt;\/th&gt;&lt;th&gt;Default m aximum data burst volume&lt;\/th&gt;&lt;th&gt;Default&lt;br \/&gt; \t\t\taveraging window&lt;\/th&gt;&lt;th&gt;Example services&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td rowspan=\&quot;8\&quot;&gt;GBR&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Conversational voice&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;40&lt;\/td&gt;&lt;td&gt;150 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;3&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Conversational video (live streaming)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;30&lt;\/td&gt;&lt;td&gt;50 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;3&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Real time gaming, V2X messages,&lt;br \/&gt; \t\t\telectricity distribution \u2013 medium voltage, process automation \u2013 monitoring&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;50&lt;\/td&gt;&lt;td&gt;300 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Non-conversational video (buffered streaming)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;65&lt;\/td&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;75 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Mission critical user plane Push To Talk voice (e.g., MCPTT)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;66&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Non mission critical user plane Push To Talk voice&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;67&lt;\/td&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;3&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Mission critical video user plane&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;75&lt;\/td&gt;&lt;td&gt;25&lt;\/td&gt;&lt;td&gt;50 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;V2X messages&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td rowspan=\&quot;9\&quot;&gt;Non-GBR&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;IMS signaling&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;60&lt;\/td&gt;&lt;td&gt;300 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Video (buffered streaming)&lt;br \/&gt; \t\t\tTCP-based (e.g., www, e-mail, chat, ftp, p2p file sharing, progressive video, etc.)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;70&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;3&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Voice, video (live streaming),&lt;br \/&gt; \t\t\tinteractive gaming&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;300 ms&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;N\/A&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;N\/A&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;Video (buffered streaming)&lt;br \/&gt; \t\t\tTCP-based (e.g., www, e-mail, chat, ftp, p2p file sharing, progressive&lt;br \/&gt; \t\t\tvideo, etc.)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;90&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;69&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;60 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Mission critical delay sensitive signaling (e.g., MC-PTT signaling)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;70&lt;\/td&gt;&lt;td&gt;55&lt;\/td&gt;&lt;td&gt;200 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Mission critical data (e.g. example services are the same as QCI 6\/8\/9)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;79&lt;\/td&gt;&lt;td&gt;65&lt;\/td&gt;&lt;td&gt;50 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;V2X messages&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td&gt;68&lt;\/td&gt;&lt;td&gt;10 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Low latency eMBB applications augmented reality&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;82&lt;\/td&gt;&lt;td rowspan=\&quot;4\&quot;&gt;Delay critical GBR&lt;\/td&gt;&lt;td&gt;19&lt;\/td&gt;&lt;td&gt;10 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;4&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;255 bytes&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Discrete automation&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;83&lt;\/td&gt;&lt;td&gt;22&lt;\/td&gt;&lt;td&gt;10 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;4&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;1358 bytes&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Discrete automation&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;84&lt;\/td&gt;&lt;td&gt;24&lt;\/td&gt;&lt;td&gt;30 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;5&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;1354 bytes&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Intelligent transport systems&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;85&lt;\/td&gt;&lt;td&gt;21&lt;\/td&gt;&lt;td&gt;5 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;5&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;255 bytes&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Electricity distribution- high voltage&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-46 &lt;\/span&gt;QoS characteristics. Standardized 5QI to QoS characteristics mapping [TS 23.501]&lt;\/p&gt;\n\n&quot;}">Fig. 2-46</a> for details). Within the 5G system, the entity responsible for <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow control, establishment or reconfiguration via the <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session establishment or modification procedure is the <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr> (see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1010" class="eh-link eh-link--page">1.1.2.4 Functional split between 5GC and NG-RAN, page 17</a>.) Any <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow is characterized by:</p><ul class="eh-list eh-list--line"><li>A set of parameters describing the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> policy of data forwarding treatment, given as a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile. Examples of predefined <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profiles are given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1075_c1146\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table\&quot; id=\&quot;table036\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;5QI value&lt;\/th&gt;&lt;th&gt;Resource type&lt;\/th&gt;&lt;th&gt;Default priority level&lt;\/th&gt;&lt;th&gt;Packet delay budget&lt;\/th&gt;&lt;th&gt;Packet error rate&lt;\/th&gt;&lt;th&gt;Default m aximum data burst volume&lt;\/th&gt;&lt;th&gt;Default&lt;br \/&gt; \t\t\taveraging window&lt;\/th&gt;&lt;th&gt;Example services&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td rowspan=\&quot;8\&quot;&gt;GBR&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Conversational voice&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;40&lt;\/td&gt;&lt;td&gt;150 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;3&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Conversational video (live streaming)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;30&lt;\/td&gt;&lt;td&gt;50 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;3&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Real time gaming, V2X messages,&lt;br \/&gt; \t\t\telectricity distribution \u2013 medium voltage, process automation \u2013 monitoring&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;50&lt;\/td&gt;&lt;td&gt;300 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Non-conversational video (buffered streaming)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;65&lt;\/td&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;75 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Mission critical user plane Push To Talk voice (e.g., MCPTT)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;66&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Non mission critical user plane Push To Talk voice&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;67&lt;\/td&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;3&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Mission critical video user plane&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;75&lt;\/td&gt;&lt;td&gt;25&lt;\/td&gt;&lt;td&gt;50 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;V2X messages&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td rowspan=\&quot;9\&quot;&gt;Non-GBR&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;IMS signaling&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;60&lt;\/td&gt;&lt;td&gt;300 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Video (buffered streaming)&lt;br \/&gt; \t\t\tTCP-based (e.g., www, e-mail, chat, ftp, p2p file sharing, progressive video, etc.)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;70&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;3&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Voice, video (live streaming),&lt;br \/&gt; \t\t\tinteractive gaming&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;300 ms&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;N\/A&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;N\/A&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;Video (buffered streaming)&lt;br \/&gt; \t\t\tTCP-based (e.g., www, e-mail, chat, ftp, p2p file sharing, progressive&lt;br \/&gt; \t\t\tvideo, etc.)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;90&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;69&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;60 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Mission critical delay sensitive signaling (e.g., MC-PTT signaling)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;70&lt;\/td&gt;&lt;td&gt;55&lt;\/td&gt;&lt;td&gt;200 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Mission critical data (e.g. example services are the same as QCI 6\/8\/9)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;79&lt;\/td&gt;&lt;td&gt;65&lt;\/td&gt;&lt;td&gt;50 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;V2X messages&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td&gt;68&lt;\/td&gt;&lt;td&gt;10 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Low latency eMBB applications augmented reality&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;82&lt;\/td&gt;&lt;td rowspan=\&quot;4\&quot;&gt;Delay critical GBR&lt;\/td&gt;&lt;td&gt;19&lt;\/td&gt;&lt;td&gt;10 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;4&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;255 bytes&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Discrete automation&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;83&lt;\/td&gt;&lt;td&gt;22&lt;\/td&gt;&lt;td&gt;10 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;4&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;1358 bytes&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Discrete automation&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;84&lt;\/td&gt;&lt;td&gt;24&lt;\/td&gt;&lt;td&gt;30 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;5&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;1354 bytes&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Intelligent transport systems&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;85&lt;\/td&gt;&lt;td&gt;21&lt;\/td&gt;&lt;td&gt;5 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;5&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;255 bytes&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Electricity distribution- high voltage&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-46 &lt;\/span&gt;QoS characteristics. Standardized 5QI to QoS characteristics mapping [TS 23.501]&lt;\/p&gt;\n\n&quot;}">Fig. 2-46</a></li><li>One or more <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> rules are provided by the <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr> to the UE. A <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> rule can be interpreted as a mapping profile of how to define <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow parameters for uplink data. Alternatively, the network can configure the UE for reflective <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows, in which case, the uplink <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow profile is copied from the downlink <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile</li><li>One or more service data flow (<abbr class="eh-abbreviation" title="Service data flow" lang="en"><span class="eh-tooltip" title="Service data flow">SDF</span></abbr>) templates. An <abbr class="eh-abbreviation" title="Service data flow" lang="en"><span class="eh-tooltip" title="Service data flow">SDF</span></abbr> can be simplified as an <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> flow or an aggregation of <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> flows of user traffic classified by the type of service in use. It is defined in <span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span> as: “The set of Service Data Flow filters in a policy rule or an application identifier in a policy rule referring to an application detection filter, required for defining a Service Data Flow”</li></ul><a id="page_1075_c1141"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile and <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> parameters
			</p>


<a id="page_1075_c1142"></a><p>As was already mentioned, 5G provides support for various diversified data connections inheriting various requirements for the quality of service characteristics. Clearly, end-to-end data connections require a minimum throughput to ensure a satisfactory user experience, e.g. voice or video transfer, while other connection types, e.g. background traffic, are more tolerant of fluctuating data rates. This variance is supported by the introduction of a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile concept in 5G. This profile can be described as a set of parameters to control and maintain a data flow with the required data forward treatment characteristics. Such a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile is identified with an ID value known as the <abbr class="eh-abbreviation" title="QoS flow ID" lang="en"><span class="eh-tooltip" title="QoS flow ID">QFI</span></abbr>, which can either be a scalar value assigned randomly by the network, or if default <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile characteristics are used, the <abbr class="eh-abbreviation" title="QoS flow ID" lang="en"><span class="eh-tooltip" title="QoS flow ID">QFI</span></abbr> can be replaced by the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristic identifier 5GI.</p><p>As the first distinction, three types of <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profiles are defined: one that is based on a guaranteed data rate (guaranteed flow bit rate or <abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr>), one for a non-guaranteed flow bit rate (non-GBR) and in addition, to support <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr>, there is a new definition of delay-critical <abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr> bit rates. These are not the only definition parameters for a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile. There are additional parameters to describe a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile, but unfortunately they are somewhat abstract. The definition of a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile is based on two expressions: <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> parameters and <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics. What is the difference between them? As a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> parameter, we may understand the definition of information that is exchanged during a conversation. By using an analogy, we may understand the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> parameter as the repository or list of allowed words in a language dictionary. For example, during the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile negotiation the UE and <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr> may exchange these <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> parameters to define the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile. The detailed content or better, the definition of a policy that represents the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> aspects for data forward treatment, is then called the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristic. Using our example with the language or dictionary terms as the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> parameters, the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics are then the “federal constitution” of our data forward treatment policy. To give another example to clarify the difference between <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> parameters and <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics: As a parameter, 5G defines the allocation and retention priority (<abbr class="eh-abbreviation" title="Address resolution protocol, Allocation and retention priority as QoS parameter" lang="en"><span class="eh-tooltip" title="Address resolution protocol, Allocation and retention priority as QoS parameter">ARP</span></abbr>), which is a parameter to negotiate the possibility of setting a priority level for data flows. The corresponding <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics in one <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile could then be, for example, a priority level of 8 in a range of priority levels from 1 to 15. Thus, a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile is described with these parameters:</p><ul class="eh-list eh-list--line"><li>A 5G <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> identifier (<abbr class="eh-abbreviation" title="5G QoS identifier" lang="en"><span class="eh-tooltip" title="5G QoS identifier">5QI</span></abbr>), which is a scalar used to refer to <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics, such as negotiated data forward treatment values, e.g. <abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr> or non-GBR type, priority level, packet delay budget for latency aspects or packet error rate for classification of the vulnerability tolerance of the overall <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session. 5G defines some default <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics in <span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span> (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1075_c1146\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table\&quot; id=\&quot;table036\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;5QI value&lt;\/th&gt;&lt;th&gt;Resource type&lt;\/th&gt;&lt;th&gt;Default priority level&lt;\/th&gt;&lt;th&gt;Packet delay budget&lt;\/th&gt;&lt;th&gt;Packet error rate&lt;\/th&gt;&lt;th&gt;Default m aximum data burst volume&lt;\/th&gt;&lt;th&gt;Default&lt;br \/&gt; \t\t\taveraging window&lt;\/th&gt;&lt;th&gt;Example services&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td rowspan=\&quot;8\&quot;&gt;GBR&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Conversational voice&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;40&lt;\/td&gt;&lt;td&gt;150 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;3&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Conversational video (live streaming)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;30&lt;\/td&gt;&lt;td&gt;50 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;3&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Real time gaming, V2X messages,&lt;br \/&gt; \t\t\telectricity distribution \u2013 medium voltage, process automation \u2013 monitoring&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;50&lt;\/td&gt;&lt;td&gt;300 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Non-conversational video (buffered streaming)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;65&lt;\/td&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;75 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Mission critical user plane Push To Talk voice (e.g., MCPTT)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;66&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Non mission critical user plane Push To Talk voice&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;67&lt;\/td&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;3&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Mission critical video user plane&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;75&lt;\/td&gt;&lt;td&gt;25&lt;\/td&gt;&lt;td&gt;50 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;V2X messages&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td rowspan=\&quot;9\&quot;&gt;Non-GBR&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;IMS signaling&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;60&lt;\/td&gt;&lt;td&gt;300 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Video (buffered streaming)&lt;br \/&gt; \t\t\tTCP-based (e.g., www, e-mail, chat, ftp, p2p file sharing, progressive video, etc.)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;70&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;3&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Voice, video (live streaming),&lt;br \/&gt; \t\t\tinteractive gaming&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;300 ms&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;N\/A&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;N\/A&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;Video (buffered streaming)&lt;br \/&gt; \t\t\tTCP-based (e.g., www, e-mail, chat, ftp, p2p file sharing, progressive&lt;br \/&gt; \t\t\tvideo, etc.)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;90&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;69&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;60 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Mission critical delay sensitive signaling (e.g., MC-PTT signaling)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;70&lt;\/td&gt;&lt;td&gt;55&lt;\/td&gt;&lt;td&gt;200 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Mission critical data (e.g. example services are the same as QCI 6\/8\/9)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;79&lt;\/td&gt;&lt;td&gt;65&lt;\/td&gt;&lt;td&gt;50 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;V2X messages&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td&gt;68&lt;\/td&gt;&lt;td&gt;10 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Low latency eMBB applications augmented reality&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;82&lt;\/td&gt;&lt;td rowspan=\&quot;4\&quot;&gt;Delay critical GBR&lt;\/td&gt;&lt;td&gt;19&lt;\/td&gt;&lt;td&gt;10 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;4&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;255 bytes&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Discrete automation&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;83&lt;\/td&gt;&lt;td&gt;22&lt;\/td&gt;&lt;td&gt;10 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;4&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;1358 bytes&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Discrete automation&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;84&lt;\/td&gt;&lt;td&gt;24&lt;\/td&gt;&lt;td&gt;30 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;5&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;1354 bytes&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Intelligent transport systems&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;85&lt;\/td&gt;&lt;td&gt;21&lt;\/td&gt;&lt;td&gt;5 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;5&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;255 bytes&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Electricity distribution- high voltage&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-46 &lt;\/span&gt;QoS characteristics. Standardized 5QI to QoS characteristics mapping [TS 23.501]&lt;\/p&gt;\n\n&quot;}">Fig. 2-46</a> for details). In addition, it is possible to negotiate the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics bilaterally between the UE and network</li><li>An allocation and retention priority (<abbr class="eh-abbreviation" title="Address resolution protocol, Allocation and retention priority as QoS parameter" lang="en"><span class="eh-tooltip" title="Address resolution protocol, Allocation and retention priority as QoS parameter">ARP</span></abbr>) parameter containing information about the priority level, pre-emption capability and pre-emption vulnerability. The priority level defines the relative importance of a resource request and influences data packet forwarding within the network entities, especially when data buffers are pending for the next transmission. In addition, the priority allows a decision on whether a new <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow may be accepted or must be rejected in case of resource limitations or congestion situations. The entity responsible for this function is the access and mobility management function (<abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>). It may also be used to decide which existing <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow to pre-empt during resource limitations occurring e.g. in hot spots when the number of users becomes very large and thus the prevailing capacity has to be distributed over a higher number of users. Note that the priority level does not speed up the actual data packet flow (since radio waves travel at the speed of light which represents a physical limit), but the priority level is a parameter of priority among other packets, e.g. from other users or other data connections, and may influence the buffer flow in case of congestion scenarios or limited capacity. The range of the <abbr class="eh-abbreviation" title="Address resolution protocol, Allocation and retention priority as QoS parameter" lang="en"><span class="eh-tooltip" title="Address resolution protocol, Allocation and retention priority as QoS parameter">ARP</span></abbr> priority level is from 1 to 15 where 1 is the highest level of priority. The pre-emption capability information defines whether a service data flow may obtain resources that were already assigned to another service data flow with a lower priority level. In terms of the signaled value, the pre-emption capability is either “yes” or “no”. The same is also valid for the pre-emption vulnerability information, which defines whether a service data flow may lose the resources assigned to it in order to admit a service data flow with higher priority level</li><li>A reflective <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> attribute (<abbr class="eh-abbreviation" title="Reflective QoS attribute" lang="en"><span class="eh-tooltip" title="Reflective QoS attribute">RQA</span></abbr>) optionally for each non-GBR <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow. As was mentioned above, this parameter indicates that the uplink <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow uses the same profile as the dowlink <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow</li><li>For each <abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr> <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow, the expected bit rate that will be provided per <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow in either the UL and DL direction, given by the two values guaranteed flow bit rate (<abbr class="eh-abbreviation" title="Guaranteed flow bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed flow bit rate">GFBR</span></abbr>) and maximum flow bit rate (<abbr class="eh-abbreviation" title="Maximum flow bit rate" lang="en"><span class="eh-tooltip" title="Maximum flow bit rate">MFBR</span></abbr>). The <abbr class="eh-abbreviation" title="Maximum flow bit rate" lang="en"><span class="eh-tooltip" title="Maximum flow bit rate">MFBR</span></abbr> limits the bit rate to be provided based on a subscription profile of a user. Here, we can imagine the marketing potential based on the ability to provide different subscription data rates depending on the maximum speed</li><li>The session<strong></strong>aggregate maximum bit rate (<abbr class="eh-abbreviation" title="Aggregate maximum bit rate" lang="en"><span class="eh-tooltip" title="Aggregate maximum bit rate">AMBR</span></abbr>) as an aggregate rate limiting <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> parameter that is derived from the subscription profile</li><li><strong>Notification control</strong> is used in case of <abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr> <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows to indicate whether notifications are requested from the RAN when the guaranteed bit rate can no longer be fulfilled for a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow during the lifetime of the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow. In such instances, the <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> may take further actions such as suspending the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow or renegotiating the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow parameters</li><li>The <strong>maximum packet loss rate</strong> in either the UL and DL direction, representing the maximum rate for lost packets of the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow that can be tolerated</li></ul><p>For the uplink direction, the UE uses certain rules to classify and mark the uplink data packets and to associate or map them onto <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows. Such rules can either be explicitly provided by higher layer signaling during the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> negotiation procedures or they may be preconfigured in the UE or implicitly derived from the downlink rules in case reflective <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow is applied. Such rules contain values such as the <abbr class="eh-abbreviation" title="QoS flow ID" lang="en"><span class="eh-tooltip" title="QoS flow ID">QFI</span></abbr>, a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> parameter set, a precedence value and a packet filter set. There is the possibility of a default <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> rule being chosen. The specification <span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span> describes a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow model that indicates how the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> mapping procedure is handled within the 5G system in either the uplink or downlink direction. In the downlink direction, the entities <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr> and <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr> cooperate in mapping steps such as the binding of an <abbr class="eh-abbreviation" title="Service data flow" lang="en"><span class="eh-tooltip" title="Service data flow">SDF</span></abbr> to <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows based on the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> and service requirements. The <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr> assigns the <abbr class="eh-abbreviation" title="QoS flow ID" lang="en"><span class="eh-tooltip" title="QoS flow ID">QFI</span></abbr> for a new <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow and derives its <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile from the information provided by the policy control function <abbr class="eh-abbreviation" title="Policy control function" lang="en"><span class="eh-tooltip" title="Policy control function">PCF</span></abbr>. In case reflective <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> is applicable, the <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr> provides the <abbr class="eh-abbreviation" title="QoS flow ID" lang="en"><span class="eh-tooltip" title="QoS flow ID">QFI</span></abbr> together with the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile to the <span class="eh-text--nowrap">5G-(R)AN</span> for the UL traffic.</p><p>As already introduced, we can consider 5G as a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> driven technology and the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> requirements should not only be negotiated but also maintained and controlled in an ongoing data connection. The methodology in 5G for <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> maintenance is enhanced compared to legacy mobile radio technologies, i.e. the general idea of network slicing is just one example thereof. Another aspect is the configuration of <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> parameters throughout the entire 5G network: Not just a label that is applied to a data packet for forwarding treatment policies, but furthermore, the 5G <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow will impact the mapping decisions throughout the 5G network and protocol stack. We refer to <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-009__Channel_mapping_Overview_5G.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-9 &lt;\/span&gt;NR Access Stratum Protocol channels.&quot;}]">Fig. 1-9</a> illustrating the channel mapping throughout the network. On the top level, the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow is defined and the lower layers within the stack apply the mapping according to this <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow. Relevant details are explained in this section:</p><p>Due to the fact that the 5G system supports various types of services and data flows and as a term to distinguish the various data flows, a so-called session data flow (<abbr class="eh-abbreviation" title="Service data flow" lang="en"><span class="eh-tooltip" title="Service data flow">SDF</span></abbr>) is introduced. An <abbr class="eh-abbreviation" title="Service data flow" lang="en"><span class="eh-tooltip" title="Service data flow">SDF</span></abbr> is an <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> flow or an aggregation of <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> flows of user traffic classified by the type of the service in use. For each <abbr class="eh-abbreviation" title="Service data flow" lang="en"><span class="eh-tooltip" title="Service data flow">SDF</span></abbr>, when applicable, the <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr> generates a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> rule. Each of these <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> rules contains the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> rule identifier, the <abbr class="eh-abbreviation" title="QoS flow ID" lang="en"><span class="eh-tooltip" title="QoS flow ID">QFI</span></abbr> for the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow, the packet filter set for the UL part of the <abbr class="eh-abbreviation" title="Service data flow" lang="en"><span class="eh-tooltip" title="Service data flow">SDF</span></abbr> template, optionally the packet filter set for the DL part of the <abbr class="eh-abbreviation" title="Service data flow" lang="en"><span class="eh-tooltip" title="Service data flow">SDF</span></abbr> template, and the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> rule precedence value set to the precedence value for the <abbr class="eh-abbreviation" title="Policy control function" lang="en"><span class="eh-tooltip" title="Policy control function">PCF</span></abbr> rule from which the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> rule is generated. The <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> rules are then provided to the UE. The principle of classification and marking of user plane traffic and mapping of <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows to <abbr class="eh-abbreviation" title="Access network" lang="en"><span class="eh-tooltip" title="Access network">AN</span></abbr> resources is illustrated in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-045__QoS_flow_classification_and__..._.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-45 &lt;\/span&gt;QoS flow classification and user plane marking for mapping to RAN resources (basic principle).&quot;}]">Fig. 2-45</a> (<span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span>). On the DL, incoming data packets are classified by the <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr> based on <abbr class="eh-abbreviation" title="Service data flow" lang="en"><span class="eh-tooltip" title="Service data flow">SDF</span></abbr> templates. The <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr> conveys the classification of the user plane traffic belonging to a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow through the <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> interface N3 or N9 by marking the user plane data with the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> identifier <abbr class="eh-abbreviation" title="QoS flow ID" lang="en"><span class="eh-tooltip" title="QoS flow ID">QFI</span></abbr>. The RAN binds <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows to <abbr class="eh-abbreviation" title="Access network" lang="en"><span class="eh-tooltip" title="Access network">AN</span></abbr> resources, which in 5G NR scenarios are the data radio bearers (<abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>). Note that there is not a strict 1:1 relationship between <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows and <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr> resources. It is up to the RAN to establish the necessary RAN resources that <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows can be mapped to, and to release them. The RAN must indicate to the <abbr class="eh-abbreviation" title="Session management function" lang="en"><span class="eh-tooltip" title="Session management function">SMF</span></abbr> when the RAN resources on which a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow is mapped are released. On the UL, the UE evaluates UL packets against the packet filter set in the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> rules based on the precedence value of <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> rules in increasing order until a matching <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> rule is found. The UE uses the <abbr class="eh-abbreviation" title="QoS flow ID" lang="en"><span class="eh-tooltip" title="QoS flow ID">QFI</span></abbr> in the matching <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> rule to bind the UL packet to a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow and then binds <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows to RAN resources.</p>


<a id="page_1075_c1143"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:52%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-045__QoS_flow_classification_and__...__be246c05e9.png" width="800" height="413" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-45 </span><abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow classification and user plane marking for mapping to RAN resources (basic principle).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1075_c1144"></a><p class="eh-headline-207 ">
				5G <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics
			</p>


<a id="page_1075_c1145"></a><p>The characteristics of the packet forwarding treatment that a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow receives between the UE and the <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr> are described as <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics and are defined based on certain performance characteristics. Note that the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics are maintained and controlled within the 5G system only. Thus, it does not correspond to the end-to-end connection between the UE and a probable external data network. The <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics are given as a set of performance characteristics that can either be negotiated individually or can use some of the default <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics identified with the <abbr class="eh-abbreviation" title="5G QoS identifier" lang="en"><span class="eh-tooltip" title="5G QoS identifier">5QI</span></abbr> scalar.</p><ul class="eh-list eh-list--line"><li>The resource type has the following possible values: guaranteed bit rate (<abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr>), delay critical <abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr> or non-GBR. The type determines if the network resources related to a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow are permanently allocated and controlled (as in the case of <abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr> <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows) or if they are preauthorized through a static policy and charging control or billing function at the initiation (as in the non-GBR <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow cases). In addition to LTE, now in 5G NR there is a resource type for <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow treatment indicated as delay critical <abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr>, supporting the <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> service. The major difference between <abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr> and delay critical <abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr> is the setting of the packet delay budget and packet loss rate</li><li>The <strong>priority level</strong>, indicating a priority in scheduling resources among <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows. The priority levels are used to differentiate between <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows for the same UE. This happens especially in multi-connection situations and must also be used to differentiate between <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows from different UEs. In addition, there is the <abbr class="eh-abbreviation" title="Address resolution protocol, Allocation and retention priority as QoS parameter" lang="en"><span class="eh-tooltip" title="Address resolution protocol, Allocation and retention priority as QoS parameter">ARP</span></abbr> priority that influences the establishment of new <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows, especially in congestion situations. In 5G NR, priority levels from 1 to 15 are specified, where 1 is the highest priority, and there is a difference in priority level settings when either in the HPLMN environment or under roaming conditions (see <span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span> for further details)</li><li>The packet delay budget (<abbr class="eh-abbreviation" title="Packet delay budget" lang="en"><span class="eh-tooltip" title="Packet delay budget">PDB</span></abbr>) defines an upper bound for the time that a packet may be delayed between the UE and the <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr>, and thus represents a very important <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristic for supporting <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> services. If standardized <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics are used by certain 5QIs, the value of the <abbr class="eh-abbreviation" title="Packet delay budget" lang="en"><span class="eh-tooltip" title="Packet delay budget">PDB</span></abbr> is the same on the UL and DL. As specified in <span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span>, the <abbr class="eh-abbreviation" title="Packet delay budget" lang="en"><span class="eh-tooltip" title="Packet delay budget">PDB</span></abbr> is interpreted with a confidence level of 98 % and in case of delay-critical <abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr> <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows, a packet arriving later than the <abbr class="eh-abbreviation" title="Packet delay budget" lang="en"><span class="eh-tooltip" title="Packet delay budget">PDB</span></abbr> is considered to be lost</li><li>The packet error rate (<abbr class="eh-abbreviation" title="Packet error rate" lang="en"><span class="eh-tooltip" title="Packet error rate">PER</span></abbr>) defines an upper bound for the rate of lost data packets. For some 5QIs, the value for <abbr class="eh-abbreviation" title="Packet error rate" lang="en"><span class="eh-tooltip" title="Packet error rate">PER</span></abbr> is the same for the UL and DL. Refer to <span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span> for the exact definition of when a packet is considered to be lost. This can involve, for example, a <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> checksum failure detected on lower layers or a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> that arrives delayed beyond the tolerated waiting time such as the <abbr class="eh-abbreviation" title="Packet delay budget" lang="en"><span class="eh-tooltip" title="Packet delay budget">PDB</span></abbr></li><li>The <strong>averaging window</strong> for <abbr class="eh-abbreviation" title="Guaranteed bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed bit rate">GBR</span></abbr> <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows represents the duration over which the <abbr class="eh-abbreviation" title="Guaranteed flow bit rate" lang="en"><span class="eh-tooltip" title="Guaranteed flow bit rate">GFBR</span></abbr> and <abbr class="eh-abbreviation" title="Maximum flow bit rate" lang="en"><span class="eh-tooltip" title="Maximum flow bit rate">MFBR</span></abbr> must be calculated</li><li>The <strong>maximum data burst volume</strong> represents the largest amount of data that the 5G access network is required to serve within a period of time (specified as the <abbr class="eh-abbreviation" title="5G access network" lang="en"><span class="eh-tooltip" title="5G access network">5G-AN</span></abbr> <abbr class="eh-abbreviation" title="Packet delay budget" lang="en"><span class="eh-tooltip" title="Packet delay budget">PDB</span></abbr> in <span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span>, typically 20 ms)</li></ul><p>As indicated above, these <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics may be signaled via higher layers or there may be a direct mapping of the <abbr class="eh-abbreviation" title="5G QoS identifier" lang="en"><span class="eh-tooltip" title="5G QoS identifier">5QI</span></abbr> to the corresponding <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1075_c1146\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table\&quot; id=\&quot;table036\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;5QI value&lt;\/th&gt;&lt;th&gt;Resource type&lt;\/th&gt;&lt;th&gt;Default priority level&lt;\/th&gt;&lt;th&gt;Packet delay budget&lt;\/th&gt;&lt;th&gt;Packet error rate&lt;\/th&gt;&lt;th&gt;Default m aximum data burst volume&lt;\/th&gt;&lt;th&gt;Default&lt;br \/&gt; \t\t\taveraging window&lt;\/th&gt;&lt;th&gt;Example services&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td rowspan=\&quot;8\&quot;&gt;GBR&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Conversational voice&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;40&lt;\/td&gt;&lt;td&gt;150 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;3&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Conversational video (live streaming)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;30&lt;\/td&gt;&lt;td&gt;50 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;3&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Real time gaming, V2X messages,&lt;br \/&gt; \t\t\telectricity distribution \u2013 medium voltage, process automation \u2013 monitoring&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;50&lt;\/td&gt;&lt;td&gt;300 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Non-conversational video (buffered streaming)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;65&lt;\/td&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;75 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Mission critical user plane Push To Talk voice (e.g., MCPTT)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;66&lt;\/td&gt;&lt;td&gt;20&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Non mission critical user plane Push To Talk voice&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;67&lt;\/td&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;3&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Mission critical video user plane&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;75&lt;\/td&gt;&lt;td&gt;25&lt;\/td&gt;&lt;td&gt;50 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;V2X messages&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td rowspan=\&quot;9\&quot;&gt;Non-GBR&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;IMS signaling&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;60&lt;\/td&gt;&lt;td&gt;300 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Video (buffered streaming)&lt;br \/&gt; \t\t\tTCP-based (e.g., www, e-mail, chat, ftp, p2p file sharing, progressive video, etc.)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;70&lt;\/td&gt;&lt;td&gt;100 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;3&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Voice, video (live streaming),&lt;br \/&gt; \t\t\tinteractive gaming&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;300 ms&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;N\/A&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;N\/A&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;Video (buffered streaming)&lt;br \/&gt; \t\t\tTCP-based (e.g., www, e-mail, chat, ftp, p2p file sharing, progressive&lt;br \/&gt; \t\t\tvideo, etc.)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;90&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;69&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;60 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Mission critical delay sensitive signaling (e.g., MC-PTT signaling)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;70&lt;\/td&gt;&lt;td&gt;55&lt;\/td&gt;&lt;td&gt;200 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Mission critical data (e.g. example services are the same as QCI 6\/8\/9)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;79&lt;\/td&gt;&lt;td&gt;65&lt;\/td&gt;&lt;td&gt;50 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;2&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;V2X messages&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;80&lt;\/td&gt;&lt;td&gt;68&lt;\/td&gt;&lt;td&gt;10 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;6&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;Low latency eMBB applications augmented reality&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;82&lt;\/td&gt;&lt;td rowspan=\&quot;4\&quot;&gt;Delay critical GBR&lt;\/td&gt;&lt;td&gt;19&lt;\/td&gt;&lt;td&gt;10 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;4&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;255 bytes&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Discrete automation&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;83&lt;\/td&gt;&lt;td&gt;22&lt;\/td&gt;&lt;td&gt;10 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;4&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;1358 bytes&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Discrete automation&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;84&lt;\/td&gt;&lt;td&gt;24&lt;\/td&gt;&lt;td&gt;30 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;5&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;1354 bytes&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Intelligent transport systems&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;85&lt;\/td&gt;&lt;td&gt;21&lt;\/td&gt;&lt;td&gt;5 ms&lt;\/td&gt;&lt;td&gt;10&lt;sup class=\&quot;eh-text__letter\&quot;&gt;\u2013&lt;\/sup&gt;&lt;sup class=\&quot;eh-text__number\&quot;&gt;5&lt;\/sup&gt;&lt;\/td&gt;&lt;td&gt;255 bytes&lt;\/td&gt;&lt;td&gt;2000 ms&lt;\/td&gt;&lt;td&gt;Electricity distribution- high voltage&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-46 &lt;\/span&gt;QoS characteristics. Standardized 5QI to QoS characteristics mapping [TS 23.501]&lt;\/p&gt;\n\n&quot;}">Fig. 2-46</a>.</p>


<a id="page_1075_c1146"></a><div class="table-scroll"><table class="eh-table" id="table036"><colgroup><col><col><col><col><col><col><col><col></colgroup><thead><tr><th>5QI value</th><th>Resource type</th><th>Default priority level</th><th>Packet delay budget</th><th>Packet error rate</th><th>Default m aximum data burst volume</th><th>Default<br> 			averaging window</th><th>Example services</th></tr></thead><tbody><tr><td>1</td><td rowspan="8">GBR</td><td>20</td><td>100 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">2</sup></td><td>N/A</td><td>2000 ms</td><td>Conversational voice</td></tr><tr><td>2</td><td>40</td><td>150 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">3</sup></td><td>N/A</td><td>2000 ms</td><td>Conversational video (live streaming)</td></tr><tr><td>3</td><td>30</td><td>50 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">3</sup></td><td>N/A</td><td>2000 ms</td><td>Real time gaming, V2X messages,<br> 			electricity distribution – medium voltage, process automation – monitoring</td></tr><tr><td>4</td><td>50</td><td>300 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">6</sup></td><td>N/A</td><td>2000 ms</td><td>Non-conversational video (buffered streaming)</td></tr><tr><td>65</td><td>7</td><td>75 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">2</sup></td><td>N/A</td><td>2000 ms</td><td>Mission critical user plane Push To Talk voice (e.g., MCPTT)</td></tr><tr><td>66</td><td>20</td><td>100 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">2</sup></td><td>N/A</td><td>2000 ms</td><td>Non mission critical user plane Push To Talk voice</td></tr><tr><td>67</td><td>15</td><td>100 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">3</sup></td><td>N/A</td><td>2000 ms</td><td>Mission critical video user plane</td></tr><tr><td>75</td><td>25</td><td>50 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">2</sup></td><td>N/A</td><td>2000 ms</td><td>V2X messages</td></tr><tr><td>5</td><td rowspan="9">Non-GBR</td><td>10</td><td>100 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">6</sup></td><td>N/A</td><td>N/A</td><td>IMS signaling</td></tr><tr><td>6</td><td>60</td><td>300 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">6</sup></td><td>N/A</td><td>N/A</td><td>Video (buffered streaming)<br> 			TCP-based (e.g., www, e-mail, chat, ftp, p2p file sharing, progressive video, etc.)</td></tr><tr><td>7</td><td>70</td><td>100 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">3</sup></td><td>N/A</td><td>N/A</td><td>Voice, video (live streaming),<br> 			interactive gaming</td></tr><tr><td>8</td><td>80</td><td rowspan="2">300 ms</td><td rowspan="2">10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">6</sup></td><td rowspan="2">N/A</td><td rowspan="2">N/A</td><td rowspan="2">Video (buffered streaming)<br> 			TCP-based (e.g., www, e-mail, chat, ftp, p2p file sharing, progressive<br> 			video, etc.)</td></tr><tr><td>9</td><td>90</td></tr><tr><td>69</td><td>5</td><td>60 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">6</sup></td><td>N/A</td><td>N/A</td><td>Mission critical delay sensitive signaling (e.g., MC-PTT signaling)</td></tr><tr><td>70</td><td>55</td><td>200 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">6</sup></td><td>N/A</td><td>N/A</td><td>Mission critical data (e.g. example services are the same as QCI 6/8/9)</td></tr><tr><td>79</td><td>65</td><td>50 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">2</sup></td><td>N/A</td><td>N/A</td><td>V2X messages</td></tr><tr><td>80</td><td>68</td><td>10 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">6</sup></td><td>N/A</td><td>N/A</td><td>Low latency eMBB applications augmented reality</td></tr><tr><td>82</td><td rowspan="4">Delay critical GBR</td><td>19</td><td>10 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">4</sup></td><td>255 bytes</td><td>2000 ms</td><td>Discrete automation</td></tr><tr><td>83</td><td>22</td><td>10 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">4</sup></td><td>1358 bytes</td><td>2000 ms</td><td>Discrete automation</td></tr><tr><td>84</td><td>24</td><td>30 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">5</sup></td><td>1354 bytes</td><td>2000 ms</td><td>Intelligent transport systems</td></tr><tr><td>85</td><td>21</td><td>5 ms</td><td>10<sup class="eh-text__letter">–</sup><sup class="eh-text__number">5</sup></td><td>255 bytes</td><td>2000 ms</td><td>Electricity distribution- high voltage</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-46 </span><abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics. Standardized <abbr class="eh-abbreviation" title="5G QoS identifier" lang="en"><span class="eh-tooltip" title="5G QoS identifier">5QI</span></abbr> to <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> characteristics mapping [<span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span>]</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1076" data-prevpid="1075" data-nextpid="1077" data-chapter="2.2.3 DL resource assignment" id="page_1076">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.2.3 DL resource assignment</h3>
						
<a id="page_1076_c1147"></a><p>A cellular system for mobile communications shares resources on the air interface among all UEs in the same cell. Each UE is allowed to receive data on the downlink, either initiated by a network in a UE-terminated data connection or initiated by the UE in a UE-originated data connection, when the UE starts an application that requires the reception of downlink data traffic. In both cases, the network decides when and which radio resources in time and frequency can be assigned to that specific UE.</p><p>A data connection can only happen after the UE has successfully established an <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-040__5G_NR_SA_mode_data_connection.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-40 &lt;\/span&gt;5G NR SA mode data connection establishment procedure example.&quot;}]">Fig. 2-40</a>). The first step in this procedure in cellular communications is the cell acquisition performed by the UE and described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1063" class="eh-link eh-link--page">2.1.1.1 LTE cell search, selection and system information acquisition, page 219</a>, and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1106" class="eh-link eh-link--page">2.4.3 Random access procedure in standalone mode, page 416</a>.</p><p>After cell acquisition, the UE is in idle mode, also known as “camping on a cell”. In this stage, the UE has to obtain system information and paging information and performs mobility management related procedures such as cell reselection. When triggered by higher layers or paging, either a mobile originated or mobile terminated data connection has to be established using a data bearer setup procedure (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-040__5G_NR_SA_mode_data_connection.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-40 &lt;\/span&gt;5G NR SA mode data connection establishment procedure example.&quot;}]">Fig. 2-40</a>). In both modes, idle or connected mode, the UE has to react to assignment messages sent in the downlink direction on the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> channel. The whereabouts of this <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> control channel is given by control resources allocated to the UE via <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> signaling, the so-called control resource set (<abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr>) as further described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1033" class="eh-link eh-link--page">1.2.5.4 Control resource set CORESET, page 94</a>. The <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> will not only contain scheduling information for the downlink, but also scheduling information for the uplink direction (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1080" class="eh-link eh-link--page">2.2.7 UL grant reception or UL assignment, page 329</a> for details about assignment of UL resources). <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-047__Downlink_assignment_principle_in_5G_NR.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-47 &lt;\/span&gt;Downlink assignment principle in 5G NR.&quot;}]">Fig. 2-47</a> explains the used channels in a simplified manner: The UE wants to read system information, paging information or downlink data, all sent via the physical data channel (<abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>). To obtain information on how and where these resources are scheduled, it acquires initial scheduling control information via the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> channel.</p>


<a id="page_1076_c1148"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:60%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-047__Downlink_assignment_principle_in_5G_NR_7389e65c2f.png" width="800" height="473" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-47 </span>Downlink assignment principle in 5G NR.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1076_c1149"></a><p>The network uses the control resource set (<abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr>) to send <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> control information. Further details on the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> control information are discussed in the section <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076_c1161" class="eh-link eh-link--page eh-link--ce">Downlink control information (DCI), page 302</a>. A UE monitors the assigned <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> resources and when it recognizes a DL resource assignment via a <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> containing a <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> scrambled with its identifier <abbr class="eh-abbreviation" title="Cell RNTI" lang="en"><span class="eh-tooltip" title="Cell RNTI">C-RNTI</span></abbr>, it will redirect to data channel <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>. Unlike in LTE, in 5G NR the situation regarding assignment can be slightly more complex, as it allows a higher degree of flexibility in both the frequency and in the time domain. Frequency resource assignments are based on the term <em>resource block</em> and can be understood as the granularity of frequency spectrum for allocation of <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> or <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> resources. A resource block in 5G is defined as a unit in the frequency domain of 12 subcarriers, but unlike LTE, a 5G resource block does not bear any duration in the time domain (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1026" class="eh-link eh-link--page">1.2.2 Resource grid, page 56</a> for further details). Regarding resource allocation in the time domain, 5G offers more flexibility. LTE uses the concept of a transmit time interval (<abbr class="eh-abbreviation" title="Transmission time interval" lang="en"><span class="eh-tooltip" title="Transmission time interval">TTI</span></abbr>) representing the granularity of time domain allocation with a fixed duration of 1 ms, which coincides with the duration of one subframe in LTE. This means the LTE control channel <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> schedules to a specific UE always the full duration of one subframe, comprising two slots. In 5G NR, the time duration of the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> allocation can be more flexible. It introduces the so-called mini-slot offering a flexible length of two or more OFDM symbols and a flexible start within one subframe. For this reason, there can be multiple configuration options regarding the position and duration of the control information ­CORESET. Just to give a few examples of how complex such a scheduling situation can become, the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-048__Control_resource_set__CORESET__configuration.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-48 &lt;\/span&gt;Control resource set (CORESET) configuration (example of one scheduling + resource assignment per slot).&quot;}]">Fig. 2-48</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-049__Control_resource_set__CORESET__configuration_2.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-49 &lt;\/span&gt;Control resource set (CORESET) configuration (complex example with overlapping transmissions).&quot;}]">Fig. 2-49</a> describe such situations. As a kind of simple configuration which is more LTE-like, the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> containing the <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> advances the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> within one slot. In this case, the scheduling period that can be obtained refers to the slot boundary. In addition to the flexible allocation of the control information <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr>, the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> also comprises a flexible number of OFDMA symbols that are scheduled and has flexible start, indicated by the value <abbr class="eh-abbreviation" title="Start and length indicator value" lang="en"><span class="eh-tooltip" title="Start and length indicator value">SLIV</span></abbr>, as further described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077" class="eh-link eh-link--page">2.2.4 DL data reception, page 307</a>. One reason for such a scheduling configuration could be more flexible multiplexing of various UEs inheriting various <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow requirements, i.e. within one slot, the <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> schedules a mini-slot to a UE with latency-critical <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> parameters and a longer OFDM symbol allocation to a UE with a focus on a higher data rate.</p>


<a id="page_1076_c1150"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:37%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-048__Control_resource_set__CORESET__configuration_c54fbb94c6.png" width="800" height="295" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-48 </span>Control resource set (<abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr>) configuration (example of one scheduling + resource assignment per slot).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1076_c1151"></a><p>With the more complex configuration of <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> due to the introduction of the mini-slot, it would now be possible for <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> to overlap in the time domain with data and even for multiple CORESETs to overlap in time. In such a configuration, the UE is challenged to receive scheduling and data information simultaneously <span class="eh-reference" title="3GPP R2-1708187, PDCCH, CORESET and event-driven MAC, Ericsson contribution, 3GPP TSG-RAN WG2 #99, Berlin, Germany, 21st–25th August 2017" lang="en"><span class="eh-tooltip" title="3GPP R2-1708187, PDCCH, CORESET and event-driven MAC, Ericsson contribution, 3GPP TSG-RAN WG2 #99, Berlin, Germany, 21st–25th August 2017">[Ref. 29]</span></span>. A possible motivation for such a scheduling decision could be the simultaneous reception of data and system information updates, to give just one example.</p>


<a id="page_1076_c1152"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:60%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-049__Control_resource_set__CORESET__configuration_2_95fbe06a80.png" width="800" height="479" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-49 </span>Control resource set (<abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr>) configuration (complex example with overlapping transmissions).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1076_c1153"></a><p class="eh-headline-207 ">
				Radio network temporary identifier (<abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr>)
			</p>


<a id="page_1076_c1154"></a><p>As described above, the <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> contains control information (<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>) to schedule resource assignment on the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>. We might wonder how the UE knows that the scheduling message belongs to it and what kind of scheduling message is sent. We need some type of name or identifier to address the proper receiving entity. This identifier on the physical layer is known as <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> and several RNTIs exist for various purposes. Some of those <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> values are common and known to every UE while other <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> values are UE specific. The network allocates the UE specific <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> values during initial access or <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection setup or reconfiguration procedures.</p><p>Radio network temporary identifiers in 5G NR:</p><ul class="eh-list eh-list--line"><li>Cell <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> (<abbr class="eh-abbreviation" title="Cell RNTI" lang="en"><span class="eh-tooltip" title="Cell RNTI">C-RNTI</span></abbr>) – unique and UE-specific identifier used to schedule <span class="eh-text--nowrap">UE-specific</span> data on <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> or UL allocation on <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr></li><li>System information <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> (<abbr class="eh-abbreviation" title="System information radio network temporary identifier" lang="en"><span class="eh-tooltip" title="System information radio network temporary identifier">SI-RNTI</span></abbr>) for indication of <abbr class="eh-abbreviation" title="System information block" lang="en"><span class="eh-tooltip" title="System information block">SIB</span></abbr> broadcast on <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr></li><li>Paging <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> (<abbr class="eh-abbreviation" title="Paging RNTI" lang="en"><span class="eh-tooltip" title="Paging RNTI">P-RNTI</span></abbr>) for indication of paging information</li><li>Random access <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> (<abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr>) for <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> response to scheduling ­message 3 (see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-003__Message_2_-_random_access_response.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-3 &lt;\/span&gt;Message 2 (Msg2) \u2013 random access response (RAR) \u2013 within a MAC PDU.&quot;}]">Fig. 2-3</a>, page 224)</li><li>Temporary <abbr class="eh-abbreviation" title="Cell RNTI" lang="en"><span class="eh-tooltip" title="Cell RNTI">C-RNTI</span></abbr> for scheduling the random access response or message 3 in random access procedure, contention-based (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1070" class="eh-link eh-link--page">2.1.4 Random access procedure in 5G NR, page 250</a></li><li>SP-CSI-RNTI for semi-persistent <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting on <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr></li><li><abbr class="eh-abbreviation" title="TPC physical uplink control channel-RNTI" lang="en"><span class="eh-tooltip" title="TPC physical uplink control channel-RNTI">TPC-PUCCH-RNTI</span></abbr> for <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> <abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> commands on <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr></li><li><abbr class="eh-abbreviation" title="TPC physical uplink shared channel-RNTI" lang="en"><span class="eh-tooltip" title="TPC physical uplink shared channel-RNTI">TPC-PUSCH-RNTI</span></abbr> for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> <abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> commands on <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr></li><li><abbr class="eh-abbreviation" title="TPC sounding reference signal-RNTI" lang="en"><span class="eh-tooltip" title="TPC sounding reference signal-RNTI">TPC-SRS-RNTI</span></abbr> for <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> <abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> commands on <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr></li><li><abbr class="eh-abbreviation" title="Configured scheduling RNTI" lang="en"><span class="eh-tooltip" title="Configured scheduling RNTI">CS-RNTI</span></abbr> – unique identifier for downlink <abbr class="eh-abbreviation" title="Semi-persistent scheduling" lang="en"><span class="eh-tooltip" title="Semi-persistent scheduling">SPS</span></abbr> and uplink configured grant</li><li><abbr class="eh-abbreviation" title="Interruption RNTI" lang="en"><span class="eh-tooltip" title="Interruption RNTI">INT-RNTI</span></abbr> for indicating pre-emption in DL (INT stands for interruption); used e.g. for <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> vs. <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr> priority settings</li><li>Slot format indicator <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> (<abbr class="eh-abbreviation" title="Slot format indicator RNTI" lang="en"><span class="eh-tooltip" title="Slot format indicator RNTI">SFI-RNTI</span></abbr>) for TDD slot configuration information (see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1028_c635" class="eh-link eh-link--page eh-link--ce">Dynamic TDD configuration, page 72</a>)</li><li><abbr class="eh-abbreviation" title="Modulation and coding scheme C-RNTI" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme C-RNTI">MCS-C-RNTI</span></abbr> was introduced to provide a fast scheduling mechanism to switch between various tables indicating the highest possible order modulation scheme (e.g. 64QAM or 256QAM) to derive the resulting modulation index and transport block size, especially for the case of reliable transmission <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> where new <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> tables were introduced</li></ul><p>The <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> message sent on the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> can be considered as a data container containing scheduling information. To identify the proper receiver, the <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> value is used. To save resources, the following principle is applied: The <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> message is error-protected by attaching a <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> and to avoid additional attachment of a value such as <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> (producing a longer message length), the <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> is used to scramble the <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> sequence. This can be understood as a bitwise modulo 2 operation. The <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-050__Principle_of_CRC_masking_in_5G_NR_and_LTE.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-50 &lt;\/span&gt;Principle of CRC masking in 5G NR and LTE.&quot;}]">Fig. 2-50</a> illustrates this principle (similar to LTE) in a simplified manner. At the transmitting end, we first assume there is a properly calculated <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> sequence that will be attached to a data bit pattern. The second step is a bit-by-bit scrambling operation known as masking of the <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> with the bit pattern representing the mask (in our case, the <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> value). The third step is to replace the calculated <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> with the masked <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> and transmit it. At the receiving end, there is no knowledge of which mask has been used. The receiver can apply all possible masks and perform a <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> check on the data section. If the right mask was selected and no transmission error occurred, only one check would result with a proper <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> indication. Thus, we can kill two birds with one stone here, as error detection and identification are sharing the same bit pattern. Note that this method is not applicable to debugging, i.e. if there is a <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> failure, this could be due to having applied the wrong mask or due to a transmission error. The consequence is the same in both cases: The receiver discards the message.</p>


<a id="page_1076_c1155"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:53%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-050__Principle_of_CRC_masking_in_5G_NR_and_LTE_c7dfd27f05.png" width="800" height="421" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-50 </span>Principle of <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> masking in 5G NR and LTE.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1076_c1156"></a><p>5G NR allows simultaneous reception of physical channels on the downlink, depending on the UE complexity, either on one carrier or in case of the NR-DC dual carrier scenario, on multiple carriers that can either be multiple NR carriers or in case of <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr>, LTE and NR carriers. The specification <span class="eh-hint" title="3GPP TR 38.802: Study on new radio access technology Physical layer aspects" lang="en"><span class="eh-tooltip" title="3GPP TR 38.802: Study on new radio access technology Physical layer aspects">TR 38.802</span></span> contains two tables defining the downlink reception types, i.e. possible combinations for simultaneous reception of physical channels on the downlink. Note that some channels, e.g. <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>, are common channels, and thus they are not related to a <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> value. Other channels are physical channels only with no linkage to any transport channel.</p>


<a id="page_1076_c1157"></a><div class="table-scroll"><table id="table037" class="eh-table eh-table--alternate"><colgroup><col><col><col><col></colgroup><thead><tr><th>Reception type</th><th>Physical channel(s)</th><th>Monitored RNTI</th><th>Associated transport channel</th></tr></thead><tbody><tr><td>A</td><td>PBCH</td><td>N/A</td><td>BCH</td></tr><tr><td>B</td><td>PDCCH+PDSCH</td><td>SI-RNTI</td><td>DL-SCH</td></tr><tr><td>C0</td><td>PDCCH</td><td>P-RNTI</td><td>N/A</td></tr><tr><td>C1</td><td>PDCCH+PDSCH</td><td>P-RNTI</td><td>PCH</td></tr><tr><td>D0</td><td>PDCCH+PDSCH</td><td>RA-RNTI or temporary C-RNTI</td><td>DL-SCH</td></tr><tr><td>D1</td><td>PDCCH+PDSCH</td><td>C-RNTI, CS-RNTI(s), MCS-C-RNTI</td><td>DL-SCH</td></tr><tr><td>E</td><td>PDCCH</td><td>C-RNTI</td><td>N/A</td></tr><tr><td>F</td><td>PDCCH</td><td>C-RNTI, CS-RNTI(s), MCS-C-RNTI</td><td>UL-SCH</td></tr><tr><td>G</td><td>PDCCH</td><td>SFI-RNTI</td><td>N/A</td></tr><tr><td>GH</td><td>PDCCH</td><td>INT-RNTI</td><td>N/A</td></tr><tr><td>J0</td><td>PDCCH</td><td>TPC-PUSCH-RNT</td><td>N/A</td></tr><tr><td>J1</td><td>PDCCH</td><td>TPC-PUCCH-RNTI</td><td>N/A</td></tr><tr><td>J2</td><td>PDCCH</td><td>TPC-SRS-RNTI</td><td>N/A</td></tr><tr><td>K</td><td>PDCCH</td><td>SP-CSI-RNTI</td><td>N/A</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-51 </span>Downlink reception types in 5G NR.</p>


<a id="page_1076_c1158"></a><div class="table-scroll"><table class="eh-table eh-table--alternate" id="table038"><colgroup><col><col><col><col></colgroup><thead><tr><th rowspan="2">UE capability</th><th colspan="3" style="text-align:center">Supported combinations</th></tr><tr><th style="text-align:center">PCell</th><th style="text-align:center">PSCell</th><th style="text-align:center">SCell</th></tr></thead><tbody><tr><td colspan="4" style="text-align:center">1. RRC_IDLE</td></tr><tr><td>&nbsp;</td><td>A + B + C1 + D0</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td colspan="4" style="text-align:center">2. RRC_INACTIVE</td></tr><tr><td>&nbsp;</td><td>A + B + C1 + D0</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td colspan="4" style="text-align:center">3. RRC_CONNECTED</td></tr><tr><td>All UEs</td><td>A + C0 + (B and/or D0 or D1) + E + F + G + H + J0 + J1 + J2 + K + J2+ K</td><td>A + C0 + (B and/or D0 or D1) + E + F + G + H + J0 + J1 + J2 + K</td><td>D1 + F + G + H + J0 + J1</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-52 </span>5G NR downlink reception type combinations.</p>


<a id="page_1076_c1159"></a><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1076_c1158\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table eh-table--alternate\&quot; id=\&quot;table038\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th rowspan=\&quot;2\&quot;&gt;UE capability&lt;\/th&gt;&lt;th colspan=\&quot;3\&quot; style=\&quot;text-align:center\&quot;&gt;Supported combinations&lt;\/th&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;th style=\&quot;text-align:center\&quot;&gt;PCell&lt;\/th&gt;&lt;th style=\&quot;text-align:center\&quot;&gt;PSCell&lt;\/th&gt;&lt;th style=\&quot;text-align:center\&quot;&gt;SCell&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td colspan=\&quot;4\&quot; style=\&quot;text-align:center\&quot;&gt;1. RRC_IDLE&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;A + B + C1 + D0&lt;\/td&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td colspan=\&quot;4\&quot; style=\&quot;text-align:center\&quot;&gt;2. RRC_INACTIVE&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;A + B + C1 + D0&lt;\/td&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td colspan=\&quot;4\&quot; style=\&quot;text-align:center\&quot;&gt;3. RRC_CONNECTED&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;All UEs&lt;\/td&gt;&lt;td&gt;A + C0 + (B and\/or D0 or D1) + E + F + G + H + J0 + J1 + J2 + K + J2+ K&lt;\/td&gt;&lt;td&gt;A + C0 + (B and\/or D0 or D1) + E + F + G + H + J0 + J1 + J2 + K&lt;\/td&gt;&lt;td&gt;D1 + F + G + H + J0 + J1&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-52 &lt;\/span&gt;5G NR downlink reception type combinations.&lt;\/p&gt;\n\n&quot;}">Fig. 2-52</a> describes the channels that a UE has to decode in certain situations, e.g. the entry <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>_IDLE and combinations A + B + C1 + D0 request a UE to decode <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> + <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> for paging, system information update and random access response if applicable. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1076_c1157\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table037\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Reception type&lt;\/th&gt;&lt;th&gt;Physical channel(s)&lt;\/th&gt;&lt;th&gt;Monitored RNTI&lt;\/th&gt;&lt;th&gt;Associated transport channel&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;A&lt;\/td&gt;&lt;td&gt;PBCH&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;td&gt;BCH&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B&lt;\/td&gt;&lt;td&gt;PDCCH+PDSCH&lt;\/td&gt;&lt;td&gt;SI-RNTI&lt;\/td&gt;&lt;td&gt;DL-SCH&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;C0&lt;\/td&gt;&lt;td&gt;PDCCH&lt;\/td&gt;&lt;td&gt;P-RNTI&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;C1&lt;\/td&gt;&lt;td&gt;PDCCH+PDSCH&lt;\/td&gt;&lt;td&gt;P-RNTI&lt;\/td&gt;&lt;td&gt;PCH&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;D0&lt;\/td&gt;&lt;td&gt;PDCCH+PDSCH&lt;\/td&gt;&lt;td&gt;RA-RNTI or temporary C-RNTI&lt;\/td&gt;&lt;td&gt;DL-SCH&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;D1&lt;\/td&gt;&lt;td&gt;PDCCH+PDSCH&lt;\/td&gt;&lt;td&gt;C-RNTI, CS-RNTI(s), MCS-C-RNTI&lt;\/td&gt;&lt;td&gt;DL-SCH&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;E&lt;\/td&gt;&lt;td&gt;PDCCH&lt;\/td&gt;&lt;td&gt;C-RNTI&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;F&lt;\/td&gt;&lt;td&gt;PDCCH&lt;\/td&gt;&lt;td&gt;C-RNTI, CS-RNTI(s), MCS-C-RNTI&lt;\/td&gt;&lt;td&gt;UL-SCH&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;G&lt;\/td&gt;&lt;td&gt;PDCCH&lt;\/td&gt;&lt;td&gt;SFI-RNTI&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;GH&lt;\/td&gt;&lt;td&gt;PDCCH&lt;\/td&gt;&lt;td&gt;INT-RNTI&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;J0&lt;\/td&gt;&lt;td&gt;PDCCH&lt;\/td&gt;&lt;td&gt;TPC-PUSCH-RNT&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;J1&lt;\/td&gt;&lt;td&gt;PDCCH&lt;\/td&gt;&lt;td&gt;TPC-PUCCH-RNTI&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;J2&lt;\/td&gt;&lt;td&gt;PDCCH&lt;\/td&gt;&lt;td&gt;TPC-SRS-RNTI&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;K&lt;\/td&gt;&lt;td&gt;PDCCH&lt;\/td&gt;&lt;td&gt;SP-CSI-RNTI&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-51 &lt;\/span&gt;Downlink reception types in 5G NR.&lt;\/p&gt;\n\n&quot;}">Fig. 2-51</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1076_c1158\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table eh-table--alternate\&quot; id=\&quot;table038\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th rowspan=\&quot;2\&quot;&gt;UE capability&lt;\/th&gt;&lt;th colspan=\&quot;3\&quot; style=\&quot;text-align:center\&quot;&gt;Supported combinations&lt;\/th&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;th style=\&quot;text-align:center\&quot;&gt;PCell&lt;\/th&gt;&lt;th style=\&quot;text-align:center\&quot;&gt;PSCell&lt;\/th&gt;&lt;th style=\&quot;text-align:center\&quot;&gt;SCell&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td colspan=\&quot;4\&quot; style=\&quot;text-align:center\&quot;&gt;1. RRC_IDLE&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;A + B + C1 + D0&lt;\/td&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td colspan=\&quot;4\&quot; style=\&quot;text-align:center\&quot;&gt;2. RRC_INACTIVE&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;A + B + C1 + D0&lt;\/td&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td colspan=\&quot;4\&quot; style=\&quot;text-align:center\&quot;&gt;3. RRC_CONNECTED&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;All UEs&lt;\/td&gt;&lt;td&gt;A + C0 + (B and\/or D0 or D1) + E + F + G + H + J0 + J1 + J2 + K + J2+ K&lt;\/td&gt;&lt;td&gt;A + C0 + (B and\/or D0 or D1) + E + F + G + H + J0 + J1 + J2 + K&lt;\/td&gt;&lt;td&gt;D1 + F + G + H + J0 + J1&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-52 &lt;\/span&gt;5G NR downlink reception type combinations.&lt;\/p&gt;\n\n&quot;}">Fig. 2-52</a> describe the various 5G NR modes of either standalone single cell, carrier aggregation and dual connectivity. The term PSCell refers to the primary cell of the secondary cell group, here representing the condition of dual connectivity, while <abbr class="eh-abbreviation" title="Secondary cell" lang="en"><span class="eh-tooltip" title="Secondary cell">SCell</span></abbr> is the secondary cell, here representing the condition of carrier aggregation. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-053__5G_NR_downlink_allocation_scenarios.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-53 &lt;\/span&gt;5G NR downlink allocation scenarios.&quot;}]">Fig. 2-53</a> summarizes the downlink allocation scenarios possible in 5G NR. It only depicts the simultaneous reception of downlink assignment and downlink <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> assigning uplink resources.</p><p>Note that the supported combination is limited by the UE capability.</p>


<a id="page_1076_c1160"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:50%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-053__5G_NR_downlink_allocation_scenarios_b74938d3aa.png" width="800" height="395" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-53 </span>5G NR downlink allocation scenarios.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1076_c1161"></a><p class="eh-headline-207 ">
				Downlink control information (<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>)
			</p>


<a id="page_1076_c1162"></a><p>The downlink control information (<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>) is sent over the physical channel <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> to assign downlink or uplink resources. The previously described <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> values indicate the content and which UE should decode the scheduling message content. In carrier aggregation or dual connectivity scenarios, the downlink control information may be valid for one or more carriers or cells. 5G NR defines various <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> formats indicating different resources. The following <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> formats are defined:</p><p>Downlink control information types:</p><ul class="eh-list eh-list--line"><li><abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_0 is used for scheduling of uplink data resources sent over <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> in one cell</li><li><abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_1 is used for scheduling of uplink data resources sent over <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> in one cell, with more parameters than format 0_0</li><li><abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 is used for scheduling of downlink data resources sent over <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> in one cell</li><li><abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_1 is used for scheduling of downlink data resources sent over <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> in one cell, with more parameters than format 1_0</li><li><abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 2_0 is used for notifying the slot format size to a group of UEs if TDD duplex mode is used within the cell. See the section <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1028_c635" class="eh-link eh-link--page eh-link--ce">Dynamic TDD configuration, page 72</a> for details on TDD slot configuration aspects</li><li><abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 2_1 is used for notifying a group of UEs of the <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr>(s) and OFDM symbol(s) where the UE may assume no transmission is intended for the UE, i.e. pre-emption indication.</li><li><abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 2_2 is used for the transmission of uplink power control commands (<abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr>). See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1036" class="eh-link eh-link--page">1.2.5.7 Transmit power allocation, page 121</a> for details on uplink power control aspects</li><li><abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 2_3 is used for the transmission of uplink power control for sounding reference signals. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1036" class="eh-link eh-link--page">1.2.5.7 Transmit power allocation, page 121</a> for details on uplink power control aspects</li></ul><p>Each <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> message is constructed by multiplexing control message elements, <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> attachment and masking with <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> as described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-050__Principle_of_CRC_masking_in_5G_NR_and_LTE.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-50 &lt;\/span&gt;Principle of CRC masking in 5G NR and LTE.&quot;}]">Fig. 2-50</a>, channel coding using polar codes as described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1037_c845" class="eh-link eh-link--page eh-link--ce">5G NR channel coding for control information, page 151</a> and finally, rate matching to match the physical layer rates. Note that the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> used to carry <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> is always QPSK-modulated. The following section provides more details on the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> control message content.</p>


<a id="page_1076_c1163"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_0 for scheduling one <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> in one cell
			</p>


<a id="page_1076_c1164"></a><p>The <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_0 is scrambled with the <abbr class="eh-abbreviation" title="Cell RNTI" lang="en"><span class="eh-tooltip" title="Cell RNTI">C-RNTI</span></abbr> or <abbr class="eh-abbreviation" title="Configured scheduling RNTI" lang="en"><span class="eh-tooltip" title="Configured scheduling RNTI">CS-RNTI</span></abbr> or <abbr class="eh-abbreviation" title="Modulation and coding scheme C-RNTI" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme C-RNTI">MCS-C-RNTI</span></abbr> and is used to schedule uplink resources in one cell. The content of the format 0_0 is described in detail in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1080" class="eh-link eh-link--page">2.2.7 UL grant reception or UL assignment, page 329</a>.</p>


<a id="page_1076_c1165"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_1 for scheduling one <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> in one cell
			</p>


<a id="page_1076_c1166"></a><p>Similar to <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_0, this scheduling information also assigns uplink resources, but the difference is that <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_1 contains more parameters for higher flexibility. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1080" class="eh-link eh-link--page">2.2.7 UL grant reception or UL assignment, page 329</a> for more details.</p>


<a id="page_1076_c1167"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 for scheduling one <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> in one cell
			</p>


<a id="page_1076_c1168"></a><p><abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 is used for scheduling one <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> in one DL cell. Its <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> is scrambled with <abbr class="eh-abbreviation" title="Cell RNTI" lang="en"><span class="eh-tooltip" title="Cell RNTI">C-RNTI</span></abbr>, <abbr class="eh-abbreviation" title="Configured scheduling RNTI" lang="en"><span class="eh-tooltip" title="Configured scheduling RNTI">CS-RNTI</span></abbr> or <abbr class="eh-abbreviation" title="Modulation and coding scheme C-RNTI" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme C-RNTI">MCS-C-RNTI</span></abbr>. Note that <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 is also used to schedule the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> resource related to control procedures such as paging with P <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr>, the system information broadcast with <abbr class="eh-abbreviation" title="System information radio network temporary identifier" lang="en"><span class="eh-tooltip" title="System information radio network temporary identifier">SI-RNTI</span></abbr> or the random access response indication with <abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr>. In such cases, the content of the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> control message is slightly different from what is described below (see <span class="eh-hint" title="3GPP TS 38.212: NR; Multiplexing and channel coding" lang="en"><span class="eh-tooltip" title="3GPP TS 38.212: NR; Multiplexing and channel coding">TS 38.212</span></span> for details). Regarding frequency domain allocation, <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 only allows allocation type 1 (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077_c1195" class="eh-link eh-link--page eh-link--ce">Resource assignment in the frequency domain, page 314</a> for details). The content of <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 can be described as follows:</p><ul class="eh-list eh-list--line"><li>Identifier for <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> formats – 1 bit. This bit is used to distinguish between <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_x for uplink allocation and format 1_x for downlink allocation. If bit = 1, it is a downlink allocation and otherwise uplink</li><li>Frequency domain resource assignment indicating the physical resource on the downlink assigned to the UE (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077_c1190" class="eh-link eh-link--page eh-link--ce">Resource assignment in the time domain, page 312</a>)</li><li>Resource allocation in the time domain (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077_c1190" class="eh-link eh-link--page eh-link--ce">Resource assignment in the time domain, page 312</a>)</li><li>Virtual to physical resource block mapping – One bit that indicates whether <abbr class="eh-abbreviation" title="Virtual resource block" lang="en"><span class="eh-tooltip" title="Virtual resource block">VRB</span></abbr> to <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr> mapping is true or not. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1026" class="eh-link eh-link--page">1.2.2 Resource grid, page 56</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-036__VRB_to_PRB_mapping.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-36 &lt;\/span&gt;VRB to PRB mapping example (assumption: total number of bundles = 8).&quot;}]">Fig. 2-36, page 268</a> for further details on <abbr class="eh-abbreviation" title="Virtual resource block" lang="en"><span class="eh-tooltip" title="Virtual resource block">VRB</span></abbr> to <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr> mapping</li><li>Modulation and coding schemes, indicating the used modulation scheme and the puncturing rate or code rate. The integer value refers to a table specified in <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>. Note that there are 3 different tables for modulation order and coding rate defined. <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> controls which of those tables is relevant.</li><li>New data indicator – One bit that toggles if the transport block is a new data block; otherwise, this bit indicates a retransmission. The <abbr class="eh-abbreviation" title="New data indicator" lang="en"><span class="eh-tooltip" title="New data indicator">NDI</span></abbr> is used for <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> operation feedback, see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1073_c1117" class="eh-link eh-link--page eh-link--ce">HARQ operation, page 276</a>.</li><li>Redundancy version – Indicates the puncturing scheme used in the channel coding procedure for rate matching purposes. This information is required by the soft combining buffer operation for data decoding. Especially in retransmission cases, a changed puncturing scheme allows incremental redundancy for higher decoding efficiency</li><li><abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process number – Indicates the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process so the UE may use soft combining with previously received transport blocks (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1073_c1117" class="eh-link eh-link--page eh-link--ce">HARQ operation, page 276</a> for details)</li><li>Downlink assignment index (DAI) – Used in TDD configuration with asymmetric assignment between UL/DL. Based on the assumption that there are more resources allocated in the DL direction than in the UL direction, a one to one mapping between transport blocks and their corresponding <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback is not possible. The main idea is to introduce a bundling mechanism to be applied for <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback, i.e. a “kill two birds with one stone” approach where a single <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK may confirm two transport blocks. The DAI is an indication of what “segment” within the bundle of transport blocks is transmitted herewith to support the proper decoding mechanism</li><li>Transmit power control (<abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr>) command for the scheduled uplink control channel <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1036" class="eh-link eh-link--page">1.2.5.7 Transmit power allocation, page 121</a> for details on uplink power control aspects</li><li><abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> resource indicator – Indicates one out of eight possible <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> resources configured by higher layers that must be used for <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback by the UE (<span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span>)</li><li>PDSCH-to-HARQ feedback timing indicator (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1073_c1117" class="eh-link eh-link--page eh-link--ce">HARQ operation, page 276</a> for details). Unlike in LTE, <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback can be flexibly configured by the higher layers and several feedback timing values may exist. This 3 bit value indicates what feedback timing applies in the UE for transmission of <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback. Via higher layer parameters, the network can configure multiple timing relations <em>Slot-timing-value-K1</em> and via this <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> parameter, the specific timing value can be selected, as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-054__PDSCH_to_HARQ_timing_principle.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-54 &lt;\/span&gt;PDSCH to HARQ timing principle.&quot;}]">Fig. 2-54</a>.</li></ul><a id="page_1076_c1169"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:43%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-054__PDSCH_to_HARQ_timing_principle_eacbe73aa1.png" width="800" height="340" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-54 </span><abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> to <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> timing principle.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1076_c1170"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_1 for scheduling one <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> in one cell
			</p>


<a id="page_1076_c1171"></a><p>Like <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0, format 1_1 is also used to schedule downlink resources in one cell by using the same <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> types (<abbr class="eh-abbreviation" title="Cell RNTI" lang="en"><span class="eh-tooltip" title="Cell RNTI">C-RNTI</span></abbr>, <abbr class="eh-abbreviation" title="Configured scheduling RNTI" lang="en"><span class="eh-tooltip" title="Configured scheduling RNTI">CS-RNTI</span></abbr> or <abbr class="eh-abbreviation" title="Modulation and coding scheme C-RNTI" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme C-RNTI">MCS-C-RNTI</span></abbr>). However, it supports more parameters and thus more scheduling scenarios. <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_1 is used with carrier aggregation, or it allows scheduling of two transport blocks in case of spatial multiplexing or <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> scenarios. The content of the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_1 message is as follows:</p><ul class="eh-list eh-list--line"><li>Identifier for <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> formats – As described above, indicates whether uplink or downlink assignment is involved</li><li>Carrier indicator – 0 or 3 bits. If carrier aggregation is configured by higher layers, this index describes the component carriers to which the assignment of resources applies</li><li>Bandwidth part indicator – See also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1047" class="eh-link eh-link--page">1.4 Bandwidth part fundamentals, page 182</a>. There, it is noted that the UE can have up to four bandwidth parts configured by higher layers. With <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_1, it is possible to switch between these bandwidth parts. Note that active switching of the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling is optional for the UE</li><li>Frequency domain resource assignment to allocate the downlink physical resource (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077_c1195" class="eh-link eh-link--page eh-link--ce">Resource assignment in the frequency domain, page 314</a>)</li><li>Time domain resource assignment (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077_c1190" class="eh-link eh-link--page eh-link--ce">Resource assignment in the time domain, page 312</a> for details)</li><li>Virtual to physical resource block mapping valid flag</li><li><abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr> bundling size indicator – Dependent on the higher layer precoding bundle configuration (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1034_c730" class="eh-link eh-link--page eh-link--ce">Precoding configuration aspects in 5G NR, page 107</a>)</li><li>Rate matching indicator for indication of the rate matching pattern dependent on higher layer settings</li><li><abbr class="eh-abbreviation" title="Zero power CSI-RS" lang="en"><span class="eh-tooltip" title="Zero power CSI-RS">ZP CSI-RS</span></abbr> trigger – See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-091__CSI-RS_alternating_mapping_zero_non-zero_power.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-91 &lt;\/span&gt;Example of alternating zero and non-zero power mapping of CSI-RS to support beam mobility.&quot;}]">Fig. 1-91, page 117</a> for details. The <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> on the downlink may contain zero power <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> that are configured by higher layers. This field indicates the position of those reference signals that are not transmitted. The UE may use them for measurement reporting, e.g. feedback about inter-cell interference situations</li><li>For transport block 1<ul><li class="Flie-text_Flie-text-Aufz2-Strich">Modulation and coding scheme indication</li><li class="Flie-text_Flie-text-Aufz2-Strich">New data indicator bit</li><li class="Flie-text_Flie-text-Aufz2-Strich">Redundancy version</li></ul></li><li>For transport block 2<ul><li class="Flie-text_Flie-text-Aufz2-Strich">Modulation and coding scheme indication</li><li class="Flie-text_Flie-text-Aufz2-Strich">New data indicator bit</li><li class="Flie-text_Flie-text-Aufz2-Strich">Redundancy version</li></ul></li><li><abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process number</li><li>Downlink assignment index</li><li><abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> command for scheduled <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr></li><li><abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> resource indicator</li><li>PDSCH-to-HARQ feedback timing indicator</li><li>Antenna ports – In reference to a table in <span class="eh-hint" title="3GPP TS 38.212: NR; Multiplexing and channel coding" lang="en"><span class="eh-tooltip" title="3GPP TS 38.212: NR; Multiplexing and channel coding">TS 38.212</span></span> indicating the antenna ports. Here, the antenna port is identical to the structure of the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>, configured by higher layers</li><li>Transmission configuration indication based on the possibility to configure a list of transmission configuration indications (<abbr class="eh-abbreviation" title="Transmission configuration indicator" lang="en"><span class="eh-tooltip" title="Transmission configuration indicator">TCI</span></abbr>) to the UE, taking into account various propagation aspects such as Doppler shift, average delay, spatial RX parameters, etc. to configure quasi co-location relationship for reference signals <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>. This <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> indication allows mapping of such <abbr class="eh-abbreviation" title="Transmission configuration indicator" lang="en"><span class="eh-tooltip" title="Transmission configuration indicator">TCI</span></abbr> states. See the section on physical access fundamentals (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1034" class="eh-link eh-link--page">1.2.5.5 Antenna ports, precoding and quasi co-located ­antennas, page 98</a>) and <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span> for further details</li><li><abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> request – Used to trigger transmission of sounding reference signals by the UE (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1035" class="eh-link eh-link--page">1.2.5.6 Physical signals in 5G NR, page 110</a>)</li><li><abbr class="eh-abbreviation" title="Code block group" lang="en"><span class="eh-tooltip" title="Code block group">CBG</span></abbr> transmission information – As shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-119__Code_block_group-based_HARQ_operation.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-119 &lt;\/span&gt;Code block group-based HARQ operation in 5G NR.&quot;}]">Fig. 1-119, page 151</a> it is possible to attach a <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> to each code block, then combine several code blocks into a code block group <abbr class="eh-abbreviation" title="Code block group" lang="en"><span class="eh-tooltip" title="Code block group">CBG</span></abbr> and apply <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback per <abbr class="eh-abbreviation" title="Code block group" lang="en"><span class="eh-tooltip" title="Code block group">CBG</span></abbr></li><li><abbr class="eh-abbreviation" title="Code block group" lang="en"><span class="eh-tooltip" title="Code block group">CBG</span></abbr> flushing out information – Determined by higher layers if the code block group is still active</li><li><abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> sequence initialization – One parameter that can be used as an initial value for the pseudo-noise sequence generator for generation of <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> sequences. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-086__DMRS_generation_01.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-86 &lt;\/span&gt;Demodulation reference signal (DMRS) sequence generation.&quot;}]">Fig. 1-86, page 111</a> for further details on <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> sequence generation</li></ul><a id="page_1076_c1172"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 2_0 for notifying the slot format
			</p>


<a id="page_1076_c1173"></a><p>This <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> message is attached with a <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> scrambled with the <abbr class="eh-abbreviation" title="Slot format indicator RNTI" lang="en"><span class="eh-tooltip" title="Slot format indicator RNTI">SFI-RNTI</span></abbr> and may be sent to a group of UEs to notify about the slot format for TDD operations. The length of <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 2_0 is configurable by higher layers. This method is also known as dynamic TDD configuration. See also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1028_c635" class="eh-link eh-link--page eh-link--ce">Dynamic TDD configuration, page 72</a> for further details about the TDD slot format.</p>


<a id="page_1076_c1174"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 2_1 for indicating the PRBs and OFDM symbols where no transmission is intended
			</p>


<a id="page_1076_c1175"></a><p>A possible option for higher layers is to configure the UE for so-called pre-emption operation, i.e. if the <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>DownlinkPreemption</em> is activated. The UE may assume that no transmission to the UE is present in the PRBs and in symbols from a set of PRBs and a set of symbols from the last monitoring period that are indicated by <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 2_1, scrambled with the value <abbr class="eh-abbreviation" title="Interruption RNTI" lang="en"><span class="eh-tooltip" title="Interruption RNTI">INT-RNTI</span></abbr> (<span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span>). The size of <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 2_1 is configurable by higher layers and the content is an enumeration of pre-emption indication values.</p>


<a id="page_1076_c1176"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 2_2 for transmission of <abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> commands for <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>
			</p>


<a id="page_1076_c1177"></a><p>This <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> message is used to send transmit power control commands to a group of UEs corresponding to the possible transmission of uplink data or control channels. <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 2_2 is scrambled with the <abbr class="eh-abbreviation" title="TPC physical uplink shared channel-RNTI" lang="en"><span class="eh-tooltip" title="TPC physical uplink shared channel-RNTI">TPC-PUSCH-RNTI</span></abbr> or <abbr class="eh-abbreviation" title="TPC physical uplink control channel-RNTI" lang="en"><span class="eh-tooltip" title="TPC physical uplink control channel-RNTI">TPC-PUCCH-RNTI</span></abbr> and contains an enumeration of power control commands valid for the applicable channel and UE (<span class="eh-hint" title="3GPP TS 38.212: NR; Multiplexing and channel coding" lang="en"><span class="eh-tooltip" title="3GPP TS 38.212: NR; Multiplexing and channel coding">TS 38.212</span></span>).</p>


<a id="page_1076_c1178"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 2_3 for transmission of a group of <abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> commands for <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr>
			</p>


<a id="page_1076_c1179"></a><p>This <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> allows the network to control the uplink transmit power if a sounding reference signal (<abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr>) is configured for one or several UEs. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1035" class="eh-link eh-link--page">1.2.5.6 Physical signals in 5G NR, page 110</a> for further details on sounding reference signals. Via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling of <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> signals, the network has the ability to request uplink signals to perform channel estimation, which is essential for link maintenance, link adaptation and obviously for beamforming decisions.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1077" data-prevpid="1076" data-nextpid="1078" data-chapter="2.2.4 DL data reception" id="page_1077">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.2.4 DL data reception</h3>
						
<a id="page_1077_c1180"></a><p>Like LTE, 5G NR uses packet-switched connections combined with the shared physical channel principle to provide the highest possible flexibility. The main channels involved in downlink data reception are the physical data channel (<abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>) and the downlink transport channel (<abbr class="eh-abbreviation" title="Downlink shared channel" lang="en"><span class="eh-tooltip" title="Downlink shared channel">DL-SCH</span></abbr>). Since the network decides about scheduling resources within a cell to multiple UEs, the shared channel concept allows a greater degree of flexibility to assign resources to UEs in the time and frequency domain. The <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> uses a flexible modulation and coding scheme (<abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr>) and through the control channel <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>, all UEs receive scheduling information via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> messages for the specific <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076" class="eh-link eh-link--page">2.2.3 DL resource assignment, page 295</a> for details on the downlink assignment. The gNB provides a dynamic scheduler in its <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer which is in charge of distributing DL resources in time and frequency among all UEs in a cell to guarantee highest flexibility and efficiency in scheduling decisions on the physical layer. The transport channel <abbr class="eh-abbreviation" title="Downlink shared channel" lang="en"><span class="eh-tooltip" title="Downlink shared channel">DL-SCH</span></abbr> uses the concept of transport formats to provide a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> related data transfer. Higher layers in 5G NR have configured a quality of service flow inheriting <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> parameters such as guaranteed bit rate, priority and latency aspects (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1075" class="eh-link eh-link--page">2.2.2 End to end quality of service, page 285</a> for further details). This configuration leads to <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> requirements for each UE and the associated radio bearers. The downlink scheduler assigns resources between UEs based on shared channel operation, taking into account the radio conditions at the UE by means of the adaptive modulation and coding principle. To support the gNB scheduler with proper <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> selection, the UE sends measurement reports containing information about the radio network field strength and quality, like <abbr class="eh-abbreviation" title="CSI reference signal received power" lang="en"><span class="eh-tooltip" title="CSI reference signal received power">CSI-RSRP</span></abbr> described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-074__Uplink_channel_information.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-74 &lt;\/span&gt;Uplink channel information (UCI) \u2013 general model overview.&quot;}]">Fig. 2-74</a>. The measurements reported by the UE are configured by the higher layer <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>. The scheduler assigns time domain resources in units of slots: one mini-slot, one slot, or multiple slots. It assigns frequency domain resources in resource blocks within the active bandwidth part (<abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>). As described above, the UEs identify resources by receiving a scheduling control information <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> on the physical control channel. The <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> uses the modulation schemes <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr>, 16QAM, 64QAM and 256QAM. Note that the highest order modulation scheme to be used can be restricted by <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> signaling. The transport block sizes are no longer indicated directly, but must be calculated by the UE. Like in LTE, frequency resource assignment is based on resource block granularity. However, there is one major difference compared to LTE: Physical resource assignment is no longer based on a <abbr class="eh-abbreviation" title="Transmission time interval" lang="en"><span class="eh-tooltip" title="Transmission time interval">TTI</span></abbr> duration that is constant 1 ms, but is now much more flexible. These aspects are described in greater detail in the following section.</p>


<a id="page_1077_c1181"></a><p class="eh-headline-207 ">
				Downlink data rate
			</p>


<a id="page_1077_c1182"></a><p>A common question for 5G NR revolves around the maximum data rate to be expected (even if such numbers are unrealistic in real life since 5G NR is based on a shared network concept). <span class="eh-hint" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities" lang="en"><span class="eh-tooltip" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities">TS 38.306</span></span> contains a formula to calculate the approximate data rate or throughput based on the number of carriers and layers.</p>


<a id="page_1077_c1183"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:31%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-055__Data_rate_calculation_neu_8d4c1bb666.png" width="800" height="246" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-55 </span>Data rate calculation.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1077_c1184"></a><p>Unlike LTE, the data rate is not given in a table derived from UE categories or based on maximum transport block sizes as the only limiting factor. The data rate must be calculated based on the resource allocation circumstances and the higher layer settings. The formula in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-055__Data_rate_calculation_neu.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-55 &lt;\/span&gt;Data rate calculation.&quot;}]">Fig. 2-55</a> uses the following parameters:</p><ul class="eh-list eh-list--line"><li><strong>J:</strong> The number of aggregated component carriers in a band or band combination, with maximum 16 component carriers for carrier aggregation</li><li><strong>R</strong><sub class="eh-text--strong eh-text__letter">max</sub>: Maximum possible code rate (948/1024) or lower</li><li><strong>ν</strong>: Number of layers (the maximum number of layers is 8)</li><li><strong>Q</strong>: Bits per modulation symbol, depending on the modulation scheme. Q = 1 for <abbr class="eh-abbreviation" title="Binary phase shift keying" lang="en"><span class="eh-tooltip" title="Binary phase shift keying">BPSK</span></abbr>, 2 for <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr>, 4 for 16QAM, 6 for 64QAM and 8 for 256QAM, which is the maximum allowed modulation scheme</li><li><strong>f</strong>: Scaling factor, signaled via higher layers. The following values for f are allowed: 1, 0.8, 0.75 or 0.4. A first guess about the scaling factor is that it allows the adaptation of the UL-DL configuration in TDD with respect to the data rate, but the real motivation behind the scaling factor is based on the idea that it should be permissible for a UE to indicate a lower performance with respect to the maximum peak data rate (see <span class="eh-reference" title="3GPP R1-1720108, On UE capabilities and peak rates, 3GPP TSG RAN WG1 Meeting 91 Reno, USA, Nov 27–Dec 1 2017" lang="en"><span class="eh-tooltip" title="3GPP R1-1720108, On UE capabilities and peak rates, 3GPP TSG RAN WG1 Meeting 91 Reno, USA, Nov 27–Dec 1 2017">[Ref. 33]</span></span>). As described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1019" class="eh-link eh-link--page">1.1.4 Non-access stratum protocol, page 39</a>, the 5G system does not directly define certain UE categories; only UE capabilities are defined. This scaling factor allows the adaptation of a lower data rate supported by the UE as it would be calculated as peak data based on the actual band configuration and baseband capabilities</li><li><strong>N</strong><sub class="eh-text--strong eh-text__letter">RB</sub>: Maximum number of resource blocks per bandwidth part or lower</li><li><strong>T</strong><sub class="eh-text--strong eh-text__letter">s</sub>: Average symbol duration, taking into account the longer <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> duration of the first OFDMA symbol in one slot and the possible extended cyclic prefix instead of the normal <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> length</li><li><strong>OH</strong>: Overhead due to signaling information. Currently, OH can assume the following values:<ul><li class="Flie-text_Flie-text-Aufz2-Strich">0.14 for frequency range FR1 for DL</li><li class="Flie-text_Flie-text-Aufz2-Strich">0.18 for frequency range FR2 for DL</li><li class="Flie-text_Flie-text-Aufz2-Strich">0.08 for frequency range FR1 for UL</li><li class="Flie-text_Flie-text-Aufz2-Strich">0.10 for frequency range FR2 for UL</li></ul></li></ul><p>In addition to the formula in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-055__Data_rate_calculation_neu.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-55 &lt;\/span&gt;Data rate calculation.&quot;}]">Fig. 2-55</a> for calculating the maximum data rate, the maximum data rate can be limited due to a certain UE capability. Capability indications such as the <em>total layer 2 buffer size</em> will determine the maximum data rate if indicated by the UE (see <span class="eh-hint" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities" lang="en"><span class="eh-tooltip" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities">TS 38.306</span></span> for details).</p>


<a id="page_1077_c1185"></a><p class="eh-headline-207 ">
				Transport block size calculation
			</p>


<a id="page_1077_c1186"></a><p>We should now recall LTE where the transport block size (<abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr>) is precalculated and provided in tables containing all possible values and the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> value modulation and coding schemes, together with the number of allocated resource blocks received on the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>, refers to the corresponding table indicating the <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> size directly. In 5G NR, the procedure is slightly different. It requires a certain amount of calculations by the UE and is far more complex than in LTE. Main difference is, in 5G NR, the UE calculates the <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> and there is an algorithm to calculate the <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> depending on higher layer signaled parameters. The following section will provide more details on that algorithm. </p><p>To start the <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> determination, the UE first has to read the downlink allocation information: <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr>, redundancy version, number of layers and number of resource blocks. The specification <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span> contains three different tables indicating the modulation order and the target code rate resulting in a spectral efficiency value (bit per second per Hertz). Why are there three tables instead of one? Recall the behavior of a coded transport block when faced with a degrading <abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr>: First, assuming a high <abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr>, we see a constant data rate for the given code rate, but at a certain point, we see a drop in the data rate, i.e. a “fall off the cliff” situation. Now, the idea behind adaptive modulation and coding is to design multiple such curves, known as “waterfall” curves, with different data rates and different positions of the “drop”. Depending on the prevailing <abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr>, the scheduler can select a more robust or a higher rate <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr>. See <span class="eh-reference" title="Reiner Stuhlfauth, High Speed Packet Access, Technical book edited by Rohde &amp; Schwarz, 2012" lang="en"><span class="eh-tooltip" title="Reiner Stuhlfauth, High Speed Packet Access, Technical book edited by Rohde &amp; Schwarz, 2012">[Ref. 18]</span></span> for details on adaptive modulation and coding based on the example of 3G (or HSPA) where the idea of adaptive modulation and coding in combination with a dynamic scheduling scheme for shared channels was first introduced. With three different tables now in 5G NR, the granularity of these curves can be influenced and the goal of achieving the highest possible data throughput under the given channel conditions can be reached.</p><p>The following are the main characteristics of these three tables:</p><ul class="eh-list eh-list--line"><li><abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> index table 1 for <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> mainly for <abbr class="eh-abbreviation" title="Semi-persistent scheduling" lang="en"><span class="eh-tooltip" title="Semi-persistent scheduling">SPS</span></abbr> with modulation schemes <span class="eh-text--nowrap">QPSK – 64QAM</span> only and spectral efficiency ranging from 0.2344 up to 5.5547 with 28 steps</li><li><abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> index table 2 for <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>, if higher layer <strong>PDSCH_config = 256qam</strong> with modulation schemes <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr> – 256QAM only and spectral efficiency ranging from 0.2344 up to 7.406 with 27 steps</li><li><abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> index table 3 for <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>, if higher layer <strong>PDSCH_config = 64qam</strong> with modulation schemes <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr> – 64QAM only and spectral efficiency ranging from 0.058 up to 4.523 with 28 steps</li></ul><p>The next step involves a preliminary calculation of the number of information bits needed for detailed calculation of the <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr>. The following <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-056__Transport_block_size_calculation_algorithm.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-56 &lt;\/span&gt;Transport block size calculation algorithm (first part: determine intermediate number of information bits).&quot;}]">Fig. 2-56</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-057__Transport_block_size_calculation_Formeln.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-57 &lt;\/span&gt;Transport block size calculation algorithm (second part: determine the TBS based on the estimated number of information bits).&quot;}]">Fig. 2-57</a> illustrate this algorithm in detail. First, the UE calculates the estimated number of resource elements, taking into account the scheduled resource in the time domain as the number of symbols multiplied by the number of subcarriers per <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr> (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-056__Transport_block_size_calculation_algorithm.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-56 &lt;\/span&gt;Transport block size calculation algorithm (first part: determine intermediate number of information bits).&quot;}]">Fig. 2-56</a>), minus the number of REs that are used by <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>  transmission and a higher layer value xOverhead indicating possible overhead due to signaling. This value, representing the number of resource elements for <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> per <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr> is then multiplied with the assigned number of RBs, given via the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> frequency domain information. The final step is to multiply this number of allocated resource elements with the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling information modulation index, code rate and number of layers to obtain an initial estimation of the total number of information bits N<sub>inf</sub><sub>o</sub>. This initial number is then used in a second part of the <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> calculation algorithm to determine a <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> size.</p>


<a id="page_1077_c1187"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:45%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-056__Transport_block_size_calculation_algorithm_51c97459b4.png" width="800" height="355" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-56 </span>Transport block size calculation algorithm (first part: determine intermediate number of information bits).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1077_c1188"></a><p>The second part of the <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> calculation algorithm consists mainly of a selection process to decide on the transport block size that best fits the estimated number of information bits N<sub>info</sub> derived in the first part. This selection process is based on a floor and rounding procedure for the number of information bits taking into account the code rate and the transport block size. Details of the <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> selection algorithm are shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-057__Transport_block_size_calculation_Formeln.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-57 &lt;\/span&gt;Transport block size calculation algorithm (second part: determine the TBS based on the estimated number of information bits).&quot;}]">Fig. 2-57</a>. If the estimated number of information bits is less than or equal to 3824, the <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> is selected based on <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>, <span class="eh-text--nowrap">table 5.1.3.2-2.</span> Otherwise, the code rate is checked if it is less than ¼. For low code rates, the <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> size can now be calculated directly. For higher code rates, an additional check is performed. Depending on whether the quantized number of information bits is greater than 8424 or not, a corresponding formula from 3GPP specification is chosen to calculate the scheduled <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> on the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>. Note that the UE ignores the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> if the code rate is higher than 0.95.</p>


<a id="page_1077_c1189"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:53%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-057__Transport_block_size_calculation_Formeln_69a3671309.png" width="800" height="421" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-57 </span>Transport block size calculation algorithm (second part: determine the <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> based on the estimated number of information bits).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1077_c1190"></a><p class="eh-headline-207 ">
				Resource assignment in the time domain
			</p>


<a id="page_1077_c1191"></a><p>In comparison to LTE where the assignment in the time domain is based on a duration of 1 ms corresponding to one <abbr class="eh-abbreviation" title="Transmission time interval" lang="en"><span class="eh-tooltip" title="Transmission time interval">TTI</span></abbr> or subframe, 5G NR allows much greater flexibility for allocation of physical resources in the time domain to support a multitude of application scenarios such as <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr> or <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr>. Therefore, the time resource is allocated based on a number of OFDMA symbols instead of subframes or slots (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-058__PDSCH_resource_assignment.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-58 &lt;\/span&gt;PDSCH resource assignment in the time domain (parameters).&quot;}]">Fig. 2-58</a>). The control information <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> indicates a time domain resource assignment field. This time assignment is a row index to a table that provides further information such as the slot offset K0, the start and length indicator value <abbr class="eh-abbreviation" title="Start and length indicator value" lang="en"><span class="eh-tooltip" title="Start and length indicator value">SLIV</span></abbr> and the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> mapping type A or B, indicating the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> symbol mapping (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-087__DM-RS-configuration_parameters_01.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-87 &lt;\/span&gt;PDSCH DMRS configuration parameters.&quot;}]">Fig. 1-87, page 112</a>). The values in this table are either indicated by higher layer signaling directly or by using default values. The direct signaled <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> IEs <em>pdsch-ConfigCommon</em> or <em>pdsch-Config</em> may contain an <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>pdsch-AllocationList</em> that will define the rows of an allocation table and the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> parameter will refer as a row index to that table. In case the higher layers do not define these information elements, there are default tables defined in <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>. In that case, the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> parameter points to the row index of the default tables.</p>


<a id="page_1077_c1192"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:44%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-058__PDSCH_resource_assignment_71cc6191b1.png" width="800" height="348" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-58 </span><abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> resource assignment in the time domain (parameters).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1077_c1193"></a><p>To summarize time allocation in 5G NR, the major difference compared to LTE is that the scheduling period in time is no longer constant (equal to one subframe), but instead there are various time lengths, indicated as a multiple of OFDM symbols. The shortest time duration that can be assigned using the above described <abbr class="eh-abbreviation" title="Start and length indicator value" lang="en"><span class="eh-tooltip" title="Start and length indicator value">SLIV</span></abbr> method is two consecutive OFDMA symbols. In the literature, the shorter <abbr class="eh-abbreviation" title="Transmission time interval" lang="en"><span class="eh-tooltip" title="Transmission time interval">TTI</span></abbr> is also referred to as a mini-slot. There are multiple numbers of symbols possible as scheduling assignments in the time domain (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-059__Scheduling_in_time_domain_examples.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-59 &lt;\/span&gt;Scheduling in time domain examples: mini-slot or slot aggregation.&quot;}]">Fig. 2-59</a>). The main ones are 2, 4 and 7 OFDMA symbols, but additional durations are also possible. On the other hand, it is possible with the higher layer parameter aggregationFactorDL to aggregate certain slots. If such slot aggregation is applied, the time configuration obtained from the <abbr class="eh-abbreviation" title="Start and length indicator value" lang="en"><span class="eh-tooltip" title="Start and length indicator value">SLIV</span></abbr> value is identical for all the aggregated slots.</p>


<a id="page_1077_c1194"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:48%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-059__Scheduling_in_time_domain_examples_b9094072b3.png" width="800" height="378" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-59 </span>Scheduling in time domain examples: mini-slot or slot aggregation.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1077_c1195"></a><p class="eh-headline-207 ">
				Resource assignment in the frequency domain
			</p>


<a id="page_1077_c1196"></a><p>The frequency resource information for the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> is scheduled via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> control information on the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>. There are two types of frequency allocation: type 0 and type 1. They differ in that the frequency resource allocation can either be distributed or contiguous and in their spectral granularity. Allocation type 0 combines a certain number of resource blocks into a resource block group <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> and uses a bitmap to allocate frequency resources with <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> granularity. Allocation type 1 indicates to a scheduled UE a set of contiguously allocated localized or distributed virtual resource blocks that will be mapped onto physical resource blocks to obtain either a contiguous or distributed allocation with resource block granularity. If the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> uses format 1_0 for scheduling frequency resources, type 1 is used. If the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> uses format 1_1, the allocation type 0 or 1 is indicated by the most significant bit in the <em>FrequencyDomainResource</em> field within the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> message, or it may be configured by the higher layer parameter <em>resourceAllocation</em> in the <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>PDSCH-Config </em>directly.</p>


<a id="page_1077_c1197"></a><p class="eh-headline-207 ">
				Downlink resource allocation type 0
			</p>


<a id="page_1077_c1198"></a><p>Frequency resource allocation type 0 represents the possible frequency distributed case of resource allocation and introduces the term <em>resource block group </em>(<abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr>), representing a set of consecutive virtual resource blocks. The <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> size P is given by the table in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1077_c1199\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table039\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bandwidth part size in #RBs&lt;\/th&gt;&lt;th&gt;Configuration 1 set by IE \u201crbg- Size\u201d&lt;\/th&gt;&lt;th&gt;Configuration 2 set by IE \u201crbg- Size\u201d&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;1 to 36&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;37 to 72&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;73 to 144&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;145 to 275&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-60 &lt;\/span&gt;Nominal RBG size P for allocation type 0.&lt;\/p&gt;\n\n&quot;}">Fig. 2-60</a>. The <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> size is configured by the higher layer parameter <em>rbg-Size</em> contained in the <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>PDSCH-Config</em>, indicating configuration 1 or 2 and the size of the bandwidth part. The allocation mechanism uses a bitmap where each bit indicates whether the corresponding <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> is scheduled or not (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-061__2-073__Resource_allocation_type_0.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-61 &lt;\/span&gt;Resource allocation type 0 (example).&quot;}]">Fig. 2-61</a>). Thus, the granularity of frequency allocation is on an <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> size basis. Note that depending on the configuration of the bandwidth part with start and size values, the first and last <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> may differ slightly from the RGB size P (see <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span> for further details).</p>


<a id="page_1077_c1199"></a><div class="table-scroll"><table id="table039" class="eh-table eh-table--alternate"><colgroup><col><col><col></colgroup><thead><tr><th>Bandwidth part size in #RBs</th><th>Configuration 1 set by IE “rbg- Size”</th><th>Configuration 2 set by IE “rbg- Size”</th></tr></thead><tbody><tr><td>1 to 36</td><td>2</td><td>4</td></tr><tr><td>37 to 72</td><td>4</td><td>8</td></tr><tr><td>73 to 144</td><td>8</td><td>16</td></tr><tr><td>145 to 275</td><td>16</td><td>16</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-60 </span>Nominal <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> size P for allocation type 0.</p>


<a id="page_1077_c1200"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:46%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-061__2-073__Resource_allocation_type_0_afe5caa551.png" width="800" height="364" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-61 </span>Resource allocation type 0 (example).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1077_c1201"></a><p class="eh-headline-207 ">
				Downlink resource allocation type 1
			</p>


<a id="page_1077_c1202"></a><p>Allocation type 1 represents the frequency contiguous resource allocation cases and is similar to LTE allocation type 2, where resource blocks are assigned contiguously. The scheduling information indicates a start <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr> (<abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr>_start) and a number of RBs (<abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr>_length) within the active <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>.</p><p>To indicate these parameters, via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling a resource indication value (<abbr class="eh-abbreviation" title="Resource indication value" lang="en"><span class="eh-tooltip" title="Resource indication value">RIV</span></abbr>) is given via the frequency domain scheduling info. The <abbr class="eh-abbreviation" title="Resource indication value" lang="en"><span class="eh-tooltip" title="Resource indication value">RIV</span></abbr> parameter is calculated specific to the bandwidth part (see <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span> for details). The bandwidth part size is the size of the active <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> except when allocation type 1 schedules resources in the common search space in <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> 0. In this case, the initial bandwidth part size is chosen and the start <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr> is relative to the start of the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>. The <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-062__Downlink_resource_allocation_type_1.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-62 &lt;\/span&gt;Downlink resource allocation type 1, calculation of resource indication value (RIV).&quot;}]">Fig. 2-62</a> shows how the <abbr class="eh-abbreviation" title="Resource indication value" lang="en"><span class="eh-tooltip" title="Resource indication value">RIV</span></abbr> parameter indicates the frequency resource.</p><p>We will now consider some examples. We assume a <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> size of 50 <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr>. In our first example, the network wants to schedule 20 RBs with start <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr> = 5 to the UE. Then, the <abbr class="eh-abbreviation" title="Resource indication value" lang="en"><span class="eh-tooltip" title="Resource indication value">RIV</span></abbr> is calculated as 50 ∙ (20 – 1) + 5 = 955. We must use the upper formula since the allocated length of 20 is less than half of the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> size. In our second example, we assume a <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> size of 50, but now the network schedules a length of 40 RBs with start <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr> of 5. Now, we must apply the lower formula in the figure and calculate a <abbr class="eh-abbreviation" title="Resource indication value" lang="en"><span class="eh-tooltip" title="Resource indication value">RIV</span></abbr> value of 50 ∙ (50 − 40 + 1) + (50 − 1 − 5) = 594. Note that the UE must perform this calculation in reverse since the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling contains the integer value representing the <abbr class="eh-abbreviation" title="Resource indication value" lang="en"><span class="eh-tooltip" title="Resource indication value">RIV</span></abbr> and the UE has to derive the length and <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr> start based thereupon. This is similar to frequency indication in LTE. In addition, the <abbr class="eh-abbreviation" title="Resource indication value" lang="en"><span class="eh-tooltip" title="Resource indication value">RIV</span></abbr> parameters <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr> start and length describe so-called virtual RBs, which are mapped to physical RBs. This mapping can result in either a contiguous allocation or a distributed allocation (see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-036__VRB_to_PRB_mapping.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-36 &lt;\/span&gt;VRB to PRB mapping example (assumption: total number of bundles = 8).&quot;}]">Fig. 2-36, page 268</a>) </p>


<a id="page_1077_c1203"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:32%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-062__Downlink_resource_allocation_type_1_6d9bd8ccbf.png" width="800" height="249" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-62 </span>Downlink resource allocation type 1, calculation of resource indication value (<abbr class="eh-abbreviation" title="Resource indication value" lang="en"><span class="eh-tooltip" title="Resource indication value">RIV</span></abbr>).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1077_c1204"></a><p class="eh-headline-207 ">
				Reference signals for downlink data reception
			</p>


<a id="page_1077_c1205"></a><p>The downlink data channel <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> is accompanied by various physical reference signals to optimize and support decoding and demodulation. In contrast to LTE where cell-specific reference signals were introduced as a kind of “one fits all” mechanism for both data decoding and channel estimation, the procedure in 5G NR is slightly different. It is intentionally a more flexible approach where various reference signals are defined for different purposes such as channel decoding, channel status or synchronization aspects. A second benefit is the lean channel concept, reducing the overhead given by cell specific “always-on” reference signals. These physical reference signals are described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1035" class="eh-link eh-link--page">1.2.5.6 Physical signals in 5G NR, page 110</a>.</p><p>The downlink DM-RS signals multiplexed onto the downlink <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> play an important role in data decoding. To support high flexibility and respond to various propagation conditions such as <abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr> fluctuations, device mobility, interference, coverage requirements and so on, the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> signals can be configured by the higher layer <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>DMRS-</em><em>DownlinkConfig</em>. This configuration message makes it possible to define the density in the time domain, the density in the frequency domain and the content such that the sequence used for the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> is UE-specific. The <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> signals can be common or cell-specific in case of common channels such as the <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr>. In our situation here, UE-specific data on <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>, the pseudorandom bit sequence used for generating the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> signal is UE-specific. This allows implementation of the precoding in a flexible manner, i.e. codebook based or non-codebook based or beamforming on <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1034" class="eh-link eh-link--page">1.2.5.5 Antenna ports, precoding and quasi co-located ­antennas, page 98</a>). In addition, the demodulation reference signals support <abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr> or spatial multiplexing, which has to be considered as a dynamic procedure determined by the channel correlation status or rank of the channel matrix. To support the estimation of the correlation between the multiple layers, the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> signals are covered with the aid of an orthogonal cover code and can thus enable the receiver to estimate the cross-correlation or condition number for rank indicator feedback (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-089__DM-RS_spatial_multiplexing_01.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-89 &lt;\/span&gt;PDSCH DMRS with orthogonal sequence to enable channel estimation for spatial multiplexing.&quot;}]">Fig. 1-89, page 113</a> for further details).</p><p>For better precoding support, 5G NR introduces the term precoding resource block group (<abbr class="eh-abbreviation" title="Precoding resource block group" lang="en"><span class="eh-tooltip" title="Precoding resource block group">PRG</span></abbr>), i.e. the UE may assume a certain number of PRBs as the granularity for precoding. This granularity P'<sub>BWP</sub><sub>,</sub><sub>i</sub> can be equal to one of the values 2, 4 or wideband. It defines the size of the <abbr class="eh-abbreviation" title="Precoding resource block group" lang="en"><span class="eh-tooltip" title="Precoding resource block group">PRG</span></abbr>. The <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>prb-</em><em>BundlingType</em> in the <em>pdsch-</em><em>config</em> message can define either a static size for the <abbr class="eh-abbreviation" title="Precoding resource block group" lang="en"><span class="eh-tooltip" title="Precoding resource block group">PRG</span></abbr>, or it can define two sets of <abbr class="eh-abbreviation" title="Precoding resource block group" lang="en"><span class="eh-tooltip" title="Precoding resource block group">PRG</span></abbr> sizes that can be scheduled dynamically via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format1_1 (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076_c1161" class="eh-link eh-link--page eh-link--ce">Downlink control information (DCI), page 302</a> and <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>). Obviously, radio physics have not changed in 5G NR. Thus, the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> signals are also used at the receiver for traditional equalizing techniques, channel evaluation and also for power estimation since the network can set the ratio <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> <abbr class="eh-abbreviation" title="Energy per resource element" lang="en"><span class="eh-tooltip" title="Energy per resource element">EPRE</span></abbr> to <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> <abbr class="eh-abbreviation" title="Energy per resource element" lang="en"><span class="eh-tooltip" title="Energy per resource element">EPRE</span></abbr> (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-095__Downlink_power_allocation_example_01.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-95 &lt;\/span&gt;Downlink power allocation \u2013 example.&quot;}]">Fig. 1-95, page 123</a>).</p><p>In addition to the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>, there are two other important reference signals supporting downlink data reception. First, there are the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> reference signals which are described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1035" class="eh-link eh-link--page">1.2.5.6 Physical signals in 5G NR, page 110</a>. The initial impression here is that the main purpose of the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> is to estimate the channel status and calculate <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting values. Since 5G introduces techniques such as non-codebook based precoding and beamforming, the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> play an important role in optimizing the beamforming via aspects such as beam switching, beam refinement and the beam recovery procedure. Thus, the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> can be understood to be essential for mobility and for supporting the network with downlink scheduling decisions such as link adaptation and beamforming. This is true especially in view of the potential non-reciprocity of the channel condition between the UL and DL (as is the case in FDD systems). See also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1039" class="eh-link eh-link--page">1.3 Beamforming fundamentals, page 169</a> for further details.</p><p>Also for <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>, there are configuration parameters given by higher layers to define the density in frequency and time, the UE-specific scrambling ID and the critical setting of zero-power reference signals for channel estimation and beam switching procedures. The <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> signals do not only enable the UE to acquire channel status information, but they also play an essential role in uplink control information (<abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr>) feedback supporting network downlink scheduling decisions and beamforming implementations. Further details on uplink feedback are given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1082" class="eh-link eh-link--page">2.2.9 Uplink control information (UCI), page 340</a>.</p><p>Taking into account aspects such as phase noise as described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1025" class="eh-link eh-link--page">1.2.1.1 Motivational aspects behind wider subcarrier spacing, page 53</a> which have a major impact especially in the higher frequency ranges (FR2), another reference signal helps the UE to fulfill its receiving task: the phase tracking reference signal (<abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr>). These reference signals support mitigation techniques tackling the phase noise effect which impacts the orthogonality of subcarriers since OFDMA-based waveforms require precise synchronization. The phase tracking reference helps the receiver to adjust its local oscillator to the received frequency and thus compensate and mitigate the phase noise influence.</p><p>Another type of reference signals are the tracking reference signals (<abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr>) which may be used in the absence of or in addition to the <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> or <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr>. Besides the impact of phase noise that affects the receiver demodulation performance, good synchronization in time and frequency has to be maintained. The <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr> is a reference signal supporting synchronization. Especially at higher frequencies, it is likely that the local oscillators in the receiver and transmitter hardware may lose their common synchronization. The tracking reference signal helps the receiver to adjust its timing reference to the received signal and thus compensate and mitigate deviations resulting from mobility effects (Doppler shift) or hardware issues (i.e. oscillator drift).</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1078" data-prevpid="1077" data-nextpid="1079" data-chapter="2.2.5 Hybrid automatic repeat request (HARQ) operation" id="page_1078">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.2.5 Hybrid automatic repeat request (HARQ) operation</h3>
						
<a id="page_1078_c1206"></a><p>To guarantee reliable data transfer, both the UE and gNB are required to confirm proper data reception through the process of the hybrid automatic repeat request (<abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr>). Generally speaking, the term <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> implies an automatic retransmission request mechanism that introduces some multitasking aspects and adaptive retransmission. For readers who are not overly familiar with wireless communications, a brief digression into error correction mechanisms based on retransmission is given in the next sentences. Later, some details on <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process implementation within 5G NR will be given.</p>


<a id="page_1078_c1207"></a><p class="eh-headline-207 ">
				Brief digression into error correction mechanisms + <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr>
			</p>


<a id="page_1078_c1208"></a><p>Circuit-switched communications systems such as GSM were confronted with a tradeoff between reliability on one hand and complexity on the other. Reliability can be improved by mechanisms such as acknowledgement of data or redundant transmission, but this occurs at the cost of more signaling information and implementation complexity. The acknowledgment of data in a circuit-switched network such as GSM can be described as a <em>counter-based </em><em>retransmission</em><em> request.</em> The transmitter counts every outgoing data unit (“packet”) in a circuit-switched connection and the receiver increments its counter with every successfully decoded packet. After some time instance, these counter values are exchanged between the TX and RX entity. The advantage is the simplicity in implementation and the low data rate required for feedback provisioning. The disadvantage is the fact that in case of a counter mismatch, all packets up from the common counter status are retransmitted, regardless of whether they have already been properly received or not. This lead to the implementation of a <em>selective acknowledgement</em> scheme in the first packet-switched network GPRS. Packets were numbered with a <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> and the feedback was only about the lost packets. The resulting retransmission was more efficient as only lost packets were retransmitted. Such a feedback mechanism is based on a bitmap matrix indicating the sequence number indices. Feedback is provided after a number of packets that have been transmitted based on the exchange of such a bitmap. The drawback of this efficiency improvement concerning retransmission of only lost packets is that it results in long delays between the initial transmission, feedback and retransmission. Thus, the main mechanisms of <em>HARQ</em> as known today have been introduced with the presentation of HSPA in 3GPP Release 5. For readers who are not familiar with <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> in general, further information can be found in <span class="eh-reference" title="Reiner Stuhlfauth, High Speed Packet Access, Technical book edited by Rohde &amp; Schwarz, 2012" lang="en"><span class="eh-tooltip" title="Reiner Stuhlfauth, High Speed Packet Access, Technical book edited by Rohde &amp; Schwarz, 2012">[Ref. 18]</span></span>. <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> is based on an automatic acknowledgment technique (<abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr>) and transmitted packets are automatically acknowledged. This has an advantage for latency aspects since there is an immediate response, but this methodology requires control channel resources for such <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK information, i.e. the known channels <abbr class="eh-abbreviation" title="Physical hybrid indicator channel" lang="en"><span class="eh-tooltip" title="Physical hybrid indicator channel">PHICH</span></abbr> or <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> in LTE. But <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> is not just the automatic acknowledgement of data packets; it further introduces a concept of multitasking to run several <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> processes in parallel. If the receiver is able to decode the incoming data packet (indicated by a successful <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> check), it transmits an <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr> and otherwise a NACK (see also the section on channel coding aspects in 5G NR, i.e. chapter <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1037" class="eh-link eh-link--page">1.2.5.8 Channel coding, page 132</a>). By way of reminder, the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process is illustrated in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-063__HARQ_process_principles.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-63 &lt;\/span&gt;HARQ process principle, multitasking.&quot;}]">Fig. 2-63</a>. The term <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process introduces multitasking of several processes with steps such as data packet demodulation, descrambling, FFT operation and <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> check + appropriate <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr> or NACK feedback. To avoid any stalled situations from the TX perspective and to increase the data throughput for one connection between one UE and one network, the receiver and transmitter perform several parallel RX and TX buffering processes in a multitasking operation. This concept was first introduced in 3GPP Release 5 with the introduction of HSDPA in UMTS.</p><p>In addition to the multitasking operation, the term hybrid in <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> also signifies the idea of soft combining. Soft combining is a technique where the receiver does not discard an erroneous packet but instead uses it in combination with the retransmission to increase the decoding probability. Assuming a random distribution of errors occurred in a communication, this soft combining mechanism improves the decoding success ratio at the price of requiring an interim memory buffer at the receiver, the so-called soft buffer. Besides the need for soft buffer memory, the soft combining technique requires proper signaling or identification of the retransmission to perform the overlapping or soft combining in the right manner. Chase combining is the case where the retransmission applies the same puncturing scheme as the initial transmission, while incremental redundancy<strong></strong>may switch to another puncturing scheme, thereby increasing the chance of proper decoding together with soft combining. Both mechanisms differ in their ability to add redundancy information due to retransmission, but perhaps at the cost of forfeiting their self-decodable status. Consequently, each of the schemes can be beneficial and the network has the flexibility to select them accordingly, depending on whether the error probability on the communications channel is either sporadic, affecting single bits within a transport block, or more block error oriented, where a whole transport block may be lost. These mechanisms are explained in detail in <span class="eh-reference" title="Reiner Stuhlfauth, High Speed Packet Access, Technical book edited by Rohde &amp; Schwarz, 2012" lang="en"><span class="eh-tooltip" title="Reiner Stuhlfauth, High Speed Packet Access, Technical book edited by Rohde &amp; Schwarz, 2012">[Ref. 18]</span></span>] as well as in other literature (especially academic publications).</p>


<a id="page_1078_c1209"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:39%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-063__HARQ_process_principles_e047adbc49.png" width="800" height="308" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-63 </span><abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process principle, multitasking.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1078_c1210"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> mechanisms in 5G NR
			</p>


<a id="page_1078_c1211"></a><p>At first glance, the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> operation in 5G NR appears similar to the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> operation applied in LTE, but some marginal differences are defined in the specifications, especially when considering details such as the feedback mechanism, selection of control channels involved in <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK feedback, or <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> timing aspects. This section will focus on the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> mechanisms used in 5G NR.</p><p>If the receiver is able to decode the incoming data packet (which is indicated via a successful <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> check after decoding), it will transmit an <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr> and otherwise a NACK (see also the information on channel coding aspects in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1037" class="eh-link eh-link--page">1.2.5.8 Channel coding, page 132</a>) to request its retransmission. Soft combination of the previous packet and the newly transmitted one increases the probability of recovering from the error and reconstructing the original packet. In addition, the transmitter may perform retransmission with an identical puncturing scheme (“chase combining”) or with a different puncturing scheme (“incremental redundancy”). The puncturing scheme is indicated to the receiver with the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling information <em>redundancy version</em>. Note that the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling of the puncturing is either the indication of the puncturing scheme that is applied to the scheduled data packet on the downlink <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>, or it is to be understood as a command about which puncturing should be used for the assigned data packet on the uplink <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. 5G NR supports the possible segmentation of large code words into smaller code blocks and as a consequence, the feedback mechanism and retransmission can be code block based. Due to the absence of the downlink control channel <abbr class="eh-abbreviation" title="Physical hybrid indicator channel" lang="en"><span class="eh-tooltip" title="Physical hybrid indicator channel">PHICH</span></abbr>, the <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK feedback for uplink data is slightly different compared with LTE. The <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback on the downlink is piggybacked with the new data indicator (<abbr class="eh-abbreviation" title="New data indicator" lang="en"><span class="eh-tooltip" title="New data indicator">NDI</span></abbr>) bit. Instead of direct <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK feedback, the network indicates with the <abbr class="eh-abbreviation" title="New data indicator" lang="en"><span class="eh-tooltip" title="New data indicator">NDI</span></abbr> whether the assigned data packet on the uplink should be a new data packet or a retransmission. Regarding downlink data, the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback on the uplink can be transmitted over the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> channel multiplexed with other UL information like <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> or <abbr class="eh-abbreviation" title="CSI-RS resource indicator" lang="en"><span class="eh-tooltip" title="CSI-RS resource indicator">CRI</span></abbr>, or alternatively <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK information can be multiplexed with data on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>.</p><p>As just described, <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> signifies hybrid automatic repeat request and can be considered as a multitasking operation of multiple legacy automatic request procedure (<abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr>). Therefore, the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> entity in the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer is a multi-process module, meaning that in each time unit only one <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process is in charge of transmission and reception, and during the time interval when one <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process is waiting for <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK reception, the other process can transmit. The main influencing parameters are, for example, the length of one data packet as the <abbr class="eh-abbreviation" title="Transmission time interval" lang="en"><span class="eh-tooltip" title="Transmission time interval">TTI</span></abbr> and the receiver processing time shown as the round-trip time in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-063__HARQ_process_principles.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-63 &lt;\/span&gt;HARQ process principle, multitasking.&quot;}]">Fig. 2-63</a>. 5G NR provides a very flexible air interface numerology without a constant <abbr class="eh-abbreviation" title="Transmission time interval" lang="en"><span class="eh-tooltip" title="Transmission time interval">TTI</span></abbr> length and even without a constant period for the round-trip time, as has been standardized in legacy networks such as LTE. Thus, the number of <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> processes that are used overall is dynamic and its number is set via higher layers. As a maximum limit, a total number of 16 <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> processes given by <em>nrofHARQ-</em><em>Processes</em> is supported in the current release. This is valid for the uplink and downlink and per cell, thus in dual connectivity situations the UE has to provide more <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> processes overall. If spatial multiplexing is activated, there can be two transport blocks per <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process. In addition, the number of <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> processes is channel dependent and also depends on the scheduling scheme. Specifically, for uplink data on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>, there can be one to sixteen <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> processes configured. For downlink data on the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>, the number of <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> processes has to be an even number and in the current release the numbers 2, 4, 6, 10, 12 and 16 are allowed. In the absence of an <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> configuration, the UE will use eight <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> processes by default. In case of downlink semi-persistent scheduling, there can be one to eight <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> processes configured [<span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span>].</p>


<a id="page_1078_c1212"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:37%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-064__DL_HARQ_overview_f403cb7e90.png" width="800" height="292" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-64 </span>DL <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> overview.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1078_c1213"></a><p>In the absence of a specific <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback channel on the 5G NR downlink (like the LTE PHCH channel), the <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK feedback for UL data transfer is marginally different. The methodology is to piggyback <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK feedback on the configured grant for the uplink using the new data indicator (<abbr class="eh-abbreviation" title="New data indicator" lang="en"><span class="eh-tooltip" title="New data indicator">NDI</span></abbr>) bit. This <abbr class="eh-abbreviation" title="New data indicator" lang="en"><span class="eh-tooltip" title="New data indicator">NDI</span></abbr> bit runs in a toggled operation, i.e. when its value changes or toggles compared to the previous value, this signifies a new data transmission request; otherwise, it requests retransmission. An <abbr class="eh-abbreviation" title="New data indicator" lang="en"><span class="eh-tooltip" title="New data indicator">NDI</span></abbr> bit that is set to “new data” when assigning the next uplink resource belonging to the same <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process number with the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling message can then be interpreted as acknowledgment of the previous data packet of this <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process. If the feedback is negative, i.e. NACK, the UL grant indicating resources for the next transmisson occasion contains an <abbr class="eh-abbreviation" title="New data indicator" lang="en"><span class="eh-tooltip" title="New data indicator">NDI</span></abbr> flag, that is not toggled compared to the value of the previous transmission. In summary, instead of transmitting an explicit <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr> or NACK, information that would require a specific physical control channel like the <abbr class="eh-abbreviation" title="Physical hybrid indicator channel" lang="en"><span class="eh-tooltip" title="Physical hybrid indicator channel">PHICH</span></abbr> in LTE, in 5G NR the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling information containing the new data indicator (<abbr class="eh-abbreviation" title="New data indicator" lang="en"><span class="eh-tooltip" title="New data indicator">NDI</span></abbr>) is used to request retransmission and indicate the new radio resource for retransmission. </p><p>Note that the <abbr class="eh-abbreviation" title="New data indicator" lang="en"><span class="eh-tooltip" title="New data indicator">NDI</span></abbr> bit is used in both directions. Assuming a UE sending explicitely a NACK can see in if the next received packet contains either the retransmisison as requested or a new data packet. In the latter case, the UE would assume the NACK as not been properly received and indicate this packet as lost to e.g. higher layers.</p>


<a id="page_1078_c1214"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:37%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-065__UL_HARQ_overview_v4_133f9ca21f.png" width="800" height="295" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-65 </span>UL <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> overview (e.g. retransmisssion case).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1078_c1215"></a><p>In 5G NR, <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> will be handled asynchronously to maintain flexibility on the physical layer and support multiple latency requests in the current <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows. This means there is no fixed time relation between transmission of DL and UL <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback information, and higher layers must indicate those timing aspects considering the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> request regarding latency and possible restrictions due to UE capability. Summarizing the flexibility regarding resource allocation in the time domain and the corresponding acknowledgments and optional retransmissions, a general model for time-related resource allocation is given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-066__Timing_relations.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-66 &lt;\/span&gt;Timing relations for UL\/DL resource allocation and HARQ operation \u2013 general model.&quot;}]">Fig. 2-66</a>.</p><p>While in EUTRAN such timing information has been set with constant parameters, i.e. the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> always allocates <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> resources 4 ms or four LTE subframes later, this timing information can be configured in 5G NR by higher layers or the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>. Clearly, there are optional restrictions due to e.g. UE processing time limitations or network operator settings.</p><p>Regarding <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback in DL data transfer, the network <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> layer specifies the time delay for a specific <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process to transmit <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback containing the <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK message on the UL. Later, this information is embedded in the DL assignment using <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-047__Downlink_assignment_principle_in_5G_NR.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-47 &lt;\/span&gt;Downlink assignment principle in 5G NR.&quot;}]">Fig. 2-47</a>). In other words, it is a two-step approach: First, the higher layers may configure various feedback times that are stored in a <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> set in the receiver and via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling indication, one value from those preconfigured timings is activated. </p>


<a id="page_1078_c1216"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:37%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-066__Timing_relations_070ede164d.png" width="800" height="296" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-66 </span>Timing relations for UL/DL resource allocation and <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> operation – general model.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1078_c1217"></a><p>The timing between DL assignment and the corresponding DL data transmission is indicated by a field in the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling message referring to a set of values that is preconfigured by the network <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> layer. It is shown as value K0 in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-064__DL_HARQ_overview.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-64 &lt;\/span&gt;DL HARQ overview.&quot;}]">Fig. 2-64</a>. The timing between UL assignment via the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> scheduling information and the corresponding UL data transmission on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> is indicated by a field in the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling message referring to a set of values that is preconfigured by the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>. A similar procedure is applied for the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> operation or <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK feedback timing regarding the DL data reception on the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>. The timing relation of a <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> transport block to its corresponding <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> acknowledgment is indicated by a field in the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> that takes its exact definition from a set of values that is preconfigured by higher layers. It is shown as value K1 in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-064__DL_HARQ_overview.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-64 &lt;\/span&gt;DL HARQ overview.&quot;}]">Fig. 2-64</a>. Finally, the higher layers also configure the corresponding timing relation between UL data transmission on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> and the corresponding DL <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback. Note that the timing of the retransmission in the uplink direction is asynchronous since it is piggybacked on the assignment of uplink resources and the toggled operation of the new data indicator.</p><p>The timing parameters for the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process are set by the gNB and depend on the UE processing capability (see <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>). Once a UE receives the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> scheduling information (the scheduled data on the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> may be on the same or successive slots), the exact slot offset is indicated via the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> parameter K0 which has a value range from 0 to 32 slots. Note that this already represents a difference compared to EUTRA, where <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling for downlink data has always been in the same subframe, and thus <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling and <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> data packets have been in the same subframe (just for reference: this does not refer to EUTRA LTE-M or NB-IoT machine type communications features where this rule has been modified). After data packet decoding and <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> checking, the UE sends UL <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr> feedback on the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> channel with the slot offset K1. In the current release of the specification, this values for the slot offset may range from 0 to 15 slots. This timer is given via the higher layer signaling <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>dl-DataToUL-ACK</em> and corresponds to the value of Slot-timing-value-K1. It represents critical timing since the gNB scheduler must take into consideration the time the UE needs to decode the DL data plus the time to switch to the UL and generate the <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr> message. This is especially important for TDD since there is only one frequency channel and the UE must switch between receive mode and transmit mode on the same channel. To avoid interference between the UL and DL, there is typically a guard time defined. <em>K1</em> also depends on the processing time capability of the UE, which is given as time value N<sub>1</sub>, corresponding to the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> decoding time and on the configuration of the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> resource. As shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-087__DM-RS-configuration_parameters_01.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-87 &lt;\/span&gt;PDSCH DMRS configuration parameters.&quot;}]">Fig. 1-87, page 112</a>, the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> may consist of additional symbols within one slot. In such a case, the UE requires more time for decoding. <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span> describes the processing time for HARQ-ACK information that follows <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> reception given as:</p><p><em>T</em><sub>sproc, 1</sub> = (<em>N</em><sub class="eh-text__number">1</sub> + <em>d</em><sub class="eh-text__number">1,1</sub>)(2048 + 144) ∙ ϰ2<sup class="eh-text__letter">–μ</sup> ∙ <em>T</em><sub>c</sub></p><p>where <em>d</em><sub class="eh-text__number">1,1</sub> is either 0 or 1 depending on whether HARQ-ACK is sent on the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> or <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>, and additionally depends on the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> mapping type A or B. <em>N</em><sub class="eh-text__number">1</sub> must be considered as a UE processing capability, but it also depends on the configuration of the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> signals within one slot. The values of <em>N</em><sub class="eh-text__number">1</sub> can be a minimum of 3 symbols or a maximum of 24 symbols (see table in <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span> for more details).</p><p>K2 is the period or slot offset required from UL grant to UL transmission, which in turn depends on the UE processing capability given as the value <em>N</em><sub class="eh-text__number">2</sub>, corresponding to the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> preparation time, based on the table definition in <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>. In the current release of the specification, the slot offset <em>K2</em> can assume values in the range from 0 to 32. If this parameter is absent, default values are defined based on the <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr>.</p><p>All parameters are defined in slots and are therefore independent of the numerology used in the current bandwidth part. The design of the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> timing is particularly important for services which require low latency. For example, in the <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> case, the gNB may stipulate very stringent <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> timing, especially for the timers K1 and K2 which may be within the same slot with retransmission within the next slot.</p><p>5G NR <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> operation supports additionally the possibility of <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK bundling operation, i.e. in case of dual connectivity, carrier aggregation or multiple layer <abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr>, higher layers may configure a feedback mechanism <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> that allows a bundling operation or multiplexing/simultaneous transmission of feedback or the omission of feedback. See the specification <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span> for further details. In cooperation with the channel coding procedures described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-119__Code_block_group-based_HARQ_operation.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-119 &lt;\/span&gt;Code block group-based HARQ operation in 5G NR.&quot;}]">Fig. 1-119, page 151</a>, <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback also supports code block specific feedback. This introduces segmentation of a transport block into smaller code blocks and bundling into a code block group for <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> codebook based feedback. Chapter <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1082" class="eh-link eh-link--page">2.2.9 Uplink control information (UCI), page 340</a> describing the <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> feedback procedure contains further details on <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> codebook based feedback.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1079" data-prevpid="1078" data-nextpid="1080" data-chapter="2.2.6 Uplink scheduling request and buffer status reporting" id="page_1079">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.2.6 Uplink scheduling request and buffer status reporting</h3>
						
<a id="page_1079_c1218"></a><p>On the UL, the UE needs to request resources to transmit as soon as data from a higher layer application is available. In general, there are two distinct operations for requesting a data resource on the uplink depending on the current UE state that can be either <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>_IDLE, <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>_INACTIVE or <span class="eh-text--nowrap">RRC_CONNECTED</span>. When in <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>_IDLE mode, the UE requests a data connection first via the random access procedure as described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1061" class="eh-link eh-link--page">2.1 Overall access procedure for NSA mode, page 219</a>. When already in the <span class="eh-text--nowrap">RRC_CONNECTED</span> state, the UE can request uplink resources via transmission of a scheduling request (<abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr>), <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-067__Scheduling_request_procedure.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-67 &lt;\/span&gt;Scheduling request procedure.&quot;}]">Fig. 2-67, page 327</a>. The main objective of the connection setup procedure is to establish a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1074_c1134" class="eh-link eh-link--page eh-link--ce">PDU session, page 282</a>) with related <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows. Contemplating the protocol stack, described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1083" class="eh-link eh-link--page">2.2.10 Data flow through 5G NR protocol layers, page 349</a>, such a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session enables data transfer bearers at <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> level and maps them one to one to logical channels at <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> level. The underlying <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> protocol is in charge of multiplexing data for all of these logical channels into one single data packet (<abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>) called a transport block, to be transmitted on the physical layer. The size of the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> is given by the UL grant assigned to the UE and is known as the transport block size (<abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr>). See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077_c1185" class="eh-link eh-link--page eh-link--ce">Transport block size calculation, page 309</a> for details about the <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> calculation. In the time domain, the duration of one <abbr class="eh-abbreviation" title="Transport block" lang="en"><span class="eh-tooltip" title="Transport block">TB</span></abbr> transmission is called <abbr class="eh-abbreviation" title="Transmission time interval" lang="en"><span class="eh-tooltip" title="Transmission time interval">TTI</span></abbr> and in 5G NR its values span from multiple OFDM symbols to multiple slots (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-059__Scheduling_in_time_domain_examples.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-59 &lt;\/span&gt;Scheduling in time domain examples: mini-slot or slot aggregation.&quot;}]">Fig. 2-59, page 313</a>).</p><p>The reason why the UE has different logical channels is that every channel can be handled from one <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entity in different ways. There are three modes for <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> operation: transparent mode (<abbr class="eh-abbreviation" title="Transparent mode" lang="en"><span class="eh-tooltip" title="Transparent mode">TM</span></abbr>), acknowledged mode (<abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr>) and unacknowledged mode (<abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr>). These three modes respond to different reliability levels for the data flow in the logical channel. In case of signaling data, for example, the need to be secure necessitates an additional <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> acknowledgement procedure <abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr> which implies a status report and retransmission procedure performed on the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> level or logical channel (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1083_c1282" class="eh-link eh-link--page eh-link--ce">Radio link control protocol (RLC), page 356</a> and <span class="eh-hint" title="3GPP TS 38.322: NR; Radio Link Control (RLC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.322: NR; Radio Link Control (RLC) protocol specification">TS 38.322</span></span>). When combined with <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> operation on the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer we have two separate retransmission methods to guarantee better reliability. In addition, each logical channel is associated with a transmission profile represented by the allowed <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> and maximum <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> duration. For example, the network might map a <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> service application to a logical channel and to achieve low latency for the user data configure only a high <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> and short transmission time on the UL, i.e. a mini-slot with two symbols. These parameters have an essential influence on the decision on <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> multiplexing by the logical channel prioritization entity. This entity performs multiplexing of logical channels with different priority levels to be conveyed on the same UL grant on the physical layer.</p>


<a id="page_1079_c1219"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:36%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-067__Scheduling_request_procedure_4d39556766.png" width="800" height="286" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-67 </span>Scheduling request procedure.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1079_c1220"></a><p>The <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> protocol entity, described in section <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1083_c1305" class="eh-link eh-link--page eh-link--ce">Medium access control (MAC) protocol, page 367</a> can be configured with zero, one or more <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> configurations which consist of a set of <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> resources where the UE may send <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> if needed and these <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> resources may span various BWPs and cells in consideration of <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> scenarios. There is a correspondence between a logical channel and the <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> resource. If a logical channel is not able to transmit at a sufficient rate on the currently assigned physical resource or no uplink resource is available, the UE triggers the transmission of a scheduling request (<abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr>). When the UE is requesting a resource for that specific logical channel, it uses the <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> message sent over the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>. A logical channel is associated with a specific <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> configuration per <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>. The higher layer <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> uses the SchedulingRequestConfig <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> to configure the scheduling request messages. <em>SchedulingRequestConfig</em> contains the occasion when the <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> request transmission is permitted, a maximum number of <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> transmissions and the format for <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> transmission. The general procedure for <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> requests is shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-067__Scheduling_request_procedure.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-67 &lt;\/span&gt;Scheduling request procedure.&quot;}]">Fig. 2-67</a>. Only <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> resources on a <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> which is active at the time of <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> transmission are considered valid.</p><p>Since each logical channel is associated with a specific <em>schedulingRequestId</em><em></em>per cell and <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>, the network knows which logical channel is requesting the UL grant and can assign specific UL resources according to the logical channel transmission profile. In fact, each logical channel is associated with three transmission parameters:</p><ul class="eh-list eh-list--line"><li>Allowed subcarrier spacing</li><li>ServingCell information</li><li>Timing information, maxPUSCH-Duration</li></ul><p>The UE may transmit the <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> as soon as it has pending data in the applicable buffer. Since the resources for the <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> are statically configured during <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> dedicated configuration, the UE is able to use this <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> resource for <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr>. We will now provide two examples to demonstrate the association with the logical channel and <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> services. First, we will consider a case where a logical channel is associated with the <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> service. Data must be scheduled with low latency on any <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr>. To ensure a short <abbr class="eh-abbreviation" title="Round trip time" lang="en"><span class="eh-tooltip" title="Round trip time">RTT</span></abbr>, the transmit duration for one data packet must have low “transmission time”, i.e. a <abbr class="eh-abbreviation" title="Transmission time interval" lang="en"><span class="eh-tooltip" title="Transmission time interval">TTI</span></abbr> which is influenced by the <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>maxPUSCH-Duration</em>. This parameter can be configured per uplink logical channel and if it is configured, <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> SDUs can only be transmitted using uplink grants that result in a <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> duration shorter than or equal to the duration indicated by this field (<span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span>). In the second example, a logical channel is associated with another service such as <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr> file transfer which does not require stringent <abbr class="eh-abbreviation" title="Round trip time" lang="en"><span class="eh-tooltip" title="Round trip time">RTT</span></abbr>. It will be restricted to UL grant with a long transmission time. To prevent an <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr> service with high priority from using UL grant for a specific <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> service, the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer within the UE performs two prioritization steps:</p><p>1. It considers whether the logical channel is allowed to run on the current granted transmission resources</p><p>2. It considers the priority and multiplexing policies given by parameters such as <abbr class="eh-abbreviation" title="Prioritized bit rate" lang="en"><span class="eh-tooltip" title="Prioritized bit rate">PBR</span></abbr>, <abbr class="eh-abbreviation" title="Bucket size duration" lang="en"><span class="eh-tooltip" title="Bucket size duration">BSD</span></abbr> as defined in <span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span> and described in section <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1083_c1305" class="eh-link eh-link--page eh-link--ce">Medium access control (MAC) protocol, page 367</a>.</p><p>The parameter <em>allowedServingCell</em> is included to signal which logical channel may be transmitted over which serving cell. For example, in case of bearer split applied in dual connectivity scenarios, where a single <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> bearer is split between two logical channels running on different cells or even in different carrier aggregation scenarios, the network can force logical channel transmission on a specific carrier (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-014__Radiobearer_types_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-14 &lt;\/span&gt;Radio bearer types in LTE\/NR dual connectivity (EN-DC).&quot;}]">Fig. 1-14, page 32</a>).</p><p>However, if the gNB is not able to respond to the request, e.g. due to network overloading, then the UE must stop sending the <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> for that particular <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> configuration identified with <em>sr-ConfigIndex</em> on the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> if the maximum number of requests <em>sr-TransMax</em> is reached, or delay the next <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> transmission with the value of <em>sr-ProhibitTimer</em> (<span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span>). If there are no <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> resources configured and available, the UE must always start the random access procedure if it does not have allocated resources to transmit on the uplink.</p><p>In addition to the possibility to request new resources via <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr>, there is inband control information incorporated into the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer that provides status information about the pending data. A UE uses the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer control message formats as inband signaling to report the pending data amount given as a buffer status report (<abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr>) and information about the transmit power reserves as the power headroom (<abbr class="eh-abbreviation" title="Power headroom" lang="en"><span class="eh-tooltip" title="Power headroom">PH</span></abbr>). The <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity in an end-user device determines the amount of UL data that is pending on an established logical channel and reports this amount to the network via <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr> inband reporting of buffer status reports (<abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr>). These <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> can be regular <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> reports, periodic <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> reports or padding <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> reports. Further details on <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> reporting are explained in the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer description in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-098__Buffer_status_reporting.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-98 &lt;\/span&gt;Buffer status reporting with MAC CE \u2013 format and structure.&quot;}]">Fig. 2-98, page 375</a>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1080" data-prevpid="1079" data-nextpid="1081" data-chapter="2.2.7 UL grant reception or UL assignment" id="page_1080">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.2.7 UL grant reception or UL assignment</h3>
						
<a id="page_1080_c1221"></a><p>The assignment of physical resources in the uplink direction generally follows the procedure for downlink assignment described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076" class="eh-link eh-link--page">2.2.3 DL resource assignment, page 295</a>. The UE monitors the downlink control channel <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> that will send <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling information for the uplink allocation. The attached <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> of the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling message is scrambled with a specific identifier <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr>. There are several identity values <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> indicating the purpose of the scheduling message content and the addressee of the scheduling information (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076_c1153" class="eh-link eh-link--page eh-link--ce">Radio network temporary identifier (RNTI), page 298</a>). The uplink assignment is valid for two types of physical channels: <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> for data assignment and <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> for control information assignment.</p><p>5G NR supports three types of uplink assignment depending on the physical channel and configurable by the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> layer: periodic, aperiodic and semi-persistent. Periodic assignment mainly applies to control information reporting, e.g. <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reports, and higher layers configure the physical resource for such transmissions that can be either <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> or control information multiplexed with user data on <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. Semi-persistent scheduling is a method in which higher layers can configure semi-static physical resources in the time and frequency domain, but the usage is then triggered, e.g. by <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling. Semi-persistent scheduling is a method that is also used for data transmission to fulfill certain <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> requirements such as guaranteed bit rate or delay aspects e.g. for a voice call. It may be used to allocate a kind of constant bit rate and also guarantee a kind of static latency. In simplified terms, this represents a kind of attempt to emulate circuit-switched behavior in a pure packet-switched network. Aperiodic transmission is more or less the use case for packet-switched applications. Whenever higher layers trigger the transmission of data, the assignment has to be performed. This will be done via scheduling information sent on the downlink <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> and contains the resource allocation information, described in 5G NR as a configured grant.</p><p>To support the network in such scheduling decisions, the UE may send scheduling requests (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1079" class="eh-link eh-link--page">2.2.6 Uplink scheduling request and buffer status reporting, page 326</a>). Chapter <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1083" class="eh-link eh-link--page">2.2.10 Data flow through 5G NR protocol layers, page 349</a> provides more information about the scheduling principles. When discussing the uplink, the following physical channels and signals are involved:</p><ul class="eh-list eh-list--line"><li><abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> for random access. The assignment of a random access resource does not follow the UL assignment scheme described here. Generally, the random access is open to every user, except in cases where the cell indicates a barred status via a system information broadcast. The <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> access rules and allocation of <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> resources are broadcasted via system information (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1070" class="eh-link eh-link--page">2.1.4 Random access procedure in 5G NR, page 250</a></li><li><abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> for uplink control information (<abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr>). Transmission of the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> can be periodic, semi-persistent or aperiodic. The allocation of <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> resources is configurable by higher layers, i.e. <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> IEs <em>PUCCH-config</em> plus <em>PUCCH-configcommon</em>, and they are allocated via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling on the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr></li><li><abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> for sounding reference signal transmission. The resources for <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> are configured by higher layers, i.e. <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>SRS-config</em> and the <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> resource assignment can also be scheduled in a periodic, aperiodic or semi-persistent manner. See also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1035" class="eh-link eh-link--page">1.2.5.6 Physical signals in 5G NR, page 110</a> for further details</li><li><abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> for uplink data transfer. The resources for the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> are scheduled via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling on the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr></li></ul><p>The uplink resources on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> are scheduled via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> sent on the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> and using the identifiers <abbr class="eh-abbreviation" title="Cell RNTI" lang="en"><span class="eh-tooltip" title="Cell RNTI">C-RNTI</span></abbr> for aperiodic and <abbr class="eh-abbreviation" title="Configured scheduling RNTI" lang="en"><span class="eh-tooltip" title="Configured scheduling RNTI">CS-RNTI</span></abbr> for semi-persistent scheduling. In addition there can be the optional identifier <abbr class="eh-abbreviation" title="Modulation and coding scheme C-RNTI" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme C-RNTI">MCS-C-RNTI</span></abbr> for aperiodic <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> scheduling with specific modulation and coding scheme restrictions or <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> table selections (<span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>).</p><p>In general, 5G NR allows the UE to send and receive multiple physical channels and physical signals simultaneously depending on its capabilities and service requirements. Since there are various physical channels that can coincide, a certain nomenclature was introduced in <span class="eh-hint" title="3GPP TS 38.202: NR; Services provided by the physical layer" lang="en"><span class="eh-tooltip" title="3GPP TS 38.202: NR; Services provided by the physical layer">TS 38.202</span></span> to indicate the maximum number of channels that can be sent simultaneously along with the possible combinations. These combinations are described within two tables indicating the uplink transmission types and the transmission type configurations.</p><ul class="eh-list eh-list--line"><li><strong>p</strong> is the number of uplink carriers configured for the UE on which physical channels can be transmitted linked to the <abbr class="eh-abbreviation" title="Carrier aggregation" lang="en"><span class="eh-tooltip" title="Carrier aggregation">CA</span></abbr> functionality</li><li><strong>p'</strong> is the number of uplink carriers configured for the UE on which <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> can be transmitted</li><li><strong>q</strong> is the number of downlink carriers configured for the UE</li><li><strong>j</strong> is the number of cell groups configured for the UE, linked to the <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> functionality</li><li><strong>k</strong> is the number of <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> groups configured for the UE</li></ul><p>The table in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1080_c1222\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table040\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Transmission type&lt;\/th&gt;&lt;th&gt;Physical channel or SRS&lt;\/th&gt;&lt;th&gt;Associated transport channel&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;A&lt;\/td&gt;&lt;td&gt;PRACH&lt;\/td&gt;&lt;td&gt;RACH&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B&lt;\/td&gt;&lt;td&gt;PUCCH&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;C&lt;\/td&gt;&lt;td&gt;PUSCH&lt;\/td&gt;&lt;td&gt;UL-SCH&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;D&lt;\/td&gt;&lt;td&gt;SRS&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-68 &lt;\/span&gt;Uplink transmission types.&lt;\/p&gt;\n\n&quot;}">Fig. 2-68</a> defines the possible uplink transmission types. In other words, it describes the type of physical channel that is sent in combination with a respective transport channel. The table in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1080_c1223\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table041\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;UE capability&lt;\/th&gt;&lt;th&gt;Supported combinations&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td rowspan=\&quot;9\&quot;&gt;No direct UE categories in 5G NR, but the UE can exchange its capability with the network&lt;\/td&gt;&lt;td&gt;j \u00d7 A&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;k \u00d7 B&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;p \u00d7 C&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;p&#39; \u00d7 D&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;j* \u00d7 A + k* \u00d7 B&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;j* \u00d7 A + p* \u00d7 C&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;j* \u00d7 A + p&#39;* \u00d7 D&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;k* \u00d7 B + p&#39;* \u00d7 D&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;p* \u00d7 C + p&#39;* \u00d7 D&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-69 &lt;\/span&gt;Uplink transmission type configurations.&lt;\/p&gt;\n\n&quot;}">Fig. 2-69</a> indicates the possible combinations of these transmission types depending on the UE capability and enumerates how many can be sent simultaneously. At first glance, the reader may observe that a UE can simultaneously transmit multiple <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> on multiple carriers (here, given as component carriers) in case of carrier aggregation scenarios, but permission is lacking to simultaneously transmit multiple <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> on multiple cell groups, indicating the situation of dual connectivity in the current release of the specification.</p>


<a id="page_1080_c1222"></a><div class="table-scroll"><table id="table040" class="eh-table eh-table--alternate"><colgroup><col><col><col></colgroup><thead><tr><th>Transmission type</th><th>Physical channel or SRS</th><th>Associated transport channel</th></tr></thead><tbody><tr><td>A</td><td>PRACH</td><td>RACH</td></tr><tr><td>B</td><td>PUCCH</td><td>N/A</td></tr><tr><td>C</td><td>PUSCH</td><td>UL-SCH</td></tr><tr><td>D</td><td>SRS</td><td>N/A</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-68 </span>Uplink transmission types.</p>


<a id="page_1080_c1223"></a><div class="table-scroll"><table id="table041" class="eh-table eh-table--alternate"><colgroup><col><col></colgroup><thead><tr><th>UE capability</th><th>Supported combinations</th></tr></thead><tbody><tr><td rowspan="9">No direct UE categories in 5G NR, but the UE can exchange its capability with the network</td><td>j × A</td></tr><tr><td>k × B</td></tr><tr><td>p × C</td></tr><tr><td>p' × D</td></tr><tr><td>j* × A + k* × B</td></tr><tr><td>j* × A + p* × C</td></tr><tr><td>j* × A + p'* × D</td></tr><tr><td>k* × B + p'* × D</td></tr><tr><td>p* × C + p'* × D</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-69 </span>Uplink transmission type configurations.</p>


<a id="page_1080_c1224"></a><p>The above combinations indicate the simultaneous transmission of multiple physical channels, but only combinations with <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> or <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> are allowed in conjunction with any other physical channel. The symbol notation for the maximum number is given as j* ≤ j, p* ≤ p, k* ≤ k and p'* ≤ p'.</p>


<a id="page_1080_c1225"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:34%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-070__Two_examples_of_UL_channel_combination_4f6fc1cd3e.png" width="800" height="267" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-70 </span>Two examples of UL channel combination: UL carrier aggregation and UL carrier aggregation + <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> dual connectivity.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1080_c1226"></a><p>The physical resource on the uplink is assigned via the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> sending <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> control information. In 5G NR, there are two possible <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> formats to indicate the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> resource: <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_0 and <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_1. Note that some of the control information content for uplink resource assignment is similar to the control information used for downlink resource assignment. This section only contains a brief introduction. See also the discussion on downlink resource assignment in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076" class="eh-link eh-link--page">2.2.3 DL resource assignment, page 295</a>.</p>


<a id="page_1080_c1227"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_0 for scheduling <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> in one cell
			</p>


<a id="page_1080_c1228"></a><p><abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_0 is used for scheduling <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> in one DL cell. Its <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> is scrambled with <abbr class="eh-abbreviation" title="Cell RNTI" lang="en"><span class="eh-tooltip" title="Cell RNTI">C-RNTI</span></abbr>, <abbr class="eh-abbreviation" title="Configured scheduling RNTI" lang="en"><span class="eh-tooltip" title="Configured scheduling RNTI">CS-RNTI</span></abbr> or <abbr class="eh-abbreviation" title="Modulation and coding scheme C-RNTI" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme C-RNTI">MCS-C-RNTI</span></abbr>. The content of <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_0 can be described as follows:</p><ul class="eh-list eh-list--line"><li>Identifier for <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> formats – 1 bit. This bit is used to distinguish between <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_x for uplink allocation and format 1_x for downlink allocation. If bit = 1, it is a downlink allocation and otherwise uplink</li><li>Frequency domain resource assignment indicating the physical resource on the uplink assigned to the UE (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077_c1195" class="eh-link eh-link--page eh-link--ce">Resource assignment in the frequency domain, page 314</a>)</li><li>Resource allocation in the time domain (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077_c1190" class="eh-link eh-link--page eh-link--ce">Resource assignment in the time domain, page 312</a>)</li><li>Frequency hopping flag</li><li>Modulation and coding schemes, indicating the used modulation scheme and the puncturing rate or code rate. This is given as an integer that refers to a table from <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span> indicating the code rate and modulation order. The <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> layer can configure which table is to be selected, i.e. the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> parameter <em>mcs-Table</em></li><li>New data indicator – One bit that toggles from one allocation to the next for each <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process, to indicate that the transport block that is pending for transmission should be a new data block; otherwise, this bit indicates a retransmission request. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1073_c1117" class="eh-link eh-link--page eh-link--ce">HARQ operation, page 276</a>. The <abbr class="eh-abbreviation" title="New data indicator" lang="en"><span class="eh-tooltip" title="New data indicator">NDI</span></abbr> bit remains the same from one allocation to the next for this <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process which replaces the direct transmission of <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK feedback used in LTE on a dedicated channel (<abbr class="eh-abbreviation" title="Physical hybrid indicator channel" lang="en"><span class="eh-tooltip" title="Physical hybrid indicator channel">PHICH</span></abbr>)</li><li>Redundancy version – Indicates the puncturing scheme to be applied for the uplink transmission. Especially for retransmission cases, this allows the network to request either a changed puncturing scheme allowing incremental redundancy or identical retransmission allowing chase combining </li><li><abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process number – Indicates the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process so the UE may use soft combining with previously received transport blocks (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1073_c1117" class="eh-link eh-link--page eh-link--ce">HARQ operation, page 276</a> for details)</li><li><abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> command for scheduled <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> – For the power control mechanism valid for the uplink data channel <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1036" class="eh-link eh-link--page">1.2.5.7 Transmit power allocation, page 121</a> for details on uplink power control</li><li>Padding bits if required</li><li>UL/<abbr class="eh-abbreviation" title="Supplementary uplink" lang="en"><span class="eh-tooltip" title="Supplementary uplink">SUL</span></abbr> indicator – The UE may use a carrier as supplementary uplink only; the higher layer <em>pusch-config</em> together with this bit indicates whether the assignment is valid for the UL or <abbr class="eh-abbreviation" title="Supplementary uplink" lang="en"><span class="eh-tooltip" title="Supplementary uplink">SUL</span></abbr> resource</li></ul><a id="page_1080_c1229"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_1 for scheduling <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> in one cell
			</p>


<a id="page_1080_c1230"></a><p><abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_1 is used for scheduling <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> in one DL cell. Its <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> is scrambled with <abbr class="eh-abbreviation" title="Cell RNTI" lang="en"><span class="eh-tooltip" title="Cell RNTI">C-RNTI</span></abbr>, <abbr class="eh-abbreviation" title="Configured scheduling RNTI" lang="en"><span class="eh-tooltip" title="Configured scheduling RNTI">CS-RNTI</span></abbr> or <abbr class="eh-abbreviation" title="Modulation and coding scheme C-RNTI" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme C-RNTI">MCS-C-RNTI</span></abbr>. Many content details of <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>  format 0_1 are identical to the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_0 or <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_x, for the sake of completeness, they are presented here again, but in a shortened way. Different to format 0_0 for uplink assignment, format 0_1 allows more configuration flexibility in the allocation, e.g. it is used for UL <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr>, for <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> switching and for codebook feedback scheduling. The content of <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_1 can be described as follows:</p><ul class="eh-list eh-list--line"><li>Identifier for <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> formats – 1 bit. This bit is used to distinguish between <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_x for uplink allocation and format1_x for downlink allocation. If bit = 1, it is downlink allocation and otherwise uplink</li><li>Carrier indicator – If carrier aggregation is applied, this field allows cross-carrier scheduling of UL resources</li><li>UL/<abbr class="eh-abbreviation" title="Supplementary uplink" lang="en"><span class="eh-tooltip" title="Supplementary uplink">SUL</span></abbr> indicator – The UE may use a carrier as supplementary uplink only; the higher layer <em>pusch-config</em> together with this bit indicates whether the assignment is valid for the UL or <abbr class="eh-abbreviation" title="Supplementary uplink" lang="en"><span class="eh-tooltip" title="Supplementary uplink">SUL</span></abbr> resource</li><li>Bandwidth part indicator – To allow switching of BWPs (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-154__Bandwidth_part_switching.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-154 &lt;\/span&gt;Bandwidth part switching.&quot;}]">Fig. 1-154, page 185</a>). Note that the feature <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> switching via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling is optional for the UE. Thus, this field may be ignored</li><li>Frequency domain resource assignment indicating the physical resource on the uplink assigned to the UE (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077_c1195" class="eh-link eh-link--page eh-link--ce">Resource assignment in the frequency domain, page 314</a>)</li><li>Resource allocation in the time domain (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077_c1190" class="eh-link eh-link--page eh-link--ce">Resource assignment in the time domain, page 312</a>)</li><li>Frequency hopping flag</li><li>Modulation and coding scheme indicating the used modulation scheme and the puncturing rate or code rate</li><li>New data indicator – One bit that toggles if the transport block is a new data block for this <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process; otherwise not toggling this bit indicates a retransmission request</li><li>Redundancy version – Indicates the puncturing scheme to be applied, especially when retransmission, a changed puncturing scheme does allow incremental redundancy for higher decoding efficiency</li><li><abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process number – Indicates the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process so the UE may use soft combining with previously received transport blocks (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1073_c1117" class="eh-link eh-link--page eh-link--ce">HARQ operation, page 276</a> for details)</li><li>1st downlink assignment index for dynamic or semi-static HARQ-ACK codebook</li><li>2nd downlink assignment index for dynamic HARQ-ACK codebook with two HARQ-ACK sub-codebooks; ignored otherwise</li><li><abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> command for scheduled <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> – For power control the uplink data channel, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1036" class="eh-link eh-link--page">1.2.5.7 Transmit power allocation, page 121</a> for further details.</li><li><abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> resource indicator – To indicate sounding reference signal resources in conjunction with higher layer configuration</li><li>Precoding information and number of layers – Indicates the possibility of <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> on the uplink and the precoding matrix. Influenced by higher layer parameters such as <em>txConfig</em> to enable or disable <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> operation on the UL, <em>maxRank</em> indicating the number of transmission streams, and <em>codebookSubset</em> for possible restriction of precoding matrix values</li><li>Antenna ports – To select the antenna port for reference signal transmission, e.g. <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr></li><li><abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> request – To trigger sounding reference signal transmission</li><li><abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> request – To trigger <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reports in case of aperiodic scheduling</li><li><abbr class="eh-abbreviation" title="Code block group" lang="en"><span class="eh-tooltip" title="Code block group">CBG</span></abbr> transmission information – Indicates the number of code block groups per transport block</li><li><abbr class="eh-abbreviation" title="Phase tracking reference signal" lang="en"><span class="eh-tooltip" title="Phase tracking reference signal">PTRS</span></abbr> and <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> association – To configure the transmission of phase tracking reference signals on the uplink (see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1035" class="eh-link eh-link--page">1.2.5.6 Physical signals in 5G NR, page 110</a>)</li></ul><p>Note that in the uplink direction, virtual to physical resource block mapping is performed in the non-interleaved mapping only; the interleaved mapping is applied in the downlink direction only (see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-036__VRB_to_PRB_mapping.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-36 &lt;\/span&gt;VRB to PRB mapping example (assumption: total number of bundles = 8).&quot;}]">Fig. 2-36, page 268</a>).</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1081" data-prevpid="1080" data-nextpid="1082" data-chapter="2.2.8 UL data transmission" id="page_1081">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.2.8 UL data transmission</h3>
						
<a id="page_1081_c1231"></a><p>The 5G NR uplink is also based on a packet switched connection and the shared physical channel principle to provide greatest possible flexibility. The two channels involved in uplink data transmission are the physical channel <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>, which applies the shared transmission to a physical data channel, and the transport channel <abbr class="eh-abbreviation" title="Uplink shared channel" lang="en"><span class="eh-tooltip" title="Uplink shared channel">UL-SCH</span></abbr>, which uses the concept of transport formats to introduce <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> aspects on the lower layers. The <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> is based on a dynamic allocation of RF resources in time and frequency domain and uses a flexible modulation and coding scheme (<abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr>). The <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> control channel uses <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> messages for scheduling the RF resources and modulation and coding schemes. To enable the gNB to obtain better channel status information, the UE sends uplink control information (<abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr>) to the network, either on a separate physical control channel <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> or multiplexed within user data on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1082" class="eh-link eh-link--page">2.2.9 Uplink control information (UCI), page 340</a> for details on the uplink feedback.</p><p>The gNB provides a dynamic scheduler in its <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer to guarantee the greatest possible flexibility and efficiency in scheduling uplink resources on the physical layer. In addition, the UE may send scheduling request information to obtain physical resource assignments. The uplink scheduler assigns resources between UEs based on shared channel operation, taking into account the radio conditions at the UE by means of the adaptive modulation and coding principle and the higher layer configured <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow. To support the gNB scheduler with making the proper <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> selection, the UE sends measurement reports containing information about the radio network field strength and quality, like e.g. the <abbr class="eh-abbreviation" title="CSI reference signal received power" lang="en"><span class="eh-tooltip" title="CSI reference signal received power">CSI-RSRP</span></abbr> (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-074__Uplink_channel_information.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-74 &lt;\/span&gt;Uplink channel information (UCI) \u2013 general model overview.&quot;}]">Fig. 2-74, page 342</a>).</p><p>The measurements reported by the UE are configured by the higher layer <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>. The scheduler assigns radio resources in time units of slots (e.g. one mini-slot, one slot or multiple slots). In the frequency domain, resource assignment consists of radio block granularity in the active <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> bandwidth part. The UE identifies the assigned resources by receiving a scheduling control information <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> on the physical control channel containing a specific identifier <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr>. As a minor difference compared to the downlink modulation schemes, the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> on the uplink supports (in addition to the modulation schemes <abbr class="eh-abbreviation" title="Quadrature phase shift keying" lang="en"><span class="eh-tooltip" title="Quadrature phase shift keying">QPSK</span></abbr>, 16QAM, 64QAM and 256QAM) a π/2-BPSK scheme. This π/2-BPSK scheme is allowed when uplink transform precoding is enabled, i.e. the DFT-s-OFDMA scheme has been selected (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1038_c881" class="eh-link eh-link--page eh-link--ce">DFT-s-OFDMA signal generation, page 166</a>) and if there is only one transmission layer activated. Thus, we may understand this modulation scheme for use in situations with smaller data packets in the uplink direction or where reliability is required and the network schedules a very robust modulation order and sacrifices a higher data rate. The complement number π/2 to a classic <abbr class="eh-abbreviation" title="Binary phase shift keying" lang="en"><span class="eh-tooltip" title="Binary phase shift keying">BPSK</span></abbr> modulation scheme produces a phase shift of 90 degrees between two consecutive modulation symbols and avoids a possible loss of tracking in a phase locked loop synthesizer in case of long sequences of ones or zeros. </p><p>Like in the downlink direction, on the uplink the transport block sizes are also no longer indicated directly, but must be calculated by the UE. The same happens with the allocation in the time domain, offering much greater flexibility compared to LTE. Besides measurement reports on physical layer conditions such as the <abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr>, <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> or signal quality, additional inband measurement reports on higher layers support the scheduler decision-making process:</p><ul class="eh-list eh-list--line"><li>Uplink buffer status reports (measuring the data buffered in the logical channel queues in the UE) are used to provide support for QoS-aware packet scheduling</li><li>Power headroom reports (<abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr>), measuring the difference between the nominal UE maximum transmit power and the estimated power for uplink transmission, are used to provide support for power-aware packet scheduling.</li></ul><p>Section <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1083_c1305" class="eh-link eh-link--page eh-link--ce">Medium access control (MAC) protocol, page 367</a> provides more details on those <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer inband reporting procedures</p>


<a id="page_1081_c1232"></a><p class="eh-headline-207 ">
				Uplink data rate
			</p>


<a id="page_1081_c1233"></a><p>The maximum data rate in 5G NR is calculated independently for the uplink and downlink directions using the formula given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-055__Data_rate_calculation_neu.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-55 &lt;\/span&gt;Data rate calculation.&quot;}]">Fig. 2-55</a> based on scheduling parameters such as the bandwidth, number of layers or modulation scheme, to name a few of the relevant parameters. Depending on the UE capabilities that influence the <em>scaling factor f </em>in the mentioned formula and the higher layer configuration of radio resources, typically the maximum achievable data rates on the uplink and downlink are different. In addition, the maximum data rate is restricted by the UE capability parameter total layer 2 buffer size, which is defined in <span class="eh-hint" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities" lang="en"><span class="eh-tooltip" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities">TS 38.306</span></span> as the sum of the number of bytes that the UE is capable of storing in the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> transmission windows and <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> reception and reordering windows for all radio bearers.</p>


<a id="page_1081_c1234"></a><p class="eh-headline-207 ">
				Transport block size calculation
			</p>


<a id="page_1081_c1235"></a><p>The 5G NR uplink allows two distinct waveforms, OFDMA and DFT-s-OFDMA, which is also described as transform precoding. Note, that the waveform DFT-s-OFMDA, does only allow one transmission layer and optionally allows the <span class="eh-text--nowrap">π/2-BPSK</span> modulation scheme. Thus, the higher layer parameter <em>transformPrecoder</em> in the <em>PUSCH-Config</em> information element has to be checked to know which scheme is to be used. If transform precoding is disabled, the transport block size calculation uses a similar mechanism as the downlink direction (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077_c1185" class="eh-link eh-link--page eh-link--ce">Transport block size calculation, page 309</a>). An <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> indicates the modulation and coding scheme with the aid of three different tables. The higher layer parameter <em>mcs-Table</em> in <em>PUSCH-Config</em> (or <em>ConfiguredGrantConfig</em> if semi-persistent scheduling is applied) indicates whether 256QAM is possible and thus which of the three different tables has to be used (<span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>). If transform precoding is used, the higher layer parameter <em>mcs-</em><em>TableTransformPrecoder</em> indicating whether 256QAM is possible or not points to two additional <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> tables in <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span> also containing the lower data rate modulation scheme π/2-BPSK. Calculation of the transport block size (<abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr>) in the uplink direction is similar to calculation of the <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> in the downlink direction. The only difference is that the parameter <em>xOverhead</em> which indicates a signaling overhead may be different for each direction.</p>


<a id="page_1081_c1236"></a><p class="eh-headline-207 ">
				Resource assignment in the time domain
			</p>


<a id="page_1081_c1237"></a><p>5G NR uplink assignment needs to support great flexibility for allocation of physical resources in the time domain in order to support a multitude of application scenarios such as <abbr class="eh-abbreviation" title="Enhanced mobile broadband" lang="en"><span class="eh-tooltip" title="Enhanced mobile broadband">eMBB</span></abbr> or <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr>. The procedure for resource assignment in the uplink direction is very similar to the downlink procedure as described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077_c1190" class="eh-link eh-link--page eh-link--ce">Resource assignment in the time domain, page 312</a>. The control information <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> indicates a <em>time domain resource assignment</em> field. This time assignment is a row index to a table that provides further information like the slot offset K2, the start and length indicator value (<abbr class="eh-abbreviation" title="Start and length indicator value" lang="en"><span class="eh-tooltip" title="Start and length indicator value">SLIV</span></abbr>) and the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> mapping type A or B, indicating the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> symbol mapping (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-087__DM-RS-configuration_parameters_01.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-87 &lt;\/span&gt;PDSCH DMRS configuration parameters.&quot;}]">Fig. 1-87, page 112</a>). Unlike the slot offset K0 for the downlink assignment which can assume either the values 0 or 1, the slot offset K2 for the uplink assignment is influenced by the subcarrier spacing and an optional <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> parameter PUSCH-TimeDomainResourceAllocationList and can assume values from 0 to 32 in the current release. The dependency on the subcarrier spacing is introduced since for larger <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr>, the number of slots per subframe is increased. The values in this table are indicated either by higher layer signaling or will be used based on default value definition. When <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> signals the timing information explicitly, the <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>pusch-</em><em>ConfigCommon</em> or <em>pusch-</em><span class="eh-text--nowrap">Config</span> may contain an <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>pusch-</em><em>AllocationList</em> that will define the rows of this allocation table and the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> parameter will refer as a row index to that table. If the higher layers do not define these information elements, there are default value tables defined in <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>. In such a case, the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> parameter points to the row index in these default tables.</p>


<a id="page_1081_c1238"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:44%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-071__PUSCH_resource_allocation_e5b4c9f178.png" width="800" height="350" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-71 </span><abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> resource allocation in the time domain (parameters).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1081_c1239"></a><p class="eh-headline-207 ">
				Resource assignment in the frequency domain
			</p>


<a id="page_1081_c1240"></a><p>The frequency resource allocation for the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> is scheduled via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> control information on the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>. As described in the section <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1077_c1195" class="eh-link eh-link--page eh-link--ce">Resource assignment in the frequency domain, page 314</a> for the downlink allocation, there are two types of frequency allocation: type 0 and type 1. Allocation type 0 combines a certain number of resource blocks into a resource block group (<abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr>) and uses a bitmap to allocate frequency resources with <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> granularity. With this method, it would be possible to obtain a frequency distributed assignment with <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> size granularity. However, allocation type 0 is not allowed when transform precoding is activated. Allocation type 1 indicates to a scheduled UE a set of contiguously allocated, localized, non-interleaved resource blocks. If the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> uses format 0_0 for scheduling frequency resources, type 1 is used. If the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> uses format 0_1, the allocation type 0 or 1 is indicated by the most significant bit of the <em>FrequencyDomainResource</em> field within the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> message, or it may be configured by the higher layer parameter <em>resourceAllocation</em> in the <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>PUSCH-Config</em> directly. This frequency allocation in 5G NR presents some important changes, unlike in EUTRA, where only frequency localized allocation on the uplink is allowed. In 5G NR, the frequency allocation can now be either localized or distributed. Consequently, a higher crest factor or <abbr class="eh-abbreviation" title="Peak-to-average power ratio" lang="en"><span class="eh-tooltip" title="Peak-to-average power ratio">PAPR</span></abbr> should be supported by the UE power amplifier.</p>


<a id="page_1081_c1241"></a><p class="eh-headline-207 ">
				Uplink resource allocation type 0
			</p>


<a id="page_1081_c1242"></a><p>Frequency resource allocation type 0 introduces the term <em>resource block group </em>(<abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr>), representing a set of consecutive virtual resource blocks. The size P of the <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> is given by <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1081_c1243\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table042\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bandwidth part size in #RBs&lt;\/th&gt;&lt;th&gt;Configuration 1 set by IE \u201crbg-Size\u201d&lt;\/th&gt;&lt;th&gt;Configuration 2 set by IE \u201crbg-Size\u201d&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;1\u201336&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;37\u201372&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;73\u2013144&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;145\u2013275&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-72 &lt;\/span&gt;Nominal RBG size P for allocation type 0.&lt;\/p&gt;\n\n&quot;}">Fig. 2-72</a>. The <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> size is configured by the higher layer parameter <em>rbg-Size</em> contained in the <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>PUSCH-Config</em> indicating configuration 1 or 2 and the size of the bandwidth part. The allocation mechanism uses a bitmap where each bit indicates whether the corresponding <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> is scheduled or not. Thus, the granularity of frequency allocation is on an <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> size basis. Allocation type 0 is not allowed when transform precoding is activated. Note that depending on the configuration of the bandwidth part with start and size values, the first and last <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> may differ slightly from size P (see <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span> for further details).</p>


<a id="page_1081_c1243"></a><div class="table-scroll"><table id="table042" class="eh-table eh-table--alternate"><colgroup><col><col><col></colgroup><thead><tr><th>Bandwidth part size in #RBs</th><th>Configuration 1 set by IE “rbg-Size”</th><th>Configuration 2 set by IE “rbg-Size”</th></tr></thead><tbody><tr><td>1–36</td><td>2</td><td>4</td></tr><tr><td>37–72</td><td>4</td><td>8</td></tr><tr><td>73–144</td><td>8</td><td>16</td></tr><tr><td>145–275</td><td>16</td><td>16</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-72 </span>Nominal <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> size P for allocation type 0.</p>


<a id="page_1081_c1244"></a><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-061__2-073__Resource_allocation_type_01.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-73 &lt;\/span&gt;Frequency allocation type 0, example.&quot;}]">Fig. 2-73</a> below has an example with frequency allocation type 0. Assuming the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> size is given by 48 <abbr class="eh-abbreviation" title="Physical resource block" lang="en"><span class="eh-tooltip" title="Physical resource block">PRB</span></abbr> and that allocation type 0 with configuration 1 is activated by the higher layers, we can read the <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> size P as equal to 4 from <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1081_c1243\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table042\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bandwidth part size in #RBs&lt;\/th&gt;&lt;th&gt;Configuration 1 set by IE \u201crbg-Size\u201d&lt;\/th&gt;&lt;th&gt;Configuration 2 set by IE \u201crbg-Size\u201d&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;1\u201336&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;37\u201372&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;73\u2013144&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;145\u2013275&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-72 &lt;\/span&gt;Nominal RBG size P for allocation type 0.&lt;\/p&gt;\n\n&quot;}">Fig. 2-72</a>. This results in a bitmap size of floor(<abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>_size/P), and in our example 48/4 = 12 bits. Note that depending on the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> size and the position, the first and/or the last <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> may not be of size P. The spectrum allocation can be contiguously or non-contiguously allocated depending on the bitmap settings with a granularity of <abbr class="eh-abbreviation" title="Resource block group" lang="en"><span class="eh-tooltip" title="Resource block group">RBG</span></abbr> size.</p>


<a id="page_1081_c1245"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:46%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-061__2-073__Resource_allocation_type_01_83cd97e155.png" width="800" height="368" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-73 </span>Frequency allocation type 0, example.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1081_c1246"></a><p class="eh-headline-207 ">
				Uplink resource allocation type 1
			</p>


<a id="page_1081_c1247"></a><p>Allocation type 1 indicates to the scheduled UE a start value <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr> and a length of allocated RBs. To indicate these parameters, via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling a so-called resource indication value (<abbr class="eh-abbreviation" title="Resource indication value" lang="en"><span class="eh-tooltip" title="Resource indication value">RIV</span></abbr>) is given via the frequency domain scheduling info. The <abbr class="eh-abbreviation" title="Resource indication value" lang="en"><span class="eh-tooltip" title="Resource indication value">RIV</span></abbr> parameter is calculated specific to the bandwidth part (see <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span> or <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-062__Downlink_resource_allocation_type_1.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-62 &lt;\/span&gt;Downlink resource allocation type 1, calculation of resource indication value (RIV).&quot;}]">Fig. 2-62</a> for details). Unlike the downlink assignment, in uplink allocation type 1 the mapping from virtual to physical resource blocks is performed in a localized, non-interleaved way.</p>


<a id="page_1081_c1248"></a><p class="eh-headline-207 ">
				Uplink precoding, reference and sounding signals and <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> multiplexing
			</p>


<a id="page_1081_c1249"></a><p>The uplink channel <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> is optionally precoded based on codebook selected precoding. The precoding matrix W is selected from a codebook based on the <abbr class="eh-abbreviation" title="Transmit precoding matrix indicator" lang="en"><span class="eh-tooltip" title="Transmit precoding matrix indicator">TPMI</span></abbr> scheduling info received from the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>. Other parameters influencing the codebook selection are the number of layers and antenna ports obtained from a higher layer. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1034" class="eh-link eh-link--page">1.2.5.5 Antenna ports, precoding and quasi co-located ­antennas, page 98</a> and <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span> for further details on precoding. The <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> is accompanied by uplink <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> signals for demodulation support and channel equalizing mechanisms. The <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> allows highly flexible configuration (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1035" class="eh-link eh-link--page">1.2.5.6 Physical signals in 5G NR, page 110</a> for further details on the parameters for <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> generation). In addition to the <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>, a UE may be configured to transmit <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> signals in additional frequency regions and in the time domain to allow the base station to perform channel estimation. These <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> make it possible to tackle the impact of a frequency selective channel by finding out the “best” frequency region using channel estimation methods. The <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> typically have a higher power spectral density than an intermittent <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> in case of sporadic data transmission and therefore enable the gNB to perform scheduling decisions and implement beamforming techniques. Note that there is no simultaneous transmission of <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> in the current release. If the UE has to send uplink control information (<abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr>) and this coincides in the time with a <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission, the <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> information will be multiplexed into the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> data stream (<span class="eh-hint" title="3GPP TS 38.300: NR; Overall description; Stage-2" lang="en"><span class="eh-tooltip" title="3GPP TS 38.300: NR; Overall description; Stage-2">TS 38.300</span></span>). </p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1082" data-prevpid="1081" data-nextpid="1083" data-chapter="2.2.9 Uplink control information (UCI)" id="page_1082">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.2.9 Uplink control information (UCI)</h3>
						
<a id="page_1082_c1250"></a><p>Like legacy mobile communications technologies, 5G NR also uses the concept of uplink control information feedback to either maintain the radio link or enhance scheduling decisions by the network. As is known, the radio channel is affected by physical radio effects such as multipath propagation, Doppler shift, inter-cell or adjacent channel interference, and time and frequency variant channels, to name only a few of the known effects. In addition, it is possible that the data connection fluctuates in response to <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> request. As described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1023" class="eh-link eh-link--page">1.2 Physical access fundamentals, page 46</a> the 5G NR provides a very flexible air interface including technologies such as flexible subcarrier spacing, adaptive modulation and coding and bandwidth part configuration. In addition, we already mentioned that 5G NR is a radio network based on beamforming techniques. Base stations use a hardware configuration known as massive <abbr class="eh-abbreviation" title="Multiple input multiple output" lang="en"><span class="eh-tooltip" title="Multiple input multiple output">MIMO</span></abbr> and the UE may also support beamforming techniques on the uplink. It is not our intention here to describe all the advantages of beamforming in relation to capacity improvements, path loss compensation and interference reduction, but one aspect is obvious: beamforming is wonderful, but it is even better to know the direction in which to beamform. Beamforming is a complex technology which requires mutual information from the UE and network through link measurements on the downlink and possibly also on the uplink (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1039" class="eh-link eh-link--page">1.3 Beamforming fundamentals, page 169</a> for further details). Therefore, the <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> is extended from previous technologies to cover the beam status of the link. To support network scheduling decisions and beamforming methodology, the UE provides feedback in the form of quality reports to the network. The <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> information is carried either on the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> or the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. The <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> provides multiple formats that are selected depending on the <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> content and quantity of <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> control information (see the section <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1032_c672" class="eh-link eh-link--page eh-link--ce">Physical uplink control channel (PUCCH), page 85</a> for more details). <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> information that is sent on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> is based on multiplexing <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> information within the higher layer data. In general, the <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> consists of the following parameters:</p><ul class="eh-list eh-list--line"><li><strong>CSI feedback</strong> as channel status information</li><li><strong>ACK/NACK</strong> for <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> acknowledgments or non-acknowledgments</li><li><strong>Scheduling request</strong> for obtaining additional uplink resources</li></ul><p>Note that these three parameters are not necessarily transmitted all together in a single <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr>. Depending on the situation, a single <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> may contain either <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> only, or <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/ NACK only, or maybe <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> + <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK combined as an extract of the possible <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> combinations. For the sake of completeness, even if it is not reporting channel information, the UE assists the network’s scheduling decision with optional transmission of sounding reference signals (<abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr>). They are necessary for two major reasons: The first is that the data connection in the 5G system is based on a transmission buffer. Whenever the buffer is filled with pending data, radio resources are requested, but when there is no data in the buffer, the radio interface may be unused for a certain time. Assuming some time variance on the radio channel or mobility of the UE, the network may trigger <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> signals on the uplink to perform channel estimation for expected future scheduling decisions.</p><p>The second reason is related to the power spectral density: If no UL data is sent, the <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> reports may not be sufficient in providing power spectral density that allows channel estimation and beamforming decisions. This becomes obvious if we understand that <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> reports are configurable but are active in connected mode only. In order to support the network with scheduling and beamforming decisions, there is (in addition to uplink channel information) also <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> transmission. For more details on <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> signal power, see the section <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1036_c787" class="eh-link eh-link--page eh-link--ce">Sounding reference signals (SRS) – power control, page 129</a>.</p><p>On the other hand, we may have to understand the <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> as overhead that steals RF resources from the overall capacity in the uplink direction and consumes battery power for transmission. Thus, the <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> configuration is a meticulous setting where the network administrator has to carefully consider the options. The general model for uplink channel feedback is shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-074__Uplink_channel_information.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-74 &lt;\/span&gt;Uplink channel information (UCI) \u2013 general model overview.&quot;}]">Fig. 2-74</a>.</p>


<a id="page_1082_c1251"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:57%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-074__Uplink_channel_information_88fdac9f39.png" width="800" height="455" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-74 </span>Uplink channel information (<abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr>) – general model overview.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1082_c1252"></a><p>Like other physical layer aspects, the uplink channel information also offers a high level of flexibility. The following section describes the content and configuration aspects in greater detail.</p>


<a id="page_1082_c1253"></a><p class="eh-headline-207 ">
				Scheduling requests
			</p>


<a id="page_1082_c1254"></a><p>As introduced in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1079" class="eh-link eh-link--page">2.2.6 Uplink scheduling request and buffer status reporting, page 326</a>, uplink data transfer is based on the concept of logical and transport channels plus a buffer that contains pending data. When there are uplink resources assigned, there is an inband reporting of the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer buffer status (explained in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-098__Buffer_status_reporting.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-98 &lt;\/span&gt;Buffer status reporting with MAC CE \u2013 format and structure.&quot;}]">Fig. 2-98, page 375</a>) which the network can then consider when scheduling <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. </p><p>On the other hand, whenever there is data pending in the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer buffer and no UL resources are available during a connection, the UE may send scheduling requests on the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> only.</p>


<a id="page_1082_c1255"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback
			</p>


<a id="page_1082_c1256"></a><p>As described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1078" class="eh-link eh-link--page">2.2.5 Hybrid automatic repeat request (HARQ) operation, page 318</a>, downlink data reception must be acknowledged by sending <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback to the network. This <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> feedback can either be sent on the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> or the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> when available. In the case where HARQ-ACK feedback is sent on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> and the size is 1 or 2 bits, the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> data will be punctured. If the <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> information is larger, rate matching is applied. The section <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1037_c848" class="eh-link eh-link--page eh-link--ce">Channel coding for small block lengths, page 152</a> described the possibility of segmentation of a transport block into various code blocks. If this is activated, HARQ-ACK feedback is based on a codebook based feedback principle instead of a single feedback per transport block. If a UE is not provided with the higher layer parameter <em>PDSCH-CodeBlockGroupTransmission</em> in the <em>PhysicalCellGroup</em><em>-Config</em> <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> which explicitly configures transport block segmentation into code blocks, the UE generates one HARQ-ACK information bit per transport block. Segmentation into code blocks may lead to either a single or multiple HARQ-ACK bit feedback, but all these code blocks must belong to the same transport block for this particular <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process. The HARQ-ACK feedback is sent via so-called <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> codebooks. They are configured by higher layer parameters. Further details on the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> codebook determination algorithm are given in <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span>. The <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> codebook can either be semi-static or dynamic. There is the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> type 1 codebook for the semi-static case and the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> type 2 codebook for the dynamic case.</p><p>There is a further distinction depending on whether the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> codebooks are transferred on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> or the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>. The parameter <em>maxCodeBlockGroupsPerTransportBlock</em> indicates the maximum number of code block groups (<abbr class="eh-abbreviation" title="Code block group" lang="en"><span class="eh-tooltip" title="Code block group">CBG</span></abbr>) per transport block and has possible values of 2, 4, 6 or 8. In case spatial multiplexing with a higher rank is active so that two code words can be sent simultaneously, the maximum number of CBGs is restricted to either 2 or 4. In addition, the parameters <em>harq-ACK-</em><em>SpatialBundlingPUCCH</em> or <em>harq-ACK-SpatialBundlingPUSCH</em> indicate whether spatial bundling of <span class="eh-text--nowrap">HARQ-ACK</span> feedback is allowed or not. Spatial bundling of HARQ-ACK is described in <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span> as follows: If an occasion for a candidate <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> reception can be in response to a <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> with <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_1 and if the higher layer parameter <em>maxNrofCodeWordsScheduledByDCI</em> indicates reception of two transport blocks, when the UE receives a <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> with one transport block, the HARQ-ACK information is associated with the first transport block and the UE generates an NACK for the second transport block if the higher layer parameter <em>harq-ACK-SpatialBundlingPUCCH</em> is not provided and generates <span class="eh-text--nowrap">HARQ-ACK</span> information with a value of <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr> for the second transport block if the higher layer parameter <em>harq-ACK-SpatialBundlingPUCCH</em> is provided.</p>


<a id="page_1082_c1257"></a><p class="eh-headline-207 ">
				Channel state information (<abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr>)
			</p>


<a id="page_1082_c1258"></a><p>Channel state information (<abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr>) is an uplink feedback report about downlink perceived signal quality parameters. It consists of the following values:</p><ul class="eh-list eh-list--line"><li>Channel quality indicator (<abbr class="eh-abbreviation" title="Channel quality indicator" lang="en"><span class="eh-tooltip" title="Channel quality indicator">CQI</span></abbr>) representing a quality indicator for the perceived downlink signal that has an impact on consecutive scheduling decisions on <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr> and <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> selection</li><li>Precoding matrix indicator (<abbr class="eh-abbreviation" title="Precoding matrix indicator" lang="en"><span class="eh-tooltip" title="Precoding matrix indicator">PMI</span></abbr>) influencing the precoding scheme for the downlink. Note that this does not represent an explicit command for the precoding scheme that must be applied in consecutive downlink transmission. Furthermore, it provides control information to support network precoding selection only. For details on precoding, see e.g. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1034" class="eh-link eh-link--page">1.2.5.5 Antenna ports, precoding and quasi co-located ­antennas, page 98</a></li><li><abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> resource indicator (<abbr class="eh-abbreviation" title="CSI-RS resource indicator" lang="en"><span class="eh-tooltip" title="CSI-RS resource indicator">CRI</span></abbr>) assisting the beamforming scheduling decision by reporting the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> that has been detected as “best”. When assuming that the network has applied beamforming on those <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> signals, it represents a method to identify the “best” beam</li><li><abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block resource indicator (<abbr class="eh-abbreviation" title="SS/PBCH block resource indicator" lang="en"><span class="eh-tooltip" title="SS/PBCH block resource indicator">SSBRI</span></abbr>) used to identify the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> resource that is received by the UE</li><li>Layer indicator (<abbr class="eh-abbreviation" title="Layer indicator" lang="en"><span class="eh-tooltip" title="Layer indicator">LI</span></abbr>) indicating the strongest layer in case of e.g. two code words reporting (<abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr>) or <abbr class="eh-abbreviation" title="Precoding matrix indicator" lang="en"><span class="eh-tooltip" title="Precoding matrix indicator">PMI</span></abbr> matrix layer reporting</li><li>Rank indicator (<abbr class="eh-abbreviation" title="Rank indicator" lang="en"><span class="eh-tooltip" title="Rank indicator">RI</span></abbr>) corresponding to the rank of the channel matrix for <span class="eh-text--nowrap">SU-MIMO</span> or spatial multiplexing</li><li>L1-RSRP representing the layer 1 reference signal receiver power that is calculated based on <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> and/or <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block resources depending on the higher layer configuration. Main difference is that the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> power level in downlink is commonly valid for all UEs within that particular cell area, while the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> may be UE specific.</li></ul><p>Channel status reports in 5G NR support multiple purposes. Since the technology offers a very high level of flexibility, the complexity of channel status feedback is increased. The primary purpose of <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> feedback is support for scheduling decisions like adaptive modulation and coding, support for spatial multiplexing or <abbr class="eh-abbreviation" title="Single user MIMO, also referred to as spatial multiplexing" lang="en"><span class="eh-tooltip" title="Single user MIMO, also referred to as spatial multiplexing">SU-MIMO</span></abbr> by providing feedback on the channel correlation status and to support beamforming techniques by providing information on the beam status and interference situations. These are only a few purposes of the <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> feedback mechanism and we can see that the general motivation of flexibility is also the baseline for <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> feedback. The <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reports can be sent periodically, semi-persistently or aperiodically depending on the higher layer configuration. Such reports can be sent on either the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> or <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> channel in the uplink direction. The <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reports are controlled by the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> configuration details which are <em>CSI-</em><em>ReportConfig</em>, <em>CSI-</em><em>ResourceConfig</em> and one or two <em>trigger state lists</em>. In a first simplified approach, the <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> report configuration describes what has to be measured and how it has to be reported. The <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> resource configuration describes where the UE has to perform measurements and with the trigger state list, the network can influence the <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting. Each <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> report configuration is associated with a single downlink <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> and contains parameters such as the codebook configuration and subset restriction for <abbr class="eh-abbreviation" title="Precoding matrix indicator" lang="en"><span class="eh-tooltip" title="Precoding matrix indicator">PMI</span></abbr> reporting, time-domain behavior for reporting aperiodically or periodically, frequency granularity by validating reports on either wideband or subband, and optional measurement restrictions. In addition, <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reported quantities such as <abbr class="eh-abbreviation" title="Layer indicator" lang="en"><span class="eh-tooltip" title="Layer indicator">LI</span></abbr>, L1-RSRP, <abbr class="eh-abbreviation" title="CSI-RS resource indicator" lang="en"><span class="eh-tooltip" title="CSI-RS resource indicator">CRI</span></abbr> and <abbr class="eh-abbreviation" title="SS/PBCH block resource indicator" lang="en"><span class="eh-tooltip" title="SS/PBCH block resource indicator">SSBRI</span></abbr> can be reported by the UE in a combined procedure. The <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> resource configuration provides a list of <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> resources which are either <abbr class="eh-abbreviation" title="Non zero power CSI-RS" lang="en"><span class="eh-tooltip" title="Non zero power CSI-RS">NZP CSI-RS</span></abbr>, <abbr class="eh-abbreviation" title="CSI interference measurement" lang="en"><span class="eh-tooltip" title="CSI interference measurement">CSI-IM</span></abbr> and <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> blocks.&nbsp;<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-075__CSI_report_configuration_.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-75 &lt;\/span&gt;CSI report configuration \u2013 overview.&quot;}]">Fig. 2-75</a> gives a brief overview of the <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting configurations.</p>


<a id="page_1082_c1259"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:61%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-075__CSI_report_configuration__b1751e6e05.png" width="800" height="488" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-75 </span><abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> report configuration – overview.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1082_c1260"></a><p>Regarding the timing behavior of <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting and resources, we have said that <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting itself can be aperiodic, periodic or semi-persistent, and also the <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> resources underlying the actual measurements can be aperiodic, periodic or semi-persistent. This leads to several combinations of <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting and <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> resource configuration as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1082_c1261\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table\&quot; id=\&quot;table043\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;CSI-RS configuration&lt;\/th&gt;&lt;th class=\&quot;eh-table__td-bg--green\&quot;&gt;Periodic CSI reporting&lt;\/th&gt;&lt;th class=\&quot;eh-table__td-bg--green\&quot;&gt;Semi-persistent CSI reporting&lt;\/th&gt;&lt;th class=\&quot;eh-table__td-bg--green\&quot;&gt;Aperiodic CSI reporting&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=\&quot;eh-table__td-bg--light-blue\&quot;&gt;Periodic CSI-RS&lt;\/td&gt;&lt;td&gt;No dynamic triggering\/activation&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;PUCCH reporting \u27f6&lt;br \/&gt;\r\n\t\t\tactivation command on MAC&lt;br \/&gt;\r\n\t\t\tPUSCH reporting \u27f6&lt;br \/&gt;\r\n\t\t\ttriggering on DCI&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;Triggered by DCI&lt;br \/&gt;\r\n\t\t\t(additionally MAC activation posssible)&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td class=\&quot;eh-table__td-bg--light-blue\&quot;&gt;Semi-persistent CSI-RS&lt;\/td&gt;&lt;td&gt;Not supported&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td class=\&quot;eh-table__td-bg--light-blue\&quot;&gt;Aperiodic CSI-RS&lt;\/td&gt;&lt;td&gt;Not supported&lt;\/td&gt;&lt;td&gt;Not supported&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-76 &lt;\/span&gt;CSI reporting and resource configuration \u2013 time behavior.&lt;br \/&gt;&lt;span style=\&quot;display:inline-block;width:10px;height:10px;background:#d3eefc;#89c9ad\&quot;&gt;&lt;\/span&gt; Time behavior of CSI-RS resources; &amp;nbsp; &lt;span style=\&quot;display:inline-block;width:10px;height:10px;background:#89c9ad;\&quot;&gt;&lt;\/span&gt; Time behavior of CSI-RS reporting&lt;\/p&gt;\n\n&quot;}">Fig. 2-76</a>.</p>


<a id="page_1082_c1261"></a><div class="table-scroll"><table class="eh-table" id="table043"><colgroup><col><col><col><col></colgroup><thead><tr><th>CSI-RS configuration</th><th class="eh-table__td-bg--green">Periodic CSI reporting</th><th class="eh-table__td-bg--green">Semi-persistent CSI reporting</th><th class="eh-table__td-bg--green">Aperiodic CSI reporting</th></tr></thead><tbody><tr><td class="eh-table__td-bg--light-blue">Periodic CSI-RS</td><td>No dynamic triggering/activation</td><td rowspan="2">PUCCH reporting ⟶<br>
			activation command on MAC<br>
			PUSCH reporting ⟶<br>
			triggering on DCI</td><td rowspan="3">Triggered by DCI<br>
			(additionally MAC activation posssible)</td></tr><tr><td class="eh-table__td-bg--light-blue">Semi-persistent CSI-RS</td><td>Not supported</td></tr><tr><td class="eh-table__td-bg--light-blue">Aperiodic CSI-RS</td><td>Not supported</td><td>Not supported</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-76 </span><abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting and resource configuration – time behavior.<br><span style="display:inline-block;width:10px;height:10px;background:#d3eefc;#89c9ad"></span> Time behavior of <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> resources; &nbsp; <span style="display:inline-block;width:10px;height:10px;background:#89c9ad;"></span> Time behavior of <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> reporting</p>


<a id="page_1082_c1262"></a><p>Note that the reports can be sent either on the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> or <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> depending on the higher layer configuration. The <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer allows transmission of a so-called activation command that can be used in addition to <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> triggering of aperiodic <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reports (see <span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span> for further details).</p><p>A serving cell is configured with a single <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> information element CSI-MeasConfig to indicate and provide information for <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting. The CSI-MeasConfig element contains in general three major items: a CSI-ResourceConfig describing the resources where the measurements have to be performed, a CSI-ReportConfig describing further information on how the report should look, and a trigger state list associated with CSI-ReportConfig describing trigger states for either aperiodic or semi-persistent reporting.</p><p>CSI-ResourceConfig contains the description of RF resources like <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> that can be either non-zero power, i.e. NZP-CSI-RS or zero power, i.e. ZP-CSI-RS and are used predominantly for UE-specific or beam-specific channel status measurements and optionally for interference measurements. In addition, the serving cell can configure additional SSBs to be used for channel status measurements on a cell-specific level.</p><p>CSI-ReportConfig describes further configuration details for how these measurement results should be reported, i.e. whether the reports should occur in an aperiodic, periodic or semi-persistent manner and in what quantity or under what time restriction they should occur. This is in addition to RF resource information about where they should be reported, i.e. <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> information. There is a possibility that CSI-MeasConfig for a serving cell may only contain <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> ResourceConfig information which would represent a situation where the serving cell does not support beamforming and does not require <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> based feedback from the UE. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-077__CSI-MeasConfig_information_element.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-77 &lt;\/span&gt;CSI-MeasConfig information element, general structure.&quot;}]">Fig. 2-77</a> describes the general structure of the CSI-MeasConfig information element.</p>


<a id="page_1082_c1263"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:34%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-077__CSI-MeasConfig_information_element_576ed88bb4.png" width="800" height="266" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-77 </span>CSI-MeasConfig information element, general structure.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1082_c1264"></a><p>A further detailed description is given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-078__CSI-RS_reporting_based_on_report_configuratio.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-78 &lt;\/span&gt;CSI-RS reporting based on report configuration and resource configuration.&quot;}]">Fig. 2-78</a>, describing the dependencies. A CSI-ReportConfig is linked to CSI-ResourceConfig elements. <span class="eh-text--nowrap">CSI-ResourceConfig</span> typically contains resources for channel status and interference measurements. The <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>, which are actively transmitted, are named as non-zero power NZP-CSI-RS and can be mapped onto resource elements. They can also be beamformed. Typically, these NZP-CSI-RS can now be used for either channel status reporting or for interference measurements. We can imagine a scenario where the serving cell uses these NZP-CSI-RS to discover a better “serving cell”, but also to identify interfering cells. In addition to the NZP-CSI-RS which may be understood as UE-specific or beamformed, the serving cell can also request measurements on a more cell-specific resource which will be given by the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> blocks as the CSI-SSB. Opposite to the <span class="eh-text--nowrap">NZP-CSI-RS</span>, which indicate the reference signals that are transmitted, the serving cell can also configure resource elements that are used for zero-power reference signals (ZP-CSI-RS). The idea is that these resource elements will not be transmitted and thus they represent an occasion where the UE can perform measurements like power level <abbr class="eh-abbreviation" title="Received signal strength indicator" lang="en"><span class="eh-tooltip" title="Received signal strength indicator">RSSI</span></abbr> that would permit the gNB to identify an interference situation. Unfortunately, the ZP-CSI-RS are very brief and may collide with the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> resources of neighbor cells. Thus, the network may also configure NZP-CSI-RS on neighbor cells for interference measurements.</p>


<a id="page_1082_c1265"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:25%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-078__CSI-RS_reporting_based_on_report_configuratio_f565820183.png" width="800" height="194" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-78 </span><abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> reporting based on report configuration and resource configuration.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1082_c1266"></a><p>As an example of the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> reporting and resource configuration, we can consider the scenario shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-079__CSI-RS_reporting_and_resource_configuration_example.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-79 &lt;\/span&gt;CSI-RS reporting and resource configuration example (two TRPs with three beams each).&quot;}]">Fig. 2-79</a>. The scenario illustrates a situation with two 5G NR cells, provided by two transmission points (<abbr class="eh-abbreviation" title="Transmission and reception point" lang="en"><span class="eh-tooltip" title="Transmission and reception point">TRP</span></abbr>). Each <abbr class="eh-abbreviation" title="Transmission and reception point" lang="en"><span class="eh-tooltip" title="Transmission and reception point">TRP</span></abbr> has set up three beams that contain the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> for channel status and interference measurements.</p><p>Assuming a UE with a connection to only one of those TRPs, two questions come up: first, considering some mobility and a serving cell change, which of the two TRPs (or more precisely, which of the beams) behaves as the “best server”. The second question relates to the situation whether there is interference occurring between the two TRPs. The <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting setting is associated with three resource settings. The <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> resource(s) within resource setting 0 consisting of NZP-CSI-RS is for channel status measurements. The <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> resource(s) within resource setting 1 consisting of ZP-CSI-RS and resource setting 2 consisting of NZP-CSI-RS are for interference measurements. </p><p>For resource setting 0, two NZP-CSI-RS resource sets are configured, where set 0-1 corresponds to the channel status measurements performed on three NZP-CSI-RS resources issued from TRP1 and set 0-2 corresponds to channel status measurements performed on three NZP-CSI-RS resources from TRP2, respectively. Each set contains three NZP-CSI-RS resources corresponding to three beamformed <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>. </p><p>For resource setting 1, two ZP-CSI-RS resource sets are configured, where set 1-1 corresponds to two configured zero-power ZP-CSI-IM resources for TRP1, while set 1-2 corresponds to one zero-power ZP-CSI-IM resource for TRP2. </p><p>For resource setting 2, two NZP-CSI-RS resource sets are configured, where set 2-1 configured for TRP1 is associated with set 0-2 and used for interference measurements from <abbr class="eh-abbreviation" title="Transmission and reception point" lang="en"><span class="eh-tooltip" title="Transmission and reception point">TRP</span></abbr> 2. Set 2-2 configured for TRP2 is associated with set 0-1 and used for interference measurements from <abbr class="eh-abbreviation" title="Transmission and reception point" lang="en"><span class="eh-tooltip" title="Transmission and reception point">TRP</span></abbr> 1.</p>


<a id="page_1082_c1267"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:51%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-079__CSI-RS_reporting_and_resource_configuration_example_604860b5c4.png" width="800" height="406" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-79 </span><abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> reporting and resource configuration example (two TRPs with three beams each).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1082_c1268"></a><p>As already described, the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> reports can be aperiodic, periodic or semi-static. In addition, the higher layer configures whether these measurements have to be performed on wide or narrow subbands and in what quantity they have to be measured. Furthermore, beamforming can be UE-specific and the beams can be refined after a connection is established. Such beam refinement can be realized via precoding as described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1034" class="eh-link eh-link--page">1.2.5.5 Antenna ports, precoding and quasi co-located ­antennas, page 98</a>. To support the network in precoding decisions, the UE reports a precoding matrix identifier (<abbr class="eh-abbreviation" title="Precoding matrix indicator" lang="en"><span class="eh-tooltip" title="Precoding matrix indicator">PMI</span></abbr>). For further details on <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting, refer to specification documents <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span> et al.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1083" data-prevpid="1082" data-nextpid="1084" data-chapter="2.2.10 Data flow through 5G NR protocol layers" id="page_1083">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.2.10 Data flow through 5G NR protocol layers</h3>
						
<a id="page_1083_c1269"></a><p>Like all wireless communications networks, 5G NR also introduces a protocol structure that enables and maintains a data connection via the so-called user plane (<abbr class="eh-abbreviation" title="User plane" lang="en"><span class="eh-tooltip" title="User plane">UP</span></abbr>). To control and supervise this data connection, the 5G NR system provides protocol layers belonging to the control plane (<abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr>). Both protocol structures have been briefly introduced in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1012" class="eh-link eh-link--page">1.1.3 Access stratum protocol, page 21</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1019" class="eh-link eh-link--page">1.1.4 Non-access stratum protocol, page 39</a>. The section here focuses on the behavior of the user plane protocol layers.</p><p>Generally speaking, a protocol layer offers services and functions to higher layers and establishes a peer-to-peer connection to its peer layer. In addition, a protocol layer typically adds a protocol header to the received <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> to enable and support its function. An example of such a data flow is given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-080__Data_flow_example.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-80 &lt;\/span&gt;Data flow example with 5G NR protocol layers.&quot;}]">Fig. 2-80</a>, assuming two connections. These connections are indicated as radio bearer 1 and 2 in the figure. We assume that the two radio bearers are transferring data as <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> data packets to the <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> protocol which is the highest RAN protocol layer. As an example of layer 2 behavior, two procedures are depicted: the concatenation functionality in the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer and the segmentation functionality in the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> layer. This chapter provides more details on these functions as well as the protocol header and various formats from a top to bottom perspective.</p>


<a id="page_1083_c1270"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:58%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-080__Data_flow_example_b838f9832b.png" width="800" height="461" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-80 </span>Data flow example with 5G NR protocol layers.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1271"></a><p>The general data flow through the user plane stratum is depicted in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-081__5G_NR_protocol_layer_data_flow_example.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-81 &lt;\/span&gt;5G NR protocol layer data flow example \u2013 downlink model.&quot;}]">Fig. 2-81</a>, indicating the various functional behaviors on each protocol layer. This example is from the downlink perspective. In the uplink direction, the difference is that only one of the depicted columns is present as there is only a one-to-one connection, while on the downlink we have a one-to-many connection. This figure must be considered in conjunction with the general introduction to the 5G NR protocol stratum (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1015" class="eh-link eh-link--page">1.1.3.3 User plane protocol, page 27</a>), but it describes a general and simplified view of the protocol stratum. Features like carrier aggregation and dual connectivity with split bearer mechanisms, which are possible in 5G NR, are not illustrated in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-081__5G_NR_protocol_layer_data_flow_example.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-81 &lt;\/span&gt;5G NR protocol layer data flow example \u2013 downlink model.&quot;}]">Fig. 2-81</a> [<span class="eh-hint" title="3GPP TS 38.300: NR; Overall description; Stage-2" lang="en"><span class="eh-tooltip" title="3GPP TS 38.300: NR; Overall description; Stage-2">TS 38.300</span></span>].</p>


<a id="page_1083_c1272"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:93%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-081__5G_NR_protocol_layer_data_flow_example_384ac1d6e8.png" width="800" height="738" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-81 </span>5G NR protocol layer data flow example – downlink model.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1273"></a><p class="eh-headline-207 ">
				Service data adaptation protocol (<abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr>)
			</p>


<a id="page_1083_c1274"></a><p>The <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> protocol has been introduced as a new protocol layer compared to the LTE user plane stratum. Its main responsibility is provisioning and maintenance of <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows coming from the core network to allow multiple service level agreements (<abbr class="eh-abbreviation" title="Service level agreement" lang="en"><span class="eh-tooltip" title="Service level agreement">SLA</span></abbr>) within the subscription to a 5G system. 5G is a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> driven technology which is expected to provide and guarantee data transfer according to a certain <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> policy. Details on <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> aspects are described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1075" class="eh-link eh-link--page">2.2.2 End to end quality of service, page 285</a>.</p><p>In the protocol structure, referring to the well-known <abbr class="eh-abbreviation" title="Open system interconnection, Other system information" lang="en"><span class="eh-tooltip" title="Open system interconnection, Other system information">OSI</span></abbr> model, <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> is the highest layer that belongs to the 5G NR system user plane structure. All higher layers such as <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr>, <abbr class="eh-abbreviation" title="Transmission control protocol" lang="en"><span class="eh-tooltip" title="Transmission control protocol">TCP</span></abbr> and <abbr class="eh-abbreviation" title="User datagram protocol" lang="en"><span class="eh-tooltip" title="User datagram protocol">UDP</span></abbr> can be considered as out of scope protocols. Thus, the introduction of the <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> protocol can be simplified as the introduction of a end to end data pipe or tunnel that guarantees, supervises and maintains a certain <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> profile throughout the 5G system. <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> is the protocol that is linked to the concept of <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows. In conjunction with the lower layers, it supports various service requests by provisioning multiple <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> related functions.</p><p>Briefly described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1015" class="eh-link eh-link--page">1.1.3.3 User plane protocol, page 27</a>, <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> links a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow ID to a certain <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow for the corresponding <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session.</p><p>There is one <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> entity for each <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session. The main function of <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> is to map <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows to data radio bearers (<abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>). When the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> protocol layer configures a radio bearer via <em>RadioBearerConfig</em>, it may include a list of DRBs to be added and each element in the list may be accompanied by <em>SDAP-config</em> information. As there are multiple connectivity scenarios to the 5G core (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1007" class="eh-link eh-link--page">1.1.2.1 Connectivity scenarios, page 13</a>), the SDAPconfig is mandatory for dual connectivity scenarios.</p><p>The SDAP-config contains the <abbr class="eh-abbreviation" title="QoS flow ID" lang="en"><span class="eh-tooltip" title="QoS flow ID">QFI</span></abbr> to be used as the identifier of the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow. It controls whether an <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> header is to be present or not. The <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> header is required only for reflective <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr>. In the uplink direction, <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> supports reflective <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow mapping to reduce signaling overhead. Reflective <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> mapping means the UE will apply the same <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow to uplink <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> PDUs as it has seen on the downlink.</p><p>One of the configured DRBs is used as the default <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr> and all <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows not explicitly identified will be mapped onto this default <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>. There is no additional control function offered by the <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> layer. It offers user plane data transfer to higher layers and expects in-order delivery from lower layers.</p><p>To enable data transport, <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> builds a data packet (<abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>) and maps it on the respective <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>. The <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> can be with or without an attached header field.</p><p>Two header types exist: One is used for data transfer and the other for control. The control header only consists of an end-marker control <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> header that signals the end of the listed <abbr class="eh-abbreviation" title="QoS flow ID" lang="en"><span class="eh-tooltip" title="QoS flow ID">QFI</span></abbr> data flow. The data <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> header field contains the <abbr class="eh-abbreviation" title="QoS flow ID" lang="en"><span class="eh-tooltip" title="QoS flow ID">QFI</span></abbr> value and on the downlink, two fields <abbr class="eh-abbreviation" title="Reflective QoS flow to DRB mapping indication" lang="en"><span class="eh-tooltip" title="Reflective QoS flow to DRB mapping indication">RDI</span></abbr> and <abbr class="eh-abbreviation" title="Reflective QoS indication" lang="en"><span class="eh-tooltip" title="Reflective QoS indication">RQI</span></abbr> that control reflective <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow mapping. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-082__SDAP_functional_view.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-82 &lt;\/span&gt;SDAP functional view.&quot;}]">Fig. 2-82</a> describes the general behavior of the <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> protocol entities. Further information on e.g. <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> header fields can be found in <span class="eh-hint" title="3GPP TS 37.324: Service Data Adaptation Protocol (SDAP) specification" lang="en"><span class="eh-tooltip" title="3GPP TS 37.324: Service Data Adaptation Protocol (SDAP) specification">TS 37.324</span></span>.</p>


<a id="page_1083_c1275"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:75%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-082__SDAP_functional_view_fb78472dc3.png" width="800" height="600" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-82 </span><abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> functional view.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1276"></a><p class="eh-headline-207 ">
				Packet data convergence protocol (<abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr>)
			</p>


<a id="page_1083_c1277"></a><p>The <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer provides data transfer services to higher layers. In the protocol structure, the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer is either connected to the user plane (<abbr class="eh-abbreviation" title="User plane" lang="en"><span class="eh-tooltip" title="User plane">UP</span></abbr>) or to the control plane (<abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr>). Thus, it provides data transport services for both data and control. This data transfer service is based on the introduction of the term radio bearer that can be further subdivided into a data radio bearer (<abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>) or a signaling radio bearer (<abbr class="eh-abbreviation" title="Signaling radio bearer" lang="en"><span class="eh-tooltip" title="Signaling radio bearer">SRB</span></abbr>). A radio bearer can be simplified as a data transfer channel for one <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session that is linked to a certain <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow. The data transfer service provided by the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer is accompanied by additional services such as sequence numbering, ciphering and integrity protection, duplication and dispatching mechanisms to support dual connectivity scenarios and selection of the transfer modes <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr>, <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> or <abbr class="eh-abbreviation" title="Transparent mode" lang="en"><span class="eh-tooltip" title="Transparent mode">TM</span></abbr> by the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> layer. This <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> mode selection has, of course, an impact on the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> of the data bearer, i.e. priority for either throughput and latency or reliability with an additional <abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr> mechanism. For each UE, the NG-RAN establishes at least one data radio bearer together with the <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session offering one <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow. It is possible to subsequently establish additional DRBs with different <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows for the same <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session or, of course, additional DRBs for additional <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> sessions. For a brief overview of the functions provided by the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1015" class="eh-link eh-link--page">1.1.3.3 User plane protocol, page 27</a>. This section provides further details.</p><p>The <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer combines data arriving from the control and user plane with regards to its lower layers and provides data transport plus additional functions to its higher layers <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> for the <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr> stratum or <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> for the <abbr class="eh-abbreviation" title="User plane" lang="en"><span class="eh-tooltip" title="User plane">UP</span></abbr> stratum. It receives data via radio bearers, further categorized as either <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr> or <abbr class="eh-abbreviation" title="Signaling radio bearer" lang="en"><span class="eh-tooltip" title="Signaling radio bearer">SRB</span></abbr>, and maps them onto <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> channels, connected to the different <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> modes <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr>, <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> or <abbr class="eh-abbreviation" title="Transparent mode" lang="en"><span class="eh-tooltip" title="Transparent mode">TM</span></abbr>. Thus, the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer is involved for data using radio bearers that will be mapped onto either <abbr class="eh-abbreviation" title="Dedicated traffic channel" lang="en"><span class="eh-tooltip" title="Dedicated traffic channel">DTCH</span></abbr> or <abbr class="eh-abbreviation" title="Dedicated control channel" lang="en"><span class="eh-tooltip" title="Dedicated control channel">DCCH</span></abbr> logical channels. General control information such as the system information broadcast or common control using the SRB0 is not associated with a <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> entity. Compared with the EUTRA <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer, the NR <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer provides similar functions, but there are a few marginal differences. For example, <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> in NR supports dual connectivity since it supports split or non-split radio bearer characteristics.</p><p>Each radio bearer except SRB0 is associated with one <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> entity and each <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> entity is associated with one, two or four <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entities depending on the radio bearer characteristic, which can be unidirectional, bidirectional <span class="eh-text--nowrap">UL/DL</span> and split/non-split in case of dual connectivity. For non-split bearers, each <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> entity is associated with one <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entity for unidirectional data transfer, two <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entities (one for each direction), or one <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entity. For split bearers, each <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> entity is associated with two <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entities (for the same direction), four <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entities (two for each direction), or two <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entities (for the same direction).</p><p>The main services of the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-083__PDCP_layer_-_functional_view.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-83 &lt;\/span&gt;PDCP layer \u2013 functional view.&quot;}]">Fig. 2-83</a>) are:</p><ul class="eh-list eh-list--line"><li>Transfer of user plane and control plane data (for each <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr> and <abbr class="eh-abbreviation" title="Signaling radio bearer" lang="en"><span class="eh-tooltip" title="Signaling radio bearer">SRB</span></abbr>, there is one <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> entity)</li><li>Header compression, <abbr class="eh-abbreviation" title="Robust header compression" lang="en"><span class="eh-tooltip" title="Robust header compression">ROHC</span></abbr> mechanism supporting various methods defined via different <abbr class="eh-abbreviation" title="Request for comments" lang="en"><span class="eh-tooltip" title="Request for comments">RFC</span></abbr> standards. The header compression is not applicable to the <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> header and the <abbr class="eh-abbreviation" title="Service data adaptation protocol" lang="en"><span class="eh-tooltip" title="Service data adaptation protocol">SDAP</span></abbr> control <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> if included in the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr></li><li>Security mechanisms: ciphering and integrity protection</li><li>Routing function to support dual connectivity</li><li>Packet duplication</li></ul><a id="page_1083_c1278"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:75%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-083__PDCP_layer_-_functional_view_a3624b3e0d.png" width="800" height="599" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-83 </span><abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer – functional view.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1279"></a><p>These main services are also the main functions of the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer. In addition, the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer supports duplicate handling for data packets, sequence numbering (important in relation to handovers), routing for split bearer operations in <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> mode, and a timer-based discard function for lost packets. A <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> entity can be established, re-established and released depending on requests from upper layers. <span class="eh-hint" title="3GPP TS 38.323: NR; Packet Data Convergence Protocol (PDCP) specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.323: NR; Packet Data Convergence Protocol (PDCP) specification">TS 38.323</span></span> provides further information on such operations. As one difference compared to LTE <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> operation, the NR <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer supports the possibility of data duplication, e.g. if configured by the higher layer <em>pdcp-Duplication</em> parameter contained in the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> message <em>PDCP-Config</em>, the transmitting entity will duplicate the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> data <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> and deliver it to both associated <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entities. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-014__Radiobearer_types_v4.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-14 &lt;\/span&gt;Radio bearer types in LTE\/NR dual connectivity (EN-DC).&quot;}]">Fig. 1-14, page 32</a> indicating the different radio bearer types. In case of a split bearer type, the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer dispatches between the primary and secondary <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entity on either the master or secondary cell. On the receiving end, in case duplication is enabled, the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer is in close contact with the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> layer and may provide information about discarding of an already received <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>. The main objective is to support reliability in <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> scenarios. The lower layers have to provide either dual connectivity or carrier aggregation functionality on the radio link. Another option is support for split bearer: Here, the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> assigns one <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entity to be the primary <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entity. A higher layer threshold for the uplink direction <em>UL-</em><em>DataSplitThreshold</em> sets a limit up to which the PDUs have to be sent over the primary <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr>. When this threshold is passed, the UE may use either the primary or secondary <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entity. Thus, the split bearer option behaves like an overflow avoidance mechanism in simplified terms. The sequence numbering mechanism is needed to guarantee lossless packet transfer, especially in handover situations or <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> situations when <abbr class="eh-abbreviation" title="Master cell group" lang="en"><span class="eh-tooltip" title="Master cell group">MCG</span></abbr> or <abbr class="eh-abbreviation" title="Secondary cell group" lang="en"><span class="eh-tooltip" title="Secondary cell group">SCG</span></abbr> activation or deactivation occur. In addition, the sequence number may support in-order delivery, but note that an <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> parameter <em>outOfOrderDelivery</em> may force the receiving entity to not consider in-order delivery of PDUs.</p><p>The sequence number can have two possible lengths (12 or 18 bits), configured via <em>pdcp-SN-Size </em>separately for UL and DL, except for <abbr class="eh-abbreviation" title="Signaling radio bearer" lang="en"><span class="eh-tooltip" title="Signaling radio bearer">SRB</span></abbr>. Here, the <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> is always set to the 12-bit length. This sequence number is used as one input to the ciphering and integrity protection algorithms and thus the length is considered to be too short for implementation of acceptable security mechanisms. Increasing the <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> would cause excessive overhead. For this reason, the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer introduces a second sequential value: the hyper frame number (<abbr class="eh-abbreviation" title="Hyper frame number" lang="en"><span class="eh-tooltip" title="Hyper frame number">HFN</span></abbr>). The <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> is incremented in an inner loop from 0 to 2<sup class="eh-text__letter">PDCP_SN_size</sup>. Whenever the upper boundary is reached, the <abbr class="eh-abbreviation" title="Hyper frame number" lang="en"><span class="eh-tooltip" title="Hyper frame number">HFN</span></abbr> is incremented by one (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-103__Key_stream_derivation_for_radio_bearers.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-103 &lt;\/span&gt;Key stream derivation for radio bearers.&quot;}]">Fig. 2-103, page 384</a>).</p><p>This resulting sequence number consisting of two parts, the <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> within the <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> and the <abbr class="eh-abbreviation" title="Hyper frame number" lang="en"><span class="eh-tooltip" title="Hyper frame number">HFN</span></abbr>, is used to calculate the value COUNT, which is used as an input parameter for ciphering and deciphering by both <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> peer entities. The <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer supports the security mechanisms of ciphering and integrity protection. Ciphering prevents eavesdropping of communications, while integrity protection digitally signs the message to prevent an attacker impersonating the sender (“man in the middle”). For <abbr class="eh-abbreviation" title="Signaling radio bearer" lang="en"><span class="eh-tooltip" title="Signaling radio bearer">SRB</span></abbr>, both ciphering and integrity protection are mandatory, while for <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr> they can be configured by the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> parameters <em>integrityProtection</em> and <em>cipheringDisabled</em>. To avoid buffer overflow at the transmitting entity, a timer <em>discardTimer</em> ranging from 10 ms to 1500 ms is set by higher layers. This timer can be set to infinity. As a trade-off between latency and reliability, the receiving entity provides a reordering window buffer to PDUs to be placed in sequential order and runs a timer <em>t-Reordering</em> with values ranging from 0 ms to 2750 ms (or infinity in case of <abbr class="eh-abbreviation" title="Signaling radio bearer" lang="en"><span class="eh-tooltip" title="Signaling radio bearer">SRB</span></abbr>) that is used to identify lost PDUs. The <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer provides two kind of PDUs: One is called the data <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> and is used to convey data received from upper layers, i.e. either user plane data via <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr> or control plane data via <abbr class="eh-abbreviation" title="Signaling radio bearer" lang="en"><span class="eh-tooltip" title="Signaling radio bearer">SRB</span></abbr>. The other <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> is called the control <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> and has two use cases: Submission of a status report acknowledging the received data PDUs from the receiving entity, and delivery of feedback to <abbr class="eh-abbreviation" title="Robust header compression" lang="en"><span class="eh-tooltip" title="Robust header compression">ROHC</span></abbr> as “interspersed” <abbr class="eh-abbreviation" title="Robust header compression" lang="en"><span class="eh-tooltip" title="Robust header compression">ROHC</span></abbr> feedback. The status report is triggered via higher layers, e.g. <em>RRC-reconfiguration</em> in handover scenarios, and guarantees lossless data transfer, especially for acknowledged mode DRBs. The status report <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> used for <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> bearer types contains two major control fields: A mandatory indicator first missing counter (<abbr class="eh-abbreviation" title="First missing count – used in PDCP status report" lang="en"><span class="eh-tooltip" title="First missing count – used in PDCP status report">FMC</span></abbr>) pointing to the counter value of the first missing <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> within a reordering window, and an optional bitmap field, selectively indicating additional lost PDUs. To support such reporting, the receiving entity uses two state variables: The first one RX_NEXT points to the next sequence number to be expected, and the second one RX_DELIV indicates the first <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> that was not yet delivered to higher layers but is still expected. Within a status report, the <abbr class="eh-abbreviation" title="First missing count – used in PDCP status report" lang="en"><span class="eh-tooltip" title="First missing count – used in PDCP status report">FMC</span></abbr> state variable is typically set with the value of RX_DELIV. In case the counter of RX_DELIV is lower than RX_NEXT, an optional bitmap is included in the status report marking all sequence numbers of SDUs that are considered as lost. The packet header formats for both types (data and control <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>) are given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-084__PDCP_header_types_-_data_PDU.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-84 &lt;\/span&gt;PDCP header types \u2013 data PDU for DRB or SRB.&quot;}]">Fig. 2-84</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-085__PDCP_header_types_-_control_PDU_.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-85 &lt;\/span&gt;PDCP header types \u2013 control PDU for status report or ROHC feedback.&quot;}]">Fig. 2-85</a>. For further details on 5G NR security aspects, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1085" class="eh-link eh-link--page">2.2.12 Data security, page 384</a>.</p>


<a id="page_1083_c1280"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:32%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-084__PDCP_header_types_-_data_PDU_56586f47a9.png" width="800" height="254" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-84 </span><abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> header types – data <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> for <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr> or <abbr class="eh-abbreviation" title="Signaling radio bearer" lang="en"><span class="eh-tooltip" title="Signaling radio bearer">SRB</span></abbr>.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1281"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:32%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-085__PDCP_header_types_-_control_PDU__cf524e858b.png" width="800" height="253" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-85 </span><abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> header types – control <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> for status report or <abbr class="eh-abbreviation" title="Robust header compression" lang="en"><span class="eh-tooltip" title="Robust header compression">ROHC</span></abbr> feedback.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1282"></a><p class="eh-headline-207 ">
				Radio link control protocol (<abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr>)
			</p>


<a id="page_1083_c1283"></a><p>The <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> protocol layer enables a peer-to-peer connection between the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entity in the UE and the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entity in the gNB DU for transfer of <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> PDUs that can either be data PDUs or control PDUs. The <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> offers three possible transfer modes via its <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entities: acknowledged mode (<abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr>), unacknowledged mode (<abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr>) and transparent mode (<abbr class="eh-abbreviation" title="Transparent mode" lang="en"><span class="eh-tooltip" title="Transparent mode">TM</span></abbr>). Transparent mode is used for common and broadcast control channels, and acknowledged mode for dedicated control channels. User traffic can either select <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> or <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr>, depending on the general <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow settings. In a vertical orientation, the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> layer offers data transfer functions to the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> and <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> layers and uses the transfer function of the underlying <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer. In general, it performs a mapping of SDUs received via <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> channels onto PDUs mapped onto logical channels (see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-009__Channel_mapping_Overview_5G.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-9 &lt;\/span&gt;NR Access Stratum Protocol channels.&quot;}]">Fig. 1-9, page 22</a>). The size of the <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> can be variable in all three modes. In <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> and <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> mode, the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> may be segmented and transferred via multiple <span class="eh-text--nowrap">RLC PDUs</span>, which are byte-aligned. There is one major difference between the behavior of the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> protocol in LTE vs. NR that is depicted in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-086__RLC_protocol_behavior_.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-86 &lt;\/span&gt;RLC protocol behavior \u2013 difference between LTE and NR: segmentation and concatenation aspects.&quot;}]">Fig. 2-86</a> and concerns the aspects of segmentation and concatenation. In LTE, the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> layer could either segment a larger <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> into smaller segments to create a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>, or there is the possibility of concatenating smaller SDUs into a larger <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> size. This offers the flexibility of creating PDUs of variable sizes. To enable preprocessing on both the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> and <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> layer, it was decided for the 5G NR <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> behavior to only allow segmentation of <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> SDUs into PDUs. Such preprocessing steps are e.g. channel coding operations before the final assembly of a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>, the configuration of the transport block size or the definition of the protocol header fields before the final assembly. This decision helps to support latency aspects, especially for <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> services. Preprocessing allows, for example, the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entity to receive a higher layer <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> even if no <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> resources are yet available and store it in a buffer as the pending <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> (already prepared with valid headers and sequence numbers).</p>


<a id="page_1083_c1284"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:50%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-086__RLC_protocol_behavior__5fa81a95cf.png" width="800" height="399" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-86 </span><abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> protocol behavior – difference between LTE and NR: segmentation and concatenation aspects.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1285"></a><p class="eh-headline-207 ">
				Transparent mode (<abbr class="eh-abbreviation" title="Transparent mode" lang="en"><span class="eh-tooltip" title="Transparent mode">TM</span></abbr>) entity in the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> layer
			</p>


<a id="page_1083_c1286"></a><p>The <abbr class="eh-abbreviation" title="Transparent mode" lang="en"><span class="eh-tooltip" title="Transparent mode">TM</span></abbr> entity is used solely to transfer data from the logical control channel for broadcasting system information and paging, <abbr class="eh-abbreviation" title="Broadcast control channel (logical channel)" lang="en"><span class="eh-tooltip" title="Broadcast control channel (logical channel)">BCCH</span></abbr>, <abbr class="eh-abbreviation" title="Paging control channel" lang="en"><span class="eh-tooltip" title="Paging control channel">PCCH</span></abbr> or UL/DL <abbr class="eh-abbreviation" title="Common control channel" lang="en"><span class="eh-tooltip" title="Common control channel">CCCH</span></abbr>. This data is characterized by a transport format known <em>a priori</em> or a constant data rate. Thus, the <abbr class="eh-abbreviation" title="Transparent mode" lang="en"><span class="eh-tooltip" title="Transparent mode">TM</span></abbr> entity cannot be used for user data traffic conveyed via the <abbr class="eh-abbreviation" title="Dedicated traffic channel" lang="en"><span class="eh-tooltip" title="Dedicated traffic channel">DTCH</span></abbr> logical channel. As a specific transfer characteristic, the <abbr class="eh-abbreviation" title="Transparent mode" lang="en"><span class="eh-tooltip" title="Transparent mode">TM</span></abbr> entity does not segment the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> and does not attach a <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> header. This <abbr class="eh-abbreviation" title="Transparent mode" lang="en"><span class="eh-tooltip" title="Transparent mode">TM</span></abbr> mode is feasible, since the information via logical control channels involves higher layer control messages that should not be split via segmentation and may have a constant length. In addition, the content information is given by the logical channel itself, i.e. <abbr class="eh-abbreviation" title="Broadcast control channel (logical channel)" lang="en"><span class="eh-tooltip" title="Broadcast control channel (logical channel)">BCCH</span></abbr> only contains system information, thus no additional protocol header information is needed. There is no acknowledgement for the <abbr class="eh-abbreviation" title="Transparent mode" lang="en"><span class="eh-tooltip" title="Transparent mode">TM</span></abbr> entity as we may understand a kind of acknowledgement given by the application itself, i.e. a missing <em>RRCConnectonSetup</em> message following a random access request that is not properly received by the gNB will lead to retransmission of the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> sequence by the UE.</p><p>The general transfer model for the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Transparent mode" lang="en"><span class="eh-tooltip" title="Transparent mode">TM</span></abbr> entity is given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-087__RLC_transparent_mode.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-87 &lt;\/span&gt;RLC transparent mode \u2013 peer-to-peer model.&quot;}]">Fig. 2-87</a> (<span class="eh-hint" title="3GPP TS 38.322: NR; Radio Link Control (RLC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.322: NR; Radio Link Control (RLC) protocol specification">TS 38.322</span></span>).</p>


<a id="page_1083_c1287"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:47%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-087__RLC_transparent_mode_002c54aca2.png" width="800" height="374" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-87 </span><abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> transparent mode – peer-to-peer model.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1288"></a><p class="eh-headline-207 ">
				Unacknowledged mode (<abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr>) entity in the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> layer
			</p>


<a id="page_1083_c1289"></a><p>The <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> entity is used solely for user plane data transfer via UL/DL <abbr class="eh-abbreviation" title="Dedicated traffic channel" lang="en"><span class="eh-tooltip" title="Dedicated traffic channel">DTCH</span></abbr> logical channels. It represents a method for user traffic with a lower <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow priority for reliability but greater focus on latency aspects. A major characteristic of the <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> entity is the possibility for data segmentation allowing variable data throughput and adaptation to capacity provided by lower layers. In comparison to EUTRAN, 5G NR <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> only supports segmentation of <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> SDUs into <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> PDUs. Meanwhile, EUTRAN supports segmentation and concatenation. This is primarily due to latency aspects for <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr> since the entire transmission of one <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr>, or the transfer of a segment within one <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>, avoids waiting times at the receiving entity due to concatenation and uses a kind of FIFO register principle. When notified of a transmission opportunity by the lower layer, the transmitting <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entity must segment the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> SDUs, if necessary, so that the corresponding <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> data (UMD <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>), with possibly updated <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> headers, fit within the total size of the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>(s) indicated by the lower layer. The receiving <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entity will reassemble the received <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> SDUs from the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> PDUs provided by the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer and deliver them to the higher layer. If an <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> cannot be reassembled due to the loss of <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> PDUs on the lower layers, the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr>  <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> will be discarded. In unacknowledged mode, the transfer function model is given by <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-088__RLC_unacknowledged_mode.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-88 &lt;\/span&gt;RLC unacknowledged mode \u2013 peer-to-peer mode.&quot;}]">Fig. 2-88</a> (<span class="eh-hint" title="3GPP TS 38.322: NR; Radio Link Control (RLC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.322: NR; Radio Link Control (RLC) protocol specification">TS 38.322</span></span>):</p>


<a id="page_1083_c1290"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:82%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-088__RLC_unacknowledged_mode_6dbae81f40.png" width="800" height="650" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-88 </span><abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> unacknowledged mode – peer-to-peer mode.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1291"></a><p>To support data transfer, the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> entity attaches three possible header types to the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> depending on the higher layer configuration and whether segmentation is enabled or not. The parameters for the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> header are:</p><ul class="eh-list eh-list--line"><li>Segmentation info (<abbr class="eh-abbreviation" title="System information" lang="en"><span class="eh-tooltip" title="System information">SI</span></abbr>): A 2-bit field that indicates whether the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> contains the entire <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr>, the first or last segment of the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr>, or neither the first nor the last segment</li><li>Sequence number (<abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr>) of the corresponding <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr>: This can have 6 or 12 bits depending on the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> layer <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>sn_FieldLength</em>. For UMD, the sequence number is incremented for every segmented <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr>. Note that an <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> that contains the entire <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> does not contain a sequence number <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> in its header</li><li>Segment offset (SO): A 16-bit field indicating the position of the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> segment in bytes within the original <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr>. Based on this parameter, reassembly of the segmented <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> is guaranteed to occur in the correct order</li></ul><p>An <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> header contains the sequence number (<abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr>) field only when the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> is segmented. This represents a minor difference compared to the LTE <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> layer since there is no reordering performed in NR <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> mode. It does not contain the segment offset (SO) field if the first <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> segment is contained in the current UMD <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>.</p>


<a id="page_1083_c1292"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:55%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-089__RLC_UM_header_types_e286a4fda8.png" width="800" height="436" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-89 </span><abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> header types.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1293"></a><p>With the header types for <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr>, certain differences compared to EUTRAN are introduced on the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> layer, i.e. the header no longer contains a length indicator field that was available in EUTRAN for indicating various concatenated <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> SDUs within one <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>. In addition, the frame indicator field is no longer present and has been replaced by a segment information field. Since there is no concatenation mechanism in the NR <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entity, this length indicator field is now obsolete. If the UMD <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> fits completely into a UMD <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>, there is no sequence number attached and the receiving entity will deliver it to the higher layers immediately as it is unacknowledged mode. For data transfer operation in <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> mode, several counters, state variables and timers are defined in <span class="eh-hint" title="3GPP TS 38.322: NR; Radio Link Control (RLC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.322: NR; Radio Link Control (RLC) protocol specification">TS 38.322</span></span> to guarantee that the <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> functions can perform reassembly and discarding of <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> PDUs. The segmented SDUs are counted by a sequence number (<abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr>) that is incremented by the transmitting entity following the last UMD <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> segment. First, there is a reassembly window defined as a constant given by the value <em>UM_Window_Size</em>, which can assume a value of 32 if <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> has a length of 6 bits or 2048 if <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> has a length of 12 bits. The upper bound of the reassembly window is set by a counter <em>RX_Next_Highest</em> which is incremented if a <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> with a sequence number (<abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr>) greater than <em>RX-Next_Highest</em> is received. As a kind of next expected <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> that has to be reassembled and delivered to higher layers, the counter <em>RX_Next_Reassembly</em> points to the <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> which is lowest among the undelivered <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> SDUs. Thus, any <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> that falls in the window between RX_Next_Highest and RX_Next_Reassambly will be placed in the reception buffer of the receiving <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> entity. To enable the removal or discarding of <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> PDUs that are not received by lower layers, the timer t_Reassembly (configurable by the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> layer) serves as a kind of maximum wait time for pending <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> PDUs. This timer operates in conjunction with a pointer <em>RX_Time_Trigger</em>, indicating the <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> that started the t_Reassembly timer. Typically, <em>RX_Time_Trigger</em> has the value of RX_Next_Highest and will be updated when t-Reassembly expires or when counter RX_Next_Reassembly falls below RX_Next_Highest. When the timer t-Reassembly expires, the counter RX_Next_Reassembly will be set to the value of <em>RX_Time_Trigger</em> and all <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> PDUs with lower sequence numbers will be discarded and considered as lost. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-090__RLC_UM_receiver_state.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-90 &lt;\/span&gt;RLC UM receiver state \u2013 counters, timers and variables for the reassembly and discard function.&quot;}]">Fig. 2-90</a> provides an overview of these state variables:</p>


<a id="page_1083_c1294"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:45%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-090__RLC_UM_receiver_state_05707645f3.png" width="800" height="360" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-90 </span><abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> receiver state – counters, timers and variables for the reassembly and discard function.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1295"></a><p class="eh-headline-207 ">
				Acknowledged mode (<abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr>) entity in the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> layer
			</p>


<a id="page_1083_c1296"></a><p>The <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> entity within the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> layer provides data transfer to higher layers including error correction functionality due to its inherited <abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr> mechanism. Transmitted data is buffered and retransmitted if necessary. Note that this <abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr> operation resides on top of the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> operation performed by the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> and PHY lower layers and thus represents a second level of error correction at the expense of latency aspects. Thus, the connection management must balance the trade-off between latency and reliability. Data transport services offered by the <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> entity are valid for the logical channels <abbr class="eh-abbreviation" title="Dedicated traffic channel" lang="en"><span class="eh-tooltip" title="Dedicated traffic channel">DTCH</span></abbr> and <abbr class="eh-abbreviation" title="Dedicated control channel" lang="en"><span class="eh-tooltip" title="Dedicated control channel">DCCH</span></abbr> only. Thus, the dedicated control channel can be considered as inheriting a <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow that is focused more on reliability. Meanwhile, user traffic has the option of either <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> or <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> mode depending on the general <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow settings for this particular <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session. Like <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> mode, the <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> entity offers segmentation services for SDUs to create PDUs with the size indicated by the lower layers, but concatenation is once again not possible (as was the case in the LTE <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entity). In addition to supporting the data flow, the <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> entity provides a control mechanism based on the definition of control packets (<abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> STATUS <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>) that control the acknowledged data flow. Note that <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> control PDUs have a higher priority than <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Acknowledge mode data" lang="en"><span class="eh-tooltip" title="Acknowledge mode data">AMD</span></abbr> PDUs if there is a conflict in the transmission buffer. The general model for the <span class="eh-text--nowrap">RLC AM</span> entity is given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-091__RLC_acknowledged_mode_peer-to-peer.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-91 &lt;\/span&gt;RLC acknowledged mode peer-to-peer.&quot;}]">Fig. 2-91</a> (<span class="eh-hint" title="3GPP TS 38.322: NR; Radio Link Control (RLC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.322: NR; Radio Link Control (RLC) protocol specification">TS 38.322</span></span>). The transmission and retransmission mechanism must be aligned with the segmentation mechanism to avoid the risk of losing data segments. Imagine a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> is transmitted for the first time and therefore buffered. Due to a negative acknowledgement, it has to be retransmitted, but in the meantime the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> size indicated by the lower layer is no longer the same. In such a case, the transmitting <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> may have to resegment the <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr>. The receiving end monitors based on the sequence number for possible duplicate reception of PDUs and discards them if relevant. It monitors for possible loss of pending PDUs and triggers retransmission based on the <abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr> mechanism. However, upon reaching the maximum number of retransmissions with no success, it informs the higher layer of the loss of data.</p>


<a id="page_1083_c1297"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:78%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-091__RLC_acknowledged_mode_peer-to-peer_2f49d7b354.png" width="800" height="623" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-91 </span><abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> acknowledged mode peer-to-peer.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1298"></a><p>To support data flow in <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> mode, a header is attached to each <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Acknowledge mode data" lang="en"><span class="eh-tooltip" title="Acknowledge mode data">AMD</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> that may contain different information fields and use different formats. The information fields used in the <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> header are similar to those for the UMD <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>, but with a few additional information fields.</p><ul class="eh-list eh-list--line"><li><strong>Data or control discriminator (D/C)</strong>: A 1-bit field that discriminates whether the current <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> is an <abbr class="eh-abbreviation" title="Acknowledge mode data" lang="en"><span class="eh-tooltip" title="Acknowledge mode data">AMD</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> or a STATUS <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> for control purposes</li><li><strong>Polling bit (P)</strong>: A 1-bit field that is used by the transmitting entity to request a STATUS report (if P = 1) from its receiving peer entity for the purpose of data acknowledgement</li><li>Segmentation info (<abbr class="eh-abbreviation" title="System information" lang="en"><span class="eh-tooltip" title="System information">SI</span></abbr>): A 2-bit field that indicates whether the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> contains the entire <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr>, the first or last segment of the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr>, or neither the first nor the last segment</li><li>Sequence number (<abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr>) of the corresponding <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr>: This can have 12 or 18 bits depending of the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> layer <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>sn_FieldLength</em>. For <abbr class="eh-abbreviation" title="Acknowledge mode data" lang="en"><span class="eh-tooltip" title="Acknowledge mode data">AMD</span></abbr>, the sequence number is incremented for every <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr></li><li>Segment offset (SO): A 16-bit field indicating the position of the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> segment in bytes within the original <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr>. Based on this parameter, reassembly of the segmented <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> is guaranteed to occur in the correct order</li></ul><p>The total length of the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> header is either 2 or 3 bytes.</p>


<a id="page_1083_c1299"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:57%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-092__RLC_AM_header_types_9f42e644e8.png" width="800" height="454" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-92 </span><abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> header types.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1300"></a><p>The <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entity protocol header fields are slightly different compared to the LTE <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> header fields. Since no concatenation of data packets is allowed in <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr>, the protocol header no longer requires a length indicator field. Moreover, there is no need for a resegmentation flag, which is only necessary if during retransmission, a lower layer may have changed the transportation block size. Every <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> is counted with a sequence number (<abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr>). For data transfer operation in <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> mode, several counters, state variables and timers are defined in <span class="eh-hint" title="3GPP TS 38.322: NR; Radio Link Control (RLC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.322: NR; Radio Link Control (RLC) protocol specification">TS 38.322</span></span> to support the <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> functions of <abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr> feedback and retransmission, reassembly and discarding of <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> PDUs. The segmented SDUs will be counted by a sequence number (<abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr>) that is mapped by the transmitting entity to the same <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> as the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr>. These sequence numbers are the basis for <abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr> operation. First, there is a transmit and receive window defined as a constant given by the value <em>AM_Window_Size</em>, which can assume a value of 2048 if <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> has a length of 12 bits or 131072 if <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> has a length of 18 bits. The lower bound on the transmit window is a counter TX_Next_Ack that points to the last <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> of the acknowledged SDUs. An upper window bound is given by TX_Next_Ack + AM-Window-Size. A current counter TX_Next indicates the next upcoming sequence number for transmission. At the receiving end, the RX window is limited at the lower bound by a counter RX_Next, which is a state variable that holds the value of the last <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> that was completely received in-sequence. The upper bound is given by RX_Next + <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr>_Window-Size. Certain counters and state variables are used by the receiver to operate the <abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr> feedback mechanism (see also <span class="eh-hint" title="3GPP TS 38.322: NR; Radio Link Control (RLC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.322: NR; Radio Link Control (RLC) protocol specification">TS 38.322</span></span> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-093__RLC_AM_transmit_and_receive_state_variables.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-93 &lt;\/span&gt;RLC AM transmit and receive state variables, counters and parameters to support the ARQ error correction mechanism.&quot;}]">Fig. 2-93</a> for further details). The principle of considering an <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> as not received properly is not based on a cyclic redundancy check (<abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr>), as is the case on the lower layers. Instead, it is based on a timer operation. The receiver uses a timer <em>t-Reassembly</em> to detect the loss of <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> PDUs on the lower layers. Its value is signaled via the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>RLC-config</em> and can range from 0 ms to 200 ms. The setting of this reassembly timer represents a trade-off between the aspects of latency and reliability, i.e. whether the receiver should wait longer for pending packets or signal the loss to higher layers as soon as possible. The counter variable RX_Next_Status_Trigger is a pointer to the <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> that triggered the t-Reassembly timer.</p>


<a id="page_1083_c1301"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:45%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-093__RLC_AM_transmit_and_receive_state_variables_9e63be780b.png" width="800" height="355" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-93 </span><abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Acknowledged mode" lang="en"><span class="eh-tooltip" title="Acknowledged mode">AM</span></abbr> transmit and receive state variables, counters and parameters to support the <abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr> error correction mechanism.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1302"></a><p>The <abbr class="eh-abbreviation" title="Automatic repeat request" lang="en"><span class="eh-tooltip" title="Automatic repeat request">ARQ</span></abbr> mechanism is based on feedback and optional retransmission, but how does this operation work in detail? One very simple mechanism could involve automatic <abbr class="eh-abbreviation" title="Acknowledgement" lang="en"><span class="eh-tooltip" title="Acknowledgement">ACK</span></abbr>/NACK feedback for every delivered data packet, but this would lead to very high signaling overhead. Thus, 5G NR introduces the concept of TX and RX windows and the status report triggering mechanism. First, the possible number of retransmissions is configurable by the higher layer value <em>maxRetxThreshold</em>, ranging from 1 to a maximum of 32. The negative acknowledgement in a STATUS <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> can either be valid for an entire <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> or for an <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> segment. Like in <abbr class="eh-abbreviation" title="Unacknowledged mode" lang="en"><span class="eh-tooltip" title="Unacknowledged mode">UM</span></abbr> mode, the retransmission can also be resegmented if the size given by the lower layer has changed between initial transmission and retransmission. The transmitting end can trigger a feedback ­STATUS <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> by setting the polling bit in the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Acknowledge mode data" lang="en"><span class="eh-tooltip" title="Acknowledge mode data">AMD</span></abbr> header to 1. The prerequisites for setting the poll bit to 1 are explained in <span class="eh-hint" title="3GPP TS 38.322: NR; Radio Link Control (RLC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.322: NR; Radio Link Control (RLC) protocol specification">TS 38.322</span></span>. Such situations are e.g. the transmission buffer becoming empty, representing the termination of a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> connection. Other reasons for polling are the higher layer configuration parameters <em>pollPDU</em> and <em>pollByte</em>, representing the maximum amount of either bytes or PDUs that can be sent within a polling interval. In addition to the opportunity for polling bit transmission, there is also the opportunity for retransmitting the polling request based on a timer value <em>t-PollRetransmit</em>, given by higher layers. If an <abbr class="eh-abbreviation" title="Acknowledge mode data" lang="en"><span class="eh-tooltip" title="Acknowledge mode data">AMD</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> is received with a sequence number having either a value lower than RX_Highest_Status or higher than the upper bound of the RX window and the polling bit is activated, a STATUS <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> will be generated; otherwise it will be deferred. In addition to the state variable operations, there is a higher layer timer <em>t-StatusProhibit</em> that can prohibit transmission of STATUS <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> and thus restrict the amount of signaling overhead.</p><p>The STATUS <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> may contain several bit fields for acknowledging either a sequence number of an <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr>, or negatively acknowledging a certain single <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> or multiple SDUs, or a negatively acknowledging a segment or segments within a <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr>. Moreover, it may indicate a sequence of consecutive SDUs that should be reported as negatively received via NACK. The structure of the STATUS <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> header field is given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-094__RLC_STATUS_PDU_header_fields.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-94 &lt;\/span&gt;RLC STATUS PDU header fields.&quot;}]">Fig. 2-94</a>. Its values are:</p><ul class="eh-list eh-list--line"><li><strong>Data or control discriminator (D/C)</strong>: A 1-bit field that discriminates whether the prevailing <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> is an <abbr class="eh-abbreviation" title="Acknowledge mode data" lang="en"><span class="eh-tooltip" title="Acknowledge mode data">AMD</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> or a STATUS <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> for control purposes</li><li><strong>Control PDU type (CPT)</strong> indicating the type of <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> control header. In the current release of the specification, there is only one type (STATUS <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>) that is defined. Thus, this field can be seen as a future extension</li><li><strong>Acknowledgement SN (ACK_SN)</strong>. All SDUs up to but not including this number are considered as acknowledged. Exceptions are those SDUs that are explicitly indicated as NACK with the same STATUS <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr></li><li><strong>Extension bit 1 (E1)</strong> indicating whether or not a set of NACK_<abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr>, E1, E2 and E3 follows </li><li><strong>Negative acknowledgement SN (NACK_SN)</strong> indicating the <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> of the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> that has been detected as lost or erroneous</li><li><strong>Extension bit 2 (E2)</strong> to indicate whether an optional SOstart and SOend follows this field</li><li><strong>Extension bit 3 (E3)</strong> is used in case of negative acknowledgement of a consecutive sequence of SDUs. This extension bit indicates the presence of a NACK range field following the current field</li><li><strong>SO start (SOstart)</strong> and <strong>SO end (SOend)</strong> indicate the position of the <span class="eh-text--nowrap">RLC SDU</span> portion that has been detected as lost. Together with the E3 bit, the SO sequence can span multiple SDUs to indicate non-acknowledgements</li><li><strong>NACK range</strong> representing a number of consecutively lost <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> SDUs, starting from NACK_<abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> in that field</li></ul><a id="page_1083_c1303"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:64%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-094__RLC_STATUS_PDU_header_fields_04ff4d6a0a.png" width="800" height="510" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-94 </span><abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> STATUS <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> header fields.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1304"></a><p>The <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> layer cooperates with the underlying <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer on the data quantity calculation, which is used especially for buffer status reporting situations. Such pending data includes e.g. pending <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> SDUs or <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> segments, <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> PDUs pending for initial transmission and for retransmission as well as previously triggered STATUS <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> reports.</p>


<a id="page_1083_c1305"></a><p class="eh-headline-207 ">
				Medium access control (<abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr>) protocol
			</p>


<a id="page_1083_c1306"></a><p>The name <em>medium access control</em> neatly describes the purpose and use cases for this protocol layer. <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> can be considered as the gateway to the physical layer. It offers data transmission services to a higher layer by mapping logical channels to transport channels and by applying additional data transfer functions such as channel prioritization, multiplexing or inband measurement reporting. Moreover, it supports resource allocation. In addition, the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer executes a number of <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> procedures such as random access, inband reporting of <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> or <abbr class="eh-abbreviation" title="Power headroom" lang="en"><span class="eh-tooltip" title="Power headroom">PH</span></abbr>, <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> operation and UL/DL data transfer, to name a few examples. These procedures, services and functions are explained in this chapter. Further information on the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer in general can be found in <span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span>. As a primordial service of the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer, one may consider the mapping of logical channels, describing what type of content is transferred to transport channels owning a transport profile or how the data is transferred. The mapping is explained in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-010__Channel_mapping_logical_transport_physical_5G.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-10 &lt;\/span&gt;NR logical, transport and physical channel mapping for the uplink and downlink.&quot;}]">Fig. 1-10, page 23</a>, indicating the transport channels that are handled by one <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity. A structural description of a <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity is given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-095__MAC_layer_structure.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-95 &lt;\/span&gt;MAC layer structure.&quot;}]">Fig. 2-95</a> in the form of a brief overview of the functions and services provided by the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer. If the UE has an active <abbr class="eh-abbreviation" title="Secondary cell group" lang="en"><span class="eh-tooltip" title="Secondary cell group">SCG</span></abbr>, it will have two <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entities: one for <abbr class="eh-abbreviation" title="Secondary cell group" lang="en"><span class="eh-tooltip" title="Secondary cell group">SCG</span></abbr> and one for <abbr class="eh-abbreviation" title="Master cell group" lang="en"><span class="eh-tooltip" title="Master cell group">MCG</span></abbr>.</p>


<a id="page_1083_c1307"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:61%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-095__MAC_layer_structure_1eba32f36a.png" width="800" height="481" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-95 </span><abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer structure.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1308"></a><p>The general functions of the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer are direction-dependent and are given as:</p><ul class="eh-list eh-list--line"><li>Mapping between logical channels and transport channels</li><li>Multiplexing and demultiplexing of <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> SDUs to or from logical channels. Multiplexing takes place in the uplink direction and demultiplexing in the downlink direction</li><li>Inband reporting of scheduling information such as <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> or <abbr class="eh-abbreviation" title="Power headroom" lang="en"><span class="eh-tooltip" title="Power headroom">PH</span></abbr> in the uplink direction</li><li>Bidirectional <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> operation as error correction (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1078" class="eh-link eh-link--page">2.2.5 Hybrid automatic repeat request (HARQ) operation, page 318</a> for details on the <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> procedure)</li><li>Prioritization of logical channels in the uplink direction</li></ul><p>The <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer in 5G NR not only offers functions and services to higher layers as shown above, but also provides a wide range of procedures to support the functions along with additional control and connection-related methods. The next section will give an overview of these <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> procedures. See <span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span> for a further description.</p>


<a id="page_1083_c1309"></a><p class="eh-headline-207 ">
				Random access procedure
			</p>


<a id="page_1083_c1310"></a><p>The purpose of the random access procedure is to initiate a signaling radio bearer (<abbr class="eh-abbreviation" title="Signaling radio bearer" lang="en"><span class="eh-tooltip" title="Signaling radio bearer">SRB</span></abbr>) connection using the transport channel <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> and physical channel <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr>. The random access procedure can either be initiated by higher layers known as <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> order in e.g. handover situations, or it can be triggered by the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity itself in case that higher layers initiate a mobile originated data transfer. In addition, there are a few <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> events such as other system information requests that may also initiate the random access procedure. The responsibility of the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity for the random access procedure is the configuration of a list of parameters such as selection of the correct <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> from a signaled configuration index, the power control parameters for initial power control, or the parameters for downlink signal detection and measurements such as <em>rsrp-ThresholdSSB</em> identifying the “best” <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> for random access transmission. In coordination with higher layer signaling like the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> configuration obtained via <abbr class="eh-abbreviation" title="System information block" lang="en"><span class="eh-tooltip" title="System information block">SIB</span></abbr> broadcast, the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity selects the correct <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> preamble and radio resource for the initial transmission. A detailed description of the random access procedure in 5G NR is given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1070" class="eh-link eh-link--page">2.1.4 Random access procedure in 5G NR, page 250</a>, and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1036_c789" class="eh-link eh-link--page eh-link--ce">Physical random access channel (PRACH) – power control, page 130</a>.</p>


<a id="page_1083_c1311"></a><p class="eh-headline-207 ">
				Uplink time alignment procedures
			</p>


<a id="page_1083_c1312"></a><p>Radio waves propagate at the speed of light (approx. 3.3 µs per kilometer). Depending on the distance between the UE and gNB, this causes a propagation delay T<sub>prop</sub>. Typically, a UE does not know the distance to the base station. Instead, it synchronizes to the received time reference provided by physical signals such as <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr>, <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr> or <abbr class="eh-abbreviation" title="Tracking reference signal" lang="en"><span class="eh-tooltip" title="Tracking reference signal">TRS</span></abbr>. Thus, without any interaction, the uplink signal arriving at the base station receiver is delayed by 2 × T<sub>pro</sub><sub>p</sub>. Knowing the numbers of the 5G numerologies and assuming a cell size of hundreds of meters or even kilometers, a non-compensated propagation delay could cause interferences to other users. The basic idea behind compensating for the propagation delay involves the definition of a time by which the UE advances its uplink transmission timing compared to the reference time that the UE acquires from reception of synchronization signals. This time is known as the timing advance value. The responsibility of the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity is to maintain this timing advance at a valid level via inband signaling using <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> control elements. Since 5G NR supports either carrier aggregation or dual connectivity, there may be multiple uplink transmissions controlled in terms of the time alignment. This lead already in LTE to the definition of a timing advance group (<abbr class="eh-abbreviation" title="Timing advance group" lang="en"><span class="eh-tooltip" title="Timing advance group">TAG</span></abbr>), containing timing advance (<abbr class="eh-abbreviation" title="Timing advance or tracking area" lang="en"><span class="eh-tooltip" title="Timing advance or tracking area">TA</span></abbr>) values for primary or secondary cells. The general principle of the timing advance is depicted in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-096__Time_alignment_control_via_timing_advance.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-96 &lt;\/span&gt;Time alignment control via timing advance (uplink \u2013 downlink frame timing).&quot;}]">Fig. 2-96</a>, showing the time alignment between the uplink and downlink. There is first a higher layer signaling parameter <em>n-TimingAdvanceOffset</em> that is duplex scheme and frequency range dependent (FR1 or 2 / FDD or TDD) and given by higher layers as either 0, 25600 or 39936 units that will be multiplied by T<sub>c</sub>. <span class="eh-hint" title="3GPP TS 38.133: NR; Requirements for support of radio resource management" lang="en"><span class="eh-tooltip" title="3GPP TS 38.133: NR; Requirements for support of radio resource management">TS 38.133</span></span> specifies some rules on how to obtain the offset if it is not signaled via higher layers. Via a relative timing command <abbr class="eh-abbreviation" title="Timing advance or tracking area" lang="en"><span class="eh-tooltip" title="Timing advance or tracking area">TA</span></abbr>, received within a <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> control <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>, the gNB can now control the proper arrival of all uplink signals to be aligned. The <abbr class="eh-abbreviation" title="Timing advance or tracking area" lang="en"><span class="eh-tooltip" title="Timing advance or tracking area">TA</span></abbr> value is <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> dependent and based on the symbol time T<sub>c</sub> as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-040__Time_unit_Tc_used_for_5G_NR_in_comparison_to_time_unit_Ts_known_from_EUTRAN.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-40 &lt;\/span&gt;Time unit Tc used in 5G NR in comparison with time unit Ts from EUTRAN.&quot;}]">Fig. 1-40, page 63</a>. Using this value, the gNB can delay or advance the uplink transmission in relative steps with the granularity dependent on the <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> as well. The procedure described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-096__Time_alignment_control_via_timing_advance.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-96 &lt;\/span&gt;Time alignment control via timing advance (uplink \u2013 downlink frame timing).&quot;}]">Fig. 2-96</a> represents the case when a radio connection has been established. An exception exists for the initial access procedure, where there is just one RF signal, the <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> preamble that is not timing advance controlled. Thus, its structure typically contains a guard time to prevent collisions with subsequent signals. See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1032_c680" class="eh-link eh-link--page eh-link--ce">Physical random access channel (PRACH), page 89</a> for further details on <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> preambles. The validity of the timing alignment is controlled via an <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> timer <em>timeAlignmentTimer</em> that can assume values from 500 ms to 10240 ms (or even infinity). In case this timer expires without a previous update, the UE has to halt its radio transmission in the uplink direction.</p>


<a id="page_1083_c1313"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:44%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-096__Time_alignment_control_via_timing_advance_2a6cb104a2.png" width="800" height="351" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-96 </span>Time alignment control via timing advance (uplink – downlink frame timing).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1314"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Downlink shared channel" lang="en"><span class="eh-tooltip" title="Downlink shared channel">DL-SCH</span></abbr> data transfer
			</p>


<a id="page_1083_c1315"></a><p>One essential procedure for the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer is clearly the transfer of data via the DL <abbr class="eh-abbreviation" title="Shared channel" lang="en"><span class="eh-tooltip" title="Shared channel">SCH</span></abbr> transport channel within an overall activated <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session. The responsibility of the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity is to support such data transfer via features like DL assignment, <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> operation and data <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> disassembly and demultiplexing. As described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076" class="eh-link eh-link--page">2.2.3 DL resource assignment, page 295</a>, the network primarily uses three identifiers to indicate the proper receiver for a downlink data packet: <abbr class="eh-abbreviation" title="Cell RNTI" lang="en"><span class="eh-tooltip" title="Cell RNTI">C-RNTI</span></abbr> for dynamic scheduled data, temporary <abbr class="eh-abbreviation" title="Cell RNTI" lang="en"><span class="eh-tooltip" title="Cell RNTI">C-RNTI</span></abbr> for initial access scheduling of <abbr class="eh-abbreviation" title="Downlink shared channel" lang="en"><span class="eh-tooltip" title="Downlink shared channel">DL-SCH</span></abbr> channels containing higher layer signaling, and <abbr class="eh-abbreviation" title="Configured scheduling RNTI" lang="en"><span class="eh-tooltip" title="Configured scheduling RNTI">CS-RNTI</span></abbr> for semi-persistent scheduling of data. For the sake of completeness, there is also <abbr class="eh-abbreviation" title="Modulation and coding scheme C-RNTI" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme C-RNTI">MCS-C-RNTI</span></abbr> for scheduling modulation scheme restricted data to one UE. In addition to the identifier for the packet addressee <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr>, there is a second signaling parameter <abbr class="eh-abbreviation" title="New data indicator" lang="en"><span class="eh-tooltip" title="New data indicator">NDI</span></abbr> that indicates whether the received data packet is received initially or whether it corresponds to a retransmission. The latter is especially important for soft combining of the data before the error correction procedure starts (see also <span class="eh-reference" title="Reiner Stuhlfauth, High Speed Packet Access, Technical book edited by Rohde &amp; Schwarz, 2012" lang="en"><span class="eh-tooltip" title="Reiner Stuhlfauth, High Speed Packet Access, Technical book edited by Rohde &amp; Schwarz, 2012">[Ref. 18]</span></span> for a description of soft combining and <abbr class="eh-abbreviation" title="New data indicator" lang="en"><span class="eh-tooltip" title="New data indicator">NDI</span></abbr>). As a method for error correction that was previously introduced in HSPA and LTE, 5G NR also supports the concept of <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr>, a feedback loop including retransmission of data packets with varying coding schemes to allow incremental redundancy. Further details on <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> operation in 5G NR are given in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1078" class="eh-link eh-link--page">2.2.5 Hybrid automatic repeat request (HARQ) operation, page 318</a>. Note that 5G NR also supports a bundling operation for the <abbr class="eh-abbreviation" title="Transmission time interval" lang="en"><span class="eh-tooltip" title="Transmission time interval">TTI</span></abbr>, indicated via <em>pdsch-</em><em>AggregationFactor</em> as one of the values 1 (default), 2,4 or 8 within <em>PDSCH-config</em>. If <abbr class="eh-abbreviation" title="Transmission time interval" lang="en"><span class="eh-tooltip" title="Transmission time interval">TTI</span></abbr> bundling is enabled, all bundled <abbr class="eh-abbreviation" title="Transmission time interval" lang="en"><span class="eh-tooltip" title="Transmission time interval">TTI</span></abbr> packets belong to the same <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process. A final subprocedure that is very important within the <span class="eh-text--nowrap">DL-SCH</span> data transfer procedure is the ability to assemble, disassemble and multiplex/demultiplex different data packets and logical channels. As described in the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> description <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1083_c1282" class="eh-link eh-link--page eh-link--ce">Radio link control protocol (RLC), page 356</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-080__Data_flow_example.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-80 &lt;\/span&gt;Data flow example with 5G NR protocol layers.&quot;}]">Fig. 2-80</a>, the <span class="eh-text--nowrap">NR RLC</span> entity (unlike the LTE <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> entity) does not support data concatenation. As a consequence, the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity is responsible for transport format selection. Depending on the applicable <abbr class="eh-abbreviation" title="Transport block size" lang="en"><span class="eh-tooltip" title="Transport block size">TBS</span></abbr>, the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer will construct one <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> by mapping different <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> SDUs onto it. One <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> is given as a higher layer <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> including optional padding and thus the scheduled data rate can be obtained. The general principle of downlink <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> format generation is depicted in the upper part of <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-097__MAC_uplink_and_downlink_PDU_formats.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-97 &lt;\/span&gt;MAC uplink and downlink PDU formats.&quot;}]">Fig. 2-97</a>. Seen from left to right, the <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> generation process starts with a first header field containing the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> control information length, logical channel ID (<abbr class="eh-abbreviation" title="Logical channel ID – MAC header parameter" lang="en"><span class="eh-tooltip" title="Logical channel ID – MAC header parameter">LCID</span></abbr>) and a format field indicating the length of the length field. First, the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> contains a fixed sized control element (<abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr>). A second variable sized control element is included followed by the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> for higher layer data transfer. The length field L in each subheader and the format indicator F allow derivation of the number of bits per <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> and thus the disassembly of the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> into its <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> in case they are assembled together. In general, there is a structure in which the first <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> control elements are included in the resulting <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> and then data PDUs will be added. The <abbr class="eh-abbreviation" title="Logical channel ID – MAC header parameter" lang="en"><span class="eh-tooltip" title="Logical channel ID – MAC header parameter">LCID</span></abbr> field either indicates what type of logical channel corresponds to the concatenated <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> or what type of <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> control element it is. We should not interpret the <abbr class="eh-abbreviation" title="Logical channel ID – MAC header parameter" lang="en"><span class="eh-tooltip" title="Logical channel ID – MAC header parameter">LCID</span></abbr> field as a description of the logical channel type as described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1013" class="eh-link eh-link--page">1.1.3.1 Logical, transport and physical channels, page 22</a>. Furthermore, it is a numerical identifier to allow multiplexing of various logical channels and thus fulfill certain prioritization aspects. Refer to <span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span> for a detailed list of <abbr class="eh-abbreviation" title="Logical channel ID – MAC header parameter" lang="en"><span class="eh-tooltip" title="Logical channel ID – MAC header parameter">LCID</span></abbr>  values referring to the logical channel or <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr>. There is one important difference worth mentioning between the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> structure in 5G NR compared to LTE. While in LTE, the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> starts first with all the control elements and subheaders (see <span class="eh-hint" title="3GPP TS 36.321: E-UTRA; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 36.321: E-UTRA; Medium Access Control (MAC) protocol specification">TS 36.321</span></span> or <span class="eh-reference" title="Christina Geßner, Long Term Evolution – a concise introduction into LTE and its measurement requirements,Technical book edited by Rohde &amp; Schwarz, 2011" lang="en"><span class="eh-tooltip" title="Christina Geßner, Long Term Evolution – a concise introduction into LTE and its measurement requirements,Technical book edited by Rohde &amp; Schwarz, 2011">[Ref. 30]</span></span> for further information), the 5G NR <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> places a subheader at the beginning of each <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> or subPDU as shown in the <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-097__MAC_uplink_and_downlink_PDU_formats.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-97 &lt;\/span&gt;MAC uplink and downlink PDU formats.&quot;}]">Fig. 2-97, page 372</a>. This allows concatenation of <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> PDUs on the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer since, as previously discussed, the <abbr class="eh-abbreviation" title="Radio link control" lang="en"><span class="eh-tooltip" title="Radio link control">RLC</span></abbr> layer does not perform concatenation. In addition, the subheader in front of each subPDU allows parallel processing on the physical and <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layers to improve the latency. Another difference resulting from this placement of the control subheader directly with the subPDU is the omission of the extension flag bit E that was needed in LTE to indicate the control subheader length.</p>


<a id="page_1083_c1316"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:84%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-097__MAC_uplink_and_downlink_PDU_formats_0d452ac3a7.png" width="800" height="667" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-97 </span><abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> uplink and downlink <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> formats.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1317"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Uplink shared channel" lang="en"><span class="eh-tooltip" title="Uplink shared channel">UL-SCH</span></abbr> data transfer
			</p>


<a id="page_1083_c1318"></a><p>The procedures for uplink data transfer operate similar to the downlink ­DL-SCH data transfer such as data multiplexing, <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process operation and radio resource assignment. The allocation of uplink resources can be handled in three ways: either dynamic scheduling of resources via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1080" class="eh-link eh-link--page">2.2.7 UL grant reception or UL assignment, page 329</a>), resource allocation in a random access response (<abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>) message (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1070" class="eh-link eh-link--page">2.1.4 Random access procedure in 5G NR, page 250</a>), or configured as semi-persistent scheduling (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1084" class="eh-link eh-link--page">2.2.11 Dynamic, semi-persistent and grant-free scheduling, page 382</a>). Like on the downlink, on the uplink there may also be several <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> processes running concurrently and the <abbr class="eh-abbreviation" title="New data indicator" lang="en"><span class="eh-tooltip" title="New data indicator">NDI</span></abbr> bit is used to indicate whether the prevailing data packet is sent for the first time or has to be considered as a retransmission of a previous packet transmission. There is one marginal difference between the mapping of logical channels onto <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> PDUs on the uplink compared to the downlink. On the downlink, it is up to the network to select which <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> SDUs related to each logical channel should be included in the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>, but on the uplink, the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> can have an influence through the definition of priority policies. The <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>LogicalChannelConfig</em> controls the scheduling of uplink data by signaling three parameters for each logical channel per <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity:</p>


<a id="page_1083_c1319"></a><p class="eh-headline-207 ">
				Logical channel prioritization (<abbr class="eh-abbreviation" title="Logical channel prioritization" lang="en"><span class="eh-tooltip" title="Logical channel prioritization">LCP</span></abbr>) parameters
			</p>


<a id="page_1083_c1320"></a><ul class="eh-list eh-list--line"><li><strong>Priority</strong> of logical channels with respect to one other (range: 1 to 16), where an increasing priority value indicates a lower priority level</li><li><strong>prioritisedBitRate (PBR)</strong>, which sets the prioritized bit rate for this particular logical channel in kbps throughput. Values range from 0 kbps to 65 536 kbps (or even infinity). This can be understood as the data rate that will be provided to one logical channel of higher priority before another logical channel of lower priority gets data resources</li><li><strong>bucketSizeDuration (BSD)</strong>, which sets the bucket size duration. Values range from 5 ms to 1000 ms. The <abbr class="eh-abbreviation" title="Bucket size duration" lang="en"><span class="eh-tooltip" title="Bucket size duration">BSD</span></abbr> is basically used to set the maximum amount of pending data allowed for a logical channel with respect to the prioritization checks. It has to be understood as a maximum length of time the logical channel can use the provided data resources by sending <abbr class="eh-abbreviation" title="Prioritized bit rate" lang="en"><span class="eh-tooltip" title="Prioritized bit rate">PBR</span></abbr> data. The more data a logical channel has, the higher its priority tends to be, but it cannot exceed the value given by prioritized bit rate <span class="eh-text--nowrap">×</span> bucket size duration, e.g. <span class="eh-text--nowrap">100 kbps × 1 second = 100 kbits</span>. This keeps a logical channel experiencing a very large burst of data from taking over the transmission and blocking out a lower rate channel, thus risking its “starvation”. The UE permanently maintains an internal state variable for each logical channel that can be considered as a priority pointer to the logical channel that benefits from the provided transport resources in decreasing order of priority. Note that the logical channel priority decreases with this state variable in order to prevent a single logical channel from hogging all the resources</li></ul><p>There are additional <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> configuration parameters controlling the <abbr class="eh-abbreviation" title="Logical channel prioritization" lang="en"><span class="eh-tooltip" title="Logical channel prioritization">LCP</span></abbr> procedure such as the allowed <abbr class="eh-abbreviation" title="Subcarrier spacing" lang="en"><span class="eh-tooltip" title="Subcarrier spacing">SCS</span></abbr> list, maximum <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> duration or allowed serving cells, which are description parameters for logical channel configuration, controlled via <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>. Besides prioritization of the logical channels used for data transfer with the above parameters, <span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span> specifies a relative priority order for the logical channels and <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr>, e.g. UL-CCCH data has higher priority than UL-DTCH.</p><p>The uplink <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> has a slightly different construction compared to the downlink <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-097__MAC_uplink_and_downlink_PDU_formats.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-97 &lt;\/span&gt;MAC uplink and downlink PDU formats.&quot;}]">Fig. 2-97</a>. The major difference is that the uplink control information via <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> subPDU including control elements is placed after the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> subPDU containing data SDUs. The reason for this can be seen in the content of the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr> like <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> or <abbr class="eh-abbreviation" title="Power headroom" lang="en"><span class="eh-tooltip" title="Power headroom">PH</span></abbr> reporting that typically requires some reflection on the latest UE status before transmission. The placement of control elements after the data subPDUs allows parallel processing on the transmitting end and leaves more time for reflection on the status when generating the complete <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr>. At the gNB receiving end, the placement of a subheader directly in front of each subPDU and the placement of the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr> at the end also allows some parallelization of the data processing. Based on the length indicator fields, the gNB receiver can immediately identify the position of the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr> sub-PDU within the overall <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> and thus the data processing of <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> subPDUs with data and subPDUs with control information can run in parallel <span class="eh-reference" title="3GPP R2-1703511, Placement of MAC CEs in the MAC PDU, 3GPP meeting# 97bis, April 2017" lang="en"><span class="eh-tooltip" title="3GPP R2-1703511, Placement of MAC CEs in the MAC PDU, 3GPP meeting# 97bis, April 2017">[Ref. 31]</span></span>.</p>


<a id="page_1083_c1321"></a><p class="eh-headline-207 ">
				Buffer status reporting
			</p>


<a id="page_1083_c1322"></a><p>The <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer on the uplink supports <abbr class="eh-abbreviation" title="Uplink shared channel" lang="en"><span class="eh-tooltip" title="Uplink shared channel">UL-SCH</span></abbr> data transfer using inband control information sent via the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr> or separately using the physical control channel (<abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>). This uplink control information can be a combination of: a request for additional UL data resources via the transmission of a scheduling request, a report on the still pending data quantity given as a buffer status report and information about the transmit power reserves (power headroom). The scheduling request (<abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr>) allows the UE to request <abbr class="eh-abbreviation" title="Uplink shared channel" lang="en"><span class="eh-tooltip" title="Uplink shared channel">UL-SCH</span></abbr> resources for data transmission (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1079" class="eh-link eh-link--page">2.2.6 Uplink scheduling request and buffer status reporting, page 326</a> for a detailed description of the <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr>). The <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity in an end-user device determines the amount of UL data waiting to be sent on a logical channel (see <span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span> for calculation details). This pending data amount is reported to the network via <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr> inband reporting of buffer status reports (<abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr>), which can be regular <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> reports, periodic <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> reports or padding <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> reports. They are configured by the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> elements <em>BSR-Config</em> and <em>Logical-</em><em>ChannelConfig</em>. The <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> configuration parameters include:</p><ul class="eh-list eh-list--line"><li><strong>periodicBSR-Timer</strong>: A timer used for periodic <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> reporting interval definition</li><li><strong>retxBSR-Timer </strong>sets a timer for retransmission of the <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr>. It is restarted upon reception of a grant for uplink transmission and can be seen as a kind of persistency indicator on the uplink for <abbr class="eh-abbreviation" title="Uplink shared channel" lang="en"><span class="eh-tooltip" title="Uplink shared channel">UL-SCH</span></abbr> data transfer</li><li><strong>logicalChannelSR-DelayTimerApplied </strong>indicating whether a delay timer is applied for the transmission of <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr></li><li><strong>logicalChannelSR-DelayTimer</strong> indicates whether to apply the delay timer for <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> transmission for this logical channel</li><li><strong>logicalChannelSR-Mask</strong> is a Boolean parameter to control <abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr> triggering in case of semi-persistent scheduling instead of <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr></li><li><strong>logicalChannelGroup </strong>allowing the possibility of grouping logical channels for control info overhead reduction. The maximum number of LCGs is eight in the current release of the specification</li></ul><p>The main trigger for <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> reporting includes cases such as data arriving on the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer from a logical channel with higher priority than the current one, none of the logical channels containing any available data, expiry of the retransmission <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> timer, and expiry of the periodic <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> timer. There are two types of <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr> reports: a short <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> and a long <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr>. The long <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> allows reporting of pending data for all relevant logical channel groups, while the short <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> only reports one logical channel. There is the possibility to truncate the <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> if needed. The structure of the <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr> format is shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-098__Buffer_status_reporting.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-98 &lt;\/span&gt;Buffer status reporting with MAC CE \u2013 format and structure.&quot;}]">Fig. 2-98</a>, indicating the <abbr class="eh-abbreviation" title="Logical channel group" lang="en"><span class="eh-tooltip" title="Logical channel group">LCG</span></abbr> ID field for the short <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr> or <abbr class="eh-abbreviation" title="Logical channel group" lang="en"><span class="eh-tooltip" title="Logical channel group">LCG</span></abbr> indicator flag for the long <abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr>, along with a buffer size field containing an integer number referring to a table in <span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span> with the buffer size.</p>


<a id="page_1083_c1323"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:40%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-098__Buffer_status_reporting_f7b7f4f265.png" width="800" height="315" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-98 </span>Buffer status reporting with <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr> – format and structure.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1324"></a><p class="eh-headline-207 ">
				Power headroom reporting
			</p>


<a id="page_1083_c1325"></a><p>In cooperation with the physical layer, the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity in the UE sends power headroom reports to the gNB. These reports help the scheduler within the gNB to influence the power control mechanism, explained in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1036_c774" class="eh-link eh-link--page eh-link--ce">Power allocation for the uplink, page 123</a>, and consequently achieve a better <abbr class="eh-abbreviation" title="Signal to noise ratio" lang="en"><span class="eh-tooltip" title="Signal to noise ratio">SNR</span></abbr> at its receiver for scheduling a better suited <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr>. <span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span> specifies three different power headroom reporting (<abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr>) types:</p><p><strong>Type 1 power headroom</strong>: The difference between the nominal UE maximum transmit power and the estimated power for <abbr class="eh-abbreviation" title="Uplink shared channel" lang="en"><span class="eh-tooltip" title="Uplink shared channel">UL-SCH</span></abbr> transmission per activated serving cell. Type 1 <abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr> is valid for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission occasion</p><p><strong>Type 2 power headroom</strong>: The difference between the nominal UE maximum transmit power and the estimated power for <abbr class="eh-abbreviation" title="Uplink shared channel" lang="en"><span class="eh-tooltip" title="Uplink shared channel">UL-SCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> transmission on <abbr class="eh-abbreviation" title="Special cell" lang="en"><span class="eh-tooltip" title="Special cell">SpCell</span></abbr> of the other <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity (i.e. E-UTRA <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity in <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> case only)</p><p><strong>Type 3 power headroom</strong>: The difference between the nominal UE maximum transmit power and the estimated power for <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> transmission per activated serving cell. Type 3 <abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr> is valid for <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> transmission occasion</p><p>The power headroom reporting is controlled via <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>, e.g. with the <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> ­<em>PHR-Config </em>(<span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span>):</p><ul class="eh-list eh-list--line"><li><strong>phr-PeriodicTimer</strong> for the periodic transmission of <abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr></li><li><strong>phr-ProhibitTimer</strong> to specify time intervals between <abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr> reports to avoid an unnecessary amount of signaling information</li><li><strong>phr-Tx-PowerFactorChange</strong> defines an optional trigger for the <abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr> report that is activated if the downlink path loss of a cell that operates as the path loss reference has changed more than this factor</li><li><strong>phr-Type2OtherCell</strong> is a Boolean variable that is used in situations with dual connectivity, especially when two uplink resources are assigned. If set to true, the UE must report a <abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr> type 2 for the <abbr class="eh-abbreviation" title="Special cell" lang="en"><span class="eh-tooltip" title="Special cell">SpCell</span></abbr> of the other <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity or for the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> SCells of this <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity</li><li><strong>phr-ModeOtherCG</strong> is a Boolean variable used in dual connectivity situations to control the reports to be real or virtual. The specification <span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span> describes this variable as: “Indicates the mode (i.e. real or virtual) used for the <abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr> of the activated cells that are part of the other cell group (i.e. <abbr class="eh-abbreviation" title="Master cell group" lang="en"><span class="eh-tooltip" title="Master cell group">MCG</span></abbr> or <abbr class="eh-abbreviation" title="Secondary cell group" lang="en"><span class="eh-tooltip" title="Secondary cell group">SCG</span></abbr>), when <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr> is configured. If the UE is configured with only one cell group (no <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr>), it ignores the field”</li><li><strong>multiplePHR</strong> indicates if power headroom should be reported using the single entry <abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr> <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> control element or multiple entry <abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr> <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> control element. This is relevant if dual connectivity is activated</li></ul><p>Power headroom report transmission is triggered by several situations specified in <span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span>. For example, <abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr> may be triggered by a path loss change of the path loss reference cell by more than <em>phr-Tx-PowerFactorChange</em>, periodic <abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr> reports triggered by expiration of <em>phr-PeriodicTimer</em>, activation of the <abbr class="eh-abbreviation" title="Secondary cell" lang="en"><span class="eh-tooltip" title="Secondary cell">SCell</span></abbr> in dual connectivity scenarios, or the addition of the PSCell. The <span class="eh-text--nowrap">PHR CE</span> in the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer is preceded by a subheader containing the <abbr class="eh-abbreviation" title="Logical channel ID – MAC header parameter" lang="en"><span class="eh-tooltip" title="Logical channel ID – MAC header parameter">LCID</span></abbr> to indicate the control element type. Calculation of the power headroom is based on the equation for uplink power control (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-096__PUSCH_transmit_power_calculation__Formeln.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-96 &lt;\/span&gt;PUSCH transmit power calculation formula.&quot;}]">Fig. 1-96, page 124</a>) plus the current nominal maximum power <em>P</em><sub class="eh-text--em eh-text__letter">cma</sub><sub class="eh-text--em eh-text__letter">x</sub>. As the value of <em>P</em><sub class="eh-text--em eh-text__letter">cmax</sub> may be restricted by the cell, it is obvious that the <abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr> report will also include the underlying <em>P</em><sub class="eh-text--em eh-text__letter">cmax</sub> for the <abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr> calculation. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-099__Power_headroom_reportingai.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-99 &lt;\/span&gt;Power headroom reporting (PHR) with MAC CE \u2013 format and structure.&quot;}]">Fig. 2-99</a> describes the two possible formats: single <abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr> entry for single cell operation or multiple entry <abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr> for dual connectivity or carrier aggregation scenarios.</p>


<a id="page_1083_c1326"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:54%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-099__Power_headroom_reportingai_11d1d412c4.png" width="800" height="429" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-99 </span>Power headroom reporting (<abbr class="eh-abbreviation" title="Power headroom report" lang="en"><span class="eh-tooltip" title="Power headroom report">PHR</span></abbr>) with <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr> – format and structure.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1327"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Paging channel" lang="en"><span class="eh-tooltip" title="Paging channel">PCH</span></abbr> and <abbr class="eh-abbreviation" title="Broadcast channel (transport channel)" lang="en"><span class="eh-tooltip" title="Broadcast channel (transport channel)">BCH</span></abbr> reception
			</p>


<a id="page_1083_c1328"></a><p>Like in legacy mobile communications technologies, the 5G system uses the concept of paging channels to initiate a mobile terminated data session. The <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer supports this paging operation by decoding the information received on the transport channel <abbr class="eh-abbreviation" title="Paging channel" lang="en"><span class="eh-tooltip" title="Paging channel">PCH</span></abbr> and mapping it onto the logical channel <abbr class="eh-abbreviation" title="Paging control channel" lang="en"><span class="eh-tooltip" title="Paging control channel">PCCH</span></abbr> for higher layer evaluation.</p><p>Assignments for <abbr class="eh-abbreviation" title="Paging channel" lang="en"><span class="eh-tooltip" title="Paging channel">PCH</span></abbr> on the physical layer are indicated via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> scheduling using the <abbr class="eh-abbreviation" title="Paging RNTI" lang="en"><span class="eh-tooltip" title="Paging RNTI">P-RNTI</span></abbr> identifier. In addition, the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer supports reception of the master information block received via the <abbr class="eh-abbreviation" title="Broadcast channel (transport channel)" lang="en"><span class="eh-tooltip" title="Broadcast channel (transport channel)">BCH</span></abbr> transport channel. Note that the <abbr class="eh-abbreviation" title="Broadcast channel (transport channel)" lang="en"><span class="eh-tooltip" title="Broadcast channel (transport channel)">BCH</span></abbr> transport channel is mapped onto the physical channel <abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> which is part of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> block. Details on <abbr class="eh-abbreviation" title="Broadcast channel (transport channel)" lang="en"><span class="eh-tooltip" title="Broadcast channel (transport channel)">BCH</span></abbr> reception using <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> are described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1067" class="eh-link eh-link--page">2.1.2.1 Other fundamental properties of synchronization signal blocks (SSBs), page 237</a>.</p>


<a id="page_1083_c1329"></a><p class="eh-headline-207 ">
				Discontinuous reception (<abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr>)
			</p>


<a id="page_1083_c1330"></a><p>Discontinuous reception is a well known method of power saving during periods of low activity. While in the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>_CONNECTED state, the UE permanently monitors the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> for scheduled reception of information such as data packets or control information. The <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer can be configured via <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> for a <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> period where the UE does not need to monitor the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> and thus enters a kind of sleep mode to save energy. The general principle of <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> mode is depicted in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-100__Discontinuous_receptionai.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-100 &lt;\/span&gt;Discontinuous reception (DRX) \u2013 general principle of operation.&quot;}]">Fig. 2-100</a> and configuration details are described in <span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span>. For the sake of simplicity, certain details of the <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> concept are omitted here. Like in LTE, there are two <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycle lengths in 5G NR: a short <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycle and a long <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycle. The idea here is that the short <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycle is started in combination with the last packet arriving for an ongoing connection since it is likely for the connection to be resumed or for “delayed” packets to arrive. For example, in a typical web browsing scenario, after downloading a file containing a webpage, it is likely that the human user will interact by clicking on another link and thus trigger another data transfer. Such behavior is targeted by the short <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycle length. The long <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycle starts after a longer period of inactivity or when activated via the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr>. <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> is configured by a higher layer and is either activated via a timer that expires or via <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> control elements that use the <abbr class="eh-abbreviation" title="Logical channel ID – MAC header parameter" lang="en"><span class="eh-tooltip" title="Logical channel ID – MAC header parameter">LCID</span></abbr> field to send this control info.</p>


<a id="page_1083_c1331"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:42%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-100__Discontinuous_receptionai_49312c04ce.png" width="800" height="333" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-100 </span>Discontinuous reception (<abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr>) – general principle of operation.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1332"></a><p>The higher layer information element <em>DRX-config</em> contains the following parameters that configure the <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> operating mode including timers and cycle length.</p><p><abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> configuration parameters by <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>:</p><ul class="eh-list eh-list--line"><li><strong>drx-onDurationTimer</strong> is the duration (1 ms to 1600 ms) during which the UE monitors the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> at the beginning of a <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycle</li><li><strong>drx-SlotOffset</strong>, the delay in slots (0 to 31) before starting the <span class="eh-text--nowrap">drx-onDurationTimer</span>, is needed in 5G due to the introduction of flexible scheduling in the time domain and the concept of mini-slot allocation. This is unlike LTE where the <abbr class="eh-abbreviation" title="Transmission time interval" lang="en"><span class="eh-tooltip" title="Transmission time interval">TTI</span></abbr> scheduling is always 1 ms</li><li><strong>drx-InactivityTimer</strong> is the duration (0 ms to 2560 ms) for actively monitoring the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> by the UE after <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> scheduling of a new UL or DL transmission</li><li><strong>drx-RetransmissionTimerDL</strong> (per DL <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process) defines the maximum duration until a DL retransmission is received and thus forces the UE to monitor <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> scheduling messages for the retransmission indication</li><li><strong>drx-RetransmissionTimerUL</strong> (per UL <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process) defines the maximum duration until a grant for UL retransmission is received and thus forces the UE to monitor <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> scheduling</li><li><strong>drx-LongCycleStartOffset</strong> is a parameter that configures both, the duration of the the long <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycle and the offset of the <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycle start. If a short <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycle is configured, the duration of the long <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycle should be a multiple of the drx-ShortCycle value. The parameter <em>drx-StartOffset</em> defines the subframe where the long and short <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycle starts</li><li><strong>drx-ShortCycle</strong> defines the duration (2 ms to 640 ms) of the short <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycle, consisting of an ON period and an OFF period. Note that the configuration of a short <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycle is optional</li><li><strong>drx-ShortCycleTimer</strong> sets the duration the UE must follow the short <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycle, i.e. it defines the boundary between the short and long <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycle length. The drx-ShortCycleTimer is given as a unit of 1 to 16, where one unit corresponds to the duration of the drx-ShortCycle</li><li><strong>drx-HARQ-RTT-TimerDL</strong> (per DL <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process) defines the minimum duration before a DL assignment for <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> retransmission is expected by the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity</li><li><strong>drx-HARQ-RTT-TimerUL</strong> (per UL <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> process) defines the minimum duration before a UL <abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> retransmission grant is expected by the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity. The drx-HARQ-RTT-Timer for uplink and downlink can have a duration of 0 to 56 symbols of the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> where the transport block was received</li></ul><p>Further details on the conditions indicating how <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> is activated and the value ranges for the above <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> parameters are given in <span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span> and <span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span>. To symbolically explain the concept of the <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> cycles and times, <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-101__DRX_operation_with_timers_and_cycles_.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-101 &lt;\/span&gt;DRX operation with timers and cycles (example using symbolic timing display).&quot;}]">Fig. 2-101</a> provides a general overview of the <abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> configuration. Note that this is a symbolic figure without a detailed description of scheduling timing, which would otherwise make the figure overly complex.</p>


<a id="page_1083_c1333"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:44%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-101__DRX_operation_with_timers_and_cycles__e7747ebdaf.png" width="800" height="351" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-101 </span><abbr class="eh-abbreviation" title="Discontinuous reception" lang="en"><span class="eh-tooltip" title="Discontinuous reception">DRX</span></abbr> operation with timers and cycles (example using symbolic timing display).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1083_c1334"></a><p class="eh-headline-207 ">
				Transmission and reception without dynamic scheduling
			</p>


<a id="page_1083_c1335"></a><p>This procedure in the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity refers to the possibility for semi-persistent and grant-free scheduling in 5G NR. This is also called type 1 or type 2 allocation. Chapter <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1084" class="eh-link eh-link--page">2.2.11 Dynamic, semi-persistent and grant-free scheduling, page 382</a> provides more details.</p>


<a id="page_1083_c1336"></a><p class="eh-headline-207 ">
				Activation/deactivation of SCells and <abbr class="eh-abbreviation" title="Supplementary uplink" lang="en"><span class="eh-tooltip" title="Supplementary uplink">SUL</span></abbr> operation
			</p>


<a id="page_1083_c1337"></a><p>As introduced in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1016" class="eh-link eh-link--page">1.1.3.4 Radio bearers in dual connectivity, page 31</a>, 5G NR supports carrier aggregation. As a consequence, this would require that a secondary cell (<abbr class="eh-abbreviation" title="Secondary cell" lang="en"><span class="eh-tooltip" title="Secondary cell">SCell</span></abbr>) is either activated and requires its own <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity or is deactivated. This procedure configures the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity for purposes on the <abbr class="eh-abbreviation" title="Secondary cell" lang="en"><span class="eh-tooltip" title="Secondary cell">SCell</span></abbr> such as <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> monitoring, <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> transmission, <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting and <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>. The concept of carrier aggregation follows the 3GPP Release 10 introduction of carrier aggregation with LTE-Advanced that consists of two major steps involving secondary carrier activations. The first step is the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> Reconfiguration message that configures general information on the additional component carriers. After this reconfiguration is complete, the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity is used to activate or deactivate them quickly. The <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr> that activates or deactivates them is given as a bitmap of either one or four octets since a maximum of 16 component carriers can be activated in 5G NR. The secondary uplink that was introduced in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1023" class="eh-link eh-link--page">1.2 Physical access fundamentals, page 46</a> is not identical to carrier aggregation, but it works in a similar manner. It allows the definition of two uplink carriers which are not used simultaneously (as would be the case in carrier aggregation scenarios). The <abbr class="eh-abbreviation" title="Supplementary uplink" lang="en"><span class="eh-tooltip" title="Supplementary uplink">SUL</span></abbr> carrier is configured as a complement and operates based on a either/or decision. Scheduled via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>, the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity transmits the uplink data on either the normal UL carrier or the supplementary UL carrier.</p>


<a id="page_1083_c1338"></a><p class="eh-headline-207 ">
				Activation/deactivation of <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> duplication
			</p>


<a id="page_1083_c1339"></a><p>As introduced in the section detailing the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1083_c1276" class="eh-link eh-link--page eh-link--ce">Packet data convergence protocol (PDCP), page 352</a>), 5G NR offers the possibility to duplicate <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> packets, thereby increasing the overall reliability by introducing redundant data transfer. It may be implemented by either <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> signaling or via the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr>. This <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr> is to be seen as a 1-octet bitmap where each bit represents an index to one specific <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr> identity among those DRBs that have been configured with duplication. If this particular bit is set to one, the corresponding <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr> duplicates all packets. <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> duplicate deactivation operates in reverse, i.e. the corresponding bit will be set to zero.</p>


<a id="page_1083_c1340"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> reconfiguration
			</p>


<a id="page_1083_c1341"></a><p>A higher layer may request reconfiguration of the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer, e.g. in dual connectivity when the <abbr class="eh-abbreviation" title="Master cell group" lang="en"><span class="eh-tooltip" title="Master cell group">MCG</span></abbr> changes, which involves restarting timers, applying new counter values and immediate application of higher layer parameters.</p>


<a id="page_1083_c1342"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> reset
			</p>


<a id="page_1083_c1343"></a><p><span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span> contains details on triggering a <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> reset, which could be related to a <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection setup failure, a handover from another RAN, or a <abbr class="eh-abbreviation" title="Secondary cell" lang="en"><span class="eh-tooltip" title="Secondary cell">SCell</span></abbr> removal, to name a few possibilities. A <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> reset would stop several timers in the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity and lead to resetting counters and flushing data buffers. See <span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span> for further details.</p>


<a id="page_1083_c1344"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> operation
			</p>


<a id="page_1083_c1345"></a><p>The bandwidth part operation for the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity is directly linked to the physical layer <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> operations described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1047" class="eh-link eh-link--page">1.4 Bandwidth part fundamentals, page 182</a>. The <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity is configured together with its lower physical layer for a certain <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> in the uplink and downlink direction. This procedure describes operations of the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity such as possible BWPs for <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> transmission, <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> monitoring, <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting, <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> transmission, <abbr class="eh-abbreviation" title="Downlink shared channel" lang="en"><span class="eh-tooltip" title="Downlink shared channel">DL-SCH</span></abbr> reception and <abbr class="eh-abbreviation" title="Uplink shared channel" lang="en"><span class="eh-tooltip" title="Uplink shared channel">UL-SCH</span></abbr> transmission, to name a few examples.</p>


<a id="page_1083_c1346"></a><p class="eh-headline-207 ">
				Beam failure detection and recovery procedure
			</p>


<a id="page_1083_c1347"></a><p>For details on this <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> procedure in conjunction with beamforming and mobility, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1090" class="eh-link eh-link--page">2.3.1.3 Beam failure detection and recovery, page 392</a>.</p>


<a id="page_1083_c1348"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> control elements
			</p>


<a id="page_1083_c1349"></a><p>In addition to the above described data transfer and procedures, the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer provides many control mechanisms by defining several <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> control elements that are sent inband. Many of these control elements activate or deactivate procedures that are performed in conjunction with the physical layer. For the sake of simplicity, only a brief introduction is presented here (see <span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span> for further details).</p><ul class="eh-list eh-list--line"><li><strong>Activatio</strong><strong>n</strong><strong>/deactivation of semi-persistent CSI-RS/CSI-IM resource set</strong>: The network may activate and deactivate the configured semi-persistent <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>/<abbr class="eh-abbreviation" title="CSI interference measurement" lang="en"><span class="eh-tooltip" title="CSI interference measurement">CSI-IM</span></abbr> resource sets of a serving cell by sending the SP <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> / <span class="eh-text--nowrap">CSI-IM</span> resource set activation/deactivation <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr>. These <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> and <span class="eh-text--nowrap">CSI-IM</span> resources are used for channel status reporting and interference measurements that are fed back via <abbr class="eh-abbreviation" title="Uplink control information" lang="en"><span class="eh-tooltip" title="Uplink control information">UCI</span></abbr> reporting as described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1082" class="eh-link eh-link--page">2.2.9 Uplink control information (UCI), page 340</a></li><li><strong>Aperiodic CSI trigger state subselection</strong> should serve as an example of how the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer cooperates with the physical layer in relation to measurement reporting. It is possible to configure the UE with a list of <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> aperiodic trigger states, each of them containing a radio resource description where the UE has to perform measurements and conditions when the UE should report aperiodically. The network may select among the configured aperiodic <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> trigger states of a serving cell by sending the aperiodic <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> trigger state subselection <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr></li><li><strong>Activation/deactivation of semi-persistent CSI reporting on PUCCH</strong>: As described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1082" class="eh-link eh-link--page">2.2.9 Uplink control information (UCI), page 340</a>, UE reports can be periodic, aperiodic or semi-persistent configured by <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>. Via the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer, the network may activate and deactivate the configured semi-persistent <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting on the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> of a serving cell by sending the SP <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> reporting on the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> activation/deactivation <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr></li><li><strong>Activation/deactivation of semi-persistent SRS</strong>: As described in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1035" class="eh-link eh-link--page">1.2.5.6 Physical signals in 5G NR, page 110</a>, the UE is allowed to send sounding reference signals enabling the gNB to perform channel estimation. These <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> transmissions may be semi-persistent and the details are configured via the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> layer. The <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer may activate and deactivate the configured semi-persistent <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> resource sets of a serving cell by sending the SP <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> activation/deactivation <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Control element" lang="en"><span class="eh-tooltip" title="Control element">CE</span></abbr></li><li><strong>Recommended bit rate</strong> is to be understood as control information associated with the data flow, indicating to the receiving entity the data rate that the gNB recommends in the downlink direction and how the UE <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> entity is recommended to transmit in the uplink direction. Clearly, there are conditions that apply, such as a possible definition of a timer <em>bitRateQueryProhibitTimer</em> that prohibits the data rate for a certain logical channel, and the scheduled resources must be adequate for the recommended data rate</li></ul>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1084" data-prevpid="1083" data-nextpid="1085" data-chapter="2.2.11 Dynamic, semi-persistent and grant-free scheduling" id="page_1084">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.2.11 Dynamic, semi-persistent and grant-free scheduling</h3>
						
<a id="page_1084_c1350"></a><p>There are several types of data transmission depending on what kind of services are requesting it. If the UE or network need sporadic data transmission, than we talk about <em>dynamic scheduling</em>. The assumption here is that the transmission buffer contains pending data. This triggers dynamic allocation of radio resources via <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> based scheduling in the UL and/or DL direction. In the UL direction, the UE can request the assignment of UL resources with the transmission of a scheduling request (<abbr class="eh-abbreviation" title="Scheduling request" lang="en"><span class="eh-tooltip" title="Scheduling request">SR</span></abbr>) or by provisioning a buffer status report (<abbr class="eh-abbreviation" title="Buffer status report" lang="en"><span class="eh-tooltip" title="Buffer status report">BSR</span></abbr>). In response to this request, the gNB sends one or more UL grant assignments to allocate a radio resource for the requested capacity. In the same way, the gNB might dynamically assign a DL resource to receive DL data on the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>. These procedures for dynamic scheduling (like those known from EUTRAN) were described previously in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076" class="eh-link eh-link--page">2.2.3 DL resource assignment, page 295</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1080" class="eh-link eh-link--page">2.2.7 UL grant reception or UL assignment, page 329</a>.</p><p>In case the UE requires constant data for periodic transmission, e.g. for video or voice services, then the procedure refers to semi-persistent scheduling (<abbr class="eh-abbreviation" title="Semi-persistent scheduling" lang="en"><span class="eh-tooltip" title="Semi-persistent scheduling">SPS</span></abbr>). In 5G NR, it was decided that <abbr class="eh-abbreviation" title="Semi-persistent scheduling" lang="en"><span class="eh-tooltip" title="Semi-persistent scheduling">SPS</span></abbr> may have two forms (<abbr class="eh-abbreviation" title="Semi-persistent scheduling" lang="en"><span class="eh-tooltip" title="Semi-persistent scheduling">SPS</span></abbr> type 1 and <abbr class="eh-abbreviation" title="Semi-persistent scheduling" lang="en"><span class="eh-tooltip" title="Semi-persistent scheduling">SPS</span></abbr> type 2) and can be configured using the <abbr class="eh-abbreviation" title="Information element" lang="en"><span class="eh-tooltip" title="Information element">IE</span></abbr> <em>SPS-Config</em>.</p><p><abbr class="eh-abbreviation" title="Semi-persistent scheduling" lang="en"><span class="eh-tooltip" title="Semi-persistent scheduling">SPS</span></abbr> type 1 corresponds to “grant-free scheduling”. This means that configuration is handled in a semi-static manner via <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> and is automatically activated. The UE may proceed to send on the uplink without waiting for an explicit activation.</p><p><abbr class="eh-abbreviation" title="Semi-persistent scheduling" lang="en"><span class="eh-tooltip" title="Semi-persistent scheduling">SPS</span></abbr> type 2 corresponds to an <abbr class="eh-abbreviation" title="Semi-persistent scheduling" lang="en"><span class="eh-tooltip" title="Semi-persistent scheduling">SPS</span></abbr> like in LTE. This means the configuration must be explicitly activated via the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>.</p><p>Grant-free scheduling using <abbr class="eh-abbreviation" title="Semi-persistent scheduling" lang="en"><span class="eh-tooltip" title="Semi-persistent scheduling">SPS</span></abbr> type 1 is configured per UE and <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> and can be configured in a semi-static manner via <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> configuration. The advantage of this configured <abbr class="eh-abbreviation" title="Semi-persistent scheduling" lang="en"><span class="eh-tooltip" title="Semi-persistent scheduling">SPS</span></abbr> scheduling is that no extra radio resource activation procedures are required and the UE can transmit data as soon as it is pending in the transmission buffer.</p><p>In this manner, it reduces the additional message flow that would have been required otherwise for dynamic scheduling. This applies on the UL. The typical use case involves sporadic data that must be transmitted with low latency such as in the case of <abbr class="eh-abbreviation" title="Ultra-reliable and low latency communications" lang="en"><span class="eh-tooltip" title="Ultra-reliable and low latency communications">URLLC</span></abbr>. The scheduled resources remain available for the UE for the whole connection time or until the higher layer triggers a reconfiguration.</p>


<a id="page_1084_c1351"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:44%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-102__Configuration_of_scheduling_85a7e9a918.png" width="800" height="352" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-102 </span>Configuration of scheduling.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1084_c1352"></a><p>In contrast, <abbr class="eh-abbreviation" title="Semi-persistent scheduling" lang="en"><span class="eh-tooltip" title="Semi-persistent scheduling">SPS</span></abbr> type 2 is configured by the network through RRCReconfiguration when the type of service requires periodic transmission of medium-sized packets. To avoid the control signaling associated with dynamic scheduling but still not block any resources, the network makes a dynamic decision using the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> message containing <abbr class="eh-abbreviation" title="Configured scheduling RNTI" lang="en"><span class="eh-tooltip" title="Configured scheduling RNTI">CS-RNTI</span></abbr> (see also <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1076_c1153" class="eh-link eh-link--page eh-link--ce">Radio network temporary identifier (RNTI), page 298</a>) to enable UL semi-persistent scheduling type 2, which then needs to be deactivated via additional messages. Moreover, to avoid wasting resources when the data transfer has been completed, the gNB can explicitly deactivate <abbr class="eh-abbreviation" title="Semi-persistent scheduling" lang="en"><span class="eh-tooltip" title="Semi-persistent scheduling">SPS</span></abbr>.</p><p>During <abbr class="eh-abbreviation" title="Semi-persistent scheduling" lang="en"><span class="eh-tooltip" title="Semi-persistent scheduling">SPS</span></abbr>, the link configuration remains fixed for each allocation: <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr> assignments, modulation and coding scheme, etc. As a result, if the radio link conditions change, a new allocation must be sent. In addition, any incremental redundancy (<abbr class="eh-abbreviation" title="Hybrid automatic repeat request" lang="en"><span class="eh-tooltip" title="Hybrid automatic repeat request">HARQ</span></abbr> subsequent transmissions) is scheduled separately using dynamic scheduling.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1085" data-prevpid="1084" data-nextpid="1086" data-chapter="2.2.12 Data security" id="page_1085">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.2.12 Data security</h3>
						
<a id="page_1085_c1353"></a><p>The overall security architecture is discussed in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1022" class="eh-link eh-link--page">1.1.7 Security architecture, page 44</a> and the initialization of security parameters is illustrated in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-008__Authentication_parameters.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-8 &lt;\/span&gt;Authentication parameters and vector generation for LTE.&quot;}]">Fig. 2-8</a>. Security mechanisms are based on authentication, encryption and integrity protection. As one major difference compared to LTE, integrity protection can also be applied to user plane data. The protocol layer involved in certain security mechanisms such as ciphering and integrity protection is the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer, which is described in the section <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1083_c1276" class="eh-link eh-link--page eh-link--ce">Packet data convergence protocol (PDCP), page 352</a>.</p><p>After initial security configuration, the transmission between the UE and gNB can be encrypted and integrity protected both on signaling data (<abbr class="eh-abbreviation" title="Signaling radio bearer" lang="en"><span class="eh-tooltip" title="Signaling radio bearer">SRB</span></abbr>) and on user data (<abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>) based on configuration of a single logical channel. Ciphering and integrity protections are optionally configured except for <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> signaling or the C-plane, for which integrity protection is always configured. For user data, it is possible to enable integrity or/and encryption per <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr>. The network can enforce integrity protection on a specific <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr> and therefore all PDUs belonging to this <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr> must have integrity enabled. Further information is provided in the context of user plane security enforcement in the 3GPP specification <span class="eh-hint" title="3GPP TS 23.502: Procedures for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.502: Procedures for the 5G System">TS 23.502</span></span>.</p>


<a id="page_1085_c1354"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:29%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-103__Key_stream_derivation_for_radio_bearers_dd8df7c52b.png" width="800" height="228" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-103 </span>Key stream derivation for radio bearers.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1085_c1355"></a><p>The integrity protection and ciphering algorithm is common for signaling radio bearers SRB1 and SRB2. When not configured with any kind of <abbr class="eh-abbreviation" title="Dual connectivity or direct current" lang="en"><span class="eh-tooltip" title="Dual connectivity or direct current">DC</span></abbr>, the ciphering and integrity protection algorithm is common for all radio bearers (i.e. SRB1, SRB2 and DRBs). All DRBs related to the same <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session have the same security configuration. Neither integrity protection nor ciphering applies for SRB0, as this signaling bearer is the initial one established before a security context between the UE and network is realized. An additional security level is achieved on a per packet basis. In fact, generation of a key for integrity and ciphering depends not only on a shared key derived from a symmetric secret key based algorithm, but also on the bearer ID, direction and a counter value COUNT. The general principle of security key derivation and dependencies is shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-103__Key_stream_derivation_for_radio_bearers.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-103 &lt;\/span&gt;Key stream derivation for radio bearers.&quot;}]">Fig. 2-103</a>. Regarding the protocol layers that are responsible for security aspects, the main protocol layer that is involved is the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer. Note that the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer is part of the 5G system protocol stack, so there is no end to end data encryption supplied by 5G NR. The <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> parameter COUNT is initialized by the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> security mode command. It is not allowed to use the same COUNT value more than one time for a given radio bearer. Therefore, COUNT is calculated depending on the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> packet sequence number and the current hyper frame number (<abbr class="eh-abbreviation" title="Hyper frame number" lang="en"><span class="eh-tooltip" title="Hyper frame number">HFN</span></abbr>) representing a longer timer running to provide a higher level of security. This means that especially when data transmission is running over a long time and the <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> needs to wrap around, the <abbr class="eh-abbreviation" title="Hyper frame number" lang="en"><span class="eh-tooltip" title="Hyper frame number">HFN</span></abbr> is increased to make sure the COUNT will not be repeated. Summarizing the security aspects, we can describe 5G NR as a communications system that supports security aspects such as ciphering, authentication and integrity protection between the two entities UE and <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr>. Note that any security mechanisms on protocol layers higher than the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> layer or in networks external to the 5G system are optional and are outside the scope of the 5G system description.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1086" data-prevpid="1085" data-nextpid="1087" data-chapter="2.3 Overall Mobility" id="page_1086">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h2>2.3 Overall Mobility</h2>
						
<a id="page_1086_c1356"></a><p>The overall design of the 5G system (5GS) contains several interconnected modules that aim to allow the UE to move seamlessly from one coverage area to another (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-104__Mobility_Overview.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-104 &lt;\/span&gt;Mobility overview.&lt;br&gt;&quot;}]">Fig. 2-104</a>).</p><p>Starting from the bottom part, we see that the concept of a transmission and reception point (<abbr class="eh-abbreviation" title="Transmission and reception point" lang="en"><span class="eh-tooltip" title="Transmission and reception point">TRP</span></abbr>) was introduced for deployment reasons. To ensure that even at higher frequencies and with narrow directional beam transmission a cell will cover a larger cell area, a single <abbr class="eh-abbreviation" title="Transmission and reception point" lang="en"><span class="eh-tooltip" title="Transmission and reception point">TRP</span></abbr> may transmit several beams and more TRPs can also be introduced.<abbr class="eh-abbreviation" title="Transmission and reception point" lang="en"><span class="eh-tooltip" title="Transmission and reception point">TRP</span></abbr> is a <span class="eh-text--nowrap">TX/RX unit</span> that can have a large number of TX/RX antenna elements to generate directional beams. An example scenario is an apartment with multiple rooms where each room has a transmitter. When the UE moves within a cell, it transits between beams on the same <abbr class="eh-abbreviation" title="Transmission and reception point" lang="en"><span class="eh-tooltip" title="Transmission and reception point">TRP</span></abbr> and between beams on different TRPs to keep the connection. For the purpose of UE mobility, the UE sees a transition between directional beams, and therefore the <abbr class="eh-abbreviation" title="Transmission and reception point" lang="en"><span class="eh-tooltip" title="Transmission and reception point">TRP</span></abbr> architecture is transparent in most cases to the UE (see further discussion in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1091" class="eh-link eh-link--page">2.3.2 RRM mobility procedure, page 395</a>).</p><p>In a wider area, multiple base stations are deployed and each may cover one or more cells. A cell is identified with a cell ID and a procedure for inter-cell mobility is required. Depending on whether the gNBs operate the cell on the same or different carrier frequencies, we speak of intra-frequency or inter-frequency cell mobility.</p><p>Furthermore, a large area might be covered partly by new technology such as NR. Therefore, continuity is required in the handover procedure from NR to the legacy technology. In 3GPP Release 15, EUTRA is the only <abbr class="eh-abbreviation" title="Radio access technology" lang="en"><span class="eh-tooltip" title="Radio access technology">RAT</span></abbr> which guarantees service continuity from 5G NR, both in the case where EUTRA is connected to <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> (intra-system mobility) and where EUTRA is connected to <abbr class="eh-abbreviation" title="Evolved packet core" lang="en"><span class="eh-tooltip" title="Evolved packet core">EPC</span></abbr> system (inter-system mobility). Mobility between these two RATs and between two gNBs is controlled by the higher protocol layers. Control of the mobility procedure is handled within the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> protocol layer or the <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> (<abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>) (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1091" class="eh-link eh-link--page">2.3.2 RRM mobility procedure, page 395</a>).</p>


<a id="page_1086_c1357"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:46%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-104__Mobility_Overview_1b8cb22c98.png" width="800" height="362" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-104 </span>Mobility overview.<br></figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1087" data-prevpid="1086" data-nextpid="1088" data-chapter="2.3.1 Beam mobility procedure" id="page_1087">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.3.1 Beam mobility procedure</h3>
						
<a id="page_1087_c1358"></a><p>Beamforming is based on narrow directional transmission and reception. The steps for a UE and NodeB to establish a suitable beam pair link are shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-105__Beam_mobility_procedure.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-105 &lt;\/span&gt;Beam mobility procedure.&quot;}]">Fig. 2-105</a>.</p><p>The base station broadcasts common cell information such as synchronization signals (<abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>) and system information throughout the cell at regular time intervals and over multiple beams (known as network beam sweeping). See <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1042" class="eh-link eh-link--page">1.3.2 Support for beamforming in 5G NR, page 173</a> for more details. The same information is repeated over time and spatially multiplexed to make sure that every UE within the cell area can receive the signal.</p><p>When a UE wants to access the system, it begins by measuring several beam-based received synchronization signal blocks (<abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>) identified by an SS-Index and selecting a specific beam based on the strongest received beam power (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1066" class="eh-link eh-link--page">2.1.2 5G NR signal quality measurements and reporting, page 237</a> for details).</p><p>For initial uplink access (random access), the UE uses the selected beam (<abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> index) for the first uplink message (Msg1, preamble) to the base station. The opportunities in time and frequency for transmission of the first uplink message (<abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> resource) depend on the selected <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr> block index (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-147__Example_of_a_beamforming_configuration.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-147 &lt;\/span&gt;Example of a beamforming configuration (here f&lt;sub&gt;c&lt;\/sub&gt; = 3.5 GHz, SCS = 30 kHz, Case B).&quot;}]">Fig. 1-147, page 177</a>), which is specified in the system information by the gNB.</p><p>The UE may also repeat the same transmission over time over different beams to reach the base station with better reliability (UE beam sweeping). The UE informs the network about the best beam implicitly by selecting a specific <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> resource. Upon reception of the first uplink signal, the network adjusts the transmission to the specific selected beam for successive downlink messages (Msg2/4). In the same way, the UE responds in uplink using the same selected beam (Msg3).</p>


<a id="page_1087_c1359"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:91%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-105__Beam_mobility_procedure_938ae72808.png" width="800" height="722" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-105 </span>Beam mobility procedure.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1087_c1360"></a><p>One typical scenario for the use of beam sweeping is fixed wireless access (<abbr class="eh-abbreviation" title="Fixed wireless access" lang="en"><span class="eh-tooltip" title="Fixed wireless access">FWA</span></abbr>). During the setup phase, base stations and customer premises equipment (<abbr class="eh-abbreviation" title="Customer premises equipment" lang="en"><span class="eh-tooltip" title="Customer premises equipment">CPE</span></abbr>) installed at home are set up. Once the connection between nodes is established, very efficient spatial transmission can be achieved with beam forming.</p><p>Once random access is completed and a connection is established, communications between the UE and network is based on a dedicated directional beam for successive data and control messages.</p><p>In case of mobility, both the UE and gNBs need to adjust the direction of the beams on the uplink and downlink, respectively. These procedures are defined as beam switching (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1042" class="eh-link eh-link--page">1.3.2 Support for beamforming in 5G NR, page 173</a> for more details). Beam switching only applies in connected mode and does not require explicit <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> signaling to be triggered. The physical layer is in charge of performing the measurements (based on specific reference signals) and the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer collects the results. A higher layer like <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> is not required to know which beam is being used at a given point in time. Therefore, this procedure is also known as “mobility without <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> involvement”.</p><p>In case of mobility, the UE may detect a failure in the connection. Failure detection is a continuous process. The physical layer measures the status of the current link, monitors the neighbor beams and reports the result to the upper layer. If the upper layer detects a link failure, the UE is required to initiate recovery of the link by selecting a new strongest beam and initiating random access (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1090" class="eh-link eh-link--page">2.3.1.3 Beam failure detection and recovery, page 392</a> for details).</p><p>Typical cm-/mm-wave deployment scenarios that apply beamforming include high-capacity, small cell deployments or industrial applications (Industry 4.0). In such cases, the UE may encounter fast fading and blockage due to obstacles, thereby necessitating a beam failure and beam recovery procedure.</p><p>The process of beam mobility requires continuous measurement of reference signals transmitted both by the gNB and UE. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1087_c1361\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table eh-table--alternate\&quot; id=\&quot;table044\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&amp;nbsp;&lt;\/th&gt;&lt;th&gt;Idle UE (i.e. initial access)&lt;\/th&gt;&lt;th&gt;Connected UE (beam mobility and failure detection)&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Downlink&lt;\/td&gt;&lt;td&gt;SSB (PSS, SSS)&lt;\/td&gt;&lt;td&gt;SSB (PSS, SSS) and CSI-RS&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Uplink&lt;\/td&gt;&lt;td&gt;None&lt;\/td&gt;&lt;td&gt;SRS&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-106 &lt;\/span&gt;Reference signals involved in the beam mobility procedure.&lt;\/p&gt;\n\n&quot;}">Fig. 2-106</a> provides an overview of the reference signals used for each direction.</p>


<a id="page_1087_c1361"></a><div class="table-scroll"><table class="eh-table eh-table--alternate" id="table044"><colgroup><col><col><col></colgroup><thead><tr><th>&nbsp;</th><th>Idle UE (i.e. initial access)</th><th>Connected UE (beam mobility and failure detection)</th></tr></thead><tbody><tr><td>Downlink</td><td>SSB (PSS, SSS)</td><td>SSB (PSS, SSS) and CSI-RS</td></tr><tr><td>Uplink</td><td>None</td><td>SRS</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-106 </span>Reference signals involved in the beam mobility procedure.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1088" data-prevpid="1087" data-nextpid="1089" data-chapter="2.3.1.1 Beam mobility on the downlink" id="page_1088">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.3.1.1 Beam mobility on the downlink</h4>
						
<a id="page_1088_c1362"></a><p>Deployment at cm-/mm-wave frequencies requires beamforming antennas to compensate for the high path loss. When the UE moves within the cell area, the fast channel variation requires switching between beams. In case of beam correspondence, and especially in the case of TDD where identical channel conditions are expected on the DL and UL, the UE performs beam switching based on a DL measurement in order to select a beam pair. Beam mobility on the downlink requires less energy consumption at the UE end, but it can lead to worse beam management performance compared to a combined scenario with UL beam switching.</p><p>Beam mobility on the downlink is a connected mode procedure based on reference signals transmitted by the gNB. The network configures the measurement dedicated to each specific UE (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1095" class="eh-link eh-link--page">2.3.3 Mobility measurement, page 401</a>) via <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> reconfiguration including <em>csi-MeasConfig</em>. The UE physical layer is requested to perform measurements on the DL reference signals (<abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>/<abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>). The UE provides a measurement report (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1082" class="eh-link eh-link--page">2.2.9 Uplink control information (UCI), page 340</a>) for channel state information reference signals (<abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>), for synchronization signals (<abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>), or for both. Note that <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> may have a higher time/frequency periodicity compared to that of <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr> blocks and therefore more precise measurements can be performed.</p><p>The measurements are performed in a slot interval and a corresponding value of <abbr class="eh-abbreviation" title="Reference signal received power" lang="en"><span class="eh-tooltip" title="Reference signal received power">RSRP</span></abbr> is calculated, which has a span from –140 dBm to –44 dBm with a 1 dB step size.</p><p>Each measured signal is identified as a unique index (<abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> resources indicator <abbr class="eh-abbreviation" title="CSI-RS resource indicator" lang="en"><span class="eh-tooltip" title="CSI-RS resource indicator">CRI</span></abbr> or SS-Index). Several resource sets for <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> or <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> can be configured and depending on csi-MeasConfig, several resource report configurations are possible for the serving beam and neighbor beams. UE reports are aperiodic, periodic or semi-persistent.</p><p>The network is informed of the current measurement results and can automatically adjust downlink transmission of the control and data channels (<abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>) based on the best beam measured by the UE.</p>


<a id="page_1088_c1363"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:74%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-107__Beam_mobility_in_downlink_d9f3c512ca.png" width="800" height="585" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-107 </span>Beam mobility on the downlink.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1088_c1364"></a><p>Note that SSB-based beam management can only be configured for the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> which overlaps with the CellDefining-SSB (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1101" class="eh-link eh-link--page">2.4.1.1 Cell-defining SSB, page 409</a>). For a <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> that does not overlap with the <abbr class="eh-abbreviation" title="Cell defining SSB" lang="en"><span class="eh-tooltip" title="Cell defining SSB">CD-SSB</span></abbr> as specified in <span class="eh-hint" title="3GPP TS 38.300: NR; Overall description; Stage-2" lang="en"><span class="eh-tooltip" title="3GPP TS 38.300: NR; Overall description; Stage-2">TS 38.300</span></span>, beams can only be configured based on <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1089" data-prevpid="1088" data-nextpid="1090" data-chapter="2.3.1.2 Beam mobility on the UL" id="page_1089">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.3.1.2 Beam mobility on the UL</h4>
						
<a id="page_1089_c1365"></a><p>Usually, beam transmission on the UL and DL assumes beam correspondence, i.e. selection and measurement of a beam on the downlink also suffice to define the UL transmission direction.</p><p>If beam correspondence is not supported by the UE, beam management procedures should also be performed on the UL with link adaptation. In this case, the network must measure specific reference signals (<abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr>) sent from the UE to evaluate the UL. The network may also request beam switching on the UL for load balancing and to force reconfiguration of the UE's UL beam.</p><p>The procedure requires configuration of <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> transmission by the network which can involve several neighbor beams within the UE specific maximum number of supported <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr>. Each <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> is identified by an <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> reference index (SRI). Afterwards, the UE performs <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> transmission with UE beam sweeping. This allows the gNB to perform several measurements in different UE UL directions. The base station must notify the UE of the specific beam to be used on the UL via the physical layer control channel (e.g. <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> with <span class="eh-text--nowrap">DCI 0_1</span> with SRI).</p><p>The UE may soon begin transmission on the UL (<abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>) on the specific beam, which in the normal case is considered to be basically co-located with the <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> signal (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1029" class="eh-link eh-link--page">1.2.5 General description of the physical layer, page 73</a>).</p><p>For beam management, <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> measurement reporting requires a short periodicity or event-triggered transmission (i.e. a threshold between two neighbor beams) due to the fact that in case of mobility, the condition of the channel may fluctuate rapidly.</p>


<a id="page_1089_c1366"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:65%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-108__Beam_mobility_on_the_UL_ffe29aecf2.png" width="800" height="514" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-108 </span>Beam mobility on the uplink.</figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1090" data-prevpid="1089" data-nextpid="1091" data-chapter="2.3.1.3 Beam failure detection and recovery" id="page_1090">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.3.1.3 Beam failure detection and recovery</h4>
						
<a id="page_1090_c1367"></a><p>Beam failure detection can be performed either through measurement of <span class="eh-text--nowrap">CSI-RS</span> or <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr> or both. Beam failure detection is a similar procedure to radio link failure. In other words, it requires physical layer measurement of the status of the link and reporting of these values to higher layers for evaluation. Beam failure detection in case of cm- and mm-wave deployments will occur more often since UE  mobility and obstacles can cause fast degradation of the RF signal.</p><p>The procedure begins with configuration of a detection resource, i.e. a sequence of different resources that can be used for beam failure detection. The measured resources are identified by an index as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1090_c1368\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table045\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Parameter&lt;\/th&gt;&lt;th&gt;Value&lt;\/th&gt;&lt;th&gt;Explanation&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;DetectionResource&lt;\/td&gt;&lt;td&gt;Sequence of SSB-Index&lt;\/td&gt;&lt;td&gt;Index of SSB block to measure&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;Sequence of CSI-RS-Index&lt;\/td&gt;&lt;td&gt;Index of CSI-RS to measure&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;BeamFailureInstanceMaxCount&lt;\/td&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;This field determines after how many beam failure events the UE triggers beam failure recovery&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;BeamFailureDetectionTimer&lt;\/td&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;Timer for beam failure detection as multiple of reference signal period&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-109 &lt;\/span&gt;Parameters for beam failure detection.&lt;\/p&gt;\n\n&quot;}">Fig. 2-109</a>. Multiple resources can be configured. The network must configure the measurement dedicated to the specific UE in the active downlink bandwidth part. In case the active <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> of the UE does not contain the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> (CellDefining-SSB), the network should not configure measurements on the synchronization signal. </p>


<a id="page_1090_c1368"></a><div class="table-scroll"><table id="table045" class="eh-table eh-table--alternate"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter</th><th>Value</th><th>Explanation</th></tr></thead><tbody><tr><td>DetectionResource</td><td>Sequence of SSB-Index</td><td>Index of SSB block to measure</td></tr><tr><td>&nbsp;</td><td>Sequence of CSI-RS-Index</td><td>Index of CSI-RS to measure</td></tr><tr><td>BeamFailureInstanceMaxCount</td><td>&nbsp;</td><td>This field determines after how many beam failure events the UE triggers beam failure recovery</td></tr><tr><td>BeamFailureDetectionTimer</td><td>&nbsp;</td><td>Timer for beam failure detection as multiple of reference signal period</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-109 </span>Parameters for beam failure detection.</p>


<a id="page_1090_c1369"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:55%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-110__Beam_failure_detection_and_recovery_v4_bbd2122af1.png" width="800" height="436" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-110 </span>Beam failure detection and recovery.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1090_c1370"></a><p>For the detection configuration, the network also configures a timer (beamFailureDetectionTimer) as a period in which the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer will count the number of reported “beam failure instances” delivered from the physical layer. If the number of instances delivered is higher than the value of max count (BeamFailureInstanceMaxCount) during the timer, the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer declares “beam failure detection” and starts a “beam failure recovery procedure”. The physical layer reports a beam failure detection event on the configured detection resource set if the value of L1-RSRP is lower than a threshold Q (see <span class="eh-hint" title="3GPP TS 38.215: NR; Physical layer measurements" lang="en"><span class="eh-tooltip" title="3GPP TS 38.215: NR; Physical layer measurements">TS 38.215</span></span> and <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span> for details). The periodicity of the report is the maximum between 2 ms and the shortest detection resource periodicity.</p><p>If beam failure recovery is triggered, the UE needs to establish a connection using random access. Random access due to beam failure recovery uses specific resources on the UL. There is a dedicated configuration for each UE, for the <abbr class="eh-abbreviation" title="Primary cell " lang="en"><span class="eh-tooltip" title="Primary cell ">PCell</span></abbr> and <abbr class="eh-abbreviation" title="Secondary cell" lang="en"><span class="eh-tooltip" title="Secondary cell">SCell</span></abbr>, and for the normal and supplementary uplink. The reason is that the UE wants to recover from beam failure as soon as possible and therefore the UE first uses contention-free random access with the beam failure recovery <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> resources. The UE is configured with a candidate beam <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1090_c1371\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table046\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Parameter name&lt;\/th&gt;&lt;th&gt;Parameter value&lt;\/th&gt;&lt;th&gt;Description&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;CandidateBeamRSList&lt;\/td&gt;&lt;td&gt;SSB-Index&lt;\/td&gt;&lt;td&gt;Index of SSB block to measure&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;CSI-RS-Index&lt;\/td&gt;&lt;td&gt;Index of CSI-RS to measure&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;rsrp-ThresholdSSB&lt;\/td&gt;&lt;td&gt;Integer&lt;\/td&gt;&lt;td&gt;L1-RSRP threshold used for determining whether a candidate beam may be used by the UE to attempt contention-free random access to recover from beam failure&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;recoverySearchSpaceId&lt;\/td&gt;&lt;td&gt;Search space ID&lt;\/td&gt;&lt;td&gt;Search space to use for BFR RAR. &lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;beamFailureRecoveryTimer&lt;\/td&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;Timer for beam failure recovery. Upon expiration of the timer the UE does not use CFRA for BFR. Value in ms.&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;ra-Prioritization&lt;\/td&gt;&lt;td&gt;powerRampingStepHighPriority&lt;\/td&gt;&lt;td&gt;Power ramping step applied for prioritized random access procedure.&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&amp;nbsp;&lt;\/td&gt;&lt;td&gt;scalingFactorBI&lt;\/td&gt;&lt;td&gt;Scaling factor for the backoff indicator (BI) for the prioritized random access procedure. &lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-111 &lt;\/span&gt;Parameters for beam failure recovery.&lt;\/p&gt;\n\n&quot;}">Fig. 2-111</a> resource list (<span class="eh-text--nowrap">CandidateBeamRSList</span>) for failure recovery, which is basically a subset of beams to measure and perform <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> selection. Here again, the network restricts the number of measurements that the UE needs to perform for selection of the uplink beam for the first random access in order to speed up the recovery time. Moreover, a threshold is configured that the UE uses to select the best candidate beam from the network-configured list.</p><p>Beam failure recovery also has a timer (<span class="eh-text--nowrap">beamFailureRecoveryTimer</span>) that is initialized upon the first beam failure detection event and reset only when beam failure recovery is terminated with a successfully acknowledged random access. The timer represents the maximum period that the UE will attempt to recover from beam failure (using a specific beam failure recovery random access resource). After the timer expires, the UE must repeat the measurement and establish a connection using contention-based random access.</p><p>If the UE starts beam failure recovery, then it must move to the UL <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> where <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> resources are available. Consequently, it also moves to the DL <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> to receive the control information in the DL (Msg2). The <span class="eh-text--nowrap">CORESET</span> and search space for downlink information are set in the parameter <em>recoverySearchSpaceId</em>.</p><p>Random access for beam failure recovery is one of the two prioritized reasons for random access. For this case and the handover case, a specific power ramping and a backoff indicator sequence are dedicated to this procedure.</p>


<a id="page_1090_c1371"></a><div class="table-scroll"><table id="table046" class="eh-table eh-table--alternate"><colgroup><col><col><col></colgroup><thead><tr><th>Parameter name</th><th>Parameter value</th><th>Description</th></tr></thead><tbody><tr><td>CandidateBeamRSList</td><td>SSB-Index</td><td>Index of SSB block to measure</td></tr><tr><td>&nbsp;</td><td>CSI-RS-Index</td><td>Index of CSI-RS to measure</td></tr><tr><td>rsrp-ThresholdSSB</td><td>Integer</td><td>L1-RSRP threshold used for determining whether a candidate beam may be used by the UE to attempt contention-free random access to recover from beam failure</td></tr><tr><td>recoverySearchSpaceId</td><td>Search space ID</td><td>Search space to use for BFR RAR. </td></tr><tr><td>beamFailureRecoveryTimer</td><td>&nbsp;</td><td>Timer for beam failure recovery. Upon expiration of the timer the UE does not use CFRA for BFR. Value in ms.</td></tr><tr><td>ra-Prioritization</td><td>powerRampingStepHighPriority</td><td>Power ramping step applied for prioritized random access procedure.</td></tr><tr><td>&nbsp;</td><td>scalingFactorBI</td><td>Scaling factor for the backoff indicator (BI) for the prioritized random access procedure. </td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-111 </span>Parameters for beam failure recovery.</p>


<a id="page_1090_c1372"></a><p>One of the IMT Vision for 2020 ITU requirements is 0 ms interruption time during the handover procedure. The interruption time is defined as the shortest time duration supported by the system during which a UE cannot exchange user plane packets with any base station during mobility transitions. The mobility interruption time includes the time required to execute any radio access network procedure, radio resource control signaling protocol or other message exchanges between the user equipment and the radio access network.</p><p>In case of beam mobility when moving within the same cell, the transmit-receive beam pair of the UE may need to be changed. The procedure includes the gNB configuring different beams for this UE at different slots to be measured. It ensures that the UE is able to measure the neighbor beam before switching actually occurs and to quickly transmit the beam allocation for the DL transmission. Therefore, DL data packet transmission is maintained during beam pair switching.</p><p>For UL data transmission, the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> is sent using the beam configured with the <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> resource indicator (SRI) by the gNB. Before the actual transition occurs, the gNB configures several <abbr class="eh-abbreviation" title="Sounding reference signal" lang="en"><span class="eh-tooltip" title="Sounding reference signal">SRS</span></abbr> UL transmissions to be transmitted by the UE. This allows the gNB to continuously perform measurements and to choose an appropriate gNB-side beam for UL data reception. Therefore, UL data packet transmission is maintained during beam pair switching in different slots.</p><p>Based on the above analysis, UE can always exchange user plane packets with the gNB during beam mobility transitions. Therefore, 0 ms mobility interruption time is achieved by NR for this scenario as discussed in <span class="eh-hint" title="3GPP TR 37.910: Study on self evaluation towards IMT-2020 submission" lang="en"><span class="eh-tooltip" title="3GPP TR 37.910: Study on self evaluation towards IMT-2020 submission">TR 37.910</span></span>. A further study is being carried out by 3GPP for reliability issues in high frequency range.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1091" data-prevpid="1090" data-nextpid="1092" data-chapter="2.3.2 RRM mobility procedure" id="page_1091">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.3.2 RRM mobility procedure</h3>
						
<a id="page_1091_c1373"></a><p>The purpose of radio resource management (RRM) is to support UE mobility over network cells and at the same time to guarantee load balancing for multiple UEs accessing the network. Mobility can occur in <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>_IDLE state or <span class="eh-text--nowrap">RRC_INACTIVE</span> with cell reselection and in <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>_CONNECTED state with intra-RAT and inter-RAT handover.</p><p>Cell reselection is a UE-triggered procedure that does not involve the network. In this case, the UE uses the reselection configuration received via the system information (SIB2). The reselection configuration consists of a list of neighbor cells along with measurement parameters for both the serving cell and neighbor cells.</p><p>The UE measures the <abbr class="eh-abbreviation" title="Reference signal received power" lang="en"><span class="eh-tooltip" title="Reference signal received power">RSRP</span></abbr>/RSRQ for each frequency configured and ranks the different frequencies based on these values. For the case of frequencies within same band (intra-frequency), the values are ranked based on the measurement results while for inter-band frequencies, the ranking is also based on the frequency priority.</p><p>After the reselection criteria are fulfilled, the UE camps on the new selected cell. In case of idle mode, this does not involve any change of the last serving gNB, while in case of inactive mode, the target gNB triggers an <abbr class="eh-abbreviation" title="The interface between the gNBs" lang="en"><span class="eh-tooltip" title="The interface between the gNBs">Xn</span></abbr> interface message (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/1-006__overall_architecture.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 1-6 &lt;\/span&gt;Overall architecture from 3GPP TS 38.300.&lt;br&gt;&quot;}]">Fig. 1-6, page 17</a>) to retrieve the last saved UE context and possibly also to activate data forwarding as specified in <span class="eh-hint" title="3GPP TS 38.304: NR; User Equipment (UE) procedures in idle mode and in RRC Inactive state" lang="en"><span class="eh-tooltip" title="3GPP TS 38.304: NR; User Equipment (UE) procedures in idle mode and in RRC Inactive state">TS 38.304</span></span>. The main steps in cell reselection are depicted in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-112__Measurement_procedure_for_idle_mode_mobility.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-112 &lt;\/span&gt;Measurement procedure for idle mode mobility.&quot;}]">Fig. 2-112</a>.</p>


<a id="page_1091_c1374"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:527px;"><div class="book-img-wrap__inner" style="padding-bottom:89%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/2-112__Measurement_procedure_for_idle_mode_mobility.png" width="527" height="469" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-112 </span>Measurement procedure for idle mode mobility.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1091_c1375"></a><p>In connected mode, the UE will be redirected to another cell by the gNB. We thus define this procedure as network-based mobility. The <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> protocol layer is responsible for controlling the mobility within NR and in the case of inter-RAT, between NR and LTE.</p><p>Moreover, we distinguish whether mobility is performed inter-gNB without involvement of <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> (<abbr class="eh-abbreviation" title="The interface between the gNBs" lang="en"><span class="eh-tooltip" title="The interface between the gNBs">Xn</span></abbr> mobility) or inter-gNB with involvement of <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> (NG mobility). In the first case, the serving and target gNB exchange information only through the <abbr class="eh-abbreviation" title="The interface between the gNBs" lang="en"><span class="eh-tooltip" title="The interface between the gNBs">Xn</span></abbr> Interface, while in the latter case the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> in <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> is also involved in the mobility signaling (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-104__Mobility_Overview.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-104 &lt;\/span&gt;Mobility overview.&lt;br&gt;&quot;}]">Fig. 2-104</a>). For details on intra-RAT mobility, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1092" class="eh-link eh-link--page">2.3.2.1 Intra-RAT mobility, page 396</a> and <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1093" class="eh-link eh-link--page">2.3.2.2 Mobility parameters, page 399</a>.</p><p>The handover mechanism is also used in dual connectivity to reconfigure the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> when the EUTRA needs to change the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> from <span class="eh-text--nowrap">LTE PDCP</span> to NR <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> and vice versa. Reestablishment of the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> connection can be achieved with or without a security key change. For further details on security during mobility, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1098" class="eh-link eh-link--page">2.3.4 Mobility security, page 405</a>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1092" data-prevpid="1091" data-nextpid="1093" data-chapter="2.3.2.1 Intra-RAT mobility" id="page_1092">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.3.2.1 Intra-RAT mobility</h4>
						
<a id="page_1092_c1376"></a><p>Connected mode mobility consists of three phases:</p><ul class="eh-list eh-list--line"><li><strong>The</strong><strong>preparation phase</strong> where the UE is required to perform and report measurements on serving and neighbor cells based on the measurement configuration provided by the gNB. The source and target gNB exchange a handover message for the purpose of providing the UE capability and UE configuration information to the target gNB</li><li><strong>The</strong><strong>execution phase</strong> where the source gNB triggers the handover to the UE using the RRCReconfiguration message and the UE detaches from the source gNB and attaches to the target gNB</li><li><strong>The completion phase</strong> where the UE confirms the handover procedure and data forwarding is applied</li></ul><p>The different phases are illustrated in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-113__Intra-NR_handover_procedure.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-113 &lt;\/span&gt;Intra-NR handover procedure.&quot;}]">Fig. 2-113</a>. Each phase consists of several messages as described below.</p>


<a id="page_1092_c1377"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:104%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-113__Intra-NR_handover_procedure_10077f6e8a.png" width="800" height="830" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-113 </span>Intra-NR handover procedure.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1092_c1378"></a><ol class="eh-list eh-list--ordered"><li>Using the UE <em>RRCReconfiguration</em> message, the source gNB provides the UE measurement parameters and measurement report configuration to be performed (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1095" class="eh-link eh-link--page">2.3.3 Mobility measurement, page 401</a> for details)</li><li>The UE performs the measurement on the configured frequencies</li><li>The UE reports according to the measurement configuration</li><li>The source gNB decides to hand over the UE based on the measurement report and RRM information (i.e. cell load balancing)</li><li>The source gNB initiates handover and sends <em>HandoverPreparationInformation</em> over the <abbr class="eh-abbreviation" title="The interface between the gNBs" lang="en"><span class="eh-tooltip" title="The interface between the gNBs">Xn</span></abbr> interface. The purpose is to provide needed information about the current UE configuration to the target gNB to issue the handover (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1093" class="eh-link eh-link--page">2.3.2.2 Mobility parameters, page 399</a> for details)</li><li>The target gNB first verifies whether it can accept the connection of the UE. This depends on parameters such as the <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> required by each <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> which influences the allocation of resources on the target cell. Moreover, slice-aware admission control must be performed if slice information is sent to the target gNB. If the <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> sessions are associated with non-supported slices in the target gNB, it must reject such <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> sessions</li><li>The target gNB provides an <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> container for the UE <em>RRCReconfiguration</em> as part of the handover acknowledgement</li><li>The source gNB forwards to the UE the <em>RRCReconfiguration</em> message including the handover command. The <em>RRCReconfiguration</em> (ReconfigurationWithSync) message includes information required to access the target cell such as the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> frequency, random access configuration and system information. It may also include a new <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> which is used to uniquely identify the UE during random access on the new cell (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1093" class="eh-link eh-link--page">2.3.2.2 Mobility parameters, page 399</a> for details). After reception of the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> reconfiguration for handover, the UE will detach from the source cell</li><li>The <abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr> STATUS TRANSFER message will be sent from the source gNB to inform the target gNB about each radio bearer currently on the source cell as well as the <abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> packet sequence number (<abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr>) for the DL and UL. All data coming from the network must be buffered by the target gNB until the UE completes the connection</li><li>The UE synchronizes to the target cell and issues the random access with dedicated <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> resources as received by the previous handover command</li><li>The UE completes the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> handover procedure by sending the RRCReconfigurationComplete message to the target gNB</li><li>The UE transfers data to the target gNB</li><li>The data path is switched (path switch request) on the downlink and uplink in <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> between the source gNB and target gNB. The <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> <abbr class="eh-abbreviation" title="User plane function" lang="en"><span class="eh-tooltip" title="User plane function">UPF</span></abbr> sends one or more “end marker” packets on the old path to the source gNB per <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session/tunnel and then can release any U-plane/<abbr class="eh-abbreviation" title="Transport network layer" lang="en"><span class="eh-tooltip" title="Transport network layer">TNL</span></abbr> resources towards the source gNB</li></ol><p>The core network <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> is also involved in the inter-gNB mobility procedure for the final data bearer data routing at the end of the handover procedure.</p><p>Data forwarding, in-sequence delivery and duplication avoidance at handover can be guaranteed if the target gNB uses the same <abbr class="eh-abbreviation" title="Data radio bearer " lang="en"><span class="eh-tooltip" title="Data radio bearer ">DRB</span></abbr> configuration as the source gNB. In case of error the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection re-establishment procedure to the source gNB is used for recovering from the handover failure.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1093" data-prevpid="1092" data-nextpid="1094" data-chapter="2.3.2.2 Mobility parameters" id="page_1093">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.3.2.2 Mobility parameters</h4>
						
<a id="page_1093_c1379"></a><p>The parameters required during the handover procedure are listed and explained in the following tables for the <em>HandoverPreparationInformation</em> message (from source gNB to target gNB) and for the <em>HandoverCommand</em> message (from target gNB to source gNB).</p>


<a id="page_1093_c1380"></a><div class="table-scroll"><table id="table047" class="eh-table eh-table--alternate"><colgroup><col><col></colgroup><thead><tr><th>Handover preparation information</th><th>Description</th></tr></thead><tbody><tr><td>UE capability RAT</td><td>This is a list of UE radio access capabilities for each supported RAT (for current release NR or EUTRA).<br>
							This is required by the target gNB to create a UE-specific RRCReconfiguration message to send in the subsequent HandoverCommand message.</td></tr><tr><td>Source gNB configuration <br>⟶ Bearer configuration</td><td>Configuration of currently established SRB and DRB in the source gNB.<br>
							This container is used for RRC reconfiguration of the UE by the ­target cell. For each established radio bearer (RB), this includes ­information such as the RB identity, PDCP configuration (i.e. security) and RLC configuration.<br>
							Moreover, the SDAP configuration indicates if the bearer is associated with the eps-bearerIdentity (when connected to EPC) or SDAP layer (when connected to 5GC). In the latter case, the mapping between the radio bearer and QoS flow is also indicated.<br>
							The PDU session related information includes the slice information (if supported) and QoS flow level QoS profile(s).<br>
							Moreover, security algorithms for integrity and ciphering are provided.</td></tr><tr><td>Source gNB configuration <br>⟶ Configuration of SCG</td><td>This is the optional configuration in case of dual connectivity.<br>
							The handover command can be used also in case of mobility during DC and in particular when the master node is moved to another target gNB which requires information on the secondary node associated with the source gNB.</td></tr><tr><td>Source gNB configuration <br>⟶ Measurement configuration</td><td>Configuration of the measurement to be performed.</td></tr><tr><td>RRM configuration <br>⟶ MeasResultList</td><td>Here, the list of measurement results is provided for the serving cell and the neighbor cells, e.g. the SSB frequency or CSI-RS frequency in the form of the ARFCN used and the measurement results in terms of the RSRP or RSRQ.<br>
							Here, there is also target cell beam-related information like the <span class="eh-text--nowrap">SSB/CSI-RS</span> index.<br>
							The target gNB can also detect the currently preferred beam from the UE measurements.</td></tr><tr><td>AS context</td><td>Configuration restriction for multi-RAT dual connectivity.<br>
							This includes restrictions on the frequency combination allowed for MCG and SCG.<br>
							In addition, there is re-establishment information required in case of handover failure to enable the UE to re-establish on the source gNB.</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-114 </span>Parameters in the HandoverPreparationInformation message.</p>


<a id="page_1093_c1381"></a><div class="table-scroll"><table id="table048" class="eh-table eh-table--alternate"><colgroup><col><col></colgroup><thead><tr><th>Handover command (RRCReconfigurationWithSync)</th><th>Description</th></tr></thead><tbody><tr><td>Dedicated SI information</td><td>The UE is not required to retrieve system information on the new cell apart from the SSB for initial synchronization. Therefore, this information is delivered dedicated to the UE.</td></tr><tr><td>Random access configuration</td><td>The random access resources depend on the SSB or CSI-RS index that the UE wants to use for random access to the target cell.<br>
							Here, either the UE repeats the measurement performed before the handover command or reuses the same measurement results which can also be provided in the handover command.<br>
							The access information to the target cell may include beam-specific information (if available).</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-115 </span>Parameters in the HandoverCommand message.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1094" data-prevpid="1093" data-nextpid="1095" data-chapter="2.3.2.3 Inter-RAT mobility" id="page_1094">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.3.2.3 Inter-RAT mobility</h4>
						
<a id="page_1094_c1382"></a><p>In inter-RAT mobility, NR only supports LTE as an alternative <abbr class="eh-abbreviation" title="Radio access technology" lang="en"><span class="eh-tooltip" title="Radio access technology">RAT</span></abbr> in 3GPP Release 15. This does not prevent the UE in idle mode from performing reselection on other RATs (GSM, UTRA). In connected mode, two inter-RAT mobility scenarios are possible: involvement of <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> (intra-system) or <abbr class="eh-abbreviation" title="Evolved packet core" lang="en"><span class="eh-tooltip" title="Evolved packet core">EPC</span></abbr> core (inter-system) as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-116__Inter-system_and_intra-system_mobility.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-116 &lt;\/span&gt;Inter-system and intra-system mobility.&quot;}]">Fig. 2-116</a>.</p><p>In case of inter-RAT, UE capabilities for different RATs are also provided in the mobility command.</p>


<a id="page_1094_c1383"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:35%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-116__Inter-system_and_intra-system_mobility_559d38617b.png" width="800" height="275" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-116 </span>Inter-system and intra-system mobility.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1094_c1384"></a><p>The transitions between the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> states of the UE in case of inter-RAT mobility have been depicted in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-117__Inter-RAT_mobility_state_transitions.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-117 &lt;\/span&gt;Inter-RAT mobility state transitions (TS 38.331).&lt;br&gt;&quot;}]">Fig. 2-117</a>. Moreover, the transition from one state is based on signaling procedures. The UE remains in the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>_CONNECTED state in case of a connected mode handover between EUTRA and NR. If the mobility procedure does not succeed, the UE requires a re-establishment procedure on the previously connected <abbr class="eh-abbreviation" title="Radio access technology" lang="en"><span class="eh-tooltip" title="Radio access technology">RAT</span></abbr>.</p>


<a id="page_1094_c1385"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:49%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-117__Inter-RAT_mobility_state_transitions_cf638f6e8a.png" width="800" height="386" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-117 </span>Inter-RAT mobility state transitions (<span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span>).<br></figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1095" data-prevpid="1094" data-nextpid="1096" data-chapter="2.3.3 Mobility measurement" id="page_1095">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.3.3 Mobility measurement</h3>
						


					</div>
				
		</section><section class="page-section eh-inview" data-pid="1096" data-prevpid="1095" data-nextpid="1097" data-chapter="2.3.3.1 Measurement overview" id="page_1096">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.3.3.1 Measurement overview</h4>
						
<a id="page_1096_c1386"></a><p>The UE performs measurements either in idle mode for cell reselection or in connected mode for handovers. Measurements can be on an intra- and inter-frequency basis. In addition, measurements can apply to NR or in case of inter-RAT, to EUTRA.</p><p>If the UE is in idle mode, the measurements, for example, for idle reselection are based on <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr> signals whose configuration is fixed in the cell and broadcast via the system information (SIB2, SIB3, SIB4) as specified in <span class="eh-hint" title="3GPP TS 38.304: NR; User Equipment (UE) procedures in idle mode and in RRC Inactive state" lang="en"><span class="eh-tooltip" title="3GPP TS 38.304: NR; User Equipment (UE) procedures in idle mode and in RRC Inactive state">TS 38.304</span></span>. If the UE is connected, it performs the measurement based on the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> or <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr> signals. <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> configurations are dedicated for each UE (UE dedicated RRCReconfiguration message with measConfig). In this chapter, we concentrate on the measurement configuration for RRM connected mode mobility.</p><p>The gNB configures the type of measurements in a measurement object (i.e. the frequency or beam) and the type of report (i.e. the periodicity). The UE is requested to report the measurement information in a periodic or event-triggered manner. In the latter case, the network configures triggering events to report measurements (A1, A2, …) based on comparison of the received power for serving cells (<abbr class="eh-abbreviation" title="Primary cell " lang="en"><span class="eh-tooltip" title="Primary cell ">PCell</span></abbr>) and neighbor cells. Some typical events defined for mobility measurement are listed in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1096_c1387\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table049\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Event&lt;\/th&gt;&lt;th&gt;Description&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;A1&lt;\/td&gt;&lt;td&gt;Serving becomes better than threshold&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A2&lt;\/td&gt;&lt;td&gt;Serving becomes worse than threshold&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A3&lt;\/td&gt;&lt;td&gt;Neighbor becomes offset better than SpCell&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A4&lt;\/td&gt;&lt;td&gt;Neighbor becomes better than threshold&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A5&lt;\/td&gt;&lt;td&gt;SpCell becomes worse than threshold1 and neighbor\/SCell becomes better than threshold2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;A6&lt;\/td&gt;&lt;td&gt;Neighbor becomes offset better than SCell&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B1&lt;\/td&gt;&lt;td&gt;Inter-RAT neighbor becomes better than threshold&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;B2&lt;\/td&gt;&lt;td&gt;PCell becomes worse than threshold1 and inter-RAT neighbor becomes better than threshold2&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-118 &lt;\/span&gt;Events for handover measurements.&lt;\/p&gt;\n\n&quot;}">Fig. 2-118</a>.</p>


<a id="page_1096_c1387"></a><div class="table-scroll"><table id="table049" class="eh-table eh-table--alternate"><colgroup><col><col></colgroup><thead><tr><th>Event</th><th>Description</th></tr></thead><tbody><tr><td>A1</td><td>Serving becomes better than threshold</td></tr><tr><td>A2</td><td>Serving becomes worse than threshold</td></tr><tr><td>A3</td><td>Neighbor becomes offset better than SpCell</td></tr><tr><td>A4</td><td>Neighbor becomes better than threshold</td></tr><tr><td>A5</td><td>SpCell becomes worse than threshold1 and neighbor/SCell becomes better than threshold2</td></tr><tr><td>A6</td><td>Neighbor becomes offset better than SCell</td></tr><tr><td>B1</td><td>Inter-RAT neighbor becomes better than threshold</td></tr><tr><td>B2</td><td>PCell becomes worse than threshold1 and inter-RAT neighbor becomes better than threshold2</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-118 </span>Events for handover measurements.</p>


<a id="page_1096_c1388"></a><p>The network configures a measurement report consisting of multiple configurations:</p><ul class="eh-list eh-list--line"><li>Measurement object, i.e. the frequency and reference signal to be measured</li><li>Measurement report configuration (periodicity, events, format, filtering parameters)</li></ul><p>In NR, especially in the FR2 range, the network configures measurements based on beams. For proper evaluation of reception, the UE first reports the cell quality which averages all measurements among the beams.</p><p>Besides the cell quality, the network may require beam-specific information. The beam represents the direction of transmission and the UE receives reference signals (SS-Block with <abbr class="eh-abbreviation" title="Primary synchronization signal" lang="en"><span class="eh-tooltip" title="Primary synchronization signal">PSS</span></abbr> and <abbr class="eh-abbreviation" title="Secondary synchronization signal" lang="en"><span class="eh-tooltip" title="Secondary synchronization signal">SSS</span></abbr> or <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>) in that specific direction. Specific beam reports are based on the beam index. The beam index is encoded in signals such as SS-Block and <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr>. One measurement object corresponds to one <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> index or <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> index and the UE considers different SSBs / <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> indices as different measurement objects.</p><p>The UE measures the quality of the signal with different metrics such as <abbr class="eh-abbreviation" title="Reference signal received power" lang="en"><span class="eh-tooltip" title="Reference signal received power">RSRP</span></abbr>, RSRQ or <abbr class="eh-abbreviation" title="Signal-to-interference-plus-noise ratio" lang="en"><span class="eh-tooltip" title="Signal-to-interference-plus-noise ratio">SINR</span></abbr>. For overall cell quality and specific beam reporting, the UE must perform a large number of beam measurements (K) and subsequently filter the results both on the physical layer (L1 filtering; see <span class="eh-hint" title="3GPP TS 38.133: NR; Requirements for support of radio resource management" lang="en"><span class="eh-tooltip" title="3GPP TS 38.133: NR; Requirements for support of radio resource management">TS 38.133</span></span>) and on a higher layer (<abbr class="eh-abbreviation" title="Layer 3 (network layer)" lang="en"><span class="eh-tooltip" title="Layer 3 (network layer)">L3</span></abbr> filtering; see <span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span>) to smooth the measurement results. The reporting quantities (X) can be the same as the trigger quantity or combinations of quantities, e.g. <abbr class="eh-abbreviation" title="Reference signal received power" lang="en"><span class="eh-tooltip" title="Reference signal received power">RSRP</span></abbr> and RSRQ, <abbr class="eh-abbreviation" title="Reference signal received power" lang="en"><span class="eh-tooltip" title="Reference signal received power">RSRP</span></abbr> and <abbr class="eh-abbreviation" title="Signal-to-interference-plus-noise ratio" lang="en"><span class="eh-tooltip" title="Signal-to-interference-plus-noise ratio">SINR</span></abbr>, etc.</p>


<a id="page_1096_c1389"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:38%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-119__Beam_RSRP_level_measurement_b3dabf2999.png" width="800" height="304" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-119 </span>Beam <abbr class="eh-abbreviation" title="Reference signal received power" lang="en"><span class="eh-tooltip" title="Reference signal received power">RSRP</span></abbr> level measurement.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1096_c1390"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:37%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-120__Beam_filtering_for_cell_quality_report_d2e616ead6.png" width="800" height="296" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-120 </span>Beam filtering for cell quality report.</figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1097" data-prevpid="1096" data-nextpid="1098" data-chapter="2.3.3.2 Measurement scenarios" id="page_1097">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.3.3.2 Measurement scenarios</h4>
						
<a id="page_1097_c1391"></a><p>Measurements for mobility can be performed based on the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> (idle mode/inactive or connected mode) or <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> (connected mode). Several scenarios are possible depending on the location in the frequency range of the target cell. An offset is also applied to avoid frequent reselections when the UE is on the cell border between two frequencies.</p><p>There are different RRM measurement scenarios depending on the location of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> and <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> to be measured :</p><ul class="eh-list eh-list--line"><li><strong>SSB-based intra-frequency measurement</strong><br>A measurement is defined as an SSB-based intra-frequency measurement if the center frequency of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> of the serving cell and the center frequency of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> of the neighbor cell are the same and the subcarrier spacing of the two SSBs is also the same</li><li><strong>SSB-based inter-frequency measurement</strong><br>A measurement is defined as an SSB-based inter-frequency measurement if the center frequency of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> of the serving cell and the center frequency of the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> of the neighbor cell are different or the subcarrier spacing of the two SSBs is different. An example is shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-121__Inter-frequency_measurement.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-121 &lt;\/span&gt;Inter-frequency measurement.&quot;}]">Fig. 2-121</a></li><li><strong>CSI-RS based intra-frequency measurement</strong><br>A measurement is defined as a <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> based intra-frequency measurement if the bandwidth of the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> resource on the neighbor cell configured for measurement is within the bandwidth of the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> resource on the serving cell configured for measurement and the subcarrier spacing of the two ­CSI-RS resources is the same</li><li><strong>CSI-RS based inter-frequency measurement</strong><br>A measurement is defined as a <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> based inter-frequency measurement if the bandwidth of the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> resource on the neighbor cell configured for measurement is not within the bandwidth of the <abbr class="eh-abbreviation" title="Channel-state information reference signal" lang="en"><span class="eh-tooltip" title="Channel-state information reference signal">CSI-RS</span></abbr> resource on the serving cell configured for measurement or the subcarrier spacing of the two ­CSI-RS resources is different</li></ul><a id="page_1097_c1392"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:38%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-121__Inter-frequency_measurement_0f0a58e95d.png" width="800" height="298" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-121 </span>Inter-frequency measurement.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1097_c1393"></a><p>In addition, a time period must be defined where the UE can make these measurements especially on different frequency bands. This time is provided by either a so-called measurement gap or a measurement window (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1068" class="eh-link eh-link--page">2.1.2.2 Provisioning of the measurement configuration to the end-user device, page 243</a>). During the measurement period, the UE is not required to receive or transmit on the serving frequency.</p><p>The network may need to configure measurement gaps to the UE for inter-frequency measurements. This allows the UE to retune from its serving cell to some other frequency to perform measurements. The need for measurement gaps depends on the frequencies where the UE is measuring and the RF capabilities of the UE as specified in <span class="eh-hint" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities" lang="en"><span class="eh-tooltip" title="3GPP TS 38.306: NR; User Equipment (UE) radio access capabilities">TS 38.306</span></span>. The basic requirement is that the UE must switch its frequency of transmission. A big difference between NR and LTE is support for two measurement gaps per UE in NR. One measurement gap is used for cells with carrier frequencies in FR1 and another measurement gap for cells with carrier frequencies in FR2.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1098" data-prevpid="1097" data-nextpid="1099" data-chapter="2.3.4 Mobility security" id="page_1098">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.3.4 Mobility security</h3>
						
<a id="page_1098_c1394"></a><p>The overall security architecture is explained in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1022" class="eh-link eh-link--page">1.1.7 Security architecture, page 44</a> and initialization of security parameters is covered in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1113" class="eh-link eh-link--page">2.4.8 Security mode setup, page 425</a>.</p><p>The UE connections to the gNB on the DL and UL can be encrypted and integrity-protected. Therefore, <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> keys are required for encryption for the user plane (UPenc) and <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connections (control plane <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connections, RRCenc). Keys are also required for integrity for the user plane and <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connections (UPint, RRCint) as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-142__2-122__Key_generation_for_NR.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-122 &lt;\/span&gt;Generation of the security keys.&quot;}]">Fig. 2-122</a>.</p><p>For security reasons, all of the <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> security parameters must be updated during UE mobility between different gNBs or inter-system handover (<abbr class="eh-abbreviation" title="Evolved packet core" lang="en"><span class="eh-tooltip" title="Evolved packet core">EPC</span></abbr> to/from <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr>; see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-116__Inter-system_and_intra-system_mobility.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-116 &lt;\/span&gt;Inter-system and intra-system mobility.&quot;}]">Fig. 2-116</a>). In particular, when the UE moves from <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>_IDLE to <span class="eh-text--nowrap">RRC_CONNECTED</span>, <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> keys must be generated on the gNB <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> level. When the UE moves from CONNECTED to IDLE, the gNB and UE need to remove all <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> keys, but keys are maintained only on the <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>. During an <span class="eh-text--nowrap">RRC_CONNECTED</span> handover, the security key can be kept in case of intra-gNB handover, but must be refreshed in case of inter-gNB handover. The integrity and ciphering algorithms as well as the <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> keys (K<sub>gN</sub><sub>B</sub>, K<sub>RRCin</sub><sub>t</sub>, K<sub>RRCen</sub><sub>c</sub>, K<sub>UPint</sub> and K<sub>UPenc</sub>) are changed with the command “Reconfiguration with Sync” including the parameter masterKeyUpdate.</p>


<a id="page_1098_c1395"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:78%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-142__2-122__Key_generation_for_NR_bbe2e4a5da.png" width="800" height="617" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-122 </span>Generation of the security keys.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1098_c1396"></a><p>On handover, a new K<sub>gNB</sub> that will be used between the UE and the target gNB (known as K<sub>gN</sub><sub>B</sub>; see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-142__2-122__Key_generation_for_NR.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-122 &lt;\/span&gt;Generation of the security keys.&quot;}]">Fig. 2-122</a>) is derived from either the currently active K<sub>gNB</sub> (horizontal derivation) or from the two parameters next hop (<abbr class="eh-abbreviation" title="Next hop" lang="en"><span class="eh-tooltip" title="Next hop">NH</span></abbr>) and next hop chaining counter (<abbr class="eh-abbreviation" title="Next hop chaining counter or network color code" lang="en"><span class="eh-tooltip" title="Next hop chaining counter or network color code">NCC</span></abbr>) (vertical derivation).</p><p>If K<sub>gNB</sub> is derived from the currently active K<sub>gN</sub><sub>B</sub>, this is indicated to the UE with an <abbr class="eh-abbreviation" title="Next hop chaining counter or network color code" lang="en"><span class="eh-tooltip" title="Next hop chaining counter or network color code">NCC</span></abbr> that does not increase.</p><p>If K<sub>gNB</sub> is derived from the <abbr class="eh-abbreviation" title="Next hop" lang="en"><span class="eh-tooltip" title="Next hop">NH</span></abbr> parameter, this is indicated to the UE with an increased <abbr class="eh-abbreviation" title="Next hop chaining counter or network color code" lang="en"><span class="eh-tooltip" title="Next hop chaining counter or network color code">NCC</span></abbr>. Based on such a key derivation, a gNB with knowledge of a K<sub>gN</sub><sub>B</sub>, shared with a UE, is unable to compute any previous K<sub>gNB</sub> that has been used between the same UE and a previous gNB, therefore providing backward security. Similarly, a gNB with knowledge of a K<sub>gN</sub><sub>B</sub>, shared with a UE, is unable to predict any future K<sub>gNB</sub> that will be used between the same UE and another gNB after n or more handovers (since <abbr class="eh-abbreviation" title="Next hop" lang="en"><span class="eh-tooltip" title="Next hop">NH</span></abbr> parameters are only computable by the UE and the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>). <abbr class="eh-abbreviation" title="Next hop" lang="en"><span class="eh-tooltip" title="Next hop">NH</span></abbr> is further bound to the target <abbr class="eh-abbreviation" title="Physical cell identity" lang="en"><span class="eh-tooltip" title="Physical cell identity">PCI</span></abbr> and its frequency <span class="eh-text--nowrap">ARFCN-DL</span> before it is taken for use as the K<sub>gNB</sub> in the target gNB.</p><p>Moreover, a key refresh is also possible for K<sub>gN</sub><sub>B</sub>, K<sub>RRCen</sub><sub>c</sub>, K<sub>RRCin</sub><sub>t</sub>, <span class="eh-text--nowrap">K</span><sub>UPenc</sub> and K<sub>UPint </sub>and can be initiated by the gNB when a maximum number of data packets is transmitted (<abbr class="eh-abbreviation" title="Packet data convergence protocol" lang="en"><span class="eh-tooltip" title="Packet data convergence protocol">PDCP</span></abbr> COUNTs) on same radio bearer identity and with the same K<sub>gN</sub><sub>B</sub>. </p><p>Key reprogramming is also possible for the K<sub>gN</sub><sub>B</sub>, K<sub>RRCen</sub><sub>c</sub>, K<sub>RRCin</sub><sub>t</sub>, <span class="eh-text--nowrap">K</span><sub>UPenc</sub> and K<sub>UPin</sub><sub>t</sub>. It can be initiated by the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> when a new 5G <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> security context, different from the current, is to be activated.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1099" data-prevpid="1098" data-nextpid="1100" data-chapter="2.4 Overall access procedure for SA mode" id="page_1099">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h2>2.4 Overall access procedure for SA mode</h2>
						
<a id="page_1099_c1397"></a><p>Chapter <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1061" class="eh-link eh-link--page">2.1 Overall access procedure for NSA mode, page 219</a> examined the fundamentals of the access procedure for non-standalone mode. At certain points, references were made to the standalone (<abbr class="eh-abbreviation" title="Standalone" lang="en"><span class="eh-tooltip" title="Standalone">SA</span></abbr>) access principle. This chapter will provide all of the details needed to understand the initial access procedure for this mode. The fundamental difference is that <abbr class="eh-abbreviation" title="Standalone" lang="en"><span class="eh-tooltip" title="Standalone">SA</span></abbr> uses the contention based random access (<abbr class="eh-abbreviation" title="Contention based random access" lang="en"><span class="eh-tooltip" title="Contention based random access">CBRA</span></abbr>) procedure and therefore has to acquire the relevant system information (SIB1). Accessing this information requires acquisition of the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr> and decoding of its content. This is only possible while detecting and identifying the synchronization signal blocks (<abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>). However, no information is provided by the network in standalone mode to find the frequencies where the SSBs are transmitted. Like in LTE, the UE starts the entire procedure by scanning the preferred frequency bands, trying to identify the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>(s). The following sections describe each individual step starting with <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> detection.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1100" data-prevpid="1099" data-nextpid="1101" data-chapter="2.4.1 Identifying SSBs in standalone mode" id="page_1100">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.4.1 Identifying SSBs in standalone mode</h3>
						
<a id="page_1100_c1398"></a><p>In non-standalone (<abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr>) mode or more detailed <abbr class="eh-abbreviation" title="EUTRA NR dual connectivity" lang="en"><span class="eh-tooltip" title="EUTRA NR dual connectivity">EN-DC</span></abbr> mode, the UE receives the exact frequency location of the synchronization signal blocks (<abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>) via dedicated <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> signaling over the established LTE connection. For standalone (<abbr class="eh-abbreviation" title="Standalone" lang="en"><span class="eh-tooltip" title="Standalone">SA</span></abbr>) mode, the UE starts scanning the supported 5G NR frequency bands in the priority order, based on e.g. information stored on the <abbr class="eh-abbreviation" title="UMTS subscriber identity module" lang="en"><span class="eh-tooltip" title="UMTS subscriber identity module">USIM</span></abbr>, for SSBs.</p><p>As stated in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1068" class="eh-link eh-link--page">2.1.2.2 Provisioning of the measurement configuration to the end-user device, page 243</a>, 5G NR allows much finer granularity to position the signal in the frequency domain than LTE. The granularity is dependent on the deployment frequency range (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1068_c1032\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table026\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;FR1, FR2&lt;\/th&gt;&lt;th&gt;Frequency range&lt;\/th&gt;&lt;th&gt;\u0394F&lt;sub&gt;Global&lt;\/sub&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;F&lt;sub&gt;REF-Off&lt;\/sub&gt;s&lt;\/th&gt;&lt;th&gt;N&lt;sub&gt;REF-Offs&lt;\/sub&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;Range of N&lt;sub&gt;REF&lt;\/sub&gt;&lt;br&gt;\n\t\t\t\t\t\t\t(NR-ARFCN)&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&amp;nbsp;\n&lt;strong&gt;FR1:&lt;\/strong&gt; 450 MHz to &lt;\/td&gt;&lt;td&gt;0 to 3000 MHz&lt;\/td&gt;&lt;td&gt;5 kHz&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0 to 599 999&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;           7.125 GHz&lt;\/td&gt;&lt;td&gt;3000 to 24 250 MHz&lt;\/td&gt;&lt;td&gt;15 kHz&lt;\/td&gt;&lt;td&gt;3000&lt;\/td&gt;&lt;td&gt;600 000&lt;\/td&gt;&lt;td&gt;600 000 to 2 016 666&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;&amp;nbsp;\n&lt;strong&gt;FR2:&lt;\/strong&gt; 24.25 GHz to &lt;br&gt;          52.6 GHz&lt;\/td&gt;&lt;td&gt;24250 to 100 000 MHz&lt;\/td&gt;&lt;td&gt;60 kHz&lt;\/td&gt;&lt;td&gt;24 250.08 MHz&lt;\/td&gt;&lt;td&gt;2 016 667&lt;\/td&gt;&lt;td&gt;2 016 667 to 3 279 165&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-15 &lt;\/span&gt;NR-ARFCN parameters for the global frequency raster.&lt;\/p&gt;\n\n&quot;}">Fig. 2-15</a>). Second, the transmission periodicity of the SSBs is by default far less frequent then in LTE. During the initial access procedure, a UE assumes this to be 20 ms. This results in a longer scanning time due to the periodicity and higher granularity for placing a 5G NR carrier. For this reason, an additional frequency raster has been defined by 3GPP's working group RAN4 as the global synchronization channel number(s) (<abbr class="eh-abbreviation" title="Global synchronization channel number" lang="en"><span class="eh-tooltip" title="Global synchronization channel number">GSCN</span></abbr>). This raster is defined per deployment frequency range (first column in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1100_c1399\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table050\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Frequency range&lt;\/th&gt;&lt;th&gt;SS block frequency position SS&lt;sub&gt;REF&lt;\/sub&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;GSCN&lt;\/th&gt;&lt;th&gt;Range of GSCN&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0 to 3000 MHz&lt;\/td&gt;&lt;td&gt;N \u2219 1200 kHz + M \u2219 50 kHz,&lt;br&gt;\n\t\t\t\t\t\t\tN = 1:2499, M {1, 3, 5}&lt;\/td&gt;&lt;td&gt;3 \u2219 N + (M \u2013 3) \/ 2&lt;\/td&gt;&lt;td&gt;2 to 7498&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3000 to 24250 MHz&lt;\/td&gt;&lt;td&gt;3000 MHz + N \u2219 1.44 MHz&lt;br&gt;\n\t\t\t\t\t\t\tN = 0:14756&lt;\/td&gt;&lt;td&gt;7499 + N&lt;\/td&gt;&lt;td&gt;7499 to 22255&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;24250 to 100000 MHz&lt;\/td&gt;&lt;td&gt;24250.08 MHz + N \u2219 17.28 MHz&lt;\/td&gt;&lt;td&gt;22256 + N&lt;\/td&gt;&lt;td&gt;22256 to 26639&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-123 &lt;\/span&gt;GSCN parameters for the global frequency raster.&lt;\/p&gt;\n\n&quot;}">Fig. 2-123</a>) and further specified per frequency band, where, dependent on the utilized subcarrier spacing for the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>, a different step size (1 or 2) is used.</p>


<a id="page_1100_c1399"></a><div class="table-scroll"><table id="table050" class="eh-table eh-table--alternate"><colgroup><col><col><col><col></colgroup><thead><tr><th>Frequency range</th><th>SS block frequency position SS<sub>REF</sub>
&nbsp;</th><th>GSCN</th><th>Range of GSCN</th></tr></thead><tbody><tr><td>0 to 3000 MHz</td><td>N ∙ 1200 kHz + M ∙ 50 kHz,<br>
							N = 1:2499, M {1, 3, 5}</td><td>3 ∙ N + (M – 3) / 2</td><td>2 to 7498</td></tr><tr><td>3000 to 24250 MHz</td><td>3000 MHz + N ∙ 1.44 MHz<br>
							N = 0:14756</td><td>7499 + N</td><td>7499 to 22255</td></tr><tr><td>24250 to 100000 MHz</td><td>24250.08 MHz + N ∙ 17.28 MHz</td><td>22256 + N</td><td>22256 to 26639</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-123 </span><abbr class="eh-abbreviation" title="Global synchronization channel number" lang="en"><span class="eh-tooltip" title="Global synchronization channel number">GSCN</span></abbr> parameters for the global frequency raster.</p>


<a id="page_1100_c1400"></a><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-124__5G_NR_synchronization.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-124 &lt;\/span&gt;5G NR synchronization (GSCN) and carrier raster (NR-ARFCN).&quot;}]">Fig. 2-124</a> shows an example for the synchronization and carrier raster using frequency band n78 and assuming 30 kHz is used as the raster frequency (<span class="eh-text--nowrap">F</span><sub>Raste</sub><sub>r</sub>; see <span class="eh-hint" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4" lang="en"><span class="eh-tooltip" title="3GPP TS 38.101: NR; User Equipment (UE) radio transmission and reception; Parts 1 to 4">TS 38.101</span></span>), resulting in a step size of two between NR-ARFCN. Obviously, certain reference frequencies (F<sub>REF</sub>) for the carrier raster align with the synchronization reference frequencies (<abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr><sub>REF</sub>) of the synchronization raster.</p>


<a id="page_1100_c1401"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:44%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-124__5G_NR_synchronization_fcf6abcca1.png" width="800" height="349" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-124 </span>5G NR synchronization (<abbr class="eh-abbreviation" title="Global synchronization channel number" lang="en"><span class="eh-tooltip" title="Global synchronization channel number">GSCN</span></abbr>) and carrier raster (NR-ARFCN).</figcaption></figure></div></div></div></div></div></div>


<a id="page_1100_c1402"></a><p>A 5G NR device, supporting standalone mode, would now scan its supported frequency bands, following the synchronization raster, trying to identify SSBs transmitted on these frequencies. The UE will perform the same signal quality measurements on a detected <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> like in non-standalone mode. These measurements are SS-RSRP, SS-RSRQ and SS-SINR (<span class="eh-hint" title="3GPP TS 38.215: NR; Physical layer measurements" lang="en"><span class="eh-tooltip" title="3GPP TS 38.215: NR; Physical layer measurements">TS 38.215</span></span>).</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1101" data-prevpid="1100" data-nextpid="1102" data-chapter="2.4.1.1 Cell-defining SSB" id="page_1101">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.4.1.1 Cell-defining SSB</h4>
						
<a id="page_1101_c1403"></a><p>SSBs are not only important for initial synchronization on the downlink, but can also be used by an end-user device for channel estimation. Therefore, there can be multiple occasions throughout the channel bandwidth, in particular within the configured bandwidth parts, where SSBs are transmitted. Not all of these <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> transmissions indicate further broadcasting of system information (<abbr class="eh-abbreviation" title="Remaining minimum system information" lang="en"><span class="eh-tooltip" title="Remaining minimum system information">RMSI</span></abbr>, <abbr class="eh-abbreviation" title="Open system interconnection, Other system information" lang="en"><span class="eh-tooltip" title="Open system interconnection, Other system information">OSI</span></abbr>) in the particular bandwidth part where they are transmitted. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-125__Cell-defining_synchronization_signal_blocks.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-125 &lt;\/span&gt;Cell-defining synchronization signal blocks (SSBs) in 5G NR.&quot;}]">Fig. 2-125</a> shows an example of a configuration where multiple SSBs are transmitted in different frequency positions. Only SSB1 and SSB4 indicate to transmit the remaining minimum system information (<abbr class="eh-abbreviation" title="Remaining minimum system information" lang="en"><span class="eh-tooltip" title="Remaining minimum system information">RMSI</span></abbr>) such as SIB1, which is required by the UE to perform the random access procedure.</p><p>The question is how does the UE determine if the detected <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> is transmitted in a bandwidth part that also transmits additional system information?</p>


<a id="page_1101_c1404"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:52%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-125__Cell-defining_synchronization_signal_blocks_2658826cd1.png" width="800" height="416" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-125 </span>Cell-defining synchronization signal blocks (SSBs) in 5G NR.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1101_c1405"></a><p>The parameter k<sub>SSB</sub> informs the UE if a so-called Type0-PDCCH common search space is present and transmitted in the bandwidth part where the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> is transmitted. This type of search space is used to transmit downlink control information to the UE in order to indicate the time and frequency resources that carry the remaining minimum system information (<abbr class="eh-abbreviation" title="Remaining minimum system information" lang="en"><span class="eh-tooltip" title="Remaining minimum system information">RMSI</span></abbr>, i.e. SIB1). To indicate the presence of a Type0-PDCCH common search space, k<sub>SSB</sub> ≤ 23 for frequency range 1 (FR1) and k<sub>SSB</sub> ≤ 11 for frequency range 2 (FR2). k<sub>SSB</sub> is broadcast as part of the master information block (<abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>) and is accessible by the UE after decoding the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>. If the value of k<sub>SSB</sub> is greater than 23 for FR1 or 11 for FR2, then additional mechanisms are applied to guide the UE to SSBs transmitted in a bandwidth part providing a Type0-PDCCH common search space. For FR1, if <span class="eh-text--nowrap">24 ≤ k</span><sub>SSB</sub><span class="eh-text--nowrap"> ≤ 29 (FR2: 12 ≤ k</span><sub>SSB</sub><span class="eh-text--nowrap"> ≤ 13)</span>, then the UE can find another <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> transmitted at frequency position <em>N</em><sub class="eh-text--em eh-text__letter">G</sub><sub class="eh-text--em eh-text__letter">SC</sub><sub class="eh-text--em eh-text__letter">N</sub><sup class="eh-text--em eh-text__letter">Reference</sup> + <em>N</em><sub class="eh-text--em eh-text__letter">GSC</sub><sub class="eh-text--em eh-text__letter">N</sub><sup class="eh-text--em eh-text__letter">Offsett</sup>. <em>N</em><sub class="eh-text--em eh-text__letter">G</sub><sub class="eh-text--em eh-text__letter">SC</sub><sub class="eh-text--em eh-text__letter">N</sub><sup class="eh-text--em eh-text__letter">Reference</sup> represents the <abbr class="eh-abbreviation" title="Global synchronization channel number" lang="en"><span class="eh-tooltip" title="Global synchronization channel number">GSCN</span></abbr> where the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> was detected, whereas <em>N</em><sub class="eh-text--em eh-text__letter">GSC</sub><sub class="eh-text--em eh-text__letter">N</sub><sup class="eh-text--em eh-text__letter">Offsett </sup>defines an offset to this <abbr class="eh-abbreviation" title="Global synchronization channel number" lang="en"><span class="eh-tooltip" title="Global synchronization channel number">GSCN</span></abbr> based on the value of <em>pdcch-ConfigSIB1</em>. This information is provided as part of the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1101_c1406\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table051\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;k&lt;sub&gt;SSB&lt;\/sub&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;&lt;strong&gt;&lt;em&gt;pdcch-ConfigSIB1&lt;\/em&gt;&lt;\/strong&gt;&lt;\/th&gt;&lt;th&gt;&amp;nbsp;\n&lt;strong&gt;&lt;em&gt;N&lt;\/em&gt;&lt;\/strong&gt;&lt;strong&gt;&lt;em&gt;GSN&lt;\/em&gt;&lt;\/strong&gt;&lt;strong&gt;&lt;em&gt;C&lt;\/em&gt;&lt;\/strong&gt;&lt;strong&gt;&lt;em&gt;Offset&lt;\/em&gt;&lt;\/strong&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;24&lt;\/td&gt;&lt;td&gt;0, 1, \u2026, 255&lt;\/td&gt;&lt;td&gt;1, 2, \u2026, 256&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;25&lt;\/td&gt;&lt;td&gt;0, 1, \u2026, 255&lt;\/td&gt;&lt;td&gt;257, 258, \u2026, 512&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;26&lt;\/td&gt;&lt;td&gt;0, 1, \u2026, 255&lt;\/td&gt;&lt;td&gt;513, 514, \u2026, 768&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;27&lt;\/td&gt;&lt;td&gt;0, 1, \u2026, 255&lt;\/td&gt;&lt;td&gt;\u20131, \u20132, \u2026, \u2013256&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;28&lt;\/td&gt;&lt;td&gt;0, 1, \u2026, 255&lt;\/td&gt;&lt;td&gt;\u2013257, \u2013258, \u2026, \u2013512&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;29&lt;\/td&gt;&lt;td&gt;0, 1, \u2026, 255&lt;\/td&gt;&lt;td&gt;\u2013513, \u2013514, \u2026, \u2013768&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;30&lt;\/td&gt;&lt;td&gt;0, 1, \u2026, 255&lt;\/td&gt;&lt;td&gt;Reserved&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-126 &lt;\/span&gt;Mapping between the combination of k&lt;sub&gt;SSB&lt;\/sub&gt;, &lt;em&gt;pdcch-ConfigSIB1&lt;\/em&gt; and GSCN offset for FR1.&lt;\/p&gt;\n\n&quot;}">Fig. 2-126</a> gives a list of potential offsets for FR1, while the parameter for FR2 can be found in <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span>, Table 13-17. As an example, we will assume the UE has detected <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> 3 in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-125__Cell-defining_synchronization_signal_blocks.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-125 &lt;\/span&gt;Cell-defining synchronization signal blocks (SSBs) in 5G NR.&quot;}]">Fig. 2-125</a> at <abbr class="eh-abbreviation" title="Global synchronization channel number" lang="en"><span class="eh-tooltip" title="Global synchronization channel number">GSCN</span></abbr> 7846 (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-124__5G_NR_synchronization.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-124 &lt;\/span&gt;5G NR synchronization (GSCN) and carrier raster (NR-ARFCN).&quot;}]">Fig. 2-124</a>). When decoding the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>, the UE determines that k<sub>SSB</sub> = 24. This tells the UE that this bandwidth part where <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> 3 is transmitted has no Type0-PDCCH common search space. The <abbr class="eh-abbreviation" title="Global synchronization channel number" lang="en"><span class="eh-tooltip" title="Global synchronization channel number">GSCN</span></abbr> offset range is within 1 to 256. If the eight bits defining the <em>pdcch-ConfigSIB1</em> are set, for example, to 11001100, then this would correspond to the number 204 (decimal). The resulting <abbr class="eh-abbreviation" title="Global synchronization channel number" lang="en"><span class="eh-tooltip" title="Global synchronization channel number">GSCN</span></abbr> offset would be 205 and thus the UE would tune its receiver to <abbr class="eh-abbreviation" title="Global synchronization channel number" lang="en"><span class="eh-tooltip" title="Global synchronization channel number">GSCN</span></abbr> 8051 and detect <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> 4. <abbr class="eh-abbreviation" title="Global synchronization channel number" lang="en"><span class="eh-tooltip" title="Global synchronization channel number">GSCN</span></abbr> 8051 corresponds to a synchronization signal reference frequency (<abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr><sub>REF</sub>) of 3794.88 MHz. According to TS 38.101-1, Table 5.4.3.3-1, it is the last <abbr class="eh-abbreviation" title="Global synchronization channel number" lang="en"><span class="eh-tooltip" title="Global synchronization channel number">GSCN</span></abbr> applicable for frequency band n78.</p>


<a id="page_1101_c1406"></a><div class="table-scroll"><table id="table051" class="eh-table eh-table--alternate"><colgroup><col><col><col></colgroup><thead><tr><th>k<sub>SSB</sub>
&nbsp;</th><th><strong><em>pdcch-ConfigSIB1</em></strong></th><th>&nbsp;
<strong><em>N</em></strong><strong><em>GSN</em></strong><strong><em>C</em></strong><strong><em>Offset</em></strong>
&nbsp;</th></tr></thead><tbody><tr><td>24</td><td>0, 1, …, 255</td><td>1, 2, …, 256</td></tr><tr><td>25</td><td>0, 1, …, 255</td><td>257, 258, …, 512</td></tr><tr><td>26</td><td>0, 1, …, 255</td><td>513, 514, …, 768</td></tr><tr><td>27</td><td>0, 1, …, 255</td><td>–1, –2, …, –256</td></tr><tr><td>28</td><td>0, 1, …, 255</td><td>–257, –258, …, –512</td></tr><tr><td>29</td><td>0, 1, …, 255</td><td>–513, –514, …, –768</td></tr><tr><td>30</td><td>0, 1, …, 255</td><td>Reserved</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-126 </span>Mapping between the combination of k<sub>SSB</sub>, <em>pdcch-ConfigSIB1</em> and <abbr class="eh-abbreviation" title="Global synchronization channel number" lang="en"><span class="eh-tooltip" title="Global synchronization channel number">GSCN</span></abbr> offset for FR1.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1102" data-prevpid="1101" data-nextpid="1103" data-chapter="2.4.2 Access system information block type 1 (SIB1)" id="page_1102">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.4.2 Access system information block type 1 (SIB1)</h3>
						


					</div>
				
		</section><section class="page-section eh-inview" data-pid="1103" data-prevpid="1102" data-nextpid="1104" data-chapter="2.4.2.1 Scheduling configuration for SIB1" id="page_1103">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.4.2.1 Scheduling configuration for SIB1</h4>
						
<a id="page_1103_c1407"></a><p>After the UE has identified the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> within the bandwidth part that provides a Type0-PDCCH common search space, it uses the information provided with <em>pdcch-</em><em>ConfigSIB1</em> to identify the frequency and time resources where the related <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> is transmitted. As mentioned earlier, this information is coded with eight bits. The UE uses first the four most significant bits and then the least significant bits. Each of these two four-bit combinations points to an index in one of multiple tables defined in <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span>. The UE identifies the correct table based on the subcarrier spacing used for the synchronization signal blocks and the subcarrier spacing used for transmission of the control channel (<abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>) and data channel (<abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>). The latter is identified by the UE from the parameter <em>subCarrierSpacingCommon</em> broadcast with the <abbr class="eh-abbreviation" title="Master information block" lang="en"><span class="eh-tooltip" title="Master information block">MIB</span></abbr>. Sticking to the example with frequency band n78 and thus FR1, this value would be set to either 15 kHz or 30 kHz. We will assume it is 30 kHz. The subcarrier spacing for SSBs for band n78 is defined as 30 kHz using mapping pattern C and the minimum channel bandwidth for the band is 10 MHz [TS 38.101-1].</p><p>Based on the described settings, the following two tables are applicable to interpret the bitmap used for <em>pdcch-</em><em>ConfigSIB1</em>. <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1103_c1408\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table\&quot; id=\&quot;table052\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Index&lt;\/th&gt;&lt;th&gt;SS\/PBCH block and control resource set multiplex pattern&lt;\/th&gt;&lt;th&gt;Number of RBs for CORESET&lt;\/th&gt;&lt;th&gt;Number of symbols&lt;br \/&gt;&lt;strong&gt;&lt;em&gt;N&lt;\/em&gt;&lt;\/strong&gt;&lt;strong&gt;&lt;em&gt;symb&lt;\/em&gt;&lt;\/strong&gt;&lt;strong&gt;&lt;em&gt;&lt;\/em&gt;&lt;\/strong&gt;&lt;strong&gt;&lt;em&gt;CORESET&lt;\/em&gt;&lt;\/strong&gt;&lt;\/th&gt;&lt;th&gt;Offset (RB)&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td rowspan=\&quot;16\&quot;&gt;1&lt;\/td&gt;&lt;td rowspan=\&quot;10\&quot;&gt;24&lt;\/td&gt;&lt;td rowspan=\&quot;5\&quot;&gt;2&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;3&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td rowspan=\&quot;5\&quot;&gt;3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;3&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td rowspan=\&quot;6\&quot;&gt;48&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;1&lt;\/td&gt;&lt;td&gt;12&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;11&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;12&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;13&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;2&lt;\/td&gt;&lt;td&gt;12&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td&gt;16&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-127 &lt;\/span&gt;Set of resource blocks and slot symbols of control resource set for Type0-PDCCH search space when {SS\/PBCH block, PDCCH} subcarrier spacing is {30, 30} kHz for frequency bands with minimum channel bandwidth of 5 MHz or 10 MHz.&lt;\/p&gt;\n\n&quot;}">Fig. 2-127</a> defines the frequency and time resources used for the control set. Using the earlier example, the first four most significant bits of <em>pdcch-</em><em>ConfigSIB1</em> are 1100, corresponding to index 12. Therefore, the control resource set occupies 48 resource blocks and an offset of 16 resource blocks. The <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> occupies one OFDM symbol in the time domain.</p>


<a id="page_1103_c1408"></a><div class="table-scroll"><table class="eh-table" id="table052"><colgroup><col><col><col><col><col></colgroup><thead><tr><th>Index</th><th>SS/PBCH block and control resource set multiplex pattern</th><th>Number of RBs for CORESET</th><th>Number of symbols<br><strong><em>N</em></strong><strong><em>symb</em></strong><strong><em></em></strong><strong><em>CORESET</em></strong></th><th>Offset (RB)</th></tr></thead><tbody><tr><td>0</td><td rowspan="16">1</td><td rowspan="10">24</td><td rowspan="5">2</td><td>0</td></tr><tr><td>1</td><td>1</td></tr><tr><td>2</td><td>2</td></tr><tr><td>3</td><td>3</td></tr><tr><td>4</td><td>4</td></tr><tr><td>5</td><td rowspan="5">3</td><td>0</td></tr><tr><td>6</td><td>1</td></tr><tr><td>7</td><td>2</td></tr><tr><td>8</td><td>3</td></tr><tr><td>9</td><td>4</td></tr><tr><td>10</td><td rowspan="6">48</td><td rowspan="3">1</td><td>12</td></tr><tr><td>11</td><td>14</td></tr><tr><td>12</td><td>16</td></tr><tr><td>13</td><td rowspan="3">2</td><td>12</td></tr><tr><td>14</td><td>14</td></tr><tr><td>15</td><td>16</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-127 </span>Set of resource blocks and slot symbols of control resource set for Type0-PDCCH search space when {<abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block, <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>} subcarrier spacing is {30, 30} kHz for frequency bands with minimum channel bandwidth of 5 MHz or 10 MHz.</p>


<a id="page_1103_c1409"></a><p>The above configuration can, of course, only be applicable if the channel bandwidth provides this number of resource blocks. For a subcarrier spacing of 30 kHz, a channel bandwidth of 100 MHz (273 <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr>) is supported. The above configuration would require a channel bandwidth of at least 25 MHz (65 <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr>).</p><p>The second step is to determine at which point in time to monitor the downlink at the provided frequency and time resource. This information is generally provided by a second table. In the example, <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1103_c1410\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table eh-table--alternate\&quot; id=\&quot;table053\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Index&lt;\/th&gt;&lt;th&gt;O&lt;\/th&gt;&lt;th&gt;Number of search space sets per slot&lt;\/th&gt;&lt;th&gt;M&lt;\/th&gt;&lt;th&gt;First symbol index&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1\/2&lt;\/td&gt;&lt;td class=\&quot;eh-table__td-bg--gray\&quot;&gt;{0, if &lt;em&gt;i&lt;\/em&gt; is even}, {&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;symb&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;CORESET&lt;\/sup&gt;, if &lt;em&gt;i&lt;\/em&gt; is odd}&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1\/2&lt;\/td&gt;&lt;td&gt;{0, if &lt;em&gt;i&lt;\/em&gt; is even}, {&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;symb&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;CORESET&lt;\/sup&gt;, if &lt;em&gt;i&lt;\/em&gt; is odd}&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1\/2&lt;\/td&gt;&lt;td&gt;{0, if &lt;em&gt;i&lt;\/em&gt; is even}, {&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;symb&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;CORESET&lt;\/sup&gt;, if &lt;em&gt;i&lt;\/em&gt; is odd}&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1\/2&lt;\/td&gt;&lt;td&gt;{0, if &lt;em&gt;i&lt;\/em&gt; is even}, { &lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;symb&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;CORESET&lt;\/sup&gt;, if &lt;em&gt;i&lt;\/em&gt; is odd}&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;11&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;12&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;13&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-128 &lt;\/span&gt;Parameters for PDCCH monitoring occasions for Type0-PDCCH common search space \u2013 SS\/PBCH block and control resource set multiplexing pattern 1 and FR1.&lt;\/p&gt;\n\n&quot;}">Fig. 2-128</a> is applicable.</p>


<a id="page_1103_c1410"></a><div class="table-scroll"><table class="eh-table eh-table--alternate" id="table053"><colgroup><col><col><col><col><col></colgroup><thead><tr><th>Index</th><th>O</th><th>Number of search space sets per slot</th><th>M</th><th>First symbol index</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td></tr><tr><td>1</td><td>0</td><td>2</td><td>1/2</td><td class="eh-table__td-bg--gray">{0, if <em>i</em> is even}, {<em>N</em><sub class="eh-text--em eh-text__letter">symb</sub><sub class="eh-text--em eh-text__letter"></sub><sup class="eh-text--em eh-text__letter">CORESET</sup>, if <em>i</em> is odd}</td></tr><tr><td>2</td><td>2</td><td>1</td><td>1</td><td>0</td></tr><tr><td>3</td><td>2</td><td>2</td><td>1/2</td><td>{0, if <em>i</em> is even}, {<em>N</em><sub class="eh-text--em eh-text__letter">symb</sub><sub class="eh-text--em eh-text__letter"></sub><sup class="eh-text--em eh-text__letter">CORESET</sup>, if <em>i</em> is odd}</td></tr><tr><td>4</td><td>5</td><td>1</td><td>1</td><td>0</td></tr><tr><td>5</td><td>5</td><td>2</td><td>1/2</td><td>{0, if <em>i</em> is even}, {<em>N</em><sub class="eh-text--em eh-text__letter">symb</sub><sub class="eh-text--em eh-text__letter"></sub><sup class="eh-text--em eh-text__letter">CORESET</sup>, if <em>i</em> is odd}</td></tr><tr><td>6</td><td>7</td><td>1</td><td>1</td><td>0</td></tr><tr><td>7</td><td>7</td><td>2</td><td>1/2</td><td>{0, if <em>i</em> is even}, { <em>N</em><sub class="eh-text--em eh-text__letter">symb</sub><sub class="eh-text--em eh-text__letter"></sub><sup class="eh-text--em eh-text__letter">CORESET</sup>, if <em>i</em> is odd}</td></tr><tr><td>8</td><td>0</td><td>1</td><td>2</td><td>0</td></tr><tr><td>9</td><td>5</td><td>1</td><td>2</td><td>0</td></tr><tr><td>10</td><td>0</td><td>1</td><td>1</td><td>1</td></tr><tr><td>11</td><td>0</td><td>1</td><td>1</td><td>2</td></tr><tr><td>12</td><td>2</td><td>1</td><td>1</td><td>1</td></tr><tr><td>13</td><td>2</td><td>1</td><td>1</td><td>2</td></tr><tr><td>14</td><td>5</td><td>1</td><td>1</td><td>1</td></tr><tr><td>15</td><td>5</td><td>1</td><td>1</td><td>2</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-128 </span>Parameters for <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> monitoring occasions for Type0-PDCCH common search space – <abbr class="eh-abbreviation" title="Synchronization signal" lang="en"><span class="eh-tooltip" title="Synchronization signal">SS</span></abbr>/<abbr class="eh-abbreviation" title="Physical broadcast channel" lang="en"><span class="eh-tooltip" title="Physical broadcast channel">PBCH</span></abbr> block and control resource set multiplexing pattern 1 and FR1.</p>


<a id="page_1103_c1411"></a><p>Assuming the least significant bits of <em>pdcch-</em><em>ConfigSIB1</em> are set to 1100, index 12 in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1103_c1410\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table eh-table--alternate\&quot; id=\&quot;table053\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Index&lt;\/th&gt;&lt;th&gt;O&lt;\/th&gt;&lt;th&gt;Number of search space sets per slot&lt;\/th&gt;&lt;th&gt;M&lt;\/th&gt;&lt;th&gt;First symbol index&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1\/2&lt;\/td&gt;&lt;td class=\&quot;eh-table__td-bg--gray\&quot;&gt;{0, if &lt;em&gt;i&lt;\/em&gt; is even}, {&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;symb&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;CORESET&lt;\/sup&gt;, if &lt;em&gt;i&lt;\/em&gt; is odd}&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1\/2&lt;\/td&gt;&lt;td&gt;{0, if &lt;em&gt;i&lt;\/em&gt; is even}, {&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;symb&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;CORESET&lt;\/sup&gt;, if &lt;em&gt;i&lt;\/em&gt; is odd}&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1\/2&lt;\/td&gt;&lt;td&gt;{0, if &lt;em&gt;i&lt;\/em&gt; is even}, {&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;symb&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;CORESET&lt;\/sup&gt;, if &lt;em&gt;i&lt;\/em&gt; is odd}&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1\/2&lt;\/td&gt;&lt;td&gt;{0, if &lt;em&gt;i&lt;\/em&gt; is even}, { &lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;symb&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;CORESET&lt;\/sup&gt;, if &lt;em&gt;i&lt;\/em&gt; is odd}&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;11&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;12&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;13&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-128 &lt;\/span&gt;Parameters for PDCCH monitoring occasions for Type0-PDCCH common search space \u2013 SS\/PBCH block and control resource set multiplexing pattern 1 and FR1.&lt;\/p&gt;\n\n&quot;}">Fig. 2-128</a> applies and sets <em>O</em> to a value of 2 and <em>M</em> to 1. The values O and M impact the system frame number as well as the slot number for which the UE would start monitoring the downlink at the defined frequency and time resources for two consecutive slots starting from the slot n<sub class="eh-text__number">0</sub>. Slot n<sub class="eh-text__number">0</sub> is determined based on the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> index i (e.g. i = 0) as n<sub class="eh-text__number">0</sub> = (<em>O</em> · 2<sup class="eh-text--em eh-text__letter">μ</sup> + <span class="eh-text--math">⎣</span>i · M<span class="eh-text--math">⎦</span>) mod <em>N</em><sub class="eh-text--em eh-text__letter">slo</sub><sub class="eh-text--em eh-text__letter">t</sub><sup class="eh-text--em eh-text__letter">frame, μ</sup>. <em>O</em> and <em>M</em> are known due to the signaled index and <em>µ</em> is given due to the subcarrier with <em>µ </em>= 1. The factor <em>N</em><sub class="eh-text--em eh-text__letter">slo</sub><sub class="eh-text--em eh-text__letter">t</sub><sup class="eh-text--em eh-text__letter">frame, μ</sup><strong></strong>is also subcarrier dependent as it defines the number of slots per radio frame. In the example with 30 kHz subcarrier spacing, this would result in 20 slots per 10 ms radio frame. Based on the above parameterization, n<sub class="eh-text--em eh-text__letter">0</sub> is 4. Now, the question is in which radio frame to start. The corresponding system frame number <abbr class="eh-abbreviation" title="System frame number" lang="en"><span class="eh-tooltip" title="System frame number">SFN</span></abbr><sub class="eh-text--em eh-text__letter">C</sub> is determined based on <span class="eh-text--math">⎣</span>(<em>O</em> · 2<sup class="eh-text--em eh-text__letter">μ</sup><span class="eh-text--math">⎣</span><em>i</em> · <em>M</em><span class="eh-text--math">⎦</span>)/<em>N</em><sub class="eh-text--em eh-text__letter">slo</sub><sub class="eh-text--em eh-text__letter">t</sub><sup class="eh-text--em eh-text__letter">frame, μ</sup><span class="eh-text--math">⎦</span>mod 2 either resulting in 0 or 1. For the example, the result of this modulo operation is 0 and thus any <abbr class="eh-abbreviation" title="System frame number" lang="en"><span class="eh-tooltip" title="System frame number">SFN</span></abbr> satisfying <em>SFN</em><em>C</em><em> mod 2 = </em>0 is monitored for the Type0-PDCCH common search space starting with slot n<sub class="eh-text__number">0</sub> for two consecutive slots.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1104" data-prevpid="1103" data-nextpid="1105" data-chapter="2.4.2.2 Scheduling information for SIB1" id="page_1104">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.4.2.2 Scheduling information for SIB1</h4>
						
<a id="page_1104_c1412"></a><p>The UE monitors the identified Type0-PDCCH common search space now for downlink control information (<abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>) format 1_0 where the cyclic redundancy check (<abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr>) is scrambled with the system information radio network temporary identifier (<abbr class="eh-abbreviation" title="System information radio network temporary identifier" lang="en"><span class="eh-tooltip" title="System information radio network temporary identifier">SI-RNTI</span></abbr>). <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1104_c1413\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table054\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Value (hexadecimal)&lt;\/th&gt;&lt;th&gt;Radio network temporary identifier (RNTI)&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0000&lt;\/td&gt;&lt;td&gt;N\/A&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;0001 \u2013 FFEF&lt;\/td&gt;&lt;td&gt;RA-RNTI, Temporary C-RNTI, C-RNTI, MCS-C-RNTI, CS-RNTI, TPC-PUCCH- RNTI, TPC-PUSCH-RNTI, \u00adTPC-SRS-RNTI, INT-RNTI, SFI-RNTI, and SP-CSI-RNTI&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;FFF0 \u2013 FFFD&lt;\/td&gt;&lt;td&gt;Reserved&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;FFFE&lt;\/td&gt;&lt;td&gt;P-RNTI&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;FFFF&lt;\/td&gt;&lt;td&gt;SI-RNTI&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-129 &lt;\/span&gt;RNTI values used in 5G NR.&lt;\/p&gt;\n\n&quot;}">Fig. 2-129</a> provides a complete overview of the <abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> values used in 5G NR (<span class="eh-hint" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.321: NR; Medium Access Control (MAC) protocol specification">TS 38.321</span></span>).</p>


<a id="page_1104_c1413"></a><div class="table-scroll"><table id="table054" class="eh-table eh-table--alternate"><colgroup><col><col></colgroup><thead><tr><th>Value (hexadecimal)</th><th>Radio network temporary identifier (RNTI)</th></tr></thead><tbody><tr><td>0000</td><td>N/A</td></tr><tr><td>0001 – FFEF</td><td>RA-RNTI, Temporary C-RNTI, C-RNTI, MCS-C-RNTI, CS-RNTI, TPC-PUCCH- RNTI, TPC-PUSCH-RNTI, ­TPC-SRS-RNTI, INT-RNTI, SFI-RNTI, and SP-CSI-RNTI</td></tr><tr><td>FFF0 – FFFD</td><td>Reserved</td></tr><tr><td>FFFE</td><td>P-RNTI</td></tr><tr><td>FFFF</td><td>SI-RNTI</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-129 </span><abbr class="eh-abbreviation" title="Radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Radio network temporary identifier">RNTI</span></abbr> values used in 5G NR.</p>


<a id="page_1104_c1414"></a><p><abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 was already discussed in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1061" class="eh-link eh-link--page">2.1 Overall access procedure for NSA mode, page 219</a>. The first set of information (frequency and time domain assignment, mapping of virtual resource blocks to physical resource blocks and determination of the modulation and coding scheme) is the same. For more details, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1072_c1084" class="eh-link eh-link--page eh-link--ce">DCI format 1_0, page 264</a>. The difference in content for <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 when used to schedule resources that carry the random access response and in the present case with scheduling resources that carry system information is that the format provides the following additional information:</p><ul class="eh-list eh-list--line"><li>Redundancy version [2 bits]</li><li>System information indicator [1 bit]</li><li>Reserved bits [15 bits]</li></ul><p>The system information indicator bit is set to 0 for the case in which the scheduled <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> carries SIB1. If it is set to 1, it indicates that the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> carries system information (<abbr class="eh-abbreviation" title="System information" lang="en"><span class="eh-tooltip" title="System information">SI</span></abbr>) messages. This is relevant since the cell sends other system information (<abbr class="eh-abbreviation" title="Open system interconnection, Other system information" lang="en"><span class="eh-tooltip" title="Open system interconnection, Other system information">OSI</span></abbr>) either periodically as a broadcast or on demand only in which case a UE has to request transmission of additional system information. This information – broadcasting of additional system information or transmission on demand – is defined in SIB1.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1105" data-prevpid="1104" data-nextpid="1106" data-chapter="2.4.2.3 Content of SIB1" id="page_1105">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.4.2.3 Content of SIB1</h4>
						
<a id="page_1105_c1415"></a><p>Upon decoding the <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr>, the UE knows which frequency and time resources to access in order to identify the resource blocks that carry the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> carrying SIB1. The transmission periodicity for SIB1 is defined as 160 ms. However, the repetition periodicity is variable. For the selected parameterization in the example above with <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> and <abbr class="eh-abbreviation" title="Control-resource set" lang="en"><span class="eh-tooltip" title="Control-resource set">CORESET</span></abbr> multiplex pattern 1, the repetition periodicity is set to 20 ms (<span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span>).</p><p>The <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> is generally <abbr class="eh-abbreviation" title="Low density parity check" lang="en"><span class="eh-tooltip" title="Low density parity check">LDPC</span></abbr> coded (see introduction in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1037_c833" class="eh-link eh-link--page eh-link--ce">5G NR channel coding for data, page 145</a>). After demodulation and decoding of the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>, the UE has access to the information broadcast with SIB1. Its content is listed in the following:</p><ul class="eh-list eh-list--line"><li>Cell selection information (<em>cellSelectionInfo</em>)</li><li>Cell access related information (<em>CellAccessRelatedInfo</em>)</li><li>Connection estimation failure control information (<em>ConnEstFailureControl</em>)</li><li>Information on sending system information (<abbr class="eh-abbreviation" title="System information" lang="en"><span class="eh-tooltip" title="System information">SI</span></abbr>) (<em>SI-SchedulingInfo</em>)</li><li>Configuration of the serving cell (<em>ServingCellConfigCommonSIB</em>)</li><li>Support for IMS emergency support and support for eCall over IMS</li><li>UE timers and constants (<em>UE-TimersAndConstants</em>)</li><li>Information related to unified access control (UAC; see <span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span>, 5.3.14 for details)</li></ul><p>The required information for the UE to continue with the initial access procedure in standalone mode is covered in <em>configuration of the serving cell</em> and signaled as <em>ServingCellConfigCommonSIB</em> (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-130__ServingCellConfigCommonSIB_.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-130 &lt;\/span&gt;ServingCellConfigCommonSIB as provided within SIB1.&quot;}]">Fig. 2-130</a>). The information the UE requires to perform the random access procedure in standalone mode is highlighted in blue.</p>


<a id="page_1105_c1416"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:118%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-130__ServingCellConfigCommonSIB__d0578a2f3b.png" width="800" height="942" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-130 </span>ServingCellConfigCommonSIB as provided within SIB1.</figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1106" data-prevpid="1105" data-nextpid="1107" data-chapter="2.4.3 Random access procedure in standalone mode" id="page_1106">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.4.3 Random access procedure in standalone mode</h3>
						
<a id="page_1106_c1417"></a><p class="eh-headline-207 ">
				Selection of the <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> preamble and frequency and time resources for ­preamble transmission
			</p>


<a id="page_1106_c1418"></a><p>In non-standalone mode, the end-user device is signaled which <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> resource and preamble to use to perform the random access procedure. For standalone mode, applying contention-based random access (<abbr class="eh-abbreviation" title="Contention based random access" lang="en"><span class="eh-tooltip" title="Contention based random access">CBRA</span></abbr>) the UE has to select a preamble and identify the frequency and time resources on the uplink to transmit the preamble based on the results of the signal quality measurements carried out on the detected SSBs.</p><p>Generation of the random access preamble follows the same concept as described for non-standalone mode based on the settings and values provided in <em>RACH-Config-Common</em> and <em>RACH-</em><em>ConfigGeneric</em>. The latter also provides the <em>prach-</em><em>ConfigurationIndex</em> and thus the UE knows what preamble format to use as well as in which subframes of a radio frame (<abbr class="eh-abbreviation" title="System frame number" lang="en"><span class="eh-tooltip" title="System frame number">SFN</span></abbr>) it is allowed to transmit the preamble and how many <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> occasions are applicable. For all details, refer to chapter <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1071_c1051" class="eh-link eh-link--page eh-link--ce">When to transmit the random access preamble?, page 253</a>.</p><p>As in <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr> mode, in <abbr class="eh-abbreviation" title="Standalone" lang="en"><span class="eh-tooltip" title="Standalone">SA</span></abbr> mode the UE also uses the threshold (<em>rsrp-</em><em>ThresholdSSB</em>) definition provided by RACH-ConfigCommon to identify the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> it should consider for selecting the associated random access preamble. The difference between <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr> and <abbr class="eh-abbreviation" title="Standalone" lang="en"><span class="eh-tooltip" title="Standalone">SA</span></abbr> is how the UE selects the preamble and identifies the occasion where it can transmit the selected preamble.</p><p>For <abbr class="eh-abbreviation" title="Standalone" lang="en"><span class="eh-tooltip" title="Standalone">SA</span></abbr> according to <span class="eh-hint" title="3GPP TS 38.213: NR; Physical layer procedures for control" lang="en"><span class="eh-tooltip" title="3GPP TS 38.213: NR; Physical layer procedures for control">TS 38.213</span></span>, the UE is provided with a number N of <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> blocks that are associated with one <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> occasion and a number R of contention-based preambles mapped to each <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>. These two numbers are provided to the UE within <em>RACH-</em><em>ConfigCommon</em> as <em>ssb-</em><em>perRACH</em><em>-</em><em>OccasionAndCB</em><em>-</em><em>PreamblesPerSSB</em>. This is a two-fold information element. First, it takes one of eight different values for N as N = ⅛, ¼, ½, 1, 2, 4, 8 or 16. We will use the same configuration index for <abbr class="eh-abbreviation" title="Physical random access channel" lang="en"><span class="eh-tooltip" title="Physical random access channel">PRACH</span></abbr> (133) as in the earlier example for <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr>. This index defines six <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> occasions(RO). We will set N to ⅛. That means one <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> is associated with eight consecutive <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> occasions. Furthermore, if <em>msg1-FDM</em> is set to four, the first two ROs are associated with the <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> with index #0. <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> index #1 is associated with the following two ROs (RO#2, RO#3).</p>


<a id="page_1106_c1419"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:44%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-131__RACH_occasions_in_the_frequency-time_domain_e734614d5e.png" width="800" height="346" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-131 </span><abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> occasions in the frequency-time domain and their association with SSBs.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1106_c1420"></a><p>Depending on the value of N, there are different values for R (see <span class="eh-hint" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification" lang="en"><span class="eh-tooltip" title="3GPP TS 38.331: NR; Radio Resource Control (RRC); Protocol specification">TS 38.331</span></span>). The first four possible values of N allow 16 different values for R with a standard step size of four, starting at n4, n8, …, etc. If N = 2, R can assume one of eight different values with n4, n8, …, n32. If N is four, eight or sixteen, the values of R are either in the range from 1 to 16, 1 to 8 or 1 to 4, respectively. When N is set to ⅛, then the range of values for R is defined as n4, n8, n12, …, n56, n60, n64. For <span class="eh-text--nowrap">R = n8</span>, it means 8 preambles out of a total of 64 preambles are associated with one <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>, starting with index 0. In other words, preambles 0 to 7 are associated with <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> index #0, preambles 8 to 15 are associated with <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> index #1, and so forth.</p><p>Based on the threshold and measurement results, the UE may have a number of SSBs available to choose from. It selects randomly but with equal probability. Based on the selected <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr>, the UE knows the index and can determine the pool of preambles (e.g. 8) to choose from and what ROs are associated with this <abbr class="eh-abbreviation" title="Synchronization signal and PBCH block" lang="en"><span class="eh-tooltip" title="Synchronization signal and PBCH block">SSB</span></abbr> index. In the same manner, the UE selects one of the possible preambles and <abbr class="eh-abbreviation" title="Random access channel" lang="en"><span class="eh-tooltip" title="Random access channel">RACH</span></abbr> occasions randomly, but with equal probability and transmits the preamble on the uplink to the network.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1107" data-prevpid="1106" data-nextpid="1108" data-chapter="2.4.4 Random access response in standalone mode" id="page_1107">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.4.4 Random access response in standalone mode</h3>
						
<a id="page_1107_c1421"></a><p>The network will acknowledge reception of the random access preamble in the same manner as in the non-standalone mode case by transmitting Msg.2, the random access response, on the downlink to the end-user device. The entire procedure is identical to execution of the procedure in non-standalone mode. The information on the configuration of the control channel (<abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr>) is provided as part of <em>ServingCellConfigCommonSIB</em> in SIB1 and thus the UE knows which frequency and time resources to monitor for the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> carrying a <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 for which the <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> is scrambled with <abbr class="eh-abbreviation" title="Random access radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Random access radio network temporary identifier">RA-RNTI</span></abbr>. The <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> provides the frequency and time resource information on which <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr> carries the random access response. For more details, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1072" class="eh-link eh-link--page">2.1.4.2 Reception of the random access response, page 262</a>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1108" data-prevpid="1107" data-nextpid="1109" data-chapter="2.4.5 Sending Setup request in the uplink" id="page_1108">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.4.5 Sending Setup request in the uplink</h3>
						
<a id="page_1108_c1422"></a><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-039__MAC_PDU_with_BI__RAPID_and_RAPID.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-39 &lt;\/span&gt;MAC PDU with BI, RAPID and RAPID + random access response (RAR).&quot;}]">Fig. 2-39</a> in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1072_c1096" class="eh-link eh-link--page eh-link--ce">Content of the random access response, page 270</a> gives an overview of the structure of the random access response message and its content. The information provided is used in the same way as in <abbr class="eh-abbreviation" title="Non-standalone" lang="en"><span class="eh-tooltip" title="Non-standalone">NSA</span></abbr> mode. Further details such as usage of the received uplink scheduling grant to transmit Msg3 on <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> towards the network are explained in the following sections.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1109" data-prevpid="1108" data-nextpid="1110" data-chapter="2.4.5.1 RAPID and random access response for standalone mode" id="page_1109">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.4.5.1 RAPID and random access response for standalone mode</h4>
						
<a id="page_1109_c1423"></a><p>Assuming the network is able to accommodate the UE based on its previously sent preamble, it would send a random access preamble ID (<abbr class="eh-abbreviation" title="Random access preamble identifier" lang="en"><span class="eh-tooltip" title="Random access preamble identifier">RAPID</span></abbr>) and associated random access response (<abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>). The UE compares the received <abbr class="eh-abbreviation" title="Random access preamble identifier" lang="en"><span class="eh-tooltip" title="Random access preamble identifier">RAPID</span></abbr> with the sequence it had selected as the preamble. If both match, the reception of the random access response is considered successful. Following the <abbr class="eh-abbreviation" title="Random access preamble identifier" lang="en"><span class="eh-tooltip" title="Random access preamble identifier">RAPID</span></abbr> is the <abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr> which provides the UE with several pieces of information such as the timing advance, uplink scheduling grant and UE identity. Their meaning is explained in the following sections.</p>


<a id="page_1109_c1424"></a><p class="eh-headline-207 ">
				Timing advance
			</p>


<a id="page_1109_c1425"></a><p>The concept of timing advance is applied in non-standalone mode as it is in standalone mode. For relevant details on its meaning and purpose, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1072_c1096" class="eh-link eh-link--page eh-link--ce">Content of the random access response, page 270</a>.</p>


<a id="page_1109_c1426"></a><p class="eh-headline-207 ">
				Uplink scheduling grant
			</p>


<a id="page_1109_c1427"></a><p>A brief summary of the purpose of the uplink scheduling grant is available in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1072_c1096" class="eh-link eh-link--page eh-link--ce">Content of the random access response, page 270</a>. A more detailed explanation is given hereafter.</p><p>The 27 bits provided with the uplink scheduling grant in the random access response message (highlighted in orange in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-039__MAC_PDU_with_BI__RAPID_and_RAPID.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-39 &lt;\/span&gt;MAC PDU with BI, RAPID and RAPID + random access response (RAR).&quot;}]">Fig. 2-39, page 271</a>) are used as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1109_c1428\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table055\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;RAR grant field&lt;\/th&gt;&lt;th&gt;Number of bits&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Frequency hopping flag&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Msg3 PUSCH frequency resource allocation&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;Msg3 PUSCH time resource allocation&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;MCS&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;TPC command for Msg3 PUSCH&lt;\/td&gt;&lt;td&gt;3&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;CSI request&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-132 &lt;\/span&gt;Random access response grant content field size.&lt;\/p&gt;\n\n&quot;}">Fig. 2-132</a>.</p>


<a id="page_1109_c1428"></a><div class="table-scroll"><table id="table055" class="eh-table eh-table--alternate"><colgroup><col><col></colgroup><thead><tr><th>RAR grant field</th><th>Number of bits</th></tr></thead><tbody><tr><td>Frequency hopping flag</td><td>1</td></tr><tr><td>Msg3 PUSCH frequency resource allocation</td><td>14</td></tr><tr><td>Msg3 PUSCH time resource allocation</td><td>4</td></tr><tr><td>MCS</td><td>4</td></tr><tr><td>TPC command for Msg3 PUSCH</td><td>3</td></tr><tr><td>CSI request</td><td>1</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-132 </span>Random access response grant content field size.</p>


<a id="page_1109_c1429"></a><p class="eh-headline-207 ">
				Frequency hopping and frequency resource allocation
			</p>


<a id="page_1109_c1430"></a><p>Before the UE prepares for its first uplink transmission, it has to determine which transmission scheme to use to transmit Msg3 on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. The <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> parameter <em>Msg3-</em><em>transformPrecoder</em>, received with <em>RACH-</em><em>ConfigCommon</em>, determines whether the UE should use <abbr class="eh-abbreviation" title="Cyclic prefix OFDM" lang="en"><span class="eh-tooltip" title="Cyclic prefix OFDM">CP-OFDM</span></abbr> as the transmission scheme or <span class="eh-text--nowrap">SC-FDMA</span> (= <em>transform precoding</em> enabled; for details, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1038_c881" class="eh-link eh-link--page eh-link--ce">DFT-s-OFDMA signal generation, page 166</a>). This has certain implications for the interpretation of the bits sent with the uplink scheduling grant in the random access response message as described in the following paragraphs.</p><p>The first bit of the uplink scheduling grant informs the UE whether frequency hopping for Msg3 <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission is enabled or not. If the bit is set to zero, no hopping is applied and if it is set to one, frequency hopping is activated.</p><p>The next 14 bits provide the frequency resource allocation to the UE. How these bits are interpreted depends on whether frequency hopping is enabled or not. If it is enabled, the first one or two bits, N<sub>UL,hop</sub>, are used to determine the frequency offset between the first and second hop. Whether it is one or two bits depends on the size of the bandwidth part (<abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr>) that Msg3 is transmitted on. If the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> is less than 50 <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr>, then it is only one bit. If the active bandwidth part is more than 50 <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr>, then it is two bits according to <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1109_c1431\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table\&quot; id=\&quot;table056\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Number of PRB in active UL BWP&lt;\/th&gt;&lt;th&gt;Value of &lt;strong&gt;&lt;em&gt;N&lt;\/em&gt;&lt;\/strong&gt;&lt;sub class=\&quot;eh-text--strong eh-text__letter\&quot;&gt;UL, hop&lt;\/sub&gt; hopping bits&lt;\/th&gt;&lt;th&gt;Frequency offset for 2&lt;sup class=\&quot;eh-text__letter\&quot;&gt;nd&lt;\/sup&gt; hop&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td rowspan=\&quot;2\&quot;&gt;&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;BW&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;P&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;size&lt;\/sup&gt; &amp;lt; 50&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a3&lt;\/span&gt;&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;BW&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;P&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;size &lt;\/sup&gt;\/2&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a6&lt;\/span&gt;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a3&lt;\/span&gt;&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;BW&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;P&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;size &lt;\/sup&gt;\/4&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a6&lt;\/span&gt;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td rowspan=\&quot;4\&quot;&gt;&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;BW&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;P&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;size&lt;\/sup&gt; \u2265 50&lt;\/td&gt;&lt;td&gt;00&lt;\/td&gt;&lt;td&gt;&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a3&lt;\/span&gt;&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;BW&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;P&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;size &lt;\/sup&gt;\/2&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a6&lt;\/span&gt;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;01&lt;\/td&gt;&lt;td&gt;&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a3&lt;\/span&gt;&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;BW&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;P&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;size &lt;\/sup&gt;\/4&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a6&lt;\/span&gt;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;\u2013&lt;span class=\&quot;eh-text--math\&quot;&gt; \u23a3&lt;\/span&gt;&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;BW&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;P&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;size &lt;\/sup&gt;\/4&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a6&lt;\/span&gt;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;11&lt;\/td&gt;&lt;td&gt;Reserved&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-133 &lt;\/span&gt;Frequency offset for second hop for Msg3 PUSCH transmission with frequency hopping.&lt;\/p&gt;\n\n&quot;}">Fig. 2-133</a>. The overall bit settings determine whether the gap between the two hops is half the bandwidth part size or a quarter of the bandwidth part size.</p>


<a id="page_1109_c1431"></a><div class="table-scroll"><table class="eh-table" id="table056"><colgroup><col><col><col></colgroup><thead><tr><th>Number of PRB in active UL BWP</th><th>Value of <strong><em>N</em></strong><sub class="eh-text--strong eh-text__letter">UL, hop</sub> hopping bits</th><th>Frequency offset for 2<sup class="eh-text__letter">nd</sup> hop</th></tr></thead><tbody><tr><td rowspan="2"><em>N</em><sub class="eh-text--em eh-text__letter">BW</sub><sub class="eh-text--em eh-text__letter">P</sub><sup class="eh-text--em eh-text__letter">size</sup> &lt; 50</td><td>0</td><td><span class="eh-text--math">⎣</span><em>N</em><sub class="eh-text--em eh-text__letter">BW</sub><sub class="eh-text--em eh-text__letter">P</sub><sup class="eh-text--em eh-text__letter">size </sup>/2<span class="eh-text--math">⎦</span></td></tr><tr><td>1</td><td><span class="eh-text--math">⎣</span><em>N</em><sub class="eh-text--em eh-text__letter">BW</sub><sub class="eh-text--em eh-text__letter">P</sub><sup class="eh-text--em eh-text__letter">size </sup>/4<span class="eh-text--math">⎦</span></td></tr><tr><td rowspan="4"><em>N</em><sub class="eh-text--em eh-text__letter">BW</sub><sub class="eh-text--em eh-text__letter">P</sub><sup class="eh-text--em eh-text__letter">size</sup> ≥ 50</td><td>00</td><td><span class="eh-text--math">⎣</span><em>N</em><sub class="eh-text--em eh-text__letter">BW</sub><sub class="eh-text--em eh-text__letter">P</sub><sup class="eh-text--em eh-text__letter">size </sup>/2<span class="eh-text--math">⎦</span></td></tr><tr><td>01</td><td><span class="eh-text--math">⎣</span><em>N</em><sub class="eh-text--em eh-text__letter">BW</sub><sub class="eh-text--em eh-text__letter">P</sub><sup class="eh-text--em eh-text__letter">size </sup>/4<span class="eh-text--math">⎦</span></td></tr><tr><td>10</td><td>–<span class="eh-text--math"> ⎣</span><em>N</em><sub class="eh-text--em eh-text__letter">BW</sub><sub class="eh-text--em eh-text__letter">P</sub><sup class="eh-text--em eh-text__letter">size </sup>/4<span class="eh-text--math">⎦</span></td></tr><tr><td>11</td><td>Reserved</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-133 </span>Frequency offset for second hop for Msg3 <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission with frequency hopping.</p>


<a id="page_1109_c1432"></a><p>The resource block assignment for Msg3 <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission is based on resource allocation type 1. Accordingly, resource blocks are assigned by means of a resource indication value (<abbr class="eh-abbreviation" title="Resource indication value" lang="en"><span class="eh-tooltip" title="Resource indication value">RIV</span></abbr>). The <abbr class="eh-abbreviation" title="Resource indication value" lang="en"><span class="eh-tooltip" title="Resource indication value">RIV</span></abbr> value is based on a starting resource block (<em>RB</em><sub class="eh-text--em eh-text__letter">Start</sub>) and number of allocated resource blocks (<em>L</em><sub class="eh-text--em eh-text__letter">RB</sub>) impacted by the size of the bandwidth part where Msg3 is transmitted. How is the <abbr class="eh-abbreviation" title="Resource indication value" lang="en"><span class="eh-tooltip" title="Resource indication value">RIV</span></abbr> calculated?</p><p>Again, the frequency allocation information is given in the uplink scheduling grant with 14 bits, where 1 or 2 are used for the hopping information. How the remaining bits are processed depends on the size of the actual bandwidth part. If the bandwidth part size is less than 180 <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr>, then the bits within the frequency allocation field (remember: 14 bits minus 1 or 2 bits) are truncated according to ⎡log<sub class="eh-text__number">2</sub>(<em>N</em><sub class="eh-text--em eh-text__letter">BW</sub><sub class="eh-text--em eh-text__letter">P</sub><sup class="eh-text--em eh-text__letter">size   </sup>∙ (<em>N</em><sub class="eh-text--em eh-text__letter">BW</sub><sub class="eh-text--em eh-text__letter">P</sub><sup class="eh-text--em eh-text__letter">size   </sup> + 1)/2)⎤. We will assume the bandwidth part where Msg3 <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> should be transmitted has a size of 60 <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr>. That means the bandwidth part occupies more than 50 RBs and thus two bits are used for frequency hopping information, but it is less than 180 <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr>, in which case the entire field is truncated to its 11 least significant bits. These 11 bits are then processed like <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 0_0 (see <span class="eh-hint" title="3GPP TS 38.212: NR; Multiplexing and channel coding" lang="en"><span class="eh-tooltip" title="3GPP TS 38.212: NR; Multiplexing and channel coding">TS 38.212</span></span>, section 7.3.1.1.1 and <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>). If the bandwidth part is larger than 180 <abbr class="eh-abbreviation" title="Radio bearer or resource block " lang="en"><span class="eh-tooltip" title="Radio bearer or resource block ">RB</span></abbr>, the number of bits for frequency allocation is determined based on inserting ⎡log<sub class="eh-text__number">2</sub>(<em>N</em><sub class="eh-text--em eh-text__letter">BW</sub><sub class="eh-text--em eh-text__letter">P</sub><sup class="eh-text--em eh-text__letter">size   </sup> ∙ (<em>N</em><sub class="eh-text--em eh-text__letter">BW</sub><sub class="eh-text--em eh-text__letter">P</sub><sup class="eh-text--em eh-text__letter">size   </sup> + 1)/2)⎤ −14 bits set to zero, right after the hopping bit(s) <em>N</em><sub class="eh-text--em eh-text__letter">UL</sub><sub class="eh-text--em eh-text__letter">,</sub><sub class="eh-text--em eh-text__letter">ho</sub><sub class="eh-text--em eh-text__letter">p</sub>.</p><p>In both cases, the number of bits translates into <abbr class="eh-abbreviation" title="Resource indication value" lang="en"><span class="eh-tooltip" title="Resource indication value">RIV</span></abbr> (decimal), which ultimately provides a number of continuously allocated resource blocks (<em>L</em><sub>RB</sub>) and a start resource block (<em>RB</em><sub class="eh-text--em eh-text__letter">start</sub>) according to <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>, section 6.1.2.2.2.</p>


<a id="page_1109_c1433"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:10%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-134__Formeln_d091e78b55.png" width="800" height="77" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-134 </span>Determination of the starting resource block for frequency hopping.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1109_c1434"></a><p><a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-134__Formeln.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-134 &lt;\/span&gt;Determination of the starting resource block for frequency hopping.&quot;}]">Fig. 2-134</a> shows how the UE uses <em>RB</em><sub class="eh-text--em eh-text__letter">Start</sub> as the first resource block for the first hop (<em>i</em> = 0) and how it calculates the starting resource block for the second hop (<em>i</em> = 1) based on the offset parameter and the bandwidth part size. The offset parameter (<em>RB</em><sub class="eh-text--em eh-text__letter">offset</sub>) is shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1109_c1431\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table\&quot; id=\&quot;table056\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Number of PRB in active UL BWP&lt;\/th&gt;&lt;th&gt;Value of &lt;strong&gt;&lt;em&gt;N&lt;\/em&gt;&lt;\/strong&gt;&lt;sub class=\&quot;eh-text--strong eh-text__letter\&quot;&gt;UL, hop&lt;\/sub&gt; hopping bits&lt;\/th&gt;&lt;th&gt;Frequency offset for 2&lt;sup class=\&quot;eh-text__letter\&quot;&gt;nd&lt;\/sup&gt; hop&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td rowspan=\&quot;2\&quot;&gt;&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;BW&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;P&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;size&lt;\/sup&gt; &amp;lt; 50&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a3&lt;\/span&gt;&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;BW&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;P&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;size &lt;\/sup&gt;\/2&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a6&lt;\/span&gt;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a3&lt;\/span&gt;&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;BW&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;P&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;size &lt;\/sup&gt;\/4&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a6&lt;\/span&gt;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td rowspan=\&quot;4\&quot;&gt;&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;BW&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;P&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;size&lt;\/sup&gt; \u2265 50&lt;\/td&gt;&lt;td&gt;00&lt;\/td&gt;&lt;td&gt;&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a3&lt;\/span&gt;&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;BW&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;P&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;size &lt;\/sup&gt;\/2&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a6&lt;\/span&gt;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;01&lt;\/td&gt;&lt;td&gt;&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a3&lt;\/span&gt;&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;BW&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;P&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;size &lt;\/sup&gt;\/4&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a6&lt;\/span&gt;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;\u2013&lt;span class=\&quot;eh-text--math\&quot;&gt; \u23a3&lt;\/span&gt;&lt;em&gt;N&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;BW&lt;\/sub&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;P&lt;\/sub&gt;&lt;sup class=\&quot;eh-text--em eh-text__letter\&quot;&gt;size &lt;\/sup&gt;\/4&lt;span class=\&quot;eh-text--math\&quot;&gt;\u23a6&lt;\/span&gt;&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;11&lt;\/td&gt;&lt;td&gt;Reserved&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-133 &lt;\/span&gt;Frequency offset for second hop for Msg3 PUSCH transmission with frequency hopping.&lt;\/p&gt;\n\n&quot;}">Fig. 2-133</a>.</p>


<a id="page_1109_c1435"></a><p class="eh-headline-207 ">
				Allocation of time domain resources for Msg3 <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission
			</p>


<a id="page_1109_c1436"></a><p>The next information, coded within four bits, is the time resource allocation. Identical to the downlink direction, these bits provide a value <em>m</em> that points to a row index <em>m+1</em> in an allocated table for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. For <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission scheduled by the random access response, there are two options depending on the information whether the higher layer setting <em>pusch-</em><em>TimeDomainAllocationList</em> is included in the common configuration for the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> (<em>pusch-</em><em>ConfigCommon</em>). This information element provides the setting for parameter K2 (0 to 32), the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> mapping type (type A, type B), start symbol for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission and how many symbols are allocated for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission (= length). As on the downlink, the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> mapping type (A, B) defines the starting point for the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission either as the start of the slot (type A) or the start of the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission within the slot (type B). If the information element is not provided, the following default table is applied (see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1109_c1437\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table\&quot; id=\&quot;table057\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Row index&lt;\/th&gt;&lt;th&gt;PUSCH mapping type&lt;\/th&gt;&lt;th&gt;K2&lt;\/th&gt;&lt;th&gt;S&lt;\/th&gt;&lt;th&gt;L&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;A&lt;\/td&gt;&lt;td rowspan=\&quot;7\&quot;&gt;&lt;em&gt;j&lt;\/em&gt;&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;0&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;12&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;10&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td rowspan=\&quot;4\&quot;&gt;B&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td rowspan=\&quot;6\&quot;&gt;A&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;&lt;em&gt;j&lt;\/em&gt; + 1&lt;\/td&gt;&lt;td rowspan=\&quot;6\&quot;&gt;0&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;12&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;11&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;&lt;em&gt;j&lt;\/em&gt; + 2&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;12&lt;\/td&gt;&lt;td&gt;12&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;13&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;B&lt;\/td&gt;&lt;td&gt;&lt;em&gt;j&lt;\/em&gt;&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;A&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;&lt;em&gt;j&lt;\/em&gt; + 3&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;0&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;16&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-135 &lt;\/span&gt;Default PUSCH time domain resource allocation A for normal CP.&lt;\/p&gt;\n\n&quot;}">Fig. 2-135</a>).</p>


<a id="page_1109_c1437"></a><div class="table-scroll"><table class="eh-table" id="table057"><colgroup><col><col><col><col><col></colgroup><thead><tr><th>Row index</th><th>PUSCH mapping type</th><th>K2</th><th>S</th><th>L</th></tr></thead><tbody><tr><td>1</td><td rowspan="3">A</td><td rowspan="7"><em>j</em></td><td rowspan="3">0</td><td>14</td></tr><tr><td>2</td><td>12</td></tr><tr><td>3</td><td rowspan="3">10</td></tr><tr><td>4</td><td rowspan="4">B</td><td>2</td></tr><tr><td>5</td><td rowspan="3">4</td></tr><tr><td>6</td><td>8</td></tr><tr><td>7</td><td>6</td></tr><tr><td>8</td><td rowspan="6">A</td><td rowspan="3"><em>j</em> + 1</td><td rowspan="6">0</td><td>14</td></tr><tr><td>9</td><td>12</td></tr><tr><td>10</td><td>10</td></tr><tr><td>11</td><td rowspan="3"><em>j</em> + 2</td><td>14</td></tr><tr><td>12</td><td>12</td></tr><tr><td>13</td><td>10</td></tr><tr><td>14</td><td>B</td><td><em>j</em></td><td>8</td><td>6</td></tr><tr><td>15</td><td rowspan="2">A</td><td rowspan="2"><em>j</em> + 3</td><td rowspan="2">0</td><td>14</td></tr><tr><td>16</td><td>10</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-135 </span>Default <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> time domain resource allocation A for normal <abbr class="eh-abbreviation" title="Cyclic prefix – or – control plane" lang="en"><span class="eh-tooltip" title="Cyclic prefix – or – control plane">CP</span></abbr>.</p>


<a id="page_1109_c1438"></a><p>The parameter j is subcarrier spacing dependent (<em>µ</em><sub>PUSCH</sub>) and its possible values are shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1109_c1439\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table058\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&amp;nbsp;\n&lt;strong&gt;&lt;em&gt;\u00b5&lt;\/em&gt;&lt;\/strong&gt;&lt;sub&gt;PUSCH&lt;\/sub&gt;\n&amp;nbsp;&lt;\/th&gt;&lt;th&gt;&lt;strong&gt;&lt;em&gt;j&lt;\/em&gt;&lt;\/strong&gt;&lt;\/th&gt;&lt;th&gt;\u0394&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;3&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-136 &lt;\/span&gt;Definition of parameters &lt;em&gt;j&lt;\/em&gt; and \u0394 for PUSCH transmission depending on the subcarrier spacing.&lt;\/p&gt;\n\n&quot;}">Fig. 2-136</a>. The table also lists the subcarrier spacing specific slot delay Δ that needs to be applied in addition to K2 for Msg3 <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission.</p>


<a id="page_1109_c1439"></a><div class="table-scroll"><table id="table058" class="eh-table eh-table--alternate"><colgroup><col><col><col></colgroup><thead><tr><th>&nbsp;
<strong><em>µ</em></strong><sub>PUSCH</sub>
&nbsp;</th><th><strong><em>j</em></strong></th><th>Δ</th></tr></thead><tbody><tr><td>0</td><td>1</td><td>2</td></tr><tr><td>1</td><td>1</td><td>3</td></tr><tr><td>2</td><td>2</td><td>4</td></tr><tr><td>3</td><td>3</td><td>6</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-136 </span>Definition of parameters <em>j</em> and Δ for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission depending on the subcarrier spacing.</p>


<a id="page_1109_c1440"></a><p>We will now consider an example assuming the subcarrier spacing of the bandwidth part the Msg3 <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission is scheduled for is equal to 30 kHz (<em>µ = </em>1). In this case, <em>j = </em>1 and Δ<em> = </em>3. We will further assume that the four bits in the uplink scheduling grant in the random access response point to row index 7 in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1109_c1437\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table class=\&quot;eh-table\&quot; id=\&quot;table057\&quot;&gt;&lt;colgroup&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;col \/&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Row index&lt;\/th&gt;&lt;th&gt;PUSCH mapping type&lt;\/th&gt;&lt;th&gt;K2&lt;\/th&gt;&lt;th&gt;S&lt;\/th&gt;&lt;th&gt;L&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;A&lt;\/td&gt;&lt;td rowspan=\&quot;7\&quot;&gt;&lt;em&gt;j&lt;\/em&gt;&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;0&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;12&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;10&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td rowspan=\&quot;4\&quot;&gt;B&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td rowspan=\&quot;6\&quot;&gt;A&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;&lt;em&gt;j&lt;\/em&gt; + 1&lt;\/td&gt;&lt;td rowspan=\&quot;6\&quot;&gt;0&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;9&lt;\/td&gt;&lt;td&gt;12&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;10&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;11&lt;\/td&gt;&lt;td rowspan=\&quot;3\&quot;&gt;&lt;em&gt;j&lt;\/em&gt; + 2&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;12&lt;\/td&gt;&lt;td&gt;12&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;13&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;14&lt;\/td&gt;&lt;td&gt;B&lt;\/td&gt;&lt;td&gt;&lt;em&gt;j&lt;\/em&gt;&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;15&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;A&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;&lt;em&gt;j&lt;\/em&gt; + 3&lt;\/td&gt;&lt;td rowspan=\&quot;2\&quot;&gt;0&lt;\/td&gt;&lt;td&gt;14&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;16&lt;\/td&gt;&lt;td&gt;10&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-135 &lt;\/span&gt;Default PUSCH time domain resource allocation A for normal CP.&lt;\/p&gt;\n\n&quot;}">Fig. 2-135</a>, which sets the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> mapping type to type B. The slot offset factor K2 is equal to j. The start symbol S for the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission is symbol #4 and the length L is set to six symbols. The slot offset for a Msg3 <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission is also based on the subcarrier spacings used by the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> where the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> is transmitted. Further the numerology used by the <abbr class="eh-abbreviation" title="Bandwidth part" lang="en"><span class="eh-tooltip" title="Bandwidth part">BWP</span></abbr> that the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> and <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> is transmitted, that carried the <abbr class="eh-abbreviation" title="Random access response (Msg2)" lang="en"><span class="eh-tooltip" title="Random access response (Msg2)">RAR</span></abbr>. In this example, both BWPs used 30 kHz (<em>µ = 1</em>) and thus the slot offset from receiving the random access response to the slot that can be used to transmit the Msg3 <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> is four slots as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-137__Timing_settings.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-137 &lt;\/span&gt;Timing settings for Msg3 PUSCH transmission.&quot;}]">Fig. 2-137</a>.</p>


<a id="page_1109_c1441"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:36%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-137__Timing_settings_e9b78efc55.png" width="800" height="285" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-137 </span>Timing settings for Msg3 <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1109_c1442"></a><p>The graphic is based on the assumption that the higher layer parameter <em>dmrs-Additional-Position</em> is not signaled by the network, in which case the UE assumes this to be position 2 (<em>pos.2</em>). That results in an additional symbol (<em>l</em>) being used for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr>. Since row index 7 for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> time allocation dictates <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> mapping type B, the first symbol (l<sub class="eh-text__number">0</sub>) within the slot carries <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> according to <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>, section 6.4.1.1.3. The second symbol for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> is relative to the start of the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission and occupies the 6th symbol within the slot (see table 6.4.1.1.3-3 in <span class="eh-hint" title="3GPP TS 38.211: NR; Physical channels and modulation" lang="en"><span class="eh-tooltip" title="3GPP TS 38.211: NR; Physical channels and modulation">TS 38.211</span></span>). No hopping is enabled and only single symbol <abbr class="eh-abbreviation" title="Demodulation reference signal" lang="en"><span class="eh-tooltip" title="Demodulation reference signal">DMRS</span></abbr> are transmitted.</p>


<a id="page_1109_c1443"></a><p class="eh-headline-207 ">
				Modulation and coding scheme
			</p>


<a id="page_1109_c1444"></a><p>The modulation and coding scheme that must be used by the UE to transmit Msg3 is coded in four bits. This means that only the first 16 indexes of an <abbr class="eh-abbreviation" title="Modulation and coding scheme" lang="en"><span class="eh-tooltip" title="Modulation and coding scheme">MCS</span></abbr> table for <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> are applicable and the UE does not use 64QAM or 256QAM as a modulation scheme for Msg3 <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission. Depending on whether transform precoding is enabled or not, the UE has to apply a different table to decide on the modulation and coding scheme. If transform precoding is enabled, the UE uses table 6.1.4.1-1 in <span class="eh-hint" title="3GPP TS 38.214: NR; Physical layer procedures for data" lang="en"><span class="eh-tooltip" title="3GPP TS 38.214: NR; Physical layer procedures for data">TS 38.214</span></span>, and otherwise table 5.1.3.1-3.</p>


<a id="page_1109_c1445"></a><p class="eh-headline-207 ">
				Msg3 transmit power
			</p>


<a id="page_1109_c1446"></a><p>The uplink scheduling grant reserves three bits for transmit power control (<abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr>) which informs the end-user device to adjust its transmit power based on the power used to transmit the random access preamble in a range from –6 dB to +8 dB. The eight possible values to increase or decrease the transmit power are shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1109_c1447\&quot;&gt;&lt;\/a&gt;&lt;div class=\&quot;table-scroll\&quot;&gt;&lt;table id=\&quot;table059\&quot; class=\&quot;eh-table eh-table--alternate\&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;\/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;TPC command&lt;\/th&gt;&lt;th&gt;Value in dB&lt;\/th&gt;&lt;\/tr&gt;&lt;\/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;\/td&gt;&lt;td&gt;\u22126&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;\/td&gt;&lt;td&gt;\u22124&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;\/td&gt;&lt;td&gt;\u22122&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;\/td&gt;&lt;td&gt;0&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;\/td&gt;&lt;td&gt;2&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;5&lt;\/td&gt;&lt;td&gt;4&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;6&lt;\/td&gt;&lt;td&gt;6&lt;\/td&gt;&lt;\/tr&gt;&lt;tr&gt;&lt;td&gt;7&lt;\/td&gt;&lt;td&gt;8&lt;\/td&gt;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;&lt;\/div&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-138 &lt;\/span&gt;TPC command for Msg3 PUSCH transmission.&lt;\/p&gt;\n\n&quot;}">Fig. 2-138</a>.</p>


<a id="page_1109_c1447"></a><div class="table-scroll"><table id="table059" class="eh-table eh-table--alternate"><colgroup><col><col></colgroup><thead><tr><th>TPC command</th><th>Value in dB</th></tr></thead><tbody><tr><td>0</td><td>−6</td></tr><tr><td>1</td><td>−4</td></tr><tr><td>2</td><td>−2</td></tr><tr><td>3</td><td>0</td></tr><tr><td>4</td><td>2</td></tr><tr><td>5</td><td>4</td></tr><tr><td>6</td><td>6</td></tr><tr><td>7</td><td>8</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-138 </span><abbr class="eh-abbreviation" title="Transmit power control" lang="en"><span class="eh-tooltip" title="Transmit power control">TPC</span></abbr> command for Msg3 <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission.</p>


<a id="page_1109_c1448"></a><p class="eh-headline-207 ">
				<abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> request
			</p>


<a id="page_1109_c1449"></a><p>The last bit in the uplink grant is reserved for the channel state information (<abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr>) request. It determines if the UE should send an aperiodic <abbr class="eh-abbreviation" title="Channel-state information" lang="en"><span class="eh-tooltip" title="Channel-state information">CSI</span></abbr> report. This is only applicable for non-contention based random access. For contention-based random access, like in this example, this bit field is treated as reserved.</p>


<a id="page_1109_c1450"></a><p class="eh-headline-207 ">
				Initial device identity
			</p>


<a id="page_1109_c1451"></a><p>Before the end-user device starts transmitting on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>, it needs one more piece of information so the network can identify its transmission and acknowledge it correctly in the corresponding downlink transmission for contention resolution. This step matters if the UE was already connected to the network (<span class="eh-text--nowrap">RRC_CONNECTED</span>, <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr>_INACTIVE) and an identity was already assigned by the network. A UE performing the initial random access procedure has not yet had an <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection. Therefore, the network assigns a temporary identity to the UE known as the temporary cellular radio network identifier (<abbr class="eh-abbreviation" title="Temporary cellular radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Temporary cellular radio network temporary identifier">TC-RNTI</span></abbr>). This identity is 16 bits long and can be in the range 0001 to FFEF (hex). It is used by the UE to initialize the scrambling sequence generator (<em>c</em><sub>init</sub>) to scramble the information transmitted on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--table" data-reveal-table="" data-html="{&quot;content&quot;:&quot;\n&lt;a id=\&quot;page_1109_c1480\&quot;&gt;&lt;\/a&gt;&lt;p&gt;&lt;em&gt;c&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;init&lt;\/sub&gt; = &lt;em&gt;n&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;RNTI&lt;\/sub&gt; \u2219 2&lt;sup class=\&quot;eh-text__number\&quot;&gt;15&lt;\/sup&gt; + &lt;em&gt;n&lt;\/em&gt;&lt;sub class=\&quot;eh-text--em eh-text__letter\&quot;&gt;ID&lt;\/sub&gt;&lt;\/p&gt;&lt;p class=\&quot;eh-table-caption\&quot;&gt;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-139 &lt;\/span&gt;Initialization of the scrambling sequence generator.&lt;\/p&gt;\n\n&quot;}">Fig. 2-139</a>).</p>


<a id="page_1109_c1480"></a><p><em>c</em><sub class="eh-text--em eh-text__letter">init</sub> = <em>n</em><sub class="eh-text--em eh-text__letter">RNTI</sub> ∙ 2<sup class="eh-text__number">15</sup> + <em>n</em><sub class="eh-text--em eh-text__letter">ID</sub></p><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-139 </span>Initialization of the scrambling sequence generator.</p>


<a id="page_1109_c1481"></a><p>n<sub>RNTI</sub> corresponds to the <abbr class="eh-abbreviation" title="Temporary cellular radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Temporary cellular radio network temporary identifier">TC-RNTI</span></abbr>, whereas <em>n</em><sub>ID</sub> is either configured by the higher layer parameter <em>dataScramblingIdentityPUSCH</em> and in the range of <span class="eh-text--nowrap">{0, 1, …, 1023}</span>, or corresponds to the physical cell identity (<abbr class="eh-abbreviation" title="Physical cell identity" lang="en"><span class="eh-tooltip" title="Physical cell identity">PCI</span></abbr>, <em>N</em><sup class="eh-text--em eh-text__letter">c</sup><sup class="eh-text--em eh-text__letter">el</sup><sup class="eh-text--em eh-text__letter">l</sup><sub class="eh-text--em eh-text__letter">I</sub><sub class="eh-text--em eh-text__letter">D</sub>).</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1110" data-prevpid="1109" data-nextpid="1111" data-chapter="2.4.5.2 Actual content of Msg3" id="page_1110">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.4.5.2 Actual content of Msg3</h4>
						
<a id="page_1110_c1452"></a><p>With all the above information, the end-user device is now able to use the scheduled uplink resources to transmit its Msg3 on the <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr>. With Msg3, the UE sends <em>RRCSetupRequest</em> to the network and initiates the initial attach procedure towards the 5G core network. For details on <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection establishment and the initial attach procedure to the 5G core network, including activation of security, see <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1112" class="eh-link eh-link--page">2.4.7 RRC connection establishment, page 424</a>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1111" data-prevpid="1110" data-nextpid="1112" data-chapter="2.4.6 Contention resolution" id="page_1111">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.4.6 Contention resolution</h3>
						
<a id="page_1111_c1453"></a><p>Upon transmission of Msg3, the <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> layer at the UE starts the ­<em>ra-</em><em>ContentionResolutionTimer</em>. The value of the contention resolution timer is provided with <em>RACH-</em><em>ConfigCommon</em>. After starting the timer, the UE begins monitoring the <abbr class="eh-abbreviation" title="Physical downlink control channel" lang="en"><span class="eh-tooltip" title="Physical downlink control channel">PDCCH</span></abbr> for <abbr class="eh-abbreviation" title="Downlink control information" lang="en"><span class="eh-tooltip" title="Downlink control information">DCI</span></abbr> format 1_0 with the <abbr class="eh-abbreviation" title="Cyclic redundancy check" lang="en"><span class="eh-tooltip" title="Cyclic redundancy check">CRC</span></abbr> scrambled with the corresponding <abbr class="eh-abbreviation" title="Temporary cellular radio network temporary identifier" lang="en"><span class="eh-tooltip" title="Temporary cellular radio network temporary identifier">TC-RNTI</span></abbr>. Type1-PDCCH common search space is used for transmission of this downlink scheduling grant, and thus the same rules apply as for monitoring and reception of the random access response. Upon reception of the <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr>, the timer is stopped. If the decoded <abbr class="eh-abbreviation" title="Medium access control" lang="en"><span class="eh-tooltip" title="Medium access control">MAC</span></abbr> <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> contains a contention resolution identity (48 bits) that matches the <abbr class="eh-abbreviation" title="Common control channel" lang="en"><span class="eh-tooltip" title="Common control channel">CCCH</span></abbr> <abbr class="eh-abbreviation" title="Service data unit" lang="en"><span class="eh-tooltip" title="Service data unit">SDU</span></abbr> transmitted in Msg3, the contention resolution is considered successful. Furthermore, the <abbr class="eh-abbreviation" title="Cell RNTI" lang="en"><span class="eh-tooltip" title="Cell RNTI">C-RNTI</span></abbr> is set to the previously temporary identity and the random access procedure is considered to be successfully executed.</p><p>In response to <abbr class="eh-abbreviation" title="Physical downlink shared channel" lang="en"><span class="eh-tooltip" title="Physical downlink shared channel">PDSCH</span></abbr> reception, the UE transmits an HARQ-ACK on the <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr>. The <abbr class="eh-abbreviation" title="Physical uplink control channel" lang="en"><span class="eh-tooltip" title="Physical uplink control channel">PUCCH</span></abbr> transmission is on the same initial bandwidth part as the Msg3 <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1112" data-prevpid="1111" data-nextpid="1113" data-chapter="2.4.7 RRC connection establishment" id="page_1112">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.4.7 RRC connection establishment</h3>
						
<a id="page_1112_c1454"></a><p><abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection establishment starts with the UE sending an <em>RRCSetupRequest</em><em></em>as a Msg3 <abbr class="eh-abbreviation" title="Physical uplink shared channel" lang="en"><span class="eh-tooltip" title="Physical uplink shared channel">PUSCH</span></abbr> transmission to the network. The corresponding response from the network is transmission of the <em>RRCSetup</em> message or <em>RRCReject</em><em></em>message. The connection setup message is acknowledged by the UE by sending an <em>RRCSetupComplete</em> message back to the network (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-140__RRC_connection_establishment.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-140 &lt;\/span&gt;RRC connection establishment in 5G NR.&quot;}]">Fig. 2-140</a>).</p>


<a id="page_1112_c1455"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:44%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-140__RRC_connection_establishment_33556828b1.png" width="800" height="350" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-140 </span><abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection establishment in 5G NR.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1112_c1456"></a><p>With the setup request, the UE will send a two-part identity (<em>ng-5G-S-TMSI-Part1, </em><em>randomValue</em><em>)</em> and its establishment cause, which in this case is mobile originated signaling (<em>mo-</em><em>Signalling</em>). The two identities each have 39 bits.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1113" data-prevpid="1112" data-nextpid="1114" data-chapter="2.4.8 Security mode setup" id="page_1113">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.4.8 Security mode setup</h3>
						
<a id="page_1113_c1457"></a><p>The overall security architecture is explained in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1022" class="eh-link eh-link--page">1.1.7 Security architecture, page 44</a>. Initialization of security during initial access is depicted in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-141__Security_procedure_during_initial_access.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-141 &lt;\/span&gt;Security procedure during initial access.&quot;}]">Fig. 2-141</a>. The security setups consist of four main steps: generation of security key, mutual authentication of UE and network, initialization of <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> security, initialization of <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> security.</p>


<a id="page_1113_c1458"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:115%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-141__Security_procedure_during_initial_access_a9e3b1ff2f.png" width="800" height="920" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-141 </span>Security procedure during initial access.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1113_c1459"></a><p class="eh-headline-207 ">
				Generation of security key
			</p>


<a id="page_1113_c1460"></a><p>Security key generation is the procedure for creating keying material that can be used between the UE and serving network (<abbr class="eh-abbreviation" title="Sequence number Secondary node" lang="en"><span class="eh-tooltip" title="Sequence number Secondary node">SN</span></abbr>) in subsequent security procedures. This procedure is based on a shared key (K) which is stored permanently both on the UE <abbr class="eh-abbreviation" title="UMTS subscriber identity module" lang="en"><span class="eh-tooltip" title="UMTS subscriber identity module">USIM</span></abbr> module and the <abbr class="eh-abbreviation" title="Authentication credential repository and processing function" lang="en"><span class="eh-tooltip" title="Authentication credential repository and processing function">ARPF</span></abbr>/<abbr class="eh-abbreviation" title="Unified data management " lang="en"><span class="eh-tooltip" title="Unified data management ">UDM</span></abbr> in <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr>.</p><p>After <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection establishment is completed, the UE can send the first UL message (UL data transfer) which contains the <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> registration request. In this message, the UE identifies itself with <abbr class="eh-abbreviation" title="Subscription permanent identifier" lang="en"><span class="eh-tooltip" title="Subscription permanent identifier">SUPI</span></abbr> or <abbr class="eh-abbreviation" title="5G globally unique temporary identity" lang="en"><span class="eh-tooltip" title="5G globally unique temporary identity">5G-GUTI</span></abbr>. A subscription permanent identifier (<abbr class="eh-abbreviation" title="Subscription permanent identifier" lang="en"><span class="eh-tooltip" title="Subscription permanent identifier">SUPI</span></abbr>) must be allocated to each subscriber in the 5G system and provisioned in the <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> component <abbr class="eh-abbreviation" title="Unified data management " lang="en"><span class="eh-tooltip" title="Unified data management ">UDM</span></abbr> and UE <abbr class="eh-abbreviation" title="UMTS subscriber identity module" lang="en"><span class="eh-tooltip" title="UMTS subscriber identity module">USIM</span></abbr>. The <abbr class="eh-abbreviation" title="Subscription permanent identifier" lang="en"><span class="eh-tooltip" title="Subscription permanent identifier">SUPI</span></abbr> can have a backward-compatible format with LTE/<abbr class="eh-abbreviation" title="Evolved packet core" lang="en"><span class="eh-tooltip" title="Evolved packet core">EPC</span></abbr> <abbr class="eh-abbreviation" title="International mobile subscriber identity" lang="en"><span class="eh-tooltip" title="International mobile subscriber identity">IMSI</span></abbr> or alternatively a network access identifier (<abbr class="eh-abbreviation" title="Network access identifier" lang="en"><span class="eh-tooltip" title="Network access identifier">NAI</span></abbr>) format.</p><p>Based on the UE identifier and UE security capabilities, the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>/<abbr class="eh-abbreviation" title="Security anchor function" lang="en"><span class="eh-tooltip" title="Security anchor function">SEAF</span></abbr> in <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr> selects the security algorithms for authentication and requests generation of the authentication vectors from <abbr class="eh-abbreviation" title="Authentication credential repository and processing function" lang="en"><span class="eh-tooltip" title="Authentication credential repository and processing function">ARPF</span></abbr> based on the shared key K. The overall security key chain is explained in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-142__2-122__Key_generation_for_NR1.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-142 &lt;\/span&gt;Key generation for NR.&quot;}]">Fig. 2-142</a>.</p><p>The security chain is based on the 5G authentication mechanism known as EAP-AKA, i.e. the extensible authentication protocol (<abbr class="eh-abbreviation" title="Extensible authentication protocol" lang="en"><span class="eh-tooltip" title="Extensible authentication protocol">EAP</span></abbr>) combined with the authentication and key agreement (<abbr class="eh-abbreviation" title="Authentication and key agreement" lang="en"><span class="eh-tooltip" title="Authentication and key agreement">AKA</span></abbr>). The UE and serving network must support two variants of EAP-AKA: EAP-AKA' and 5G-AKA. 5G-AKA enhances <abbr class="eh-abbreviation" title="Evolved packet system" lang="en"><span class="eh-tooltip" title="Evolved packet system">EPS</span></abbr> <abbr class="eh-abbreviation" title="Authentication and key agreement" lang="en"><span class="eh-tooltip" title="Authentication and key agreement">AKA</span></abbr> [<span class="eh-hint" title="3GPP TS 33.501: Security architecture and procedures for 5G system" lang="en"><span class="eh-tooltip" title="3GPP TS 33.501: Security architecture and procedures for 5G system">TS 33.501</span></span>] by providing the home network with proof of successful authentication of the UE from the visited network.</p><p><abbr class="eh-abbreviation" title="Sequence number (ciphering)" lang="en"><span class="eh-tooltip" title="Sequence number (ciphering)">SQN</span></abbr> and RAND are sequential and random input parameters to the security crypto function that generates the values for the expected response (<abbr class="eh-abbreviation" title="Expected response" lang="en"><span class="eh-tooltip" title="Expected response">XRES</span></abbr>), an authentication token (<abbr class="eh-abbreviation" title="Authentication token" lang="en"><span class="eh-tooltip" title="Authentication token">AUTN</span></abbr>) and the ciphering key and integrity key (<abbr class="eh-abbreviation" title="Ciphering key" lang="en"><span class="eh-tooltip" title="Ciphering key">CK</span></abbr>, <abbr class="eh-abbreviation" title="Integrity key" lang="en"><span class="eh-tooltip" title="Integrity key">IK</span></abbr>). See the <span class="eh-hint" title="3GPP TS 33.501: Security architecture and procedures for 5G system" lang="en"><span class="eh-tooltip" title="3GPP TS 33.501: Security architecture and procedures for 5G system">TS 33.501</span></span> annex for details.</p><p>Additional encryption and integrity keys (K<sub>NAS</sub>, K<sub>gNB</sub>) are also generated for ciphering the control and data message during <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> and <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> communication and mobility keys (K<sub>gNB*</sub>) as explained in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1098" class="eh-link eh-link--page">2.3.4 Mobility security, page 405</a>. K<sub>NAS</sub>&nbsp;and K<sub>gNB</sub> depends from previously generated in <abbr class="eh-abbreviation" title="Security anchor function" lang="en"><span class="eh-tooltip" title="Security anchor function">SEAF</span></abbr> and <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>. In fact the security generation includes several steps performed in different modules to increase the security encapsulation.</p>


<a id="page_1113_c1461"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:78%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-142__2-122__Key_generation_for_NR1_5845269866.png" width="800" height="617" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-142 </span>Key generation for NR.</figcaption></figure></div></div></div></div></div></div>


<a id="page_1113_c1462"></a><p class="eh-headline-207 ">
				Authentication of UE and <abbr class="eh-abbreviation" title="5G core network" lang="en"><span class="eh-tooltip" title="5G core network">5GC</span></abbr>
			</p>


<a id="page_1113_c1463"></a><p>After key generation, the authentication phase is triggered by the core network (<a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-141__Security_procedure_during_initial_access.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-141 &lt;\/span&gt;Security procedure during initial access.&quot;}]">Fig. 2-141</a>). During the <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> authentication request, the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> forwards authentication parameters directly to the gNB, which sends these parameters over the established <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> connection using the downlink information transfer message to the UE. This message is typically used to carry any type of <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> information between the UE and <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr>. After receiving the authentication request from the network, the UE also performs generation of the keys and sends the calculated RESponse (RES) back to the network using the authentication response message. Then, the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> compares the RES and local <abbr class="eh-abbreviation" title="Expected response" lang="en"><span class="eh-tooltip" title="Expected response">XRES</span></abbr> and thus authenticates the UE.</p>


<a id="page_1113_c1464"></a><p class="eh-headline-207 ">
				Activation of <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> security
			</p>


<a id="page_1113_c1465"></a><p>The <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> security setup now runs to ensure secure delivery of <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> messages between the network and UE. Until now, the message exchange was not secure.</p><p>In this step, the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> selects a ciphering and integrity algorithm that is supported by the UE. By sending the <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> security mode command, the <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> informs the UE about the selected algorithms. The UE calculates both <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> security keys and performs an integrity check on the security mode command, assuming that the keys are calculated properly once the security check is passed. At this moment, communications between the UE and network is ciphered and integrity protected.</p><p>Security protection is applied per <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session.</p>


<a id="page_1113_c1466"></a><p class="eh-headline-207 ">
				Activation of <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> security
			</p>


<a id="page_1113_c1467"></a><p>After <abbr class="eh-abbreviation" title="Non-access stratum" lang="en"><span class="eh-tooltip" title="Non-access stratum">NAS</span></abbr> signaling encryption and integrity are enabled, the network can start the <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> security procedure. The <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> applies four different security keys: one for integrity protection of <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> signaling (K<sub>RRCint</sub>), one for ciphering of <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> signaling (K<sub>RRCenc</sub>), one for integrity protection of user data (K<sub>UPint</sub>) and one for ciphering of user data (K<sub>UPenc</sub>). All four <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> keys are derived from the K<sub>gNB</sub> key. The K<sub>gNB</sub> is based on the K<sub>AMF</sub> key (as specified in [<span class="eh-hint" title="3GPP TS 33.501: Security architecture and procedures for 5G system" lang="en"><span class="eh-tooltip" title="3GPP TS 33.501: Security architecture and procedures for 5G system">TS 33.501</span></span>]).</p><p>The <abbr class="eh-abbreviation" title="Access and mobility management function" lang="en"><span class="eh-tooltip" title="Access and mobility management function">AMF</span></abbr> will initiate the security context setup to inform the gNB about the algorithms for encryption and security which are selected from the UE capabilities and which will be used for the current connection with the UE. The gNB will then generate the <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> keys as shown in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#" class="eh-link eh-link--image" data-lightgallery="" data-urls="[{&quot;src&quot;:&quot;bookassets\/2-141__Security_procedure_during_initial_access.png&quot;,&quot;subHtml&quot;:&quot;&lt;span class=\&quot;eh-capt--no\&quot;&gt;Fig. 2-141 &lt;\/span&gt;Security procedure during initial access.&quot;}]">Fig. 2-141</a> and initiate the <abbr class="eh-abbreviation" title="Radio resource control" lang="en"><span class="eh-tooltip" title="Radio resource control">RRC</span></abbr> security command to the UE to indicate the start of security transmission. The UE will generate the same keys and respond with an encrypted security mode complete message.</p><p>After <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> security is enabled, the control message at the <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> level will be encrypted and integrity protected. Moreover, the user plane message on the <abbr class="eh-abbreviation" title="Access stratum" lang="en"><span class="eh-tooltip" title="Access stratum">AS</span></abbr> level will be secured per data bearer connection as explained in <a href="https://gloris.rohde-schwarz.com/ebooks/5G#page_1085" class="eh-link eh-link--page">2.2.12 Data security, page 384</a>.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1114" data-prevpid="1113" data-nextpid="1115" data-chapter="2.4.9 PDU session establishment and network slicing ­selection" id="page_1114">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h3>2.4.9 PDU session establishment and network slicing ­selection</h3>
						
<a id="page_1114_c1468"></a><p>In order to support the diversity of the 5G core network, the network allows network elements to be tuned to serve a specific service such as mobile broadband, ultra-reliable low latency communications or massive IoT. A set of network elements which together are targeted at a certain service is known as a network slice.</p><p>A network slice is defined within a <abbr class="eh-abbreviation" title="Public land mobile network" lang="en"><span class="eh-tooltip" title="Public land mobile network">PLMN</span></abbr> and includes the following:</p><ul class="eh-list eh-list--line"><li>Core network control and user plane network functions</li><li>NG radio access network or <abbr class="eh-abbreviation" title="Non-3GPP interworking functions" lang="en"><span class="eh-tooltip" title="Non-3GPP interworking functions">N3IWF</span></abbr> to non-3GPP access network</li><li>The slices are identified by their single network slice selection assistance information (<abbr class="eh-abbreviation" title="Single network slice selection assistance information" lang="en"><span class="eh-tooltip" title="Single network slice selection assistance information">S-NSSAI</span></abbr>). An <abbr class="eh-abbreviation" title="Single network slice selection assistance information" lang="en"><span class="eh-tooltip" title="Single network slice selection assistance information">S-NSSAI</span></abbr> is composed of the following:<ul><li class="Flie-text_Flie-text-Aufz2-Strich">A slice/service type (<abbr class="eh-abbreviation" title="Slice/service type" lang="en"><span class="eh-tooltip" title="Slice/service type">SST</span></abbr>) referring to the expected network slice behavior in terms of features and services</li><li class="Flie-text_Flie-text-Aufz2-Strich">A slice differentiator (<abbr class="eh-abbreviation" title="Slice differentiator" lang="en"><span class="eh-tooltip" title="Slice differentiator">SD</span></abbr>), which is optional information that complements the slice/service type (s) to differentiate among multiple network slices of the same slice/service type</li></ul></li></ul><p>Depending on operational requirements, a network may offer the same services on more than one slice, typically aimed at different customer groups. In such cases, the <abbr class="eh-abbreviation" title="Slice/service type" lang="en"><span class="eh-tooltip" title="Slice/service type">SST</span></abbr> for these slices would be the same while different SDs would help identify the slices.</p><p>Some <abbr class="eh-abbreviation" title="Slice/service type" lang="en"><span class="eh-tooltip" title="Slice/service type">SST</span></abbr> values have been standardized so that global interoperability for slicing can be supported in roaming use cases more efficiently for the most commonly used slice/service types.</p>


<a id="page_1114_c1469"></a><div class="table-scroll"><table id="table060" class="eh-table eh-table--alternate"><colgroup><col><col><col></colgroup><thead><tr><th>Slice/service type</th><th>SST value</th><th>Characteristics.</th></tr></thead><tbody><tr><td>eMBB</td><td>1</td><td>Slice suitable for the handling of 5G enhanced mobile broadband</td></tr><tr><td>URLLC</td><td>2</td><td>Slice suitable for the handling of ultra-reliable low latency communications</td></tr><tr><td>MIoT</td><td>3</td><td>Slice suitable for the handling of massive IoT</td></tr></tbody></table></div><p class="eh-table-caption"><span class="eh-capt--no">Fig. 2-143 </span>3GPP <span class="eh-hint" title="3GPP TS 23.501: System Architecture for the 5G System" lang="en"><span class="eh-tooltip" title="3GPP TS 23.501: System Architecture for the 5G System">TS 23.501</span></span> Table 5.15.2.2-1 (standardized <abbr class="eh-abbreviation" title="Slice/service type" lang="en"><span class="eh-tooltip" title="Slice/service type">SST</span></abbr> values).</p>


<a id="page_1114_c1470"></a><p>Based on the subscription, at most eight S-NSSAIs can be marked as default S-NSSAIs. This information would be maintained by the network for its subscribers. If the UE does not send any valid <abbr class="eh-abbreviation" title="Single network slice selection assistance information" lang="en"><span class="eh-tooltip" title="Single network slice selection assistance information">S-NSSAI</span></abbr> to the network in a registration request message, the network is expected to serve the UE with a default <abbr class="eh-abbreviation" title="Single network slice selection assistance information" lang="en"><span class="eh-tooltip" title="Single network slice selection assistance information">S-NSSAI</span></abbr> or a related network slice instance.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1115" data-prevpid="1114" data-nextpid="1116" data-chapter="2.4.9.1 Slice selection procedure" id="page_1115">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.4.9.1 Slice selection procedure</h4>
						
<a id="page_1115_c1471"></a><p>UEs registering with the 5G core have an option to register with one or more slices. The UE can request slices of interest by including the requested <abbr class="eh-abbreviation" title="Network slice selection assistance information" lang="en"><span class="eh-tooltip" title="Network slice selection assistance information">NSSAI</span></abbr> (which is a set of up to eight S-NSSAIs) in the registration request. Depending on the network support and subscription parameters, the network may accept the registration for all, some or none of the requested S-NSSAIs. This is conveyed back in a registration accept (if registration for at least one <abbr class="eh-abbreviation" title="Single network slice selection assistance information" lang="en"><span class="eh-tooltip" title="Single network slice selection assistance information">S-NSSAI</span></abbr> was successful) or in a registration reject message (if not successful for any <abbr class="eh-abbreviation" title="Single network slice selection assistance information" lang="en"><span class="eh-tooltip" title="Single network slice selection assistance information">S-NSSAI</span></abbr>).</p><p>The UE may request registration without including <abbr class="eh-abbreviation" title="Network slice selection assistance information" lang="en"><span class="eh-tooltip" title="Network slice selection assistance information">NSSAI</span></abbr> in the registration request. In this case, the network assigns it default slice(s) based on the subscription parameters and the assigned slice(s) are conveyed in a registration accept message.</p><p>The UE, however, will normally have a configured <abbr class="eh-abbreviation" title="Network slice selection assistance information" lang="en"><span class="eh-tooltip" title="Network slice selection assistance information">NSSAI</span></abbr> based on the UE type and information associated with the network provider. The UE uses this to include the information about the requested <abbr class="eh-abbreviation" title="Network slice selection assistance information" lang="en"><span class="eh-tooltip" title="Network slice selection assistance information">NSSAI</span></abbr> in the registration request.</p><p>The network may also include information about the allowed <abbr class="eh-abbreviation" title="Network slice selection assistance information" lang="en"><span class="eh-tooltip" title="Network slice selection assistance information">NSSAI</span></abbr>, which can be used by the UE to request a new registration to a slice that it may not have considered earlier. The network may update the configured <abbr class="eh-abbreviation" title="Network slice selection assistance information" lang="en"><span class="eh-tooltip" title="Network slice selection assistance information">NSSAI</span></abbr> by including it in registration accept.</p>


<a id="page_1115_c1472"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:60%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-144__Slice_selection__377a65c3eb.png" width="800" height="479" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-144 </span>Slice selection during the registration procedure.</figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1116" data-prevpid="1115" data-nextpid="1117" data-chapter="2.4.9.2 PDU session establishment" id="page_1116">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.4.9.2 PDU session establishment</h4>
						
<a id="page_1116_c1473"></a><p>Once the UE has registered, it is allowed to create a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session with each slice with which the registration was successful. A <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session is required in order to obtain resources for user data transmission.</p><p>A <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session could be of type IPv4, IPv6, IPv4v6 (collectively referred to as the <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> type), Ethernet or unstructured.</p><p>A <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session with the <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> type would assign the UE an <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> address and enable it to transfer <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> data.</p><p>The Ethernet <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session type can support specific behavior related to carrying Ethernet frames.</p><p>The unstructured <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session type may use different point-to-point tunneling techniques to deliver the data to the destination in the data network.</p><p>Each <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session assigns the UE a default <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flow. Based on the user data transfer requirements, a UE or network can request to add more <abbr class="eh-abbreviation" title="Quality of service" lang="en"><span class="eh-tooltip" title="Quality of service">QoS</span></abbr> flows to a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session by requesting to modify the <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session.</p><p>During mobility, a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session can be continued in several ways. To serve different requirements, three types of session and service continuity (<abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr>) have been devised which can be requested during <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session establishment by setting the session and service continuity mode to one of the three types.</p>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1117" data-prevpid="1116" data-nextpid="1118" data-chapter="2.4.9.3 Session and service continuity" id="page_1117">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.4.9.3 Session and service continuity</h4>
						
<a id="page_1117_c1474"></a><p>Support for session and service continuity enables the 5G core network to satisfy various session continuity requirements based on the UE and application types.</p><ul class="eh-list eh-list--line"><li><abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode<strong> 1</strong>: The network preserves the connectivity service provided to the UE. For the <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> type of <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session, the <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> address is preserved</li><li><strong>SSC mode 2</strong>: The network may release the connectivity service delivered to the UE and release the corresponding <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session. For the <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> type of <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session, the network may release the <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> address that had been allocated to the UE</li><li><strong>SSC mode 3</strong>: Changes to the user plane can be visible to the UE, while the network ensures that the UE suffers no loss of connectivity. A connection through a new <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session anchor point is established before the previous connection is terminated in order to provide better service continuity. For the <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> type of <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session, the <abbr class="eh-abbreviation" title="Internet protocol" lang="en"><span class="eh-tooltip" title="Internet protocol">IP</span></abbr> address is not preserved in this mode when the <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session anchor changes</li></ul><a id="page_1117_c1475"></a><div class="ce-image ce-center ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="ce-outer"><div class="ce-inner"><div class="ce-row"><div class="ce-column"><figure class="image"><div class="book-img-wrap" style="max-width:800px;"><div class="book-img-wrap__inner" style="padding-bottom:61%;"><img class="image-embed-item" src="./5G - Book R&amp;S_files/csm_2-145__Session_and_service_continuity_modes_307a255af0.png" width="800" height="483" alt="" style="display: block;"></div></div><figcaption class="image-caption"><span class="eh-capt--no">Fig. 2-145 </span>Session and service continuity modes.</figcaption></figure></div></div></div></div></div></div>

					</div>
				
		</section><section class="page-section eh-inview" data-pid="1118" data-prevpid="1117" data-nextpid="" data-chapter="2.4.9.4 SSC mode selection" id="page_1118">
			
					
					<div class="frame-default frame-type-text frame-layout-0">
						<h4>2.4.9.4 SSC mode selection</h4>
						
<a id="page_1118_c1476"></a><p>In a UE, when an application requests data transmission, it may indicate the required <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode based on application-specific requirements. However, if it does not include this information, the UE will perform <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode selection based on the <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode selection policy. The operator would provision the UE with an <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode selection policy which includes one or more <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode selection rules which can be used by the UE to determine the type of <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode required. The policy may include a default <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode selection policy rule that matches all applications of the UE.</p><p>When an application triggers data transmission, if the UE already has an established <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session that matches the <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode required for the application, the UE would route the data for the application to this <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session unless other conditions prohibit the use of this <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session for the application. If the UE does not have a <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session that can be used, it requests a new <abbr class="eh-abbreviation" title="Protocol data unit" lang="en"><span class="eh-tooltip" title="Protocol data unit">PDU</span></abbr> session with the required <abbr class="eh-abbreviation" title="Session and service continuity" lang="en"><span class="eh-tooltip" title="Session and service continuity">SSC</span></abbr> mode.</p>

					</div>
				
		</section>

		
	
	</div>


<!--TYPO3SEARCH_end-->
        </div>
        <div class="book__content__loader book__content__loader--down"><span class="loader"><span></span><span></span></span></div>
    </div>
    <div class="book__content__loader book__content__loader--full"><span class="loader"><span></span><span></span></span></div>
</div>
    <div class="book-footer">
    <div class="book-footer__inner row row--full collapse">
        <div class="book-footer__inner_top column medium-4 large-6">
            <ul class="menu"><li class="menu__item"><a href="https://www.rohde-schwarz.com/solutions/test-and-measurement/wireless-communication/overview/wireless-communications-overview_229844.html" target="_blank" class="link--icon icon icon--earth">5G</a></li><li class="menu__item"><a href="https://www.linkedin.com/showcase/rohde-schwarz-wireless/" target="_blank" class="link--icon icon icon--linkedin2">LinkedIn</a></li></ul>
        </div>
        <div class="book-footer__inner_bottom column medium-8 large-6">
            <ul class="menu menu--small-full"><li class="menu__item menu__item--lvl-1 menu__item--first menu__item--pid-11"><a href="https://www.rohde-schwarz.com/general-information/terms-of-website-use_101516.html" target="_blank" class="link">Terms of website use</a></li><li class="menu__item menu__item--lvl-1 menu__item--center menu__item--pid-12"><a href="https://www.rohde-schwarz.com/general-information/statement-of-privacy_101515.html" target="_blank" class="link">Statement of Privacy</a></li><li class="menu__item menu__item--lvl-1 menu__item--last menu__item--pid-13"><a href="https://www.rohde-schwarz.com/general-information/imprint_101514.html" target="_blank" class="link">Imprint</a></li><li class="menu__item menu__item--lvl-1 menu-text"><span class="copyright">© 2020 ROHDE &amp; SCHWARZ</span></li></ul>
        </div>
    </div>
</div>
    <div id="book-overlay" class="book-overlay"></div>
</div>

<script src="./5G - Book R&amp;S_files/jquery.min.js.download" type="text/javascript"></script><script type="text/javascript">if(!window.jQuery){document.write('<script src="/ebooks/fileadmin/assets/node_modules/jquery/dist/jquery.min.js"><\/script>');}</script>
<script src="./5G - Book R&amp;S_files/merged-78681e7ef016e767dad1c103134b461b-794cdfa0980bfbfaeab222a36b9034cc.js.download" type="text/javascript"></script>

<script src="./5G - Book R&amp;S_files/merged-657acbc430fd07fd961bc1dc223db3a4-b03be9599446ea5458d4737ab3459cc9.js.download" type="text/javascript"></script>

<script type="text/javascript">
/*<![CDATA[*/
/*TS_inlineFooter*/
var digitalData = {
    "visitor": {
        "id": "",
        "emailHash": "",
        "role": ""
    },
    "page": {
        "chapter": "Start",
        "applicationType": "RSSERVICES",
        "applicationName": "eBook: 5G New Radio"
    }
};

/*]]>*/
</script>

<script>$(function() {$('#book').initBook({"browserCompatibilityMode":true,"debug":false,"initAdobeLaunch":true})});</script>

<div class="autocomplete-suggestions" style="position: absolute; display: none; width: 800.58px; max-height: 1000px; z-index: 9999;"></div><div class="reveal-overlay"><div id="ajax-reveal" class="reveal" data-reveal="" role="dialog" aria-hidden="true" data-yeti-box="ajax-reveal" data-resize="ajax-reveal" data-i="hcp92y-i" data-events="resize" style="top: 216px;"></div></div></body></html>